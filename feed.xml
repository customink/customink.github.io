<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>CustomInk Technology Blog</title>
    <description></description>
    <link>https://technology.customink.com/</link>
    <atom:link href="/feed.xml" rel="self" type="application/rss+xml" />
    
      <item>
        <title>Integration Testing React Apps with Cypress</title>
        <description>&lt;h3 id=&quot;what-is-cypress&quot;&gt;What is Cypress?&lt;/h3&gt;

&lt;p&gt;Cypress is an end to end testing framework for JavaScript apps. It helps you run and automate tests on the browser for your entire web experience. Cypress uses a headless browser to navigate through your app and perform user actions following a set of test scripts. &lt;/p&gt;

&lt;p&gt;This is a quick post on getting started with Cypress in your React app, explores some of its cool features for integration testing, and how to add Cypress to your Travis CI/CD pipeline. &lt;/p&gt;

&lt;p&gt;Although this post calls out React, Cypress is applicable to any JavaScript framework, and there&amp;#39;s nothing specific about the setup, so it can be applied to any non React app as well. &lt;/p&gt;

&lt;h3 id=&quot;why-cypress-is-awesome-and-you-should-use-it&quot;&gt;Why Cypress is awesome and you should use it:&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Cypress records screenshots and videos of your test runs, so you can trace back what went wrong - incredibly helpful for debugging&lt;/li&gt;
&lt;li&gt;Live reloading - watches changes in test files and reruns your tests (we expect nothing less in the React world...)&lt;/li&gt;
&lt;li&gt;DOESN&amp;#39;T use Selenium - we used to use Selenium for integration testing, but tests would fail due to asynchronous loading. Cypress intuitively waits for HTML DOM nodes to load if it doesn&amp;#39;t find it initially. Cypress has built-in retrying and customizable timeouts. &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;using-cypress-in-your-react-app&quot;&gt;Using Cypress in your React app:&lt;/h3&gt;

&lt;p&gt;Cypress is super easy to integrate in with your React app. Its setup is minimal. So let&amp;#39;s get started:&lt;/p&gt;

&lt;h5 id=&quot;1-add-cypress-as-a-npm-package&quot;&gt;1. Add cypress as a NPM package:&lt;/h5&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;yarn add cypress --dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5 id=&quot;2-start-your-server-and-run&quot;&gt;2. Start your server, and run:&lt;/h5&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;yarn run cypress open
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will open the Cypress test runner&lt;/p&gt;

&lt;h5 id=&quot;3-give-cypress-a-baseurl-in-cypress-json&quot;&gt;3. Give Cypress a baseURL in &lt;code&gt;cypress.json&lt;/code&gt;&lt;/h5&gt;

&lt;p&gt;&lt;code&gt;{ &amp;quot;baseUrl&amp;quot;: &amp;quot;http://localhost:3000&amp;quot; }&lt;/code&gt;&lt;/p&gt;

&lt;h5 id=&quot;4-write-our-first-test&quot;&gt;4. Write our first test!&lt;/h5&gt;

&lt;p&gt;In your test directory, create your test file. We named ours a simple &lt;code&gt;does-it-work-test.js&lt;/code&gt; which just runs through the happy path of the Assisted Design portion of the lab experience. &lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;describe('assisted design', () =&amp;gt; {
  it('should select default shirt and ink colors', () =&amp;gt; {
    cy.visit('/');
    cy.get('.ad-GateTest-button').click();
    cy.get('.ad-selfSelectionScreen-skip').click();
    cy.get('.ad-productColorLg-colors-name').should('contain', 'White');
    cy.get('.ad-productColorLg-cta').click();
    cy.get('.ad-inkColorLg-colors-name').should('contain', 'Black');
  })
})
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Familiar, right? The first command tells Cypress to visit the root URL in Chrome, which loads up Custom Ink&amp;#39;s assisted design experience. &lt;/p&gt;

&lt;p&gt;The next command finds the &lt;code&gt;.ad-GateTest-button&lt;/code&gt;, which appears as the blue &amp;quot;Try it&amp;quot; button, and clicks on it. This renders the next design theme screen - where Cypress finds the DOM node for &amp;quot;Skip this step&amp;quot; button. On the next page for shirt color selection, Cypress asserts the selected product color in span &lt;code&gt;.ad-productColorLg-colors-name&lt;/code&gt; is white. &lt;/p&gt;

&lt;p&gt;You can guess the last two lines - Cypress clicks on the Next button (&lt;code&gt;.ad-productColorLg-cta&lt;/code&gt;), leading to the ink color selection page, where it asserts the selected ink color in span &lt;code&gt;.ad-inkColorLg-colors-name&lt;/code&gt; is Black. That&amp;#39;s the gist of it!&lt;/p&gt;

&lt;p&gt;To run the new test, click on the name of your test file under &amp;quot;Tests&amp;quot; in the Cypress test runner, and it should run your tests in the browser. &lt;/p&gt;

&lt;h5 id=&quot;4-explore-visual-history-navigation&quot;&gt;4. Explore visual history navigation:&lt;/h5&gt;

&lt;p&gt;On the browser, you can click through the left side to see exactly how Cypress executed your test scripts, so you can walk through each step of your test. When something goes awry, you can retrace the steps, and helps you gain clarity on what went wrong in either your test script, or your code. &lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;tb-Img&quot; src=/assets/content/cypress/cypress-nav-284961bfd5b625abb9a41415d598d9a976bde5e4e956be7c972c1ac12941b770.gif /&gt;&lt;/p&gt;

&lt;h5 id=&quot;5-selector-playground&quot;&gt;5. Selector playground:&lt;/h5&gt;

&lt;p&gt;On the top Cypress nav bar, directly left of where Cypress displays the URL bar, you can click to open the Selector Playgroud. This is similar (but way more intuitive) to a browser&amp;#39;s inspect element feature, where you can click around to find the right DOM element you want to add to your test suite or make an assertion on. It makes it easy to copy to clipart and paste into a test. &lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;tb-Img&quot; src=/assets/content/cypress/cypress-selector-f73313665a7bead2fedba190b02d297029a1f863f85ffab51e87a7d4aff5590f.gif /&gt;&lt;/p&gt;

&lt;h3 id=&quot;adding-cypress-to-travis&quot;&gt;Adding Cypress to Travis:&lt;/h3&gt;

&lt;p&gt;We wanted to add Cypress to our Travis workflow, so we can run integration testing whenever new features are added to make sure new code doesn&amp;#39;t break existing features during deployments. &lt;/p&gt;

&lt;h5 id=&quot;1-we-add-a-yarn-script-in-package-json&quot;&gt;1. We add a yarn script in &lt;code&gt;package.json&lt;/code&gt;&lt;/h5&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;&quot;start:ci&quot;: &quot;NODE_ENV=development $(yarn bin)/webpack-dev-server&quot;

&quot;test:integration:ci&quot;: &quot;yarn start:ci &amp;amp; $(yarn bin)/wait-on
  http://localhost:5000 &amp;amp;&amp;amp; $(yarn bin)/cypress run --config 
  baseUrl=http://localhost:5000&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;a href=&quot;https://www.npmjs.com/package/wait-on&quot;&gt;wait-on&lt;/a&gt; package makes sure webpack starts the webserver on localhost:5000 before running Cypress tests against it. &lt;/p&gt;

&lt;h5 id=&quot;2-add-the-cypress-yarn-script-to-travis-yml&quot;&gt;2. Add the Cypress yarn script to &lt;code&gt;travis.yml&lt;/code&gt;&lt;/h5&gt;

&lt;p&gt;In our yaml file, we run the script &lt;code&gt;yarn run $TEST_SUITE&lt;/code&gt;.
Our &lt;code&gt;$TEST_SUITE&lt;/code&gt; includes our lint and unit test, so we just add &lt;code&gt;test:integration:ci&lt;/code&gt; from our &lt;code&gt;package.json&lt;/code&gt; to it. &lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;- TEST_SUITE=test:integration:ci
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, Cypress is part of your Travis run! CI/CD FTW! &lt;/p&gt;

&lt;h3 id=&quot;learn-more&quot;&gt;Learn more:&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.cypress.io/guides/overview/why-cypress.html#In-a-nutshell&quot;&gt;Cypress docs&lt;/a&gt;&lt;/p&gt;

&lt;h5 id=&quot;ke-is-a-software-engineer-at-custom-ink-and-works-on-custom-inks-design-lab-experience&quot;&gt;Ke is a software engineer at Custom Ink, and works on Custom Ink&amp;#39;s design lab experience.&lt;/h5&gt;
</description>
        <pubDate>Mon, 29 Jul 2019 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2019/07/29/integration-testing-react-apps-with-cypress/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2019/07/29/integration-testing-react-apps-with-cypress/</guid>
      </item>
    
      <item>
        <title>Let's Get Visual With Processing</title>
        <description>&lt;p&gt;I recently started mentoring graduates from &lt;a href=&quot;https://lambdaschool.com/&quot;&gt;Lambda School&lt;/a&gt; and while reviewing my mentee’s resume (&lt;a href=&quot;http://erikkimsey.com/&quot;&gt;he’s super creative and looking for work in the Virginia area!!!&lt;/a&gt;) I saw on his resume under skills ‘Processing’ at first I thought it must of been a typo…I was wrong.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Processing isn’t a super popular framework, it isn’t running at the latest start-ups and big companies aren’t using it to save time or money on their cloud infrastructure. It&amp;#39;s a framework for writing code to create visual art, it is often used by students, artists and designers.&lt;/p&gt;

&lt;h2 id=&quot;why-learn-processing&quot;&gt;Why Learn Processing?&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;It’s a cool way to get to know some basics of Java (you can also use coffeescript or javascript)&lt;/li&gt;
&lt;li&gt;The Processing IDE has matured and is pretty enjoyable to use&lt;/li&gt;
&lt;li&gt;You’re new to programming or statically typed languages and you want an easy and fun intro&lt;/li&gt;
&lt;li&gt;You’re an artist that wants to try out a new medium&lt;/li&gt;
&lt;/ul&gt;

&lt;p class=&quot;frak&quot;&gt;
  With that said, its cool to step outside the box and try something new every now and then, so let’s check it out.
  Be mindful, this is just an intro...don't judge my art too harshly.

  &lt;!-- ![alt text](https://media.giphy.com/media/9V7qW099yYNyrgagqF/giphy.gif) --&gt;
  &lt;img class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; src=&quot;https://media.giphy.com/media/9V7qW099yYNyrgagqF/giphy.gif&quot;&gt;
&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://processing.org/download/&quot;&gt;Download Processing Here&lt;/a&gt;&lt;/p&gt;

&lt;div&gt;

  &lt;div&gt;

  Once you have it installed go a head and open it up and let's check out the UI.

  &lt;/div&gt;



&lt;img class=&quot;em-28&quot;alt=&quot;processing-UI&quot; src=/assets/content/processing/2019-07-23_2323-345741e1030f3f4fb0e81f84f6e1bc9d8cf5f02a202cfab4221c2fbf8768d6e6.png class=&quot;tb-Img-processing tb-Img--fancy&quot; /&gt;

&lt;img class=&quot;em-28&quot;alt=&quot;processing-UI&quot; src=/assets/content/processing/2019-07-24_2058-0ae2fa145e4510dff9bbebd01327ed83d2219c74972a75f9395b25c5cdbf4477.png class=&quot;tb-Img-processing tb-Img--fancy&quot; /&gt;

&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;There are two methods that every  Processing sketchbook should have.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;800&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;setup&lt;/code&gt; will have the default settings for the sketchbook, it will run once at the start of each sketchbook to set the canvas size and any other settings you might want at the initial start up. We currently have our canvas set to 800px X 600px&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;draw&lt;/code&gt; is a method that will run 10 times per second, redrawing and executing the code in side the draw method until explicitly stopped. Inside the &lt;code&gt;draw&lt;/code&gt; method we draw a rectangle, the first value is the X start position, the second is the Y start position, the third is the width and the fourth is the height. The origin point, starting point of the axes,  in Processing is the top left corner.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;br /&gt;
&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;After running this sketch book you should get this:&lt;/p&gt;

&lt;p&gt;&lt;img class=&quot;em-28&quot;alt=&quot;processing-UI&quot; src=/assets/content/processing/2019-07-24_2106-df211f48b40921b6e418d0eefa28cffb1b965d0cc73f331faeeabaf2cc0c5ef6.png class=&quot;tb-Img-processing tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Let’s remove the border of the rectangle &lt;code&gt;noStroke&lt;/code&gt; (border of the rectangle),  set the color of the rectangle to red &lt;code&gt;fill&lt;/code&gt;and re-draw it wherever we move the mouse by using &lt;code&gt;mouseX&lt;/code&gt; &amp;amp; &lt;code&gt;mouseY&lt;/code&gt;. The fill method takes arguments for red, green &amp;amp; blue.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;noStroke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mouseX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mouseY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;flex-center&quot;&gt;

&lt;img class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; src=&quot;https://media.giphy.com/media/ZFWLrG5kD0JkDcNf8m/giphy.gif&quot;&gt;

&lt;/div&gt;

&lt;div class=&quot;clear&quot;&gt;

We could also vary the color of red so that it is a random shade. We add a method called `randomRed` that will set the fill to a random number between 0 and 255 for the red value.

&lt;/div&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;noStroke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;randomRed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mouseX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mouseY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;randomRed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;flex-center&quot;&gt;
  &lt;img class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; src=&quot;https://media.giphy.com/media/LQ37QpemioRX61nqy6/giphy.gif&quot;&gt;
&lt;/div&gt;

&lt;p&gt;Let’s add a variety of colors, we will recreate the method that we used for the &lt;code&gt;randomRed&lt;/code&gt; for green and blue and then pick between those 3 methods randomly.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;c1&quot;&gt;//add this line to the top of the file&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;java.util.concurrent.ThreadLocalRandom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;


&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;800&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;noStroke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;randomColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;rect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mouseX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mouseY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;



&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;randomColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random_index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ThreadLocalRandom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;nextInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random_index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;randomBlue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random_index&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;randomRed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;randomGreen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;



&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;randomRed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;randomGreen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;randomBlue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;flex-center&quot;&gt;
  &lt;img class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; src=&quot;https://media.giphy.com/media/XfVh38MH47VNYUuEBW/giphy.gif&quot;&gt;
&lt;/div&gt;

&lt;p&gt;Cool, the blockiness is getting a little old. Let’s change the shape that we are drawing to a line, in addition to changing the shape we will need to the &lt;code&gt;fill&lt;/code&gt; to a &lt;code&gt;stroke&lt;/code&gt; because we are using a &lt;code&gt;line&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;randomColor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mouseX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mouseY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;randomGreen&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;stroke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;randomRed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;stroke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;randomBlue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;stroke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;flex-center&quot;&gt;
  &lt;img class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; src=&quot;https://media.giphy.com/media/Z9VtaLNSOyoFJ19hse/giphy.gif&quot;&gt;
&lt;/div&gt;

&lt;p&gt;Cool, if we add a little bit more code we can change the line stroke to only run when we click on the canvas instead of when we just move the mouse.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mousePressed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mouseX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mouseY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;800&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;flex-center&quot;&gt;
  &lt;img class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; src=&quot;https://media.giphy.com/media/ZAwycwoXLYLhmbLm5r/giphy.gif&quot;&gt;
&lt;/div&gt;

&lt;p&gt;Let’s try one more change, we’ll set the background to black on start and we’ll set the color to white for the lines and we’ll erase the lines before we make them.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-java&quot; data-lang=&quot;java&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;800&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;background&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;stroke&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;background&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mousePressed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mouseX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mouseY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;800&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mousePressed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mouseX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mouseY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;800&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;!-- &lt;div class=&quot;flex-center&quot;&gt; --&gt;

&lt;p&gt;&lt;img class=&quot;center-img&quot; src=&quot;https://media.giphy.com/media/Rj0IVr10p2hMHBYXW1/giphy.gif&quot;&lt;/img&gt;&lt;/p&gt;

&lt;!-- &lt;/div&gt; --&gt;

&lt;h2 id=&quot;closing&quot;&gt;Closing&lt;/h2&gt;

&lt;p&gt;I hoped this sparked some curiosity into Processing and maybe gives some ideas about what you can do with it. There is actually a lot of other cool things that people have done with Processing that are far more impressive, if your interested check out some of the links below.&lt;/p&gt;

&lt;h2 id=&quot;resources-references&quot;&gt;Resources &amp;amp; References&lt;/h2&gt;

&lt;h4 id=&quot;processing-youtube-videos&quot;&gt;Processing Youtube Videos&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=LaarVR1AOvs&quot;&gt;https://www.youtube.com/watch?v=LaarVR1AOvs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=NTXkmpfTklQ&amp;list=PLoDuOn9IEvFfNoeh372H1Xlu7NjD12sCw&quot;&gt;https://www.youtube.com/watch?v=NTXkmpfTklQ&amp;amp;list=PLoDuOn9IEvFfNoeh372H1Xlu7NjD12sCw&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;processing-tutorials&quot;&gt;Processing Tutorials&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://processing.org/tutorials/&quot;&gt;https://processing.org/tutorials/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;processing-exhibitions&quot;&gt;Processing Exhibitions&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://processing.org/exhibition/&quot;&gt;https://processing.org/exhibition/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;processing-api-reference&quot;&gt;Processing API Reference&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt; &lt;a href=&quot;https://processing.org/reference/&quot;&gt;https://processing.org/reference/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;processing-forum&quot;&gt;Processing Forum&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://discourse.processing.org/&quot;&gt;https://discourse.processing.org/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 23 Jul 2019 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2019/07/23/lets-get-visual-with-processing/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2019/07/23/lets-get-visual-with-processing/</guid>
      </item>
    
      <item>
        <title>Inkycop - Standardizing team configuration for RuboCop</title>
        <description>&lt;p&gt;How Custom Ink unifies its code base across projects.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;ruby-coding-guide&quot;&gt;Ruby Coding Guide&lt;/h3&gt;

&lt;p&gt;I&amp;#39;m sure that every developer is familiar with the concept of a coding guide to ensure that everyone working on a project is writing the same code.
This ensures that the code style remains consistent, and the overall quality of the code is guaranteed.
Of course this doesn&amp;#39;t come without its share of problems and difficulties.&lt;/p&gt;

&lt;p&gt;As it stands right now, Custom Ink has just over 800 different repositories on GitHub, the majority of them being Ruby projects.
As we have multiple teams working across these projects, we need to come up with some way to keep a uniform code style.&lt;/p&gt;

&lt;h3 id=&quot;rubocop&quot;&gt;RuboCop&lt;/h3&gt;

&lt;p&gt;Almost all of our Ruby projects use &lt;a href=&quot;https://rubocop.readthedocs.io/en/stable/&quot;&gt;RuboCop&lt;/a&gt; through CodeClimate. 
While this is a good step in the right direction, it does not guarantee that all projects also adhere to the same style guidelines.
After all, nothing prevents an engineer from disabling a rule, changing its configuration or outright ignoring the messages from CodeClimate.&lt;/p&gt;

&lt;h3 id=&quot;codeclimate&quot;&gt;CodeClimate&lt;/h3&gt;

&lt;p&gt;As mentioned above, we use &lt;a href=&quot;https://codeclimate.com/&quot;&gt;CodeClimate&lt;/a&gt;. 
We, however, do not always see eye-to-eye with the warnings and issues raised by CodeClimate.
Mainly because a team might have a different view on things, there&amp;#39;s a reason why we want to deviate or something is technically not possible.
There are also technical limitations imposed by CodeClimate that make it hard to do certain technical solutions.&lt;/p&gt;

&lt;h3 id=&quot;meet-inkycop&quot;&gt;Meet InkyCop!&lt;/h3&gt;

&lt;p&gt;Inky is the mascot of Custom Ink. Our lovely octopus is a part of the company, and seeing we actually depend on RuboCop, I came up with the name InkyCop.
So what is InkyCop exactly?&lt;/p&gt;

&lt;p&gt;InkyCop is a gem developed for internal usage at the moment, where we have created several configuration files:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;a special &lt;code&gt;customink.yml&lt;/code&gt; file that contains the general configuration for all RuboCop cops, regardless of Ruby version&lt;/li&gt;
&lt;li&gt;a special folder structure to support ruby-specific &lt;code&gt;rubocop.yml&lt;/code&gt; versions for that Ruby version&lt;/li&gt;
&lt;li&gt;a special folder structure to support RuboCop-plugins such as &lt;code&gt;rubocop-rails&lt;/code&gt; and &lt;code&gt;rubocop-rspec&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This allows us to create a matrix of configurations that we can tweak to support all Ruby versions that are supported by RuboCop, and used inside the company.
Of course, we need to work on getting everything up to date, but this is a tremendous amount of work that will take time, and it&amp;#39;s easier to support the version through RuboCop.&lt;/p&gt;

&lt;p&gt;Our merchandising system is actually the first system to rely on InkyCop!
Its configuration file looks as follows:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# The load order is first those defined by inkycop, then everything in the todo file,&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# finally whatever is appended later in this file.&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;inherit_from&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;.rubocop_todo.yml&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;inherit_gem&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;inkycop&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;config/rspec/2.3/rubocop.yml&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;config/customink.yml&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That&amp;#39;s it! nothing more needs to be added or configured to use all of RuboCop features, and rely on the shared configuration that&amp;#39;s defined in our Gem.&lt;/p&gt;

&lt;h3 id=&quot;issues-we-ran-into&quot;&gt;Issues we ran into&lt;/h3&gt;

&lt;p&gt;Getting InkyCop successfully integrated was no easy-feat. There&amp;#39;s actually quite a few technical details that need to be kept in mind when creating this gem.
Even though the gem in itself is nothing more than a simple wrapper around RuboCop with custom configuration files:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;CodeClimate does not work for InkyCop. CodeClimate does not allow the usage of external gems during their RuboCop engine. This results in their engine crashing because the &lt;code&gt;inkycop&lt;/code&gt; gem is not checked out.&lt;/li&gt;
&lt;li&gt;To work around this problem, we actually switched to CircleCI (for other reasons) and made the RuboCop check a part of the CI.&lt;/li&gt;
&lt;li&gt;A build is now considered a failure if the RuboCop check does not pass.&lt;/li&gt;
&lt;li&gt;RuboCop must be executed using &lt;code&gt;bundle exec&lt;/code&gt; or with a binstub.&lt;/li&gt;
&lt;li&gt;The naming of the configuration files was important! Note that we called our files &lt;code&gt;rubocop.yml&lt;/code&gt; and not &lt;code&gt;.rubocop.yml&lt;/code&gt; inside the gem.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;rubocop-file-names&quot;&gt;RuboCop file names&lt;/h4&gt;

&lt;p&gt;There is a subtle difference on how RuboCop interprets paths, depending on how your configuration files are named.
This took some debugging as well as diving deep into the documentation of RuboCop to understand and figure out.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;.rubocop.yml&lt;/code&gt; : All paths are treated as relative of the file&amp;#39;s location&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rubocop.yml&lt;/code&gt; : All paths are treated as relative of the location RuboCop is running from&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;While this seemed to work properly at first, it becomes more tricky when files start inheriting from one another and/or files are combined as we do.
That&amp;#39;s why we made this an integral part of our documentation to make sure this information is well known.&lt;/p&gt;

&lt;h3 id=&quot;upcoming-challenges&quot;&gt;Upcoming challenges&lt;/h3&gt;

&lt;p&gt;The next step is get all projects to migrate slowly to using InkyCop, so we can start tweaking our configuration.
There&amp;#39;s going to be a lot of discussion on whether we will follow the standard set by RuboCop, or tweak a Cop to our liking.
In the end, all teams will have to agree to it, and roll out with InkyCop to unify the coding guidelines across the entire code-base.&lt;/p&gt;
</description>
        <pubDate>Mon, 15 Jul 2019 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2019/07/15/inkycop/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2019/07/15/inkycop/</guid>
      </item>
    
      <item>
        <title>Sidekiq Rundown Part 1: Getting Started with Simple Workflows</title>
        <description>&lt;h5 id=&quot;what-is-sidekiq&quot;&gt;What is Sidekiq?&lt;/h5&gt;

&lt;p&gt;At Custom Ink we leverage &lt;a href=&quot;https://sidekiq.org/&quot;&gt;Sidekiq&lt;/a&gt; as a job scheduler to execute batch processing workflows. This post is part of a series, &amp;quot;Sidekiq Rundown,&amp;quot; where we will explore various features of Sidekiq. Sidekiq enables us to efficiently parallelize jobs/tasks reliably and sidekiq queues allow the workloads to stack up. The main point of utilizing a job scheduler is to manage the background execution of jobs that orchestrate business activity automation.  Using an open-source technology solution like Sidekiq allows us to skip all the headaches involved in building a full-featured in house solution. We will dive right into the steps required to execute work within sidekiq.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h5 id=&quot;sidekiq-architecture&quot;&gt;Sidekiq Architecture&lt;/h5&gt;

&lt;p&gt;&lt;img src=/assets/content/sidekiq/sidekiq-architecture-55a7b0491a724dd5c4b39570ea60966d438f97bebc2e9562ab5881db319fdc0f.png alt=&quot;sidekiq-architecture&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Sidekiq runs on 3 components&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The Rails Application&lt;/li&gt;
&lt;li&gt;Sidekiq worker process(es)&lt;/li&gt;
&lt;li&gt;Redis&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Each of these components can be scaled up to meet the needs of your workflows.&lt;/p&gt;

&lt;h5 id=&quot;sidekiq-configuration&quot;&gt;Sidekiq Configuration&lt;/h5&gt;

&lt;p&gt;The rails application requires the sidekiq gem to be installed and configured.&lt;/p&gt;

&lt;p&gt;In Gemfile&lt;/p&gt;

&lt;p&gt;&lt;code&gt;gem &amp;#39;sidekiq&amp;#39;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;In Terminal&lt;/p&gt;

&lt;p&gt;&lt;code&gt;bundle install&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The sidekiq code that lives in the application will need to be configured to talk to Redis.&lt;/p&gt;

&lt;p&gt;Inside of &lt;code&gt;config/initializers/sidekiq.rb&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Server config&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Sidekiq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;configure_server&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;redis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;namespace: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'blog-post-app'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Client config&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Sidekiq&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;configure_client&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;redis&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;namespace: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'blog-post-app'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h5 id=&quot;sidekiq-workers&quot;&gt;Sidekiq Workers&lt;/h5&gt;

&lt;p&gt;Code that is executed lives within the rails application in the form of workers. Each worker is required to have a &amp;#39;perform&amp;#39; method as the entry point. These workers ideally will behave in an idempotent manner, meaning no matter how many times they run, the result will be the same.&lt;/p&gt;

&lt;p&gt;Create a worker in &lt;code&gt;app/workers&lt;/code&gt; with
&lt;code&gt;rails g sidekiq:worker BlogPost&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BlogPostWorker&lt;/span&gt;
  &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Sidekiq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Worker&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;article&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# writes a blog post&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now that we have created a worker, we can create jobs with that worker. Open up a rails console within your application and create some jobs.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;BlogPostWorker.perform_async(&amp;#39;Sidekiq&amp;#39;, &amp;#39;Sidekiq Rundown&amp;#39;, &amp;#39;At Custom Ink we leverage...&amp;#39;)&lt;/code&gt;&lt;/p&gt;

&lt;h5 id=&quot;sidekiq-worker-process&quot;&gt;Sidekiq Worker Process&lt;/h5&gt;

&lt;p&gt;This will enqueue a job into the default queue to be processed by sidekiq. Now it is time to start sidekiq&lt;/p&gt;

&lt;p&gt;&lt;code&gt;bundle exec sidekiq&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Sidekiq will crawl the application for any &lt;code&gt;Sidekiq::Worker&lt;/code&gt; classes and initialize the source code of each method within the class inside of the sidekiq process. This is key because it allows the code to be executed asynchronously over several worker processes in parallel. After the sidekiq worker process starts up it will start polling its respective queues looking for jobs.&lt;/p&gt;

&lt;p&gt;Pro Tip: Whenever you change code inside your workers, it is always safest to restart your sidekiq worker process so that Sidekiq has the latest version of your worker code.&lt;/p&gt;

&lt;h5 id=&quot;sidekiq-queues&quot;&gt;Sidekiq Queues&lt;/h5&gt;

&lt;p&gt;If we wanted to create a high priority queue, we can achieve this by simply configuring workers to queue jobs into a new queue.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BlogPostWorker&lt;/span&gt;
  &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Sidekiq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Worker&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;sidekiq_options&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;queue: :critical&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;article&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# writes a blog post&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can tell the sidekiq worker process about this queue when we start the process.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;bundle exec sidekiq -q critical,5 -q default&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Above we have told the sidekiq process that we want this worker process to poll the critical queue 5 times more often than the default queue&lt;/p&gt;

&lt;p&gt;In this post, we have gone over how to configure your rails application and write some worker code that executes when a sidekiq worker process can pull a new job from a queue. Congratulations, you now know how to do simple background processing with sidekiq. Background jobs are very useful when you need compute cycles done behind the scenes without affecting the user experience.&lt;/p&gt;

&lt;p&gt;Next post we will take a look at how to optimize your sidekiq architecture for maximum parallelism. We will introduce batching and handling the completion of your jobs.&lt;/p&gt;

&lt;p&gt;Thank you for visiting the Custom Ink Tech Blog and taking a moment to read my first post. Please feel free to comment and ask questions below.&lt;/p&gt;

&lt;h5 id=&quot;sidekiq-resources&quot;&gt;Sidekiq Resources&lt;/h5&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://sidekiq.org/&quot;&gt;Sidekiq Website&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mperham/sidekiq&quot;&gt;Sidekiq Repo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mperham/sidekiq/wiki&quot;&gt;Sidekiq Wiki&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;about-the-author&quot;&gt;About the author&lt;/h5&gt;

&lt;p&gt;Logan Beougher is a Software Engineer at Custom Ink and has been an Inker since May 2019.&lt;/p&gt;

&lt;p&gt;Interested in writing really fast code? We’re hiring! Visit us at &lt;a href=&quot;https://www.customink.com/jobs&quot;&gt;customink.com/jobs&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 08 Jul 2019 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2019/07/08/sidekiq-rundown-part-1/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2019/07/08/sidekiq-rundown-part-1/</guid>
      </item>
    
      <item>
        <title>Chaos at Custom Ink</title>
        <description>&lt;p&gt;How Custom Ink implements Chaos Engineering and how you can do it too!&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;who-we-are&quot;&gt;Who we are&lt;/h3&gt;

&lt;p&gt;The WebOps team at Custom Ink works to maintain the highest availability possible for our internal and external customers. Being always available is a goal that many companies strive for, and at Custom Ink, we take steps to make sure that we are as available as we can be to stay ahead in this competitive marketplace. &lt;/p&gt;

&lt;p&gt;One of the ways we ensure we are highly available is by practicing our version of infrastructure Chaos at Custom Ink. Many of you may be familiar with Netflix&amp;#39;s &lt;a href=&quot;https://github.com/Netflix/chaosmonkey&quot;&gt;Chaos Monkey&lt;/a&gt;. It&amp;#39;s impressive and is probably the leader within our industry for benchmarking these sorts of tests.
But, we aren&amp;#39;t Netflix, and there&amp;#39;s a good chance you aren&amp;#39;t either.&lt;/p&gt;

&lt;p&gt;(If you are, hi...I love the &amp;quot;San Junipero&amp;quot; episode from &lt;em&gt;Black Mirror&lt;/em&gt;.)&lt;/p&gt;

&lt;h3 id=&quot;so-how-do-we-do-it-and-how-can-you-do-it&quot;&gt;So, how do we do it and how can you do it?&lt;/h3&gt;

&lt;p&gt;We dedicate a few days of scheduled chaos every year to help identify problems that could arise if an actual issue with our AWS infrastructure happens.&lt;/p&gt;

&lt;p&gt;One day is for strictly &amp;quot;frontend&amp;quot; applications, the other is for &amp;quot;backend&amp;quot; applications, and we notify everyone at the company that testing is happening so there is a minimum of panic when alarms inevitably go off.
We shut off production servers and portions of SaaS services, such as Elasticache cluster nodes, one availability zone at a time, for at least an hour. During our testing, we look for single points of failure, poorly balanced applications, and other miscellaneous items that could cause real production issues down the line.&lt;/p&gt;

&lt;p&gt;Our development teams are aware of this process and hold off on deployments for a few hours to ensure we can have thorough testing.
Make sure you document EVERYTHING...yes, everything! Keep the notes in a shared folder where your operations team members can collaborate and add things for the next year of Chaos.
Hold a post-mortem once you’re done and create action items to empower and encourage ownership of your applications with each member of the team.&lt;/p&gt;

&lt;p&gt;Testing chaos this way isn&amp;#39;t new and shiny, but it is totally doable. If your company has 5 or 500 servers, you can do this!
Don&amp;#39;t assume because you aren&amp;#39;t at Netflix&amp;#39;s scale that chaos testing is out of your reach. You can empower your engineers to make sure your site is always on. After all, that&amp;#39;s the goal, right?&lt;/p&gt;

&lt;p&gt;If you&amp;#39;re familiar with more automated testing in a production capacity, please leave a comment, I&amp;#39;d love to hear from you!&lt;/p&gt;

&lt;h3 id=&quot;chaotic-possibilities-at-custom-ink&quot;&gt;Chaotic possibilities at Custom Ink&lt;/h3&gt;

&lt;p&gt;This is currently a manual process, but we still do it and every year we find issues that we can quickly remediate or acknowledge aren&amp;#39;t fixable (cost considerations, licensing issues, etc.) and accept the risk if the host goes down.
This helps down the line so you know what applications are more fragile, how you can make existing applications better, and explore more technologies that will help minimize fallout, and improve your redundancy. For example, you may leverage auto-scaling groups, replace applications with lambda functions, and pursue other technologies that your cloud provider makes available to improve resiliency.&lt;/p&gt;

&lt;p&gt;The next step at Custom Ink would be to automate our chaos. We are currently looking into Chaos Monkey, and plan on making greater use of autoscaling with our applications.&lt;/p&gt;

&lt;h5 id=&quot;about-the-author&quot;&gt;About the author&lt;/h5&gt;

&lt;p&gt;Katherine Cisneros is an Operations Engineer at Custom Ink and has been an Inker since March 2015.&lt;/p&gt;

&lt;p&gt;Interested in breaking things? We’re hiring! Visit us at &lt;a href=&quot;https://www.customink.com/jobs&quot;&gt;customink.com/jobs&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 28 Jun 2019 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2019/06/28/chaos-at-custom-ink/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2019/06/28/chaos-at-custom-ink/</guid>
      </item>
    
      <item>
        <title>Secure Configs with AWS SSM Parameter Store and Rails on Lambda</title>
        <description>&lt;p&gt;&lt;strong&gt;Part of an series while developing, &lt;a href=&quot;https://github.com/customink/lamby&quot;&gt;Lamby - Simple Rails &amp;amp; AWS Lambda Integration using Rack 🚂🐑&lt;/a&gt;.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Most Rails applications require over a dozen environment variables to configure themselves or use popular gems. Most notable is the &lt;code&gt;DATABASE_URL&lt;/code&gt; or others like &lt;code&gt;SECRET_KEY_BASE&lt;/code&gt; which is used by Rails itself to sign encrypted cookies for sessions.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;There are numerous ways to configure environment variables ranging from quick and dirty commits to GitHub all the way to a strict separation of config from code using countless methods to achieve a proper &lt;a href=&quot;https://12factor.net/config&quot;&gt;Twelve-Factor&lt;/a&gt; app. This document speaks to one we think fits nicely with AWS and Lambda. But first, some alternatives:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/cedarcode/rails-5-2-credentials-9b3324851336&quot;&gt;Rails 5.2 Credentials&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Share yours in the comments!&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;aws-sms-parameter-store-dotenv&quot;&gt;AWS SMS Parameter Store &amp;amp; Dotenv&lt;/h2&gt;

&lt;p&gt;AWS Systems Manager &lt;a href=&quot;https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-paramstore.html&quot;&gt;Parameter Store&lt;/a&gt; provides secure, hierarchical storage for configuration data management and secrets management and is offered at &lt;strong&gt;no additional charge&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;To say Parameter Store is versatile is an understatement. It can be used in CloudFormation templates to the CLI and has unlimited ways to configure IAM for data access. Both Lamby and this guide below follow AWS guides-lines for &lt;a href=&quot;https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-su-organize.html&quot;&gt;Organizing Parameters into Hierarchies&lt;/a&gt; and a technique called &lt;a href=&quot;https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-labels.html&quot;&gt;Labeling Parameters&lt;/a&gt;. If Parameter store is new to you, please take some time to read up on it afterward.&lt;/p&gt;

&lt;h3 id=&quot;overview&quot;&gt;Overview&lt;/h3&gt;

&lt;p&gt;Lamby supports a few ways to integrate with Parameter Store, but we suggest using our &lt;code&gt;Lamby::SsmParameterStore&lt;/code&gt; object with &lt;a href=&quot;https://github.com/bkeepers/dotenv&quot;&gt;Dotenv&lt;/a&gt;. The end result below will write out a &lt;code&gt;.env.RAILS_ENV&lt;/code&gt; file within your &lt;a href=&quot;https://github.com/customink/lamby/issues/17&quot;&gt;deploy script&lt;/a&gt; and ensure it is included in your Lambda package.&lt;/p&gt;

&lt;h3 id=&quot;quick-start&quot;&gt;Quick Start&lt;/h3&gt;

&lt;p&gt;In your &lt;code&gt;Gemfile&lt;/code&gt; add both Dotenv and the AWS SDK for SMS.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'dotenv-rails'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'aws-sdk-ssm'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In your Rails &lt;code&gt;config/application.rb&lt;/code&gt; file, add Dotenv&amp;#39;s &lt;code&gt;rails-now&lt;/code&gt; require right after rails is required. This ensures Dotenv works when using `rails server.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require_relative&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'boot'&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;rails&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'dotenv/rails-now'&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Change your Lamby &lt;code&gt;app.rb&lt;/code&gt; to require and load Dotenv after the boot require and before requiring Lamby. This will load your environment variables when your function is deployed or using SAM&amp;#39;s development server locally.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require_relative&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'config/boot'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'dotenv'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dotenv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.env.&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'RAILS_ENV'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'lamby'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require_relative&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'config/application'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require_relative&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'config/environment'&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add this to your &lt;a href=&quot;https://github.com/customink/lamby/issues/17&quot;&gt;&lt;code&gt;bin/deploy&lt;/code&gt;&lt;/a&gt; script right before the &lt;code&gt;sam package&lt;/code&gt; lines. Replace &lt;code&gt;myapp&lt;/code&gt; with the name of your app or completely customize the path to match your own &lt;a href=&quot;https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-su-organize.html&quot;&gt;hierarchal structure&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;./bin/rake lamby:ssm:dotenv &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;LAMBY_SSM_PARAMS_PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/config/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RAILS_ENV&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/myapp/env&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;mv&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.env.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RAILS_ENV&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; ./.aws-sam/build/RailsFunction
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;lamby-support&quot;&gt;Lamby Support&lt;/h3&gt;

&lt;p&gt;The above &lt;code&gt;lamby:ssm:dotenv&lt;/code&gt; rake task is made possible with our &lt;a href=&quot;https://github.com/customink/lamby/blob/master/lib/lamby/ssm_parameter_store.rb&quot;&gt;Lamby:: SsmParameterStore&lt;/a&gt; class. But to understand how the above code works, we first need to create a few SSM Parameters. We can use the AWS CLI for that. Here is what we did for the Lamby Demo app&amp;#39;s &lt;code&gt;SECRET_KEY_BASE&lt;/code&gt; env var.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;aws ssm put-parameter &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/config/production/myapp/env/SECRET_KEY_BASE&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--type&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;SecureString&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--value&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;rails secret&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;name&lt;/code&gt; option is our path and is an example hierarchy, you can come up with your own. But here is how we have structured ours.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The top level &lt;code&gt;/config&lt;/code&gt; path establishes that all our application&amp;#39;s config will be under this path.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;/production&lt;/code&gt; component can change for each &lt;code&gt;RAILS_ENV&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;The third component is for your application name. Change this for each of your apps.&lt;/li&gt;
&lt;li&gt;Lastly, the &lt;code&gt;/env&lt;/code&gt; path sets down that everything in this path is for environment variables.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Again, feel free to come up with your own path hierarchies. Whatever is found in the path you pass via &lt;code&gt;LAMBY_SSM_PARAMS_PATH&lt;/code&gt; will be converted to entries in your Dotenv file.&lt;/p&gt;

&lt;h4 id=&quot;labeling&quot;&gt;Labeling&lt;/h4&gt;

&lt;p&gt;Parameters have a history. The last version created is found by default. However, if you want to take advantage of &lt;a href=&quot;https://docs.aws.amazon.com/systems-manager/latest/userguide/sysman-paramstore-labels.html&quot;&gt;labels&lt;/a&gt; and for example use a &lt;code&gt;live&lt;/code&gt; label migrate from one env to another in a controlled way, use the &lt;code&gt;LAMBY_SSM_PARAMS_LABEL&lt;/code&gt; variable.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;./bin/rake lamby:ssm:dotenv &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;LAMBY_SSM_PARAMS_PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/config/&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RAILS_ENV&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/myapp/env&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nv&quot;&gt;LAMBY_SSM_PARAMS_LABEL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;live&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;advanced-usage&quot;&gt;Advanced Usage&lt;/h4&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/customink/lamby/blob/master/lib/lamby/ssm_parameter_store.rb&quot;&gt;Lamby:: SsmParameterStore&lt;/a&gt; can be used at runtime too when your Lambda starts, assuming you have written out the needed &lt;a href=&quot;https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md#awsserverlessfunction&quot;&gt;Policies&lt;/a&gt; in your &lt;code&gt;template.yaml&lt;/code&gt; file. This example below will write directly to the &lt;code&gt;ENV&lt;/code&gt; after loading all your parameters.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/config/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;RAILS_ENV&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/myapp/env&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;envs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Lamby&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SsmParameterStore&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;label: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'live'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;envs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_env&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;more-resources&quot;&gt;More Resources&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/customink/lamby&quot;&gt;Lamby - Simple Rails &amp;amp; AWS Lambda Integration using Rack 🚂🐑&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/blog/2019/03/13/rails-on-aws-lambda-with-sam/&quot;&gt;Rails on AWS Lambda with SAM&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/blog/2019/03/12/aws-lambda-with-ruby/&quot;&gt;[Video] AWS Lambda with Ruby on Rails and SAM&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 16 Apr 2019 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2019/04/16/secure-configs-with-aws-ssm-parameter-store-and-rails-on-lambda/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2019/04/16/secure-configs-with-aws-ssm-parameter-store-and-rails-on-lambda/</guid>
      </item>
    
      <item>
        <title>Day Zero Deployments</title>
        <description>&lt;p&gt;Custom Ink leverages open source tools and practices that unlock &lt;em&gt;Day Zero Deployments&lt;/em&gt; for new engineers and frictionless development for our entire engineering organization! Here&amp;#39;s how!&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;the-tools&quot;&gt;🛠 The Tools&lt;/h2&gt;

&lt;h4 id=&quot;strap&quot;&gt;👢 Strap&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/MikeMcQuaid/strap&quot;&gt;Strap&lt;/a&gt; is a useful tool maintained by &lt;a href=&quot;https://github.com/MikeMcQuaid&quot;&gt;Mike McQuaid&lt;/a&gt;, project lead for &lt;a href=&quot;https://github.com/Homebrew&quot;&gt;homebrew&lt;/a&gt;, that sets out to &amp;quot;bootstrap a minimal macOS development system&amp;quot;.&lt;/p&gt;

&lt;p&gt;We leverage Strap at Custom Ink to ensure that our development machines have a minimal set of requirements for working on any of our 100+ production applications. Most of these are Ruby on Rails web services, with some notable exceptions in Node (with React), Python and Java.&lt;/p&gt;

&lt;p&gt;Thanks to Strap, we can make some base assumptions about the environment, which sets us up for some major unlocks during application setup.&lt;/p&gt;

&lt;h4 id=&quot;scripts-to-rule-them-all&quot;&gt;💪 Scripts to Rule Them All&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/github/scripts-to-rule-them-all&quot;&gt;Scripts to Rule them all&lt;/a&gt; is &amp;quot;a set of boilerplate scripts describing the normalized script pattern that GitHub uses in its projects&amp;quot;.&lt;/p&gt;

&lt;p&gt;At Custom Ink we took these recommendations to heart and implemented them across nearly every project in our stack! We also added in our own &lt;code&gt;bin/workers&lt;/code&gt; for supporting background processes, but that&amp;#39;s a topic for another blog post.&lt;/p&gt;

&lt;h4 id=&quot;continuous-integration&quot;&gt;👷‍ Continuous Integration&lt;/h4&gt;

&lt;p&gt;All of our projects are wired up to be continually tested for every pull request. This keeps our feedback cycle tight, and our confidence high that the changes we&amp;#39;re making are safe.&lt;/p&gt;

&lt;p&gt;We try to reuse Scripts to Rule Them All in our CI environments as much as possible, with most projects leveraging &lt;code&gt;bin/setup&lt;/code&gt; and &lt;code&gt;bin/test&lt;/code&gt; as part of their continuous integration workflow. This unlocks a virtuous cycle where our local setup process also becomes continually tested!&lt;/p&gt;

&lt;h2 id=&quot;tying-it-all-together&quot;&gt;🧶 Tying it all together&lt;/h2&gt;

&lt;p&gt;So we have established base guarantees about the development environment, and applied the convention of Scripts to Rule Them All across all our applications. Because of this, we enjoy the benefit of a streamlined development setup process &lt;em&gt;no matter which application, language, or framework we choose to write it in&lt;/em&gt;!&lt;/p&gt;

&lt;h4 id=&quot;in-practice&quot;&gt;👩‍💻 In practice&lt;/h4&gt;

&lt;p&gt;Our aptly named Rails Frontend is our primary e-commerce application which handles everything you see when you go to &lt;a href=&quot;https://www.customink.com&quot;&gt;CustomInk.com&lt;/a&gt;. Here are the steps for a brand new engineer to get it up and running on their laptop:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Clone the &lt;code&gt;rails_frontend&lt;/code&gt; repo.&lt;/li&gt;
&lt;li&gt;Run &lt;code&gt;bin/bootstrap&lt;/code&gt; – all local dependencies will be brought in via the &lt;code&gt;Brewfile&lt;/code&gt; from the repo, thanks to &lt;a href=&quot;https://github.com/Homebrew/homebrew-bundle#homebrew-bundle&quot;&gt;homebrew-bundle&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Run &lt;code&gt;bin/setup&lt;/code&gt; – the application will set up any library dependencies, as well as the required databases.&lt;/li&gt;
&lt;li&gt;Run &lt;code&gt;bin/test&lt;/code&gt; – the application will have all tests passing right out of the box!&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;That&amp;#39;s it. And the same process will work across every one of our hundreds of applications&lt;/strong&gt; that are currently in production.&lt;/p&gt;

&lt;h2 id=&quot;wrapping-it-all-up&quot;&gt;🎁 Wrapping it all up&lt;/h2&gt;

&lt;p&gt;By leveraging some really great open source tooling (Thanks GitHub and Mike McQuaid!), we have a reliable and repeatable way for all of our engineers to get applications up running on their local environments with little to no friction.&lt;/p&gt;

&lt;p&gt;This has been a huge win for our productivity and onboarding, and allows us to have a consistent developer experience across our entire organization. It often results in new engineers deploying a change into production on their first day!&lt;/p&gt;
</description>
        <pubDate>Fri, 12 Apr 2019 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2019/04/12/day-zero-deployments/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2019/04/12/day-zero-deployments/</guid>
      </item>
    
      <item>
        <title>Rails on AWS Lambda with SAM</title>
        <description>&lt;style&gt;
  .highlight {
    font-size: 14px;
    font-family: 'Source Code Pro', Menlo, Consolas, Monaco, monospace;
  }
  .highlight pre {
    border: 1px solid rgb(238, 238, 238);
    background-color: white;
  }
  .highlight span.s  { color: rgb(170, 17, 17); }
  .highlight span.nt { color: rgb(34, 17, 153); }
  .highlight span.c  { color: rgb(204, 204, 204); }
  .highlight span.na { color: rgb(85, 85, 85); }
&lt;/style&gt;

&lt;div class=&quot;tb-Masthead&quot;&gt;
  &lt;img src=&quot;/assets/content/lamby/masthead-2958bbf108ff6a30c332bce34da1f71f9c978794124fae83cb048ae3cfcee727.jpg&quot; class=&quot;tb-Img tb-Img--fancy&quot; alt=&quot;Lambda Loves Rails.&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;Move over basic &amp;quot;Hello World&amp;quot; functions - get ready to super charge your next Lambda project with the most productive web framework on the most convenient cloud infrastructure! Following up from my Arlington Ruby presentation &lt;a href=&quot;/blog/2019/03/12/aws-lambda-with-ruby/&quot;&gt;AWS Lambda &amp;amp; Ruby/Rails with SAM&lt;/a&gt; last week - I am very excited to share today how you can get started with Rails under &lt;a href=&quot;https://aws.amazon.com/lambda/&quot;&gt;AWS Lambda&lt;/a&gt;.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;introducing-lamby&quot;&gt;Introducing Lamby&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/customink/lamby&quot;&gt;&lt;img src=&quot;/assets/content/lamby/lamby-723dfdc344c076844d5ad81fe9baab2f1240650bee200865edd3dbe6d77c336a.jpg&quot; class=&quot;tb-Img tb-Img--third tb-Img--half--sm&quot; alt=&quot;The Lamby Gem&quot; /&gt;&lt;/a&gt;
&lt;strong&gt;Simple Rails &amp;amp; AWS Lambda Integration using Rack&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;The goal of this project is to provide minimal code along with comprehensive documentation to get your Rails application running under AWS Lambda.&lt;/p&gt;

&lt;p&gt;This gem&amp;#39;s code will focus mainly on converting API Gateway &lt;code&gt;event&lt;/code&gt; and &lt;code&gt;context&lt;/code&gt; objects into a Rack &lt;code&gt;env&lt;/code&gt; to send to your Rails application. Most everything else is documentation.&lt;/p&gt;

&lt;p&gt;&lt;a class=&quot;sb-Btn&quot; href=&quot;https://github.com/customink/lamby&quot;&gt;Get Started with Rails &amp;amp; Lambda Now!&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;live-demo&quot;&gt;Live Demo&lt;/h3&gt;

&lt;p&gt;Want to dig into a demo Rails application running on AWS Lambda? Visit &lt;a href=&quot;https://lamby.custominktech.com&quot;&gt;https://lamby.custominktech.com&lt;/a&gt; or checkout this GitHub repository &lt;a href=&quot;https://github.com/customink/lamby_demo&quot;&gt;customink/lamby_demo&lt;/a&gt; which is deployed to this custom domain name behind a CloudFront distribution.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:)&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Lamby&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;vg&quot;&gt;$app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;lots-of-todos&quot;&gt;Lots of Todos&lt;/h3&gt;

&lt;p&gt;This is just the start and the project list several TODOs that will happen over the coming weeks. So make sure to ⭐️ and 👁 watch the repository for updates to learn how to accomplish anything from Rails asset compilation using an S3 bucket, to tagged logging in CloudWatch, and more. Please submit &lt;a href=&quot;https://github.com/customink/lamby/issues&quot;&gt;an issue&lt;/a&gt; if you have any questions or want to see documentation around a certain topic of using AWS with Rails on Lambda. Thanks!&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/customink/lamby&quot;&gt;Lamby - Simple Rails &amp;amp; AWS Lambda Integration using Rack 🚂🐑&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/blog/2019/03/27/secure-configs-with-aws-ssm-parameter-store-and-rails-on-lambda/&quot;&gt;Secure Configs with AWS SSM Parameter Store and Rails on Lambda&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/blog/2019/03/12/aws-lambda-with-ruby/&quot;&gt;[Video] AWS Lambda with Ruby on Rails and SAM&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Wed, 13 Mar 2019 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2019/03/13/rails-on-aws-lambda-with-sam/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2019/03/13/rails-on-aws-lambda-with-sam/</guid>
      </item>
    
      <item>
        <title>[Video] AWS Lambda with Ruby on Rails and SAM</title>
        <description>&lt;p&gt;At Custom Ink, we are always working on new technologies and love to share with the community. &lt;a href=&quot;https://twitter.com/metaskills&quot;&gt;Ken Collins&lt;/a&gt; recently presented on using Ruby on Rails with Lambda at &lt;a href=&quot;http://arlingtonruby.org/&quot;&gt;Arlington Ruby&lt;/a&gt;. We recorded the presentation to share.&lt;/p&gt;

&lt;h2 id=&quot;description&quot;&gt;Description&lt;/h2&gt;

&lt;p&gt;A progressive dive into how to use Ruby with AWS Lambda via their &lt;a href=&quot;https://aws.amazon.com/serverless/sam/&quot;&gt;serverless application framework SAM&lt;/a&gt; to locally develop, test and ship your function to the cloud. Along the way we will cover topics on how to build native extensions, extend your function with Lambda Layers, and how to use databases like DynamoDB.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;a href=&quot;https://twitter.com/metaskills&quot;&gt;Ken &amp;quot;metaskills&amp;quot; Collins&lt;/a&gt; is a staff engineer at Custom Ink and maintainer of wonderful libraries like &lt;a href=&quot;https://github.com/rails-sqlserver/activerecord-sqlserver-adapter&quot;&gt;ActiveRecord SQL Server Adapter&lt;/a&gt; and &lt;a href=&quot;https://github.com/metaskills/minitest-spec-rails&quot;&gt;MiniTest::Spec&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;video&quot;&gt;Video&lt;/h2&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/0Dm1Isas0h4&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;slide-deck&quot;&gt;Slide Deck&lt;/h2&gt;

&lt;script async class=&quot;speakerdeck-embed&quot; data-id=&quot;660cd3be95a247fbba30792027bf92f4&quot; data-ratio=&quot;1.33333333333333&quot; src=&quot;//speakerdeck.com/assets/embed.js&quot;&gt;&lt;/script&gt;
</description>
        <pubDate>Tue, 12 Mar 2019 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2019/03/12/aws-lambda-with-ruby/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2019/03/12/aws-lambda-with-ruby/</guid>
      </item>
    
      <item>
        <title>Using IMGIX to Personalize Knolled Images</title>
        <description>&lt;style&gt;
  .highlight {
    font-size: 14px;
    font-family: 'Source Code Pro', Menlo, Consolas, Monaco, monospace;
  }
  .highlight pre {
    border: 1px solid rgb(238, 238, 238);
    background-color: white;
  }
  .highlight span.s  { color: rgb(170, 17, 17); }
  .highlight span.nt { color: rgb(34, 17, 153); }
  .highlight span.c  { color: rgb(204, 204, 204); }
  .highlight span.na { color: rgb(85, 85, 85); }
&lt;/style&gt;

&lt;div class=&quot;tb-Masthead&quot;&gt;
  &lt;img src=&quot;/assets/content/imgix/masthead2-f-5c55d7a6ff6e06cde41ff049f33a89b95697189e9d77e990d0a8aaca82ad617a.jpg&quot; class=&quot;tb-Img tb-Img--fancy&quot; alt=&quot;Deconstructed: Photo by Todd McLellan.&quot; /&gt;
  &lt;aside&gt;&lt;a href=&quot;https://www.thisiscolossal.com/2011/02/todd-mclellan-deconstructed/&quot;&gt;Deconstructed: Photo by Todd McLellan.&lt;/a&gt;&lt;/aside&gt;
&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://creativemarket.com/blog/what-is-knolling-the-overhead-photography-trend-explained&quot;&gt;Knolling&lt;/a&gt; is the process of arranging different objects so that they are at 90 degree angles from each other. The term originates from a janitor named Andrew Kromelow in 1987 who would arrange tools using this method for a popular furniture brand called &lt;a href=&quot;https://www.knoll.com/shop/by-designer/frank-gehry&quot;&gt;Knoll&lt;/a&gt;. Commonly photographed from above, knolling is a highly popular method for promoting products from companies like Instagram to Apple.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;a href=&quot;https://www.imgix.com&quot;&gt;&lt;img src=&quot;/assets/content/imgix/imgix-a6c45c8e8fbb4c352c598fcf2282992a1e145914ab324e413248e25068982afd.png&quot; class=&quot;tb-Img tb-Img--third tb-Img--third--sm&quot; alt=&quot;IMGIX Logo&quot; /&gt;&lt;/a&gt;
Even here at Custom Ink, we use knolling to showcase our products. But how could we personalize knolled images to help our customers visualize their creations? We often use &lt;a href=&quot;https://www.imgix.com&quot;&gt;IMGIX&lt;/a&gt; to help us process &amp;amp; optimize catalog images and decided to give its blending capabilities a try out. Let&amp;#39;s jump right in and explore how.&lt;/p&gt;

&lt;h2 id=&quot;our-goal&quot;&gt;Our Goal&lt;/h2&gt;

&lt;p&gt;To personalize this image below with a design centered on each product. The image is marked up to indicate areas a design can be placed within, appearing as red rectangles. The &lt;code&gt;width&lt;/code&gt; and &lt;code&gt;height&lt;/code&gt; of each rectangle appear as large text followed by smaller text indicating the &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt;  placement coordinates, both in pixels. The overall dimensions of the image is &lt;code&gt;600x432&lt;/code&gt; pixels. Take note, we will need all these numbers later :)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/imgix/steps/0-7dc4b1cb585739f856abaaeff2102a176a7b6f690bb9e66a7a6602dbf0a1ee6f.png&quot; class=&quot;tb-Img tb-Img--picture tb-Img--responsive-ctr&quot; alt=&quot;Custom Ink Knolled Image Goals&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;imgix-intro&quot;&gt;IMGIX Intro&lt;/h2&gt;

&lt;p&gt;That background image is hosted on Custom Ink&amp;#39;s site at &lt;a href=&quot;https://www.customink.com/email/imgix/knolled.jpg&quot;&gt;/email/imgix/knolled.jpg&lt;/a&gt; and in order for IMGIX to process it, we must allow their system to connect to our site. For today&amp;#39;s demo, we are using IMGIX&amp;#39;s &lt;a href=&quot;https://docs.imgix.com/setup/creating-sources&quot;&gt;web bucket source&lt;/a&gt; which enables any file in this URL path to be processed.&lt;/p&gt;

&lt;p&gt;Below is a little Ruby script that we will use in future code examples. It will evolve a bit as we move forward and the final version can be found in &lt;a href=&quot;https://gist.github.com/metaskills/316e1285c34f713d646171beb63ae252&quot;&gt;this GitHub gist&lt;/a&gt;. The script uses Bundler&amp;#39;s &lt;a href=&quot;https://technology.customink.com/blog/2015/07/17/bundler-inline-gemfile-dependencies/&quot;&gt;inline feature&lt;/a&gt; to install our dependencies, for now, the IMGIX &lt;a href=&quot;https://github.com/imgix/imgix-rb&quot;&gt;ruby client&lt;/a&gt;. The design to add is a URL string. Lastly, this script also creates a simple client instance and convenience method to make IMGIX paths to our web bucket source created above.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'bundler/inline'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gemfile&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://rubygems.org'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'imgix'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;DESIGN_URL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://www.customink.com/email/imgix/inky.png'&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;IMGIX_CLIENT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Imgix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;host: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'IMGIX_SOURCE'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ixpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;IMGIX_CLIENT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/email/imgix/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;first-placement&quot;&gt;First Placement&lt;/h2&gt;

&lt;p&gt;IMGIX has a vast &lt;a href=&quot;https://docs.imgix.com/apis/url&quot;&gt;API&lt;/a&gt; available to process images. Think of them as a hosted &lt;a href=&quot;https://www.imagemagick.org&quot;&gt;ImageMagick&lt;/a&gt; service. From file formation conversions to face detection, they do it all. But today we are going to make heavy use of their &lt;a href=&quot;https://docs.imgix.com/apis/url/blending&quot;&gt;Blending API&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Our first experiment will simply blend our design url onto the base knolled image using dimensions &amp;amp; coordinates from our first design area shown above. The client&amp;#39;s &lt;code&gt;to_url&lt;/code&gt; methods returns a URL string. The parameters direct IMGIX how to process the image which are mostly self-documenting. If you have questions, reference that API links above as we move along.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;ixpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'knolled.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;blend64: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DESIGN_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;bw: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bh: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# Design area width &amp;amp; height.&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;bx: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;ss&quot;&gt;by: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;130&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# Design area coordinates.&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;bm: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'normal'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/content/imgix/steps/1-c6da1cbcc1a856dc84073172007ae4115a5681fc437e4188dbe5ad441bdc8ea2.jpg&quot; class=&quot;tb-Img tb-Img--picture tb-Img--responsive-ctr&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Well this is mostly what we want. The design fits into its area but is not centered. We could adjust the &lt;code&gt;bx&lt;/code&gt; param to nudge it to the right, but this requires that we calculate the width of the image. Our goal is to do as little work as possible while making any design (horizontal or vertical) automatically center within each area.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Option #1&lt;/strong&gt; - The &lt;a href=&quot;https://docs.imgix.com/apis/url/blending/ba&quot;&gt;Blend Align&lt;/a&gt; param which adjusts the alignment of the overlay image relative to the base image. So we might think adding &lt;code&gt;ba: &amp;#39;middle,center&amp;#39;&lt;/code&gt; would work? But it does not because alignment only applies when we are not setting the (bx) and/or (by) params.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Option #2&lt;/strong&gt; - The &lt;a href=&quot;https://docs.imgix.com/apis/url/blending/bf&quot;&gt;Blend Fit&lt;/a&gt; param which controls how an overlay image fits within its blend width (bw) and blend height (bh) dimensions. This sounds ideal. But we are already seeing how the default of &lt;code&gt;bf: &amp;#39;clip&amp;#39;&lt;/code&gt; is working by making sure the design proportionally fits in the area. In this case, it adjusted the height automatically for us to 80 pixels. The blend fit param does nothing for alignment.&lt;/p&gt;

&lt;p&gt;In order to continue with other design areas, we need to rethink the problem.&lt;/p&gt;

&lt;h2 id=&quot;new-placement-approach&quot;&gt;New Placement Approach&lt;/h2&gt;

&lt;p&gt;So did it feel like we hit a roadblock above? We actually learned a valuable lesson. In order to center any design within its area, we need to rethink what is the overlay image. Rather than use the design on its own, we need to instruct IMGIX to make a design area layer which centers the design, then blend that over the knolled background.&lt;/p&gt;

&lt;p&gt;To create this layer, we will use a 1px transparent png and resize it to the dimensions of the design layer, then blend the design over it.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;ixpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'1px.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;fit: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'crop'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;w: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;h: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;blend64: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DESIGN_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;bw: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bh: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;bm: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'normal'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/content/imgix/steps/2-bc0d5beea73569580a426338c1bbb9f0d3cba54d8723b9268921d634a650c079.png&quot; class=&quot;tb-Img tb-Img--picture tb-Img--responsive-ctr&quot; style=&quot;width:110px; height:80px; box-sizing:content-box; float:right; margin-left: 1rem; margin-bottom: 1rem;&quot; /&gt;Perfect! The design is centered in a new image that is the exact size of the design area. We had to use a new param, &lt;a href=&quot;https://docs.imgix.com/apis/url/size/fit&quot;&gt;Fit Crop&lt;/a&gt;, which maintains the full design area dimensions. If not used, the default fit (clip) would have trimmed our image to &lt;code&gt;80x80&lt;/code&gt; pixels.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/imgix/steps/2-debug-51de0c2249bd64a62bfce07f4695a8174457e018e9f02344b316d13a53dff67d.png&quot; class=&quot;tb-Img tb-Img--picture tb-Img--responsive-ctr&quot; style=&quot;width:110px; height:80px; box-sizing:content-box; float:right; margin-left: 1rem; margin-bottom: 1rem;&quot; /&gt;&lt;strong&gt;DEBUGGING&lt;/strong&gt; - Sometimes you want to visualize the design area. This is easy to do now by using a 1px image that has a color transparency. I chose red and named it &lt;code&gt;1px-debug.png&lt;/code&gt;. Here is the same image using the debug pixel.&lt;/p&gt;

&lt;p&gt;Finally, putting this new design layer technique onto the knolled background by swapping out the design URL with our new IMGIX layer URL. For this example, I have used the debug pixel so we can see how this all works.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;ixpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'knolled.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;blend64: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ixpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'1px-debug.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;w: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;h: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;fit: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'crop'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;blend64: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DESIGN_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;bw: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bh: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;bm: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'normal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;bf: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'clip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;bx: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;by: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;130&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;bm: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'normal'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/content/imgix/steps/2-final-42566d816a563ab2ab427b40730ddbcddfbb74cf0dff2eea55fb6dac8895d467.jpg&quot; class=&quot;tb-Img tb-Img--picture tb-Img--responsive-ctr&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Now we are cooking! But a handful of design areas remain and there is no way to use multiple blends on the same knolled background image. I wonder if we can recursively blend multiple design layers? 🤔&lt;/p&gt;

&lt;h2 id=&quot;peeling-back-the-layers&quot;&gt;Peeling Back The Layers&lt;/h2&gt;

&lt;p&gt;We have already seen how we can pass one blended IMGIX URL to another blended IMGIX URL. Till now, that second image&amp;#39;s dimensions are the size of the design area - the red boxes illustrated in our goals section. But to layer multiple designs, we need a uniform approach similar to &lt;a href=&quot;https://en.wikipedia.org/wiki/Traditional_animation&quot;&gt;cell animation&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A small change to our Ruby script is needed so the width and height of the knolled background can be used. Also, a clean way to turn on the 1px debug image by setting an environment variable.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;WIDTH&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;HEIGHT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;432&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;ONEPX&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'DEBUGPX'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1px-debug.png'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1px.png'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And now an example of a transparent layer, the size of our knolled background, that has the design area layer blended onto it. The debug pixel was used so we can visibly see these layers at work. Again, here is the &lt;a href=&quot;https://docs.imgix.com/apis/url/blending&quot;&gt;Blending API&lt;/a&gt; in case you would like to reference these parameters.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;ixpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ONEPX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;w: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;WIDTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;h: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;HEIGHT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;fit: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'crop'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;blend64: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ixpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ONEPX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;w: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;h: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;fit: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'crop'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;blend64: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DESIGN_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;bw: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bh: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;bm: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'normal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;bf: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'clip'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;bx: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;by: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;130&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;bm: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'normal'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/content/imgix/steps/3-724c6a82ee2fe96c23013de72237d225a04d0b8cc74ad2fa30e9948a430e2cf1.jpg&quot; class=&quot;tb-Img tb-Img--picture tb-Img--responsive-ctr&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;stacking-the-deck&quot;&gt;Stacking The Deck&lt;/h2&gt;

&lt;p&gt;We need to create a Ruby &lt;a href=&quot;https://robots.thoughtbot.com/writing-a-domain-specific-language-in-ruby&quot;&gt;DSL&lt;/a&gt; that allows us to stack IMGIX design layer URLs like the one above. The pseudo code I initially wrote looked something like this. Where Ruby blocks allow us to recursively build a stack.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;knolled_background&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;design_layer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;design_layer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But if every IMGIX URL uses the (blend) option, where is our recursive hook to stitch each layer together? The answer is the &lt;a href=&quot;https://docs.imgix.com/apis/url/watermark&quot;&gt;Watermark API&lt;/a&gt; which has a similar interface to blending. So here is our final addition to our Ruby script.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;design_layer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;ixpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'1px.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;w: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;WIDTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;h: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;HEIGHT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;fit: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'crop'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;blend64: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ixpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ONEPX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;ss&quot;&gt;w: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;h: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;ss&quot;&gt;fit: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'crop'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;ss&quot;&gt;blend64: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DESIGN_URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;ss&quot;&gt;bw: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bh: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bh&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;ss&quot;&gt;bm: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'normal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;ss&quot;&gt;bf: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'clip'&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}),&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;bx: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;by: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;by&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;bm: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'normal'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;mark64: &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;block_given?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;markx: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;marky: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Because the inner most image, the first URL generated has no block argument, we use Ruby&amp;#39;s &lt;code&gt;block_given?&lt;/code&gt; to conditionally yield or not. And because we have uniform layers, all we have to do is set both (markx) and (marky) to 0. Perfect!&lt;/p&gt;

&lt;h2 id=&quot;putting-it-all-together&quot;&gt;Putting It All Together&lt;/h2&gt;

&lt;p&gt;All that learning so we can write this concise code using each design area&amp;#39;s data.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;ixpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'knolled.jpg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;blend64: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;design_layer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;bw: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;110&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bh: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;80&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bx: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;by: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;130&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;design_layer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;bw: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;115&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bh: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;115&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bx: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;240&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;by: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;130&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;design_layer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;bw: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bh: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bx: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;495&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;by: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;155&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;design_layer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;bw: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bh: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;bx: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;485&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;by: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;295&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;bm: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'normal'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/content/imgix/steps/final-bdfcc823ef810b7ce63b9194c9ee41235a57f3e739a0b784d3a44759ec958d15.jpg&quot; class=&quot;tb-Img tb-Img--picture tb-Img--responsive-ctr&quot; /&gt;&lt;/p&gt;

&lt;p&gt;From here you can do all sorts of additional fun things. For example, you can create layers in PhotoShop and interleave as you build your design layers. You can even use URL shortener services like &lt;a href=&quot;https://bitly.com&quot;&gt;Bitly&lt;/a&gt; as you build IMGIX URLs to ensure your final URL remains well under browser limits. Here is an example of how we are using all these techniques.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/imgix/advanced-73d094a30670f2bc0a0b66a1e23d82587521a87eb71ffa6f01c53bf93227f19a.jpg&quot; class=&quot;tb-Img tb-Img--picture tb-Img--responsive-ctr&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;thanks&quot;&gt;Thanks!&lt;/h2&gt;

&lt;p&gt;If you have any questions or comments, please feel free to ask or share. Thank you so much for reading and remember - &lt;a href=&quot;https://www.youtube.com/watch?v=49p1JVLHUos&amp;t=15m33s&quot;&gt;Always Be Knolling (ABK)&lt;/a&gt; !!!&lt;/p&gt;
</description>
        <pubDate>Tue, 27 Nov 2018 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2018/11/27/using-imgix-to-personalize-knolled-images/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2018/11/27/using-imgix-to-personalize-knolled-images/</guid>
      </item>
    
      <item>
        <title>Learning ES6: New Methods for Arrays</title>
        <description>&lt;p&gt;In ES6, we get a bunch of new native methods for Arrays that are super useful! This is a short blog post that goes over each of the new methods - &lt;code&gt;.from()&lt;/code&gt;, &lt;code&gt;.of()&lt;/code&gt;, &lt;code&gt;.find()&lt;/code&gt;, &lt;code&gt;.findIndex()&lt;/code&gt;, &lt;code&gt;.some()&lt;/code&gt;, and &lt;code&gt;.every()&lt;/code&gt; - and how they work.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;array-from-and-array-of&quot;&gt;Array.from() and Array.of()&lt;/h2&gt;

&lt;p&gt;We&amp;#39;re definitely familiar with Arrays as a kind of data structure which can hold a collection. But in Javascript, there are  &lt;em&gt;array-ish&lt;/em&gt; objects. These are objects that have a length and look like an array, but we don&amp;#39;t get all of our array methods, like map, reduce, or the rest of the ones we are about to go through in this blog post! This is one of the weird parts about Javascript. Some examples are the &lt;code&gt;arguments&lt;/code&gt; parameter which can be used in a function (that holds a collection of all the arguments given) and collections of DOM nodes that a function like &lt;code&gt;document.getElementsBy...()&lt;/code&gt; returns.&lt;/p&gt;

&lt;p&gt;Prior to ES6, we would have to use one of our for loops which can be used on a non-array type, and transform each element into an array manually. But now we get these handy class methods that can create new arrays!&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Array.from()&lt;/code&gt; takes in a parameter, which is usually one of those &lt;em&gt;array-ish&lt;/em&gt; objects, and turns it into an array. Some interesting use cases include... calling reduce on a function that sums up any given number of arguments (using the &lt;code&gt;arguments&lt;/code&gt; parameter) or manipulating specific DOM elements like adding styles or events.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;function sumAll() {
    const numbers = Array.from(arguments);
    return numbers.reduce((prev, next) =&amp;gt; prev + next, 0));
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Array.of()&lt;/code&gt; can take several parameters and uses them to create an array. When I first learned about this method, I wondered what was the difference between using &lt;code&gt;Array.of()&lt;/code&gt; and &lt;code&gt;new Array()&lt;/code&gt;. Why not use the constructor if we know what we want the Array to be created of?&lt;/p&gt;

&lt;p&gt;&lt;code&gt;new Array()&lt;/code&gt; has some inconsistent behavior depending on the number of arguments you pass to it.  If we take a look at an example comparing &lt;code&gt;new Array()&lt;/code&gt; and &lt;code&gt;Array.of()&lt;/code&gt;, this becomes a bit more clear.&lt;/p&gt;

&lt;p&gt;Passing a single value:
&lt;code&gt;new Array(2)&lt;/code&gt;
Returns a new two element Array that is unpopulated:
&lt;code&gt;[  ,  ]&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Passing more than a single value:
&lt;code&gt;new Array(1,2)&lt;/code&gt;
Returns a new two element Array that is populated with those values:
&lt;code&gt;[1, 2]&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Array.of()&lt;/code&gt; , however, will always behave in the same way and create a new Array of the elements that you pass it.
&lt;code&gt;Array.of(2)&lt;/code&gt;  returns &lt;code&gt;[2]&lt;/code&gt;
&lt;code&gt;Array.of(1, 2)&lt;/code&gt; returns &lt;code&gt;[1, 2]&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Check out this interesting explanation and code example on Github: &lt;a href=&quot;https://gist.github.com/rwaldron/1074126#arrayof--variable-arity-&quot;&gt;https://gist.github.com/rwaldron/1074126#arrayof--variable-arity-&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;find-and-findindex&quot;&gt;.find() and .findIndex()&lt;/h2&gt;

&lt;p&gt;ES6 introduces some new filtering methods that allow us to more easily find elements and indexes of those elements within arrays. It&amp;#39;s useful for when we need to find an element within an array that can&amp;#39;t be looked up solely by value. For example, if we are working with an array of objects like so:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const produce = [
    {
        name: 'apple',
        color: 'red',
        type: 'fruit',
        stocked: true
    },
    {
        name: 'banana',
        color: 'yellow',
        type: 'fruit',
        stocked: false
    },
    {
        name: 'carrot',
        color: 'orange',
        type: 'vegetable',
        stocked: true
    }
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If we want to get one of those objects out of the array, it&amp;#39;s difficult without reaching into each object and looping through. With the &lt;code&gt;.find()&lt;/code&gt; method, we can specify exactly what we want more easily! Let&amp;#39;s say we want the first stocked item in produce. We can pass the method a function parameter: &lt;code&gt;produce.find(item =&amp;gt; { item.stocked });&lt;/code&gt; and we&amp;#39;ll get back the entire object:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;{name: 'apple', color: 'red', type: 'fruit', stocked: true}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The same goes for &lt;code&gt;.findIndex()&lt;/code&gt; , but instead of being returned the entire object or element, we will get the index of that element. In this case, &lt;code&gt;produce.findIndex(item =&amp;gt; { item.stocked });&lt;/code&gt; we would get the index &lt;code&gt;0&lt;/code&gt; .&lt;/p&gt;

&lt;p&gt;You may be thinking, &amp;quot;Hey! I know another function that can do this already: &lt;code&gt;.indexOf()&lt;/code&gt;!&amp;quot; This also returns us the index of the element we are looking for. The difference lies in the parameters we pass to either function. &lt;code&gt;.indexOf()&lt;/code&gt; takes a value as a parameter, and is more suited for the use case of looking for an element in a collection of all primitive types. &lt;code&gt;.findIndex()&lt;/code&gt;  takes a function as a parameter, and is better for when you need to find an element that fulfills a condition. It&amp;#39;s useful for non-primitive types like objects and when you are looking for a match that is more significant than just a value.&lt;/p&gt;

&lt;h2 id=&quot;some-and-every&quot;&gt;.some() and .every()&lt;/h2&gt;

&lt;p&gt;These two methods are pretty straightforward and they are a great fit for some specific use cases. Both the &lt;code&gt;.some()&lt;/code&gt; and &lt;code&gt;.every()&lt;/code&gt; methods take in functions which return booleans as parameters, and check if either &lt;strong&gt;some&lt;/strong&gt; of the elements in the array cause the function to return true or if &lt;strong&gt;every&lt;/strong&gt; element in the array returns true.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s say we have an array of numbers, and we want to know if some of the numbers are even. This is easy to write with the new &lt;code&gt;.some()&lt;/code&gt; method!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const nums = [2, 3, 4, 5, 6]
nums.some(num =&amp;gt; { num % 2 === 0 });
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will return true, because some of our elements (2, 4, 6)  will return true. However, since not all of the elements return true for that function, &lt;code&gt;nums.every(num =&amp;gt; { num % 2 === 0 });&lt;/code&gt; returns false.&lt;/p&gt;

&lt;p&gt;The function that you pass to &lt;code&gt;.some()&lt;/code&gt; and &lt;code&gt;.every()&lt;/code&gt; gets access to three parameters. The only mandatory parameter is the element itself (in our example, we are using &lt;code&gt;num&lt;/code&gt;). You can also use two optional parameters - the index of that element and the entire array. This allows us to write more complex functions to use with these new Array methods.&lt;/p&gt;

&lt;h2 id=&quot;notes-and-thoughts&quot;&gt;Notes and Thoughts&lt;/h2&gt;

&lt;p&gt;In our discussion, everyone agreed that these new methods will be useful. It removes some of the needs to use jQuery, which can be a bigger package than you need in your project. We all thought that the &lt;code&gt;Array.from&lt;/code&gt; method was very practical especially since Javascript has these weird &lt;em&gt;array-ish&lt;/em&gt; objects. I really like how semantic these methods are; so many of the new ES6 features improve readability of your code - a great added benefit, especially with Javascript which can be a little crazy sometimes. It&amp;#39;s good to see that some of the &amp;quot;bad parts&amp;quot; of Javascript are being combatted with new methods that make our code more maintainable and understandable. To me, it definitely feels like Javascript is heading in the right direction. How do you feel about Javascript&amp;#39;s future? Which of these new Array methods is your favorite? What else would you like to see be added to Javascript?&lt;/p&gt;

&lt;p&gt;Thanks for reading!&lt;/p&gt;
</description>
        <pubDate>Mon, 12 Mar 2018 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2018/03/12/learning-es6-new-methods-for-arrays/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2018/03/12/learning-es6-new-methods-for-arrays/</guid>
      </item>
    
      <item>
        <title>Learning ES6: Loops &amp; Iterators</title>
        <description>&lt;p&gt;This week, we learned about Iterable objects, three different kinds of loops in Javascript, and a new &lt;code&gt;for of&lt;/code&gt; loop that ES6 gives us the best of all three worlds!&lt;/p&gt;

&lt;!--more--&gt;

&lt;h1 id=&quot;loops&quot;&gt;Loops&lt;/h1&gt;

&lt;p&gt;Loops are fundamental to programming and logic. Let&amp;#39;s take a look at what kinds of loops we had in Javascript, their pros and cons, and the new &lt;code&gt;for of&lt;/code&gt; loop in ES6 that combines the best features from all three.&lt;/p&gt;

&lt;h2 id=&quot;iterables-iterators-and-generators-oh-my&quot;&gt;Iterables, Iterators, and Generators, oh my!&lt;/h2&gt;

&lt;p&gt;Before we start digging into the loop functions, let&amp;#39;s quickly go over Iterables, Iterators, and Generators!&lt;/p&gt;

&lt;p&gt;What is an iterable? Iterables are a type of object which can be iterated over - that is, we can access that object in a sequence. Some examples of iterable objects are Arrays, Maps, and Sets. In Javascript, iterable and iterator protocols were added in ECMAScript 2015. Iterable is a protocol that allows us to write custom iteration behavior in any POJO, for example, defining what value of that object should be iterated over. In order for an object to be iterable, it must define an &lt;code&gt;@@iterator&lt;/code&gt; method, a reference to its iterator.&lt;/p&gt;

&lt;p&gt;An iterator is what we use to iterate over an iterable. In Javascript, the iterator protocol can be used define or customize an object&amp;#39;s iteration behavior. It must define a &lt;code&gt;next&lt;/code&gt; function, which determines how that iterator gets the next value in the sequence.&lt;/p&gt;

&lt;p&gt;A generator can be used to create an iterator. Custom iterators are very useful, but can be difficult to program ourselves. Generators allow us to write our own iterative algorithms that can be used like custom iterators. A generator function is a factory for Generator objects, which are both Iterators and Iterable. We can define generator functions by using the &lt;code&gt;function*&lt;/code&gt; syntax when defining it. Generators are really handy. There&amp;#39;s lots of use cases, but we won&amp;#39;t get too far in the details with this blog post.&lt;/p&gt;

&lt;p&gt;If you want to learn more, check out the documentation from Mozilla:
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators&lt;/a&gt;
&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols&quot;&gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;the-classics-for-foreach-for-in&quot;&gt;The classics - for, forEach, for in&lt;/h2&gt;

&lt;p&gt;Now that we have an understanding of iterables and iterators, let&amp;#39;s jump into the kinds of loops we had before ES6. For these examples, we&amp;#39;ll look at an array of values:
&lt;code&gt;const fruits = [&amp;#39;Apple&amp;#39;, &amp;#39;Orange&amp;#39;, &amp;#39;Cherry&amp;#39;, &amp;#39;Pineapple&amp;#39;]&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;The first loop is the ordinary &lt;code&gt;for&lt;/code&gt; loop. This was the loop that I used for everything when I learned programming in Java! Here&amp;#39;s an example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;for (let i=0; i &amp;lt; fruits.length; i++) {
    console.log(fruits[i]);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This prints out each of the fruits and we&amp;#39;ll see an output with each of the fruits in the array logged out to the console. Although some of us may be very familiar with this kind of for loop, it&amp;#39;s not very readable. Defining a variable &lt;code&gt;i&lt;/code&gt; inside of the parenthesis and then using it in the loop can be confusing. It takes longer to read this code and understand what&amp;#39;s going on. You only get an index value in this case, and you have to refer to the original collection, &lt;code&gt;fruits&lt;/code&gt; to access the value within.&lt;/p&gt;

&lt;p&gt;We also have the &lt;code&gt;forEach&lt;/code&gt; loop that is an array method, meaning it can&amp;#39;t be used on other objects. Below is an example of the &lt;code&gt;forEach&lt;/code&gt; loop:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;fruits.forEach(fruit =&amp;gt; {
    console.log(fruit);
});
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will also print out each of the fruits in the array in the console. This is definitely more readable than the first loop, and you don&amp;#39;t have to access the outside array. You can directly reference the value by the parameter you pass to it. It&amp;#39;s also easier to avoid off-by-one errors using this loop because you aren&amp;#39;t defining the indices. However, this loop isn&amp;#39;t as flexible. We can&amp;#39;t use &lt;code&gt;break&lt;/code&gt; or &lt;code&gt;continue&lt;/code&gt; in the loop without causing a code breaking error. If we wanted to have an early exit or a skip-over ability in the loop, we can&amp;#39;t use the &lt;code&gt;forEach&lt;/code&gt; method. The &lt;code&gt;forEach&lt;/code&gt; loop is also a bit slower than a regular &lt;code&gt;for&lt;/code&gt; loop, but it might be a trade off worth doing for better readability and maintainability. It&amp;#39;s important to avoid premature optimization at the cost of readability.&lt;/p&gt;

&lt;p&gt;Thirdly, we have the &lt;code&gt;for in&lt;/code&gt; loop, which looks like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;for (const fruit in fruits) {
    console.log(fruit);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Though we might expect this to also print out each of the fruits in the array in the console, this actually prints out the indices: &lt;code&gt;0, 1, 2, 3&lt;/code&gt;!  In order to actually get the values, we would need to write it like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;for (const index in fruits) {
    console.log(fruits[index]);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we get the output we expect. This is a pretty readable loop, but we still have to reach outside into the original collection and give it the index to get the values. That&amp;#39;s not the biggest problem with this loop, though. Something interesting happens if you update the Array prototype. Let&amp;#39;s say we added our own function to the Array prototype, whether a polyfill or something custom just because. Maybe we want to add a function that returns a random element from the Array. Some pseudocode would be:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;Array.prototype.getRandom = function () {
    const num = getRandomValue(0, this.length);
    return this[num];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let&amp;#39;s take a look at the &lt;code&gt;for in&lt;/code&gt; output after modifying the prototype. Now, if we use our second example where we log out each value of the fruits by using the index, we will see an output like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;Apple
Orange
Cherry
Pineapple
function () {
    const num = getRandomValue(0, this.length);
    return this[num];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Woah! Our new function gets logged out now too! This is some strange behavior that happens with the &lt;code&gt;for in&lt;/code&gt; loop. And although you might not personally be adding anything to the Array prototype, we often work with libraries that do. If we use the &lt;code&gt;for in&lt;/code&gt; loop to access values, we&amp;#39;ll get an output of every single added function. Similarly, since adding a function to the prototype is like adding a property, if you add any plain old property to the array, like this: &lt;code&gt;fruits.location = &amp;#39;produce section&amp;#39;&lt;/code&gt; you will also see &lt;code&gt;&amp;#39;produce section&amp;#39;&lt;/code&gt; printed out before the added functions.&lt;/p&gt;

&lt;h2 id=&quot;new-in-es6-for-of&quot;&gt;New in ES6 - for of&lt;/h2&gt;

&lt;p&gt;In ES6, we have a new type of loop called the &lt;code&gt;for of&lt;/code&gt; loop which combines the best things from the ones we looked at above. Here&amp;#39;s an example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;for (const fruit of fruits) {
    console.log(fruit);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Even though we&amp;#39;ve added properties to the array, we only get the values outputted. We can also use &lt;code&gt;break&lt;/code&gt; and &lt;code&gt;continue&lt;/code&gt; inside the loop and it works as we expect it to. &lt;code&gt;break&lt;/code&gt; takes you out of the loop entirely whereas &lt;code&gt;continue&lt;/code&gt; will skip to the next iteration.&lt;/p&gt;

&lt;p&gt;This is where the &lt;code&gt;for of&lt;/code&gt; loop gets interesting, and ties back to the Iterators and Iterables! If we call &lt;code&gt;.entries()&lt;/code&gt; on our array, we will get an ArrayIterator returned. If we then call &lt;code&gt;.next()&lt;/code&gt; on that iterator, we&amp;#39;ll get returned an object which holds a property called value. The &lt;code&gt;value&lt;/code&gt; property is an array where the first index is the actual value from the array (like &lt;code&gt;&amp;#39;Apple&amp;#39;&lt;/code&gt;) and the second index is that value&amp;#39;s index in the array (for &lt;code&gt;&amp;#39;Apple&amp;#39;&lt;/code&gt; we would get &lt;code&gt;0&lt;/code&gt;). Go ahead, try it out in your console! We can manually go through (or &lt;em&gt;iterate&lt;/em&gt; through) the array by calling &lt;code&gt;.next()&lt;/code&gt; repeatedly until we see that the &lt;code&gt;value&lt;/code&gt; property returns undefined.&lt;/p&gt;

&lt;p&gt;How is this related to our &lt;code&gt;for of&lt;/code&gt; loop? We don&amp;#39;t need to manually iterate through the array since we have the loop! Well, if we need both the index and the value of the element in the array, instead of iterating through the array, we can use the ArrayIterator, like so:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;for (const fruit of fruits.entries()) {
    console.log(`${fruit[0]} is the ${fruit[1]} item`);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Since we are now using the ArrayIterator, each &lt;code&gt;fruit&lt;/code&gt; is the value property, or the array that has the value as its first element and the index as its second. The code above would output:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;Apple is the 0 item
Orange is the 1 item
Cherry is the 2 item
Pineapple is the 3 item
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With some destructuring that we learned in the &lt;a href=&quot;http://technology.customink.com/blog/2018/02/23/learning-es6-strings-and-destructuring/&quot;&gt;last post&lt;/a&gt; - we can write this with even more syntactic sugar!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;for (const [index, fruit] of fruits.entries()) {
    console.log(`${fruit} is the ${index} item`);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And get the same output. The &lt;code&gt;for of&lt;/code&gt; loop is also useful for when you are working with Array-ish objects, which are like objects that have a length and look like an array, but aren&amp;#39;t really arrays and don&amp;#39;t have all the array methods. (More on this in the Arrays post!) For example, the &lt;code&gt;arguments&lt;/code&gt; parameter which gives you a collection of all the parameters passed to a specific function. Since the &lt;code&gt;for of&lt;/code&gt; loop doesn&amp;#39;t necessarily need to use an array, we can easily iterate through the &lt;code&gt;arguments&lt;/code&gt; which is useful for a function that needs to perform some action, but doesn&amp;#39;t know how many parameters are being passed to it. We can also use the &lt;code&gt;for of&lt;/code&gt; loop to iterate through Strings, one character at a time, so we don&amp;#39;t have to manually convert a String to an array of its characters. Last but not least, we can also use the &lt;code&gt;for of&lt;/code&gt; loop to iterate through nodes from the DOM!&lt;/p&gt;

&lt;p&gt;What do all of these have in common? They are Iterables! A &lt;code&gt;for of&lt;/code&gt; loop can go through any iterable. However, plain Javascript objects are not iterables. A &lt;code&gt;for of&lt;/code&gt; loop cannot be used on a regular object like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const avocado = {
    color: 'Green',
    type: 'Haas',
    rating: '10/10',
    comments: 'Avocados are the BEST'
};
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If we try to use this object in our loop and console log the values, we&amp;#39;ll get a TypeError that says &lt;code&gt;avocado[Symbol.iterator]&lt;/code&gt; is not a function. (More on Symbols in a future post!). So, how can we use the &lt;code&gt;for of&lt;/code&gt; loop with objects?&lt;/p&gt;

&lt;p&gt;One option is to use &lt;code&gt;Object.entries()&lt;/code&gt; or &lt;code&gt;Object.values()&lt;/code&gt;, however this would need to be polyfilled because these functions are still in the proposal stage and not available yet.&lt;/p&gt;

&lt;p&gt;Another option is to use the &lt;code&gt;Object.keys()&lt;/code&gt; function which will return you an array of the keys, in this case, &lt;code&gt;[color, type, rating, comments]&lt;/code&gt;. This array we can loop over like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;for (const prop of Object.keys(avocado)) {
    const value = avocado[prop];
    console.log(value, prop);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And that will output:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;'Green' color
'Haas' type
'10/10' rating
'Avocados are the BEST' comments
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We have to reach outside of the loop to the original object, but it works! This is almost the same as using a &lt;code&gt;for in&lt;/code&gt; loop, so take your pick on which type of loop you wanna use.&lt;/p&gt;

&lt;h1 id=&quot;notes-and-thoughts&quot;&gt;Notes and Thoughts&lt;/h1&gt;

&lt;p&gt;As someone new to learning about Javascript, I thought all the different kinds of loops were interesting. I asked my group, who are a bit more veteran Javascript users, what kind of for loop they used most prevalently before ES6. I think most people answered that they primarily used the &lt;code&gt;forEach&lt;/code&gt; loop. If they needed an index, they would use &lt;code&gt;for in&lt;/code&gt;. The way to get around the random properties and modifications to the prototype was to use &lt;code&gt;hasOwnProperty&lt;/code&gt; to make sure the property exists on directly on the instance and not inherited from the prototype chain. I thought that was pretty interesting! Check out this post on StackOverflow, about a snippet in Twitter&amp;#39;s JS that uses this little trick: &lt;a href=&quot;https://stackoverflow.com/questions/12735778/for-in-and-hasownproperty&quot;&gt;https://stackoverflow.com/questions/12735778/for-in-and-hasownproperty&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for reading!&lt;/p&gt;
</description>
        <pubDate>Fri, 09 Mar 2018 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2018/03/09/learning-es6-loops-&-iterators/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2018/03/09/learning-es6-loops-&-iterators/</guid>
      </item>
    
      <item>
        <title>Learning ES6: Strings and Destructuring</title>
        <description>&lt;p&gt;EcmaScript 6 is one of the newer versions of Javascript that we&amp;#39;re now using in a few projects across our teams, and most significantly in our New Design Lab project! As we start to iterate on new features for the lab, we&amp;#39;re reviewing and ramping up on the cool shiny features ES6 brings to the table. This week, we learned about some new string methods and destructuring.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h1 id=&quot;new-string-methods&quot;&gt;New String Methods&lt;/h1&gt;

&lt;p&gt;With these new string methods, we won&amp;#39;t need to rely as much on using crazy regular expressions when trying to parse out strings. This also makes our ES6 code much more readable!&lt;/p&gt;

&lt;h2 id=&quot;startswith&quot;&gt;.startsWith()&lt;/h2&gt;

&lt;p&gt;For this example, let&amp;#39;s pretend we are trying to parse through a collection of flight  codes and find the ones which are flights on United Airlines.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s say we have a group of flight codes:
&lt;code&gt;[&amp;#39;UA871&amp;#39;, &amp;#39;UA872&amp;#39;, &amp;#39;ATT314&amp;#39;, &amp;#39;ATT093&amp;#39;, &amp;#39;JBL123&amp;#39;]&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;With the new &lt;code&gt;.startsWith()&lt;/code&gt; method, we can easily go through each of the flight codes and see if it starts with &amp;#39;UA&amp;#39; so we know that it&amp;#39;s from United Airlines. It would look something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const flightCodes = ['UA871', 'UA872', 'ATT314', 'ATT093', 'JBL123'];
for(let flight of flightCodes) {
    console.log(flight.startsWith('UA'));
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This code would print to the console:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;true
true
false
false
false
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(More on the &lt;code&gt;for(let x of y)&lt;/code&gt; loops from ES6 in a later blog post!)&lt;/p&gt;

&lt;p&gt;It&amp;#39;s important to note that whatever string you pass to the &lt;code&gt;.startsWith()&lt;/code&gt; method is &lt;strong&gt;case sensitive&lt;/strong&gt;.  That means if we used &lt;code&gt;flight.startsWith(&amp;#39;ua&amp;#39;)&lt;/code&gt; we would get all falses. If you need to be able to find out if a string starts with some substring, regardless of casing, you will still need to use regular expressions.&lt;/p&gt;

&lt;p&gt;You can also specify to the &lt;code&gt;.startsWith()&lt;/code&gt; method a second parameter: the index that the function considers the &amp;#39;start&amp;#39; of the string. For example, if I only want to see that the numerical part of the United Airlines flight codes starts with &amp;#39;87&amp;#39;, I could pass the index 3 because I know that there will always be the two characters &amp;#39;UA&amp;#39; before the number.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const unitedAirlines = ['UA871', 'UA872', 'UA123', 'UA324'];
for(let flight of unitedAirlines) {
    console.log(flight.startsWith('87', 3))
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This prints:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;true
true
false
false
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;endswith&quot;&gt;.endsWith()&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;.endsWith()&lt;/code&gt; works in a very similar way as &lt;code&gt;.startsWith()&lt;/code&gt; , but it checks the end of the string rather than the beginning.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const color1 = 'Light Blue';
const color2 = 'Light Pink';
console.log(color1.endsWith('Blue'));
console.log(color2.endsWith('Blue'));
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This would print:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;true
false
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can also specify a second parameter to &lt;code&gt;.endsWith()&lt;/code&gt; which is the length of the substring you&amp;#39;d like to check the end of. For example, if I want to check that the first 5 characters of my string ends with &amp;#39;ght&amp;#39;, I would have to pass the length 5 like so:
&lt;code&gt;color1.endsWith(&amp;#39;ght&amp;#39;, 5)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Which would return &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;includes&quot;&gt;.includes()&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;.includes()&lt;/code&gt; is a pretty straightforward method - it returns &lt;code&gt;true&lt;/code&gt; or &lt;code&gt;false&lt;/code&gt; if the string includes the substring. Like the above two methods, it is case sensitive, so if you need to be able to know if the string includes the substring regardless of casing, you would still need to use regular expressions or modify the prototype.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const color = 'Light Blue';
color.includes('Blu');
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;returns &lt;code&gt;true&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;repeat&quot;&gt;.repeat()&lt;/h2&gt;

&lt;p&gt;&lt;code&gt;.repeat()&lt;/code&gt; is also pretty straightforward! It takes one parameter: how many times you would like the string to be repeated, and it returns that string.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const repeatMe = 'Repeat This';
repeatMe.repeat(5);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This returns: &lt;code&gt;&amp;quot;Repeat ThisRepeat ThisRepeat ThisRepeat ThisRepeat This&amp;quot;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;One interesting application of the &lt;code&gt;.repeat()&lt;/code&gt; method is for a function that can add a uniform amount of left padding to some lines of text, such that they look right-aligned. We can write a function which takes in the string, and the amount of padding that we would like to add.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;function leftPad(str, padLength) {
    return `${' '.repeat(padLength - str.length)}${str}`;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We subtract the length of the string from our padding so every string will always be right aligned regardless of its length. Then, we can call our leftPad method like so:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;console.log(leftPad('Hello', 10);
console.log(leftPad('World', 10);
console.log(leftPad('Yay', 10);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;which would output the three strings nicely aligned to the right:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;     Hello
     World
       Yay
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id=&quot;destructuring&quot;&gt;Destructuring&lt;/h1&gt;

&lt;p&gt;Destructuring is an interesting new feature of ES6 which lets us write less lines of code when trying to extract data from objects, arrays, maps and sets. This is especially useful when we need to extra lots of data from one object/array/map/set.&lt;/p&gt;

&lt;h2 id=&quot;destructuring-an-object&quot;&gt;Destructuring an Object&lt;/h2&gt;

&lt;p&gt;Let&amp;#39;s say we are dealing with the flights again, but we have some more information about each flight like so:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const flight = {
    airline: 'United Airlines',
    code: 'UA872',
    origin: 'San Fransisco',
    destination: 'Taipei',
    gate: 'D72'
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Without destructuring, in order to get each piece of data into its own variable, we have to write something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const airline = flight.airline;
const code = flight.code;
const origin = flight.origin;
// etc. etc.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a lot of repeated code! With destructuring, we can do this in a much simpler way:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const { airline, code, origin, destination, gate } = flight;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, each of these variables will match up with the keys in the&lt;code&gt;flight&lt;/code&gt; object, and assign to it the value. So, if we &lt;code&gt;console.log(destination)&lt;/code&gt; then we will get &lt;code&gt;&amp;quot;Taipei&amp;quot;&lt;/code&gt;. We can pick and choose which keys we care about too, so if we left out &lt;code&gt;gate&lt;/code&gt;, the rest of the variables would still work.&lt;/p&gt;

&lt;p&gt;This can be especially useful for when we have deeply nested objects like in many JSON responses!&lt;/p&gt;

&lt;p&gt;But what if we don&amp;#39;t want to keep the original key names and still use destructuring? For example, what if we are already using the variable &lt;code&gt;code&lt;/code&gt; for something else? Well, we can specify what the new variables should be named.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const { code: flightCode } = flight;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, we can &lt;code&gt;console.log(flightCode)&lt;/code&gt; and that will return what was in &lt;code&gt;flight.code&lt;/code&gt; , or &lt;code&gt;&amp;#39;UA872&amp;#39;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;What if we want to be able to pick out some specific data from an object, but the key doesn&amp;#39;t exist in the object? To avoid a code breaking error, we can set a default value when destructuring.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;const { airline, code, plane = &amp;#39;Boeing 757&amp;#39; } = flight;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Even though there is no &lt;code&gt;flight.plane&lt;/code&gt;, we can still use the variable &lt;code&gt;plane&lt;/code&gt; which will be holding the default value &lt;code&gt;&amp;#39;Boeing 757&amp;#39;&lt;/code&gt;. If there is a plane key in the flight object, then the variable &lt;code&gt;plane&lt;/code&gt; will be holding &lt;code&gt;flight.plane&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;We can also combine these two in our destructuring expression for maximum syntactical sugar!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const { airline = 'JetBlue', code: flightCode = 'JBL123', plane = 'Boeing 757' } = flight;
console.log(airline);
console.log(flightCode);
console.log(plane);
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will print out:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;United Airlines
UA872
Boeing 757
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;destructuring-an-array&quot;&gt;Destructuring an Array&lt;/h2&gt;

&lt;p&gt;We can also use destructuring on an array, which assigns the variables based on the index of the value in the array. Let&amp;#39;s look at a list of student names:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const students = ['Mary', 'John', 'Sue', 'Miranda']
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Instead of assigning our variables like this...&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const student1 = students[0];
const student2 = students[1];
// etc.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can use destructuring!
&lt;code&gt;const [student1, student2, student3, student4] = students&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Then when we  &lt;code&gt;console.log(student4)&lt;/code&gt; we get &lt;code&gt;&amp;#39;Miranda&amp;#39;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This is especially useful for CSV (comma separated values) files.&lt;/p&gt;

&lt;p&gt;Another interesting ES6 feature we can use with array destructuring is the splat operator. For example, if we have an array which has the name of the school as the first value, and the rest of the values are the students, we can write:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const schoolAndStudents = ['University Of Virginia', 'Mary', 'John', 'Sue', 'Miranda'];
const [school, ...students] = schoolAndStudents;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then &lt;code&gt;console.log(students)&lt;/code&gt; will return an array of the rest of the values: &lt;code&gt;[&amp;#39;Mary&amp;#39;, &amp;#39;John&amp;#39;, &amp;#39;Sue&amp;#39;, &amp;#39;Miranda&amp;#39;]&lt;/code&gt;. Without the &lt;code&gt;...&lt;/code&gt; operator, like this: &lt;code&gt;const [school, students] = schoolAndStudents&lt;/code&gt;, &lt;code&gt;console.log(students)&lt;/code&gt; would only return the first string, &lt;code&gt;&amp;#39;Mary&amp;#39;&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;sweet-unlocks-swapping-variables-multiple-returns-and-named-defaults&quot;&gt;Sweet Unlocks: Swapping variables, multiple returns, and named defaults&lt;/h2&gt;

&lt;p&gt;With destructuring, we can get some sweet unlocks! One cool example was being able to swap variables in one line. Before ES6, in order to swap variables, we would need to use a temporary variable like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;let var1 = 'A';
let var2 = 'B';
const tmp = var1;
var1 = var2;
var2 = tmp;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But with destructuring, we can do this in one line:
&lt;code&gt;[var1, var2] = [var2, var1]&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;And now, &lt;code&gt;var1&lt;/code&gt; holds &lt;code&gt;&amp;#39;B&amp;#39;&lt;/code&gt; and &lt;code&gt;var2&lt;/code&gt; holds &lt;code&gt;&amp;#39;A&amp;#39;&lt;/code&gt;!&lt;/p&gt;

&lt;p&gt;We can also take advantage of destructuring to get multiple returns from a function. Let&amp;#39;s say we wrote a function that builds flight codes for different airlines, assuming that the only thing that needs to change is the letter code in the begining of the string.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;function flightCode(num) {
    const airlineCode = {
        United: `${UA}${num}`,
        JetBlue: `${JBL}${num}`,
        American: `${AA}${num}`
    }
    return airlineCode;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, we can easily convert our number into all of the airline codes. But, we still have to specify each of the different airlines to get the specific code for that airline.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;const flightCodes = flightCode(872);
const United = flightCodes.United;
const JetBlue = flightCodes.JetBlue;
const American = flightCodes.American;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With destructuring, we can get the value of each of the flight codes into its own variable in one line:
&lt;code&gt;const { United, JetBlue, American } = flightCode(872)&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Because the function &lt;code&gt;flightCode()&lt;/code&gt; returns an object, we can directly set our variables with destructuring.&lt;/p&gt;

&lt;p&gt;Another cool unlock we get with destructuring is the ability to use named defaults in our method parameters. Let&amp;#39;s take a look at an example that calculates flight costs.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;function costOfFlight(distance, basePrice = 5, tax = 0.15) {
    const priceBeforeTax = distance * 0.25 + basePrice;
    return priceBeforeTax + (priceBeforeTax * tax);
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This function expects that, when it is called, the three parameters will be passed to it in a specific order. &lt;code&gt;distance&lt;/code&gt; first, then &lt;code&gt;basePrice&lt;/code&gt;, and then &lt;code&gt;tax&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;However with destructuring, we can list our variables in any order we&amp;#39;d like and we don&amp;#39;t need to include all of them if there are default values. We just need to add in our destructuring syntax!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;function costOfFlight({distance = 50, basePrice = 5, tax = 0.15} = {}) {
    const priceBeforeTax = distance * 0.25 + basePrice;
    return priceBeforeTax + (priceBeforeTax * tax);
}

console.log(costOfFlight({basePrice: 1000, distance: 100}));
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This returns &lt;code&gt;1178.75&lt;/code&gt; . Man, flights can be pricy!&lt;/p&gt;

&lt;p&gt;One important thing to note is that we do need to set a default value for the parameter object. This is to avoid any errors when calling the method with no parameters - in that case, it will use the default values of each.&lt;/p&gt;

&lt;h1 id=&quot;notes-and-thoughts&quot;&gt;Notes and Thoughts&lt;/h1&gt;

&lt;p&gt;During my team discussion, we agreed that we liked how readable the new String methods were. As someone that&amp;#39;s pretty comfortable with Ruby, I liked how these methods reminded me of the same kind of readability that you get in Ruby. However, we did notice that with destructuring, things can get unreadable quickly if we use it excessively. We talked about how there is a fine line between writing less lines of code and readability of the code. It reminded me of the ternary operator for conditions - sometimes it is very useful, like when assigning a variable, but when it gets nested or does more than just assignment, ternaries can really block up your mental model of the code.&lt;/p&gt;

&lt;p&gt;Although it IS super cool to use all the fun syntax and feels clever, we need to remember that an important aspect of programming is the code&amp;#39;s maintainability, and the ease at which another programmer can read and modify your code! We should be conscious of when and why we are using shorthand syntax. Sometimes, even if there is one or two extra lines of code, it&amp;#39;s worth it to make the code more readable.&lt;/p&gt;

&lt;p&gt;Another interesting discussion which was brought up was if we should take advantage of Javascript&amp;#39;s prototype feature and add new methods to String that are similar to the new ones from ES6. One of the best parts of the new String methods is that our code is more readable, and we don&amp;#39;t need to use regular expressions. Should we also modify the String prototype to include new methods for other types of regular expressions? For example, in our code base, we have a file of regular expression constants including a huge one that checks if there is an emoji in your string. Should we create a new method on the String prototype called &lt;code&gt;.hasEmoji()&lt;/code&gt; ?&lt;/p&gt;

&lt;p&gt;We came to the agreement that modifying a core object like String is scary and unreliable because it exists in the global namespace and we could be overriding something without knowing it. However, we did make the distinction that modifying the String prototype in application code is less risky than doing it when writing a library, since you have more of a guarantee that your application code is the &amp;quot;last&amp;quot; part so you can rely on that function doing what you expect it to do.&lt;/p&gt;

&lt;p&gt;Well, I hope this post gave you some food for thought!&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;What are your thoughts on these sweet new ES6 features?&lt;/li&gt;
&lt;li&gt;Where is the line between less lines of code and readability?&lt;/li&gt;
&lt;li&gt;And, when do you think it&amp;#39;s okay to modify Javascript prototypes?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Thanks for reading!&lt;/p&gt;
</description>
        <pubDate>Fri, 23 Feb 2018 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2018/02/23/learning-es6-strings-and-destructuring/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2018/02/23/learning-es6-strings-and-destructuring/</guid>
      </item>
    
      <item>
        <title>Spawnfest Retrospective</title>
        <description>&lt;p&gt;This year I participated in &lt;a href=&quot;https://spawnfest.github.io/&quot;&gt;SpawnFest 2017&lt;/a&gt;, a two day hackathon focused around the BEAM virtual machine. With judging finished, I felt this an appropriate time to  reflect on the architecture and process of my submission.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;My submission was a &lt;a href=&quot;https://github.com/spawnfest/beam-craft&quot;&gt;server for Classic Minecraft&lt;/a&gt; written in Elixir. Unlike the current version, this version of Minecraft is very limited in feature set supporting only chat, placing blocks and moving fluids. Because of the simplistic protocol and the availability of open source clients, It seemed like a perfect project for a two day contest.&lt;/p&gt;

&lt;h2 id=&quot;the-server&quot;&gt;The Server&lt;/h2&gt;

&lt;p&gt;Unlike Ruby, C, or Java, Elixir is an actor based language. In actor based languages, communication across boundaries happens via message passing instead of function calls. Its roughly equivalent to a service oriented architecture, but replacing network boundaries between services with ‘in memory’ communication. The pattern leads to highly concurrent software, but requires a different way of thinking.&lt;/p&gt;

&lt;p&gt;At a high level, the server I submitted had three kinds of actors &lt;a href=&quot;https://github.com/spawnfest/beam-craft/blob/master/lib/beam_craft/protocol.ex&quot;&gt;client protocol&lt;/a&gt;, &lt;a href=&quot;https://github.com/spawnfest/beam-craft/blob/master/lib/beam_craft/game_server.ex&quot;&gt;game server&lt;/a&gt; and &lt;a href=&quot;https://github.com/spawnfest/beam-craft/blob/master/lib/beam_craft/map_server.ex&quot;&gt;map server&lt;/a&gt;. Ranch, a socket acceptor pool, would spin up instances of the client protocol to manage connections between the server and client. Those instances decoded messages from the client and passed them to the game server, and the game server sent updates back to the client. The game server, kept track of all of the connected clients, ensuring that all changes in the map, chat messages and player connections / disconnections were seen by everyone on the server. Finally, the map server kept track of updates to the game map.&lt;/p&gt;

&lt;h2 id=&quot;what-went-well-communication-between-clients&quot;&gt;What Went Well: Communication Between Clients&lt;/h2&gt;

&lt;p&gt;The actor model was very nice to use for this project. It helped cleanly separate the encoding and decoding logic and provided process IDs to make tracking connected clients simple. It also helped us avoid the concurrency issues that some traditional approaches to multithreading suffer from.&lt;/p&gt;

&lt;p&gt;There was an actor for each connected client, all the game server needed to do was validate that the input was correct, then send a message to each client actor. The logic involving speaking to the protocol was contained in the client actor. This made the game server much cleaner, since all of the work to construct the binary was separate from the game server logic.&lt;/p&gt;

&lt;p&gt;There was also a good way to keep track of each connected client for free. Since each actor is assigned a process id, the actor which runs the game server just needed to keep a mapping of username and player ids to process ids. It made implementing a “whisper” chat command and despawning logged off players trivial. For “whisper”, the server maps the target player’s username to their pid and send the chat message along. To get despawning working for players that logged off, the server takes the process id of the disconnecting player, released their player id back into the pool, then broadcasted the despawn message to the rest of the connected clients.&lt;/p&gt;

&lt;p&gt;Most importantly, using actor based concurrency removed the cognitive burden associated with a more traditional threading approach. There was no need to manage mutexes or deal with deadlocks. The only thing to focus on was message structure, the runtime took care of the rest.&lt;/p&gt;

&lt;h2 id=&quot;what-didn-t-go-well-the-map&quot;&gt;What Didn’t Go Well: The Map&lt;/h2&gt;

&lt;p&gt;Getting a performant way of representing the map proved to be a challenge. With a little understanding of how they are built and sent to the client I think you will see why.&lt;/p&gt;

&lt;p&gt;A Minecraft classic map is made up of blocks. They get sorted in a “x * y * z” matrix of unsigned 8 bit integers. Each byte in the matrix represents corresponds to the type of block and the index is its position in the world. When this data is sent to the client the matrix is converted to a one dimensional array, a 4 byte header (the number of elements in the array) is added, then it is gziped and sent is chunks of 1024 bytes to the client.&lt;/p&gt;

&lt;p&gt;The largest map is 512 * 512 * 64 blocks. This means it takes 16.78mb of memory for the map data if you store one byte per block. We also needed the ability to update an arbitrary block, which meant that if we treated it as a binary we would have a lot of work to access and update a single block. To overcome this, I implemented two versions of an Erlang Term Storage based map, each with their own issues.&lt;/p&gt;

&lt;h3 id=&quot;attempt-one&quot;&gt;Attempt One&lt;/h3&gt;

&lt;p&gt;Erlang Term Storage (ETS) was a really appealing way to deal with map updates. It provides a key value table which can contain any arbitrary element, has multiple storage options, and provides constant lookup or logarithmic lookup time. If each block in the map was stored as a tuple like &lt;code&gt;{{x,y,z}, block_type}&lt;/code&gt;, we could do our updates quickly with little overhead. There were two issues with this approach, it was very large in memory and you needed to build the array to send to the client.&lt;/p&gt;

&lt;p&gt;For a 512 * 512 * 64 block map, it required an 800mb table. This didn’t feel the best since if we were doing this using malloced c, we could get by with a fiftieth of that.
The other, more pressing, issue was building the array of map data to send to the client. By default, ETS tables are unsorted sets. This meant our process for building the array was:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Load all of the terms from the table into memory&lt;/li&gt;
&lt;li&gt;Sort the keys into the correct order&lt;/li&gt;
&lt;li&gt;Concatenate each value into a new array&lt;/li&gt;
&lt;li&gt;Send that array to the client&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For the largest map size we ended up sorting and concatenating 16,777,216 items. This proved to be very slow. Switching storage options didn’t provide any appreciable speed boost; another solution was needed.&lt;/p&gt;

&lt;h1 id=&quot;attempt-two&quot;&gt;Attempt Two&lt;/h1&gt;

&lt;p&gt;After a good nights sleep and a bit of Googling, I decided to add Run-length encoding to our map’s internal structure. This helped tremendously with the performance and size.&lt;/p&gt;

&lt;p&gt;If you are unfamiliar, Run-length encoding (RLE) is a lossless form of compression which stores consecutive elements as a single value, and then the number of repetitions. This means:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;[1,2,2,2,5]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Could become&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;[{1, 5}, {3, 2}, {1, 1}]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Since our map data has a lot of consecutive elements, compressing a row or column with RLE means we save a lot on space (800mb to 16mb) and we cut down on the amount of sorting we need to do in memory. Instead of storing &lt;code&gt;{{x,y,z}, block_type}&lt;/code&gt; we use &lt;code&gt;{{y,z}, x_row_compressed}&lt;/code&gt;. This means we only sort 32,768 items, then decompress and concatenate entire rows at a time. The RLE approach proved to be good enough given the time constraints and its the one that made it into the final submission.&lt;/p&gt;

&lt;h2 id=&quot;still-not-perfect&quot;&gt;Still Not Perfect&lt;/h2&gt;

&lt;p&gt;While I’m quite proud of what we were able to get done in two days, I still feel like there were a few areas that I could make better given some more time: GameServer ended up being too large for my tastes. I feel it would be cleaner if there was a split between tracking players, passing player changes around and chat message. We currently just use send to pass messages back to clients, it would be more intention revealing if there was a public api, provided by ClientProtocol, to encapsulate this behavior. The map should be built as a gzip stream when we read it from the ETS table. The current list to binary to gzip process is not performant. I’m unhappy with the way fluids work. It feels like they want to be treated as a player like thing and live inside of their own simple_one_for_one supervisor.&lt;/p&gt;

&lt;p&gt;Outside of a few small issues and some areas that I want to correct, the contest was an enjoyable time. Big thanks to Brujo and the rest of the organizers, judges and sponsors for putting on such a wonderful event.&lt;/p&gt;
</description>
        <pubDate>Sat, 06 Jan 2018 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2018/01/06/spawnfest-retrospective/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2018/01/06/spawnfest-retrospective/</guid>
      </item>
    
      <item>
        <title>Clipart on AWS Lambda</title>
        <description>&lt;p&gt;In our design lab, each request to add a new piece of clipart or process a user upload touches our clipart service. Historically, this application has been hosted on EC2 which has led to some problems for us. A combination of inconsistent load and random hangups on certain files has led to it becoming an operational and financial burden. We chose to undertake the work to migrate the code path which was the worst offender to AWS Lambda. While not painless, this proved to address the two pain points we had with the current setup.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;The main issue we had with the old service was load. The load on the application is not consistent, even with autoscaling we end up over-provisioned during off peak hours and under-provisioned at critical times. This has cost us monetarily, with us paying for more servers than we need, or caused issues for customers, both internal and external, when working with clipart inside of the Custom Ink design lab without enough servers to handle all of their requests. The application also suffers from random hangups from poorly formatted clipart files or extremely large user uploads. A request for a file in either of these categories would cause an application server to fail to respond to health checks, leave the load balance, then require manual intervention to become healthy again.&lt;/p&gt;

&lt;p&gt;Lambda proved to be an excellent way to combat this issue. Amazon&amp;#39;s provided Node.js environment already shipped ImageMagick, a critical part of our existing service; they guaranteed a stronger level of isolation between requests than we can realistically provide; and, like all AWS supported platform, had a well documented client library for accessing all of the stored data we need to complete requests. As long as we could generate files which were similar to the current service, it would reduce the burden on operations, keep a bad image from hampering site performance, and help us control our costs by only paying for the processing time we need.&lt;/p&gt;

&lt;h3 id=&quot;the-porting-process&quot;&gt;The Porting Process&lt;/h3&gt;

&lt;p&gt;The process we needed to replicate performed a few integrated tasks. It was responsible for:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Retrieving the file from S3&lt;/li&gt;
&lt;li&gt;Resizing and scaling images&lt;/li&gt;
&lt;li&gt;Removing and changing colors&lt;/li&gt;
&lt;li&gt;Converting images to a single color&lt;/li&gt;
&lt;li&gt;Tracking user selection of clipart in the design lab&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Accomplishing file retrieval from S3 was simple, we just called out to the Node.js SDK to do this. Resizing and scaling are handled by ImageMagick, and color removal and conversion were implemented by hand. Tracking user selection was moved to a SQS queue. The lambda just publishes the requests to the queue, and another application collects the data for reporting purposes.&lt;/p&gt;

&lt;p&gt;Porting to Lambda was not difficult, the first version was completed in about two days of work, but the process wasn&amp;#39;t without issues. Debugging took much longer and we ran into a few hiccups along the way.&lt;/p&gt;

&lt;h3 id=&quot;some-hiccups&quot;&gt;Some Hiccups&lt;/h3&gt;

&lt;p&gt;The issues we ran into fell into three groups, API Gateway issues, ImageMagick issues and environment reuse issues.&lt;/p&gt;

&lt;p&gt;API Gateway is an Amazon service which, among other things, allows for you to invoke a Lambda function over HTTP. It is first and foremost designed for use with XML or JSON. This becomes a problem when trying to serve binary since the api gateway attempts to set the headers for xml, text, or json over the binary content.&lt;/p&gt;

&lt;p&gt;To get it to serve an arbitrary binary back to a web browser requires you to do two things. First, you need to set &lt;code&gt;isBase64Encoded&lt;/code&gt; to true in the returned json of the handler. Second, you need to update your binary media types to include &lt;code&gt;*/*&lt;/code&gt; then redeploy the stage.&lt;/p&gt;

&lt;p&gt;The second major issue we ran into was ImageMagick on Lambda itself. Long story short, we were unable to disable antialiasing when resizing. That issue required us to render each clipart at their preferred eps size, pull the image into memory, use the &lt;a href=&quot;https://en.wikipedia.org/wiki/Color_difference#CIEDE2000&quot;&gt;CIEDE 2000&lt;/a&gt; formula to identify the colors we need to remove, then apply our optional one color conversation pass. When looking at using ImageMagick on Lambda I would strongly suggest testing anything related to color heavily before investing.&lt;/p&gt;

&lt;p&gt;Finally we had some issues with &lt;a href=&quot;https://aws.amazon.com/blogs/compute/container-reuse-in-lambda/&quot;&gt;environment reuse&lt;/a&gt;. The temporary space that AWS provides is kept when lambda containers are reused. This means that if / when your lambda function reaches the point where AWS starts to reuse environments, you can fill up the disk and cause your function to error out. The easiest way to deal with that is to delete any files your lambda function created before finishing execution.&lt;/p&gt;

&lt;h3 id=&quot;monitoring&quot;&gt;Monitoring&lt;/h3&gt;

&lt;p&gt;At CustomInk we use Rollbar for all of our error reporting. When using Rollbar with Lambda, take advantage of their out of the box &lt;a href=&quot;https://rollbar.com/blog/lambda-support-for-nodejs-python/&quot;&gt;integration for lambda&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I would also strongly suggest setting up X-Ray. This service proved to be invaluable during development allowing us to see slow paths in our code. If you use promises to structure your code i&amp;#39;ve found the following snippet to be helpful:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AWSXRay&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;aws-xray-sdk-core&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TRACE_ID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;_X_AMZN_TRACE_ID&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;xrayPromise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;TRACE_ID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;AWSXRay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;captureAsyncFunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;segment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subsegment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;promise&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;subsegment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;output&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;subsegment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;xrayPromise&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;in-production&quot;&gt;In Production&lt;/h3&gt;

&lt;p&gt;Moving over to a Lambda based process allowed us to cut down on the number and size of the servers needed for our clipart service. Overall we feel that Lambda was a good fit for the project. It allowed us to realize the goal of a better scaling clipart process and gain significant cost savings.&lt;/p&gt;
</description>
        <pubDate>Tue, 19 Sep 2017 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2017/09/19/clipart-on-aws-lambda/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2017/09/19/clipart-on-aws-lambda/</guid>
      </item>
    
      <item>
        <title>Power Moves: SQL Server on Linux, Rails, and Docker</title>
        <description>&lt;div class=&quot;tb-Masthead&quot;&gt;
  &lt;img src=&quot;/assets/content/power-moves/masthead-00358e30452214dc1f16bc2293f4d5577dc9e2d6b3761fc6a6f71b8a63602e6c.jpg&quot; class=&quot;tb-Img tb-Img--fancy&quot; alt=&quot;The Ultimate Teen Titans Power Move.&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;Microsoft is releasing new versions of SQL Server on Linux more and more frequently. Last month brought us &lt;a href=&quot;https://blogs.technet.microsoft.com/dataplatforminsider/2017/04/19/sql-server-2017-community-technology-preview-2-0-now-available/&quot;&gt;SQL Server 2017 Community Technology Preview 2.0&lt;/a&gt; and like the others before, it&amp;#39;s a breeze to use with &lt;a href=&quot;https://www.docker.com&quot;&gt;Docker&lt;/a&gt;.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Around the same time, &lt;a href=&quot;http://weblog.rubyonrails.org/2017/4/27/Rails-5-1-final/&quot;&gt;Rails 5.1&lt;/a&gt; was released. Writing modern web applications using every technology from the backend database to frontend JavaScript has never been more enjoyable. Rails 5.1 also raises intergration with SQL Server to an all-time record high.&lt;/p&gt;

&lt;p&gt;Now... today... this very moment... it is time to get merge-obsessed and combine our developer super powers to form some sweet new &lt;a href=&quot;http://teen-titans-go.wikia.com/wiki/Power_Moves&quot;&gt;Power Moves&lt;/a&gt;. &lt;code&gt;GO!&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;your-environment&quot;&gt;Your Environment&lt;/h2&gt;

&lt;p&gt;Before moving on, we should pick a secure password for our local SQL Server administrator. The &lt;code&gt;SA_PASSWORD&lt;/code&gt; variable is used both by Rails and SQL Server on Docker. I recommend setting this in your Bash, ZSH or whatever config your shell uses.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;SA_PASSWORD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mysecretpassword
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;install-docker&quot;&gt;Install Docker&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/power-moves/docker-memory-prefs-8ad442dfb46bd33ab9a8eefdb54f598b96861d251ee06e5ffabcbe9dced7ed5d.jpg&quot; class=&quot;tb-Img tb-Img--third tb-Img--half--sm&quot; alt=&quot;Docker Memory Resource Preferences&quot; /&gt;If you do not have it already, please download and install Docker. They offer a &lt;a href=&quot;https://www.docker.com/community-edition&quot;&gt;free Community Edition&lt;/a&gt; for most platforms. Once you have downloaded and verified your install, please update your Docker resource preferences to allow up to 4GB of memory. SQL Server will need a bit more than the 2GB default.&lt;/p&gt;

&lt;h2 id=&quot;install-sql-server&quot;&gt;Install SQL Server&lt;/h2&gt;

&lt;p&gt;This command will download the latest SQL Server image from Microsoft&amp;#39;s official hub on Docker, currently SQL Server 2017 CTP v2.0.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker pull microsoft/mssql-server-linux
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, start SQL Server using the previous environment settings. The first command will create a persistent data volume while the second starts SQL Server via Docker and attaches that volume to the container. All new databases will persist to the &lt;code&gt;mssqldata&lt;/code&gt; volume.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker create &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; /var/opt/mssql &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; mssqldata microsoft/mssql-server-linux

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;docker run &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 1433:1433 &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ACCEPT_EULA=Y&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;SA_PASSWORD=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$SA_PASSWORD&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--volumes-from&lt;/span&gt; mssqldata &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  microsoft/mssql-server-linux
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;create-a-rails-application&quot;&gt;Create a Rails Application&lt;/h2&gt;

&lt;p&gt;This guide does not cover Ruby installation. Rails requires Ruby v2.2.2 or higher and if you are new to Ruby or do need to install the latest version, I recommend &lt;a href=&quot;https://github.com/rbenv&quot;&gt;rbenv&lt;/a&gt; for POSIX systems or &lt;a href=&quot;https://rubyinstaller.org&quot;&gt;RubyInstaller&lt;/a&gt; if you are on Windows.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s install the latest version of Rails and Bundler using RubyGems.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;rails bundler
Successfully installed rails-5.1.1
Successfully installed bundler-1.15.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To create your new Rails application with SQL Server as the database, we pass the &lt;code&gt;-d&lt;/code&gt; flag with a value of &lt;code&gt;sqlserver&lt;/code&gt;. This will install the SQL Server Adapter and TinyTDS dependencies – the Ruby bindings to DBLIB. Finally, we test that we can boot our new Rails application and load it in a browser. If all goes well, you should see the following image.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rails new my_app &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; sqlserver
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;my_app
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./bin/rails server

&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; Booting Puma
&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; Rails 5.1.1 application starting &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;development on http://localhost:3000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/content/power-moves/welcome-to-rails-051121731979c533db830998a3cb6a81f02ed053fd051f090d29a231fb71a6cb.jpg&quot; class=&quot;tb-Img tb-Img--responsive-ctr&quot; alt=&quot;Yay! You're on Rails! Welcome Screen&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;ultimate-power-move&quot;&gt;Ultimate Power Move&lt;/h2&gt;

&lt;p&gt;A static welcome page is fine and all, but let&amp;#39;s see if we can make sure our SQL Server database works with ActiveRecord.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./bin/rails db:setup

Created database &lt;span class=&quot;s1&quot;&gt;'my_app_development'&lt;/span&gt;
Created database &lt;span class=&quot;s1&quot;&gt;'my_app_test'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Success! The &lt;code&gt;db:setup&lt;/code&gt; command has shown us that it has created two databases for us and that everything is bootstraped to SQL Server correctly. We can create a model/table now via a migration.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./bin/rails generate model User name:string email:string
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./bin/rails db:migrate

&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; CreateUsers: migrating &lt;span class=&quot;o&quot;&gt;======================================&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--&lt;/span&gt; create_table&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;:users&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
   -&amp;gt; 0.0024s
   -&amp;gt; &lt;span class=&quot;nt&quot;&gt;-1&lt;/span&gt; rows
&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; CreateUsers: migrated &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.0025s&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=============================&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Success again! Here we crated a User model/table with a few attributes. Running the migration creates the table and columns as needed and we can even fire up a console to test it all out.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./bin/rails console

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; User.count
  SQL &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.9ms&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  USE &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;my_app_development]
   &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2.1ms&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;  SELECT COUNT&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; FROM &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;thanks&quot;&gt;Thanks!&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/power-moves/thanks-6a02ee3951e46a9891740dcb02ee9aee4bef4eee8de029992554b479a8ce4983.jpg&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--third tb-Img--half--sm&quot; alt=&quot;The MetaSkills Power Move&quot; /&gt;There are a lot of good people working hard every day to make your experience with Ruby &amp;amp; SQL Server amazing. From engineers at Microsoft all the way to individual contributors on the Rails SQL Server repos.&lt;/p&gt;

&lt;p&gt;In the coming weeks, we hope to do so much more. What might be next? Maybe better integration to JRuby within the adapter. Maybe native cross-platform tools to script large databases when the Rails DSL can not represent that schema. All of this is in the works.&lt;/p&gt;

&lt;p&gt;I am very proud to be a part of this community and hope you find time to stop by and help, or drop a friendly note/issue about your experiences with Ruby &amp;amp; SQL Server. Lastly, thanks to CustomInk for supporting our passion projects and individual causes.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://weblog.rubyonrails.org/2017/4/27/Rails-5-1-final/&quot;&gt;Rails 5.1 Release Post: Loving JavaScript&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://technology.customink.com/blog/2015/10/19/microsofts-first-open-source-datacamp/&quot;&gt;Microsoft&amp;#39;s Open Source Kickoff w/Ruby&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/rails-sqlserver&quot;&gt;Rails &amp;amp; SQL Server on GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/pull/599&quot;&gt;Exploring JDBC Adapter Connection Mode&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 06 Jun 2017 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2017/06/06/power-moves-rails-docker-and-sql-server-on-linux/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2017/06/06/power-moves-rails-docker-and-sql-server-on-linux/</guid>
      </item>
    
      <item>
        <title>Disabling Image Loading with Rails System Tests</title>
        <description>&lt;p&gt;Disabling external assets like JavaScript or images can improve the performance of your Rails System Tests. Capybara is the acceptance test framework abstracted by Rails System Tests. It will load all assets on a page before proceeding to the next step in your test.  Since, we are only testing interactions with Rails System Tests, we can reduce the page load time by ignoring images, external scripts and fonts.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://weblog.rubyonrails.org/2017/4/27/Rails-5-1-final/&quot;&gt;Rails 5.1&lt;/a&gt; introduced SystemTestCase. It is a nice abstraction around Capybara providing a sane default configuration. The &lt;code&gt;driven_by&lt;/code&gt; configuration method allows you to pass additional options to the underlying ChromeDriver.&lt;/p&gt;

&lt;p&gt;If your using the default &lt;code&gt;ApplicationSystemTestCase&lt;/code&gt; it is configured to use the &lt;code&gt;:chrome&lt;/code&gt; web driver with Selenium. This uses the ChromeDriver executable to communicate with the Chrome browser. Disabling image loading is not immediately obvious.&lt;/p&gt;

&lt;p&gt;To disable image loading with the ChromeDriver, you need to configure a profile option that is passed to the Chrome browser. I found the solution on this issue: &lt;a href=&quot;https://github.com/webdriverio/webdriverio/issues/1056&quot;&gt;Disable image with chromedriver · Issue #1056 · webdriverio/webdriverio · GitHub&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To disable image loading for Rails SystemTestCase using the ChromeDriver pass the &lt;code&gt;prefs&lt;/code&gt; profile option:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;test_helper&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ApplicationSystemTestCase&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SystemTestCase&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;driven_by&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:selenium&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;using: :chrome&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;screen_size: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1400&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1400&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
            &lt;span class=&quot;ss&quot;&gt;options: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
              &lt;span class=&quot;ss&quot;&gt;prefs: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;ss&quot;&gt;profile: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                  &lt;span class=&quot;ss&quot;&gt;default_content_setting_values: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;images: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# disable image loading&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
              &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you like to learn more about Rails System Tests, I recommend watching &lt;a href=&quot;https://youtu.be/sSn4B8orX70&quot;&gt;RailsConf 2017: Building Rails ActionDispatch::SystemTestCase Framework by Eileen Uchitelle&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 01 Jun 2017 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2017/06/01/disabling-image-loading-with-rails-systemtests/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2017/06/01/disabling-image-loading-with-rails-systemtests/</guid>
      </item>
    
      <item>
        <title>Working For DC's Best Tech Manager</title>
        <description>&lt;div class=&quot;tb-Masthead&quot;&gt;
  &lt;img src=&quot;/assets/content/best-tech-manager/masthead-1776-keyboard-artwork-a03546719667c8d597ffeb1759620267cb70feb53862698820f57c31cc5d07cd.jpg&quot; class=&quot;tb-Img tb-Img--fancy&quot; alt=&quot;Old Keyboard artwork at @1776 offices.&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;Andrew Willis Wins Timmy Award for DC&amp;#39;s Best Tech Manager&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;a href=&quot;http://www.techinmotionevents.com&quot;&gt;Tech in Motion&lt;/a&gt;, a national networking organization for technology professionals founded by &lt;a href=&quot;http://www.jobspringpartners.com&quot;&gt;Jobspring Partners&lt;/a&gt; and &lt;a href=&quot;http://www.workbridgeassociates.com&quot;&gt;Workbridge Associates&lt;/a&gt;, recently celebrated its 2016 DC Timmy Award Honorees.  The Timmy Awards recognize DC&amp;#39;s Best Tech Startup, Best Tech Manager, and Best Work Culture.  The Timmy Awards in DC are unique in that they showcase the breadth of innovation in our nation&amp;#39;s capital.  Often DC is labeled as being tied to government organizations; however, the Timmy Awards demonstrate that while there are innovative outcomes from government, the modern DC environment has outgrown its government roots.  In fact the finalists for Best Tech Startup vary from &lt;a href=&quot;https://www.senseware.co&quot;&gt;wireless monitoring&lt;/a&gt; to &lt;a href=&quot;http://www.innovatorsbox.com&quot;&gt;creativity generation&lt;/a&gt; to &lt;a href=&quot;http://gravyanalytics.com&quot;&gt;consumer intelligence&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/best-tech-manager/andrew_willis_2016-timmy-awards-9bf9100b19b6a6b21f6bb9e343352ccb908258dcff8ad02c359da0a5d0ea6f9d.jpg&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--responsive tb-Img--half&quot; alt=&quot;Andrew Willis wins the 2016 Timmy Award&quot; /&gt;
CustomInk is very proud to have Andrew Willis, VP of Ecommerce Technology, win this year&amp;#39;s Timmy Award for DC&amp;#39;s Best Tech Manager.&lt;/p&gt;

&lt;p&gt;I first met Andrew last year when I interviewed at CustomInk for my current Engineering Manager position.  As an outsider I felt that CustomInk had one of the best groups of engineers in the DC area.  I had met and gotten to know several Inker engineers at local DC events and was curious to understand how CustomInk had been able to build such a talented team.  I was also fascinated to understand how CustomInk was able to keep engineers for such long tenures.  It seemed that everyone had been working there for more than five years.  After accepting my current position and getting to know Andrew Willis, I quickly understood that CustomInk&amp;#39;s strong engineering team was a reflection of his strong leadership.&lt;/p&gt;

&lt;p&gt;Having worked for three startups and several established organizations, I&amp;#39;ve witnessed the lack of great leadership in our engineering profession.  I believe that engineers are simply reluctant to move in to management positions because it makes keeping up with the pace of change within technology extremely difficult.  This is exactly what makes Andrew so great.  He has built and maintained a detailed level of engineering knowledge while also acquiring an understanding of our industry matched by few.  He has the ability to switch from business decisions to software development decisions in a way that reminds me of &lt;a href=&quot;https://www.joelonsoftware.com/2006/06/16/my-first-billg-review/&quot;&gt;Joel Spolsky&amp;#39;s first Bill Gates Review&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Another reflection of his leadership is that Andrew develops deep relationships with all of our engineers.  People love to work in his organization because he truly values building and growing a culture that values people.  He has set a cornerstone based upon learning, teamwork, managing risks, and having fun.  Most importantly Andrew builds trust within our team by valuing transparency.  He readily admits when he&amp;#39;s speaking from a place of opinion rather than established fact and even offers up transparency on how well researched his opinion might be.  This trust is truly a two way street at CustomInk too.  This was reflected when Andrew stood on stage to accept his Timmy and quickly joked &amp;quot;what kind of manager would I be if I just stood here and spoke; I think my team should do that instead.&amp;quot;&lt;/p&gt;

&lt;p&gt;Finally, Andrew often says that he feels the phrase &amp;quot;soft skills&amp;quot; is poorly labeled because we really should work &amp;quot;hard&amp;quot; at how we work with each other.  Andrew puts serious time, thought, and effort into growing how we work.  The result is an environment where engineers feel challenged, enjoy working with each other, and are constantly learning innovative ways to solve problems.  In the industry of software development, we need more leaders who support our engineers in this way.  This is why all of the engineers on our team are excited to see Andrew named DC&amp;#39;s Best Tech Manager.&lt;/p&gt;

&lt;p&gt;Congrats Andrew!&lt;/p&gt;
</description>
        <pubDate>Sun, 11 Dec 2016 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2016/12/11/timmy-award-winner/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/12/11/timmy-award-winner/</guid>
      </item>
    
      <item>
        <title>Making Static Components Stateful With CSS/Sass</title>
        <description>&lt;style&gt;
  .highlight {
    font-size: 14px;
    font-family: 'Source Code Pro', Menlo, Consolas, Monaco, monospace;
  }
  .highlight pre {
    border: 1px solid rgb(238, 238, 238);
    background-color: white;
  }
  .highlight span.s  { color: rgb(170, 17, 17); }
  .highlight span.nt { color: rgb(34, 17, 153); }
  .highlight span.c  { color: rgb(204, 204, 204); }
  .highlight span.na { color: rgb(85, 85, 85); }
&lt;/style&gt;

&lt;div class=&quot;tb-Masthead&quot;&gt;
  &lt;img src=&quot;/assets/content/static-components/masthead-colors-1162421fd0b8eb402443a61e871590d33767dfb7f2ca6fca439c5a1fd83e9b38.jpg&quot; class=&quot;tb-Img tb-Img--fancy&quot; alt=&quot;Colored pencils.&quot; /&gt;
&lt;/div&gt;

&lt;p&gt;Searching for some &lt;a href=&quot;https://www.customink.com/products/results?keyword=ladies+red+hoodie&amp;searchType=techblog&quot;&gt;red ladies hoodies&lt;/a&gt; to wear at your team&amp;#39;s event this Fall? How about a &lt;a href=&quot;https://www.customink.com/products/results?keyword=purple+heathered+t-shirt&amp;searchType=techblog&quot;&gt;purple heathered t-shirt&lt;/a&gt; for your group&amp;#39;s outing? Last month we launched an exciting change to our product catalog – the ability to filter styles whose color(s) match a simplified name or filter.&lt;/p&gt;

&lt;p&gt;Finding your customizable apparel in the right color is now easier than ever. And thanks to our usage of &lt;a href=&quot;http://technology.customink.com/blog/2014/08/26/modular-css-with-suit/&quot;&gt;SUIT-based CSS components&lt;/a&gt;, along with the ability to leverage existing Rails&amp;#39; fragment caches, the feature was both easy to develop and beneficial to our applications&amp;#39; performance.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;tiny-atomic-component-with-state&quot;&gt;Tiny Atomic Component with State&lt;/h3&gt;

&lt;p&gt;So how did we get there and how do static and stateful CSS components work? What constraints did we face that ended up being performance features? To answer that, let&amp;#39;s first have a basic review of a SUIT-based component. We will start small with an atomic pattern, a color swatch. Then work our way upward to the higher UI interface, our product cards.&lt;/p&gt;

&lt;p&gt;&lt;p
  data-height=&quot;326&quot;
  data-theme-id=&quot;light&quot;
  data-slug-hash=&quot;rWLEVg&quot;
  data-default-tab=&quot;css&quot;
  data-user=&quot;MetaSkills&quot;
  data-pen-title=&quot;SUIT-based Swatch Component&quot;
  class=&quot;codepen&quot;&gt;
  See the Pen &lt;a href=&quot;http://codepen.io/MetaSkills/pen/rWLEVg/&quot;&gt;SUIT-based Swatch Component&lt;/a&gt;
  by Ken Collins (&lt;a href=&quot;http://codepen.io/MetaSkills&quot;&gt;@MetaSkills&lt;/a&gt;)
  on &lt;a href=&quot;http://codepen.io&quot;&gt;CodePen&lt;/a&gt;.
&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;Not a lot here, but it does illustrate a key design principle of SUIT, &lt;a href=&quot;https://github.com/suitcss/suit/blob/master/doc/naming-conventions.md#is-stateOfComponent&quot;&gt;component state&lt;/a&gt;. Here, when a swatch gains the &lt;code&gt;is-selected&lt;/code&gt; class we show an SVG check mark indicating the change. SUIT&amp;#39;s component state will be our main building block for theming other components and turning static HTML/CSS into magically dynamic interactions. In this case, our product cards. Let&amp;#39;s have a quick look at what they look like.&lt;/p&gt;

&lt;h3 id=&quot;introduction-to-the-productcard&quot;&gt;Introduction to the ProductCard&lt;/h3&gt;

&lt;p&gt;&lt;p
  data-height=&quot;210&quot;
  data-theme-id=&quot;light&quot;
  data-slug-hash=&quot;LbZwag&quot;
  data-default-tab=&quot;html&quot;
  data-user=&quot;MetaSkills&quot;
  data-pen-title=&quot;SUIT-based Product Card Component&quot;
  class=&quot;codepen&quot;&gt;
  See the Pen &lt;a href=&quot;http://codepen.io/MetaSkills/pen/LbZwag/&quot;&gt;SUIT-based Product Card Component&lt;/a&gt;
  by Ken Collins (&lt;a href=&quot;http://codepen.io/MetaSkills&quot;&gt;@MetaSkills&lt;/a&gt;)
  on &lt;a href=&quot;http://codepen.io&quot;&gt;CodePen&lt;/a&gt;.
&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/static-components/augusta-juniors-spirit-hooded-sweatshirt-card-c52feb507554ff32696a424b330090a49555c337db1e7fdbbd975e2789dbe482.jpg&quot; class=&quot;tb-Img tb-Img--third tb-Img--half--sm&quot; alt=&quot;CustomInk Product Card Component - Before Color Magic&quot; /&gt;
The HTML for our catalog&amp;#39;s listing pages generally follow this format. Each &lt;code&gt;ProductCard&lt;/code&gt; component is a child element inside another higher level presentation component. The image here illustrates the initial state of each product card. Basically a laydown image, title, and misc details.&lt;/p&gt;

&lt;p&gt;Each product card &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt; is the result of an API call who&amp;#39;s HTML is fragment cached. We do all the normal hot stuff like using &lt;a href=&quot;http://www.justinweiss.com/articles/a-faster-way-to-cache-complicated-data-models/&quot;&gt;read multi and pipelining&lt;/a&gt; to turn API requests into rendered content. Our goal was to reuse these while still presenting a visually different card when color(s) are selected. The challenge, how to avoid embedding state in each fragment and essentially limited their usage across the catalog.&lt;/p&gt;

&lt;p&gt;The answer is simple. Build each card with all of its information, then put the state on the &lt;code&gt;div.Styles-products&lt;/code&gt; wrapper component and use that state to theme each card.&lt;/p&gt;

&lt;h3 id=&quot;the-stateful-productcard&quot;&gt;The Stateful ProductCard&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/static-components/augusta-juniors-spirit-hooded-sweatshirt__start-74181b4f7ae39b74e8fcb4d64d5c2eefba3d328b1e4841ceb84908b5ec3b50ae.gif&quot; class=&quot;tb-Img tb-Img--third tb-Img--half--sm&quot; alt=&quot;CustomInk Product Card Component - Before/After Selecting a Color&quot; /&gt;
Our stateful product cards driven by color filters will be visually different in two ways. First, the laydown image will change to a color-specific one. Second, swatches matching the selected color will appear below the details. This post will focus only on swatches. But the technique is the same for laydown to color images.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Styles&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;div&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Styles-products
              is-filteredColor
              is-filteredColor--red&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Static Fragments --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Starting with the HTML, here is our working solution. We are adding SUIT state classes to the wrapper holding all product cards. One indicating that these cards are now being filtered by color and other modifier state(s) which indicate one to many filtered color names. Adding and removing these classes will update any product card&amp;#39;s presentation, no JavaScript needed.&lt;/p&gt;

&lt;h4 id=&quot;theming-with-suit-sass&quot;&gt;Theming with SUIT &amp;amp; Sass&lt;/h4&gt;

&lt;p&gt;Using SUIT (like BEM) means that component style selectors have a known &lt;a href=&quot;https://css-tricks.com/specifics-on-css-specificity/&quot;&gt;specificity&lt;/a&gt; of only 10. Composing and theming is a simple matter of using the cascade and nested specificity to our advantage.&lt;/p&gt;

&lt;p&gt;&lt;p
  data-height=&quot;206&quot;
  data-theme-id=&quot;light&quot;
  data-slug-hash=&quot;bBwNyE&quot;
  data-default-tab=&quot;css&quot;
  data-user=&quot;MetaSkills&quot;
  data-pen-title=&quot;SUIT-based Product Card Component (themed-part1)&quot;
  class=&quot;codepen&quot;&gt;
  See the Pen &lt;a href=&quot;http://codepen.io/MetaSkills/pen/bBwNyE/&quot;&gt;SUIT-based Product Card Component (themed-part1)&lt;/a&gt;
  by Ken Collins (&lt;a href=&quot;http://codepen.io/MetaSkills&quot;&gt;@MetaSkills&lt;/a&gt;)
  on &lt;a href=&quot;http://codepen.io&quot;&gt;CodePen&lt;/a&gt;.
&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;We start off by giving our little atomic color swatch components a happy home within our product cards using a SUIT descendant element/selector. A component&amp;#39;s initial presentation is sans-state. So we hide the swatches wrapper. We also start our new &lt;code&gt;.Swatch&lt;/code&gt; theme by nesting it inside the card component. The compiled CSS creates a descendant selector ensuring our theme is a) scoped to the component and b) has a specificity equal to 20. Next, giving our cards some stateful presentation.&lt;/p&gt;

&lt;h4 id=&quot;adding-state-based-theming&quot;&gt;Adding State-Based Theming&lt;/h4&gt;

&lt;p&gt;&lt;p
  data-height=&quot;306&quot;
  data-theme-id=&quot;light&quot;
  data-slug-hash=&quot;NbRGvL&quot;
  data-default-tab=&quot;css&quot;
  data-user=&quot;MetaSkills&quot;
  data-pen-title=&quot;SUIT-based Product Card Component (themed-part2)&quot;
  class=&quot;codepen&quot;&gt;
  See the Pen &lt;a href=&quot;http://codepen.io/MetaSkills/pen/NbRGvL/&quot;&gt;SUIT-based Product Card Component (themed-part2)&lt;/a&gt;
  by Ken Collins (&lt;a href=&quot;http://codepen.io/MetaSkills&quot;&gt;@MetaSkills&lt;/a&gt;)
  on &lt;a href=&quot;http://codepen.io&quot;&gt;CodePen&lt;/a&gt;.
&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;This is where the fun starts. I recommend checking the CodePen&amp;#39;s compiled view to see how Sass&amp;#39; &lt;code&gt;@at-root&lt;/code&gt; works in conjunction with the &lt;code&gt;&amp;amp;&lt;/code&gt; operator. What is happening here is that we are theming product cards using the &lt;code&gt;is-filteredByColor&lt;/code&gt; state of the content container for all cards within it. The result is not visible yet, but we are un-hiding the swatches container by switching its display back to block. Let&amp;#39;s use the same technique for the swatches within.&lt;/p&gt;

&lt;p&gt;&lt;p
  data-height=&quot;446&quot;
  data-theme-id=&quot;light&quot;
  data-slug-hash=&quot;NbRRKm&quot;
  data-default-tab=&quot;css&quot;
  data-user=&quot;MetaSkills&quot;
  data-pen-title=&quot;SUIT-based Product Card Component (themed-part3)&quot;
  class=&quot;codepen&quot;&gt;
  See the Pen &lt;a href=&quot;http://codepen.io/MetaSkills/pen/NbRRKm/&quot;&gt;SUIT-based Product Card Component (themed-part3)&lt;/a&gt;
  by Ken Collins (&lt;a href=&quot;http://codepen.io/MetaSkills&quot;&gt;@MetaSkills&lt;/a&gt;)
  on &lt;a href=&quot;http://codepen.io&quot;&gt;CodePen&lt;/a&gt;.
&lt;/p&gt;&lt;/p&gt;

&lt;p&gt;This changes the game entirely. All we have to do now is add state classes to our parent wrapper for one to many colors and it completely changes the interaction of our product cards. The results are magical! Please &lt;a href=&quot;https://www.customink.com/products&quot;&gt;browse our catalog&lt;/a&gt; and check it out for yourself.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/static-components/final-results-280dbcfd02fcea204dc683e446c3d09edba179cf246012c624b2884ca7f0b214.jpg&quot; class=&quot;tb-Img tb-Img--fancy&quot; alt=&quot;Final results of statfully wrapped product cards&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Have any questions? Please drop a comment. I would love to share more details of how this works for us and maybe how using state in your CSS can help you too. Cheers!&lt;/p&gt;

&lt;h3 id=&quot;more-resources&quot;&gt;More Resources&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://technology.customink.com/blog/2014/08/26/modular-css-with-suit/&quot;&gt;Modular CSS with SUIT CSS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://technology.customink.com/blog/2014/09/19/single-class-vs-multi-class-css/&quot;&gt;Single Class vs. Multi Class CSS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.justinweiss.com/articles/a-faster-way-to-cache-complicated-data-models/&quot;&gt;A Faster Way to Cache Complicated Data Models&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://css-tricks.com/specifics-on-css-specificity/&quot;&gt;Specifics on CSS Specificity&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;script async src=&quot;https://production-assets.codepen.io/assets/embed/ei.js&quot;&gt;&lt;/script&gt;
</description>
        <pubDate>Thu, 17 Nov 2016 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2016/11/17/stateful-static-components-with-css/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/11/17/stateful-static-components-with-css/</guid>
      </item>
    
      <item>
        <title>Stateful Staic Components With Css</title>
        <description></description>
        <pubDate>Thu, 17 Nov 2016 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2016/11/17/stateful-staic-components-with-css/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/11/17/stateful-staic-components-with-css/</guid>
      </item>
    
      <item>
        <title>A Spooky Ink-o-ween!</title>
        <description>&lt;p&gt;This year we had a great showing of costumes in the office for Halloween&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/front-desk-e82945632033105b967fd98c112c6a6c682b6adde160e59d6ac23b3b6cd69e78.jpg&quot; class=&quot;tb-Img--fancy tb-Img--half&quot; alt=&quot;CustomInk Spooky Front Desk&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;happy-halloween-customink&quot;&gt;Happy Halloween CustomInk!!!&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;When witches go riding, and black cats are seen, the moon laughs and whispers, &amp;quot;&amp;#39;Tis near Halloween&amp;quot;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;I loved seeing all the spooky spirit in the office!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/dragondojo-58da63b265a6572c05005798bbae2923236dbb11ff6536586a4c690768ff5dde.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/dojodecor-ebb87cae436d350cf424c4863e0b1eef7f08513d5395f257d4e7ac905610813b.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/3rdfloordecor-b12e16005ab1fd7e5dde87a8690da4769ea8c01172132d603c62786634be01dc.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Got some scary dessert-for-breakfast at The Treat, vanishing like ghosts!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/treats-499d5397bf53f308a64559a6a24dc996e94e9cca0d4e2680a9c863d98b3343a9.jpg&quot; class=&quot;tb-Img--fancy tb-Img--responsive&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Good thing we had this crew all suited up and ready to bust some Ghost-butt!&lt;/p&gt;

&lt;h4 id=&quot;who-you-gonna-call&quot;&gt;WHO YOU GONNA CALL?&lt;/h4&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/9yMoBiL2ZSE&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/ghost-busters-chill-ba8e5cbcbdac45705289882cbc621b2792a6b9cfb71681e788858b00ee300140.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/ghost-buster-coffee-d8f5f857a286f5ad3e2fdf8a4653cd072ee18d899b706340bb41a159488e3b7f.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We had lots of other heroes in the office...&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/wolverine-48b1dc13d593618726fe2b42ed46fdb7356ca76a0ead2732ce8375d5bdf00de6.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/avengers-3d415f55c4b62e0cae5e221953fb690ca457531f219601d48f221b3fc767e4f4.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/batmankolas-0f0e2540300eea8cc63390ea859c691a7473c3a66fd0d4a072291dcaadaba65c.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/link-fcac7b1644d9c194aa351c5067cad22fd3ebfca2f502e385774ecf874beeedc1.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;But plenty of villains too!!!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/staypuft-db7844cae519ea7656b9c7a4a518c2d9ac67e0ebab21646ba0ead49bde1d57d6.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/scream-e6f73a68804b13c246f8550a50556df82e8520a8886c68567fee958d73bd6ba8.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/disneyvillans-7739775657501c562464f1b5e1fa3c2b616c039a584e92c7cde9586b79e3b342.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;And... a great mix of everything from Star Wars to Cats cat!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/star-wars-57e16a7f95a92e516d2566c87112aa459392b7c09510ecb148063292d44792b5.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/phasmazoo2-7e8b69a9907f48a643a36c35480c56d780066913e0c04eaa98f8015c0a04877b.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/tacobell-6db2d1114366296f718f492b1511116575466f5446b11ef85e03afa3249de1de.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/ewok-1ab5c5e3c2a1cc0b60e753a49894eabf5356a61401d5ef57418262e912c73e44.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/underthesea-12debc7e9e40d9064c59ed13c01efaf91c6d81c32cd294a315d57b6606a7d98d.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/browsers-bca956e9391b922787864d911d7edcbcb0fc35988ff89e7bf5c78df45df3bea0.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/marty-4fad90ff89ddad37f583d12ab6a5b8e87c8abdc84c91dff4cede3db562989128.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/cats-a4d7d6dc357679f187e95325aa1222ea85cd135dc1c8dd9119dccb8b3ffdf761.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/hackerman-26c059edcb3ed46a5ca16f9e70dca7d8a5a4b429e240af8689c8f2ab364bd715.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/calvinhobbes-73b644eb0738f1ae69ac13d8a7d0fc3b3d1896994cdb1771998d1ae9f69d52be.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/bobross-c56f9fcbc149ce4056516a2ba9eba642c0b154f6d0b5d46e95730382f9938d90.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/beaten-3433ad50ec6f2f30cbcbc6a3240c257d56466a0f5b559e6ebc637dc64d402406.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/basketball-f9287b64ec244af3262872268c73649607b41089270770a4243b960715d287b9.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/conventioncon-af7a30fcb37c39e2df4b8982a2a0f4564bdc38965535610fb1fa194537e6f576.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/disney-008a7308795952b9693489a2b9fbf1d0dd8523eb0b23c5493a49d2718339118f.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/fridaynightlights-81fe769d4d123afb3c978f551abe389efe63445913ad239fc8e715bfc7b9c6ae.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/maverik-7701cfb7f5e95cf16ec07fb06515a4ba926b94a22db50a24d90750aba694e514.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/ghostbustwothers-fd33c4a8aee6f89e9e9cdef50dd7dac725a436acbeb44a9b9783eb6c68e108df.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/bustghost-d79f9f5486bd4776f06a8e644a91ceb1a40b75b1e63df1dfebc61e856b1ba678.jpg&quot; class=&quot;tb-Img--fancy tb-Img--half&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/motherofdragons-a711c90a28b4e33a0f46f2905273f0b53a819e71c512b403982c15122f85b304.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/oz-6e28ce6c1982758a53738c1be3168c671e41220479fd09a12ccfdf45288d3740.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/tinkerpeter-1a73b63ec25b7568d3c124c1df421d9886a7f0f29fd4fb9b9f4087dd5fb17c2b.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/customink-2a2947526c929e11631c4ac954ccc94e460a07c445d1366d0d453aaa134efe90.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/deer-24e610cee9e92a51e3310908a7de76d92d906caf5788e693184b7900d4bd4617.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/eleven-9c006be4ebca93dd5dddc63264f7c9ec06ae993b32dbd47348a8daa9abdac6b8.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/emojitwins-d4c96127519fec07b4272a6d5c6800c26f72752a76e28654d1bf562dbc2b37de.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/famous-5d930700749fb3ee3ee49e74b48180f391105f77f501696b4b0eb964ff24bd9a.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/frieda-1341da9d27a8d5d105151d8d61579815db679c0aee80975327c6508a82141052.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/greek-f4fe387f6e29820431da715c89037e9dd26f7cc37921118290652569d7f0f28c.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/leslieknope-7c1bdd7022968cf7412ff433249772fb69cc85e22b034422424adc8c2edbf0d3.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/magicbus-ecdfd404f46cb4c67209e678c247941ede61bafc1dd76887069563a0b7720c4d.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/military-7535a7b49db2df282598c9ee8e61845ba863accc660bb2e4fe5c8db39527fab0.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/mortecai-2f28aa6a1fa339c6f7a8f1399d60d53c6a45e4ea077aae93c317f9417852e27d.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/rainingmen-0c44013e150e07de9fb94fb35c6e9aa758e5e42ffd5df6e5c66f15875161a8ed.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/rugrats-ee6081d324e4987be7ac529dd48ea9281c6118968803ef94ffd71f34c2499932.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/willywonka-a463d4774cddff679c1d0cf412c943f6a6dd12055a8521e27e6a385cd43f28c3.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/superbaby-a3e7f0efdca96f8caea133fafa9c2c0f6d91bc576ac8508882f3081a4102fa38.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;
&lt;img src=&quot;/assets/content/halloween2016/panda-c0f52400e771376e02cf9921ad8c2f5c9603eb8704cbfd37231ef09b9ad7e567.jpg&quot; class=&quot;tb-Img--fancy tb-Img--quarter&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/maverick-buster-ea391333cd97de93109c85f44d737d29b9c2de3faa2e0ae620cbd7f9271316da.jpg&quot; class=&quot;tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;What a spooky Ink-o-ween it was!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/halloween2016/slimmerghost-6a367bd3202458529d4b11767679742c56d523e0320765f029bdcf731337e0b8.gif&quot; class=&quot;tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;now-please-enjoy-some-bad-halloween-jokes&quot;&gt;Now, please enjoy some bad Halloween jokes....&lt;/h4&gt;

&lt;p&gt;&lt;strong&gt;Q:&lt;/strong&gt; Who won the skeleton beauty contest? &lt;br /&gt;
&lt;strong&gt;A:&lt;/strong&gt; No body.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Q:&lt;/strong&gt; What do you call a monster with a broken leg? &lt;br /&gt;
&lt;strong&gt;A:&lt;/strong&gt; A hoblin goblin.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Q:&lt;/strong&gt; Why do ghosts enjoy ridding in elevators? &lt;br /&gt;
&lt;strong&gt;A:&lt;/strong&gt; It raises their spirits.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Q:&lt;/strong&gt; What’s it like to be kissed by a vampire? &lt;br /&gt;
&lt;strong&gt;A:&lt;/strong&gt; It’s a pain in the neck.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Q:&lt;/strong&gt; What do you get when you divide the diameter of a jack-o-lantern by it&amp;#39;s circumference? &lt;br /&gt;
&lt;strong&gt;A:&lt;/strong&gt; Pumpkin Pi&lt;/p&gt;

&lt;p&gt;Feel free to share more pictures of the spooky fun or punny Halloween jokes in the comments!&lt;/p&gt;
</description>
        <pubDate>Tue, 01 Nov 2016 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2016/11/01/a-spooky-ink-o-ween/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/11/01/a-spooky-ink-o-ween/</guid>
      </item>
    
      <item>
        <title>Rebuilding the Plane We're Flying In</title>
        <description>&lt;p&gt;Three years ago, we were part way through the process of moving all of our servers and infrastructure from a single colocation facility to a multiple availability zone Amazon virtual private cloud. Things were going well and the business was booming, but we had a major problem. The old Storage Area Network (disk drive system shared by many of our servers) was going to run out of capacity in a matter of months.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/rebuilding-the-plane-were-flying-in/cowboy_airplain-69c9c283776f8da4b84af61f8a74792e5404a0e7060797228633197f7d68dfdd.png&quot; alt=&quot;riding an airplane&quot;&gt;&lt;/p&gt;

&lt;p&gt;This problem didn&amp;#39;t appear suddenly. It was something we&amp;#39;d discussed for years. We had outlined plans for how to clean up disk space and update applications to no longer need the old disk system. Unfortunately doing this sort of technical cleanup had always lost out to other work that actually drove the business forward instead of insuring that it wouldn&amp;#39;t stop.&lt;/p&gt;

&lt;p&gt;Just so we&amp;#39;re clear: If we&amp;#39;d hit capacity on this system, the business would have stopped. We would not have been able to either take or fulfill any more orders. That would have put the brakes on over 500 people getting their jobs done and would have made for a really horrible customer experience (something we care a lot about).&lt;/p&gt;

&lt;h3 id=&quot;brainstorming-a-solution&quot;&gt;Brainstorming a Solution&lt;/h3&gt;

&lt;p&gt;Within the Web Operations team, we started to have a series of informal discussions talking through how we could solve the problem without forcing the company to stop other work and without spending massive amounts of money.&lt;/p&gt;

&lt;p&gt;We actually had a lot of data that we knew could be deleted from the system to free up space. The problem was that deleting the data too quickly resulted in saturating the throughput of the system. That caused all the applications that depended on it slow to a crawl. Our site became unusable.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/rebuilding-the-plane-were-flying-in/lightening_brain-ea6ff38f13d583effb8c25912d0b47ea936a855d7fb0e5336fde5ff408b67d5f.png&quot; alt=&quot;lightening brain&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Still it made sense to make cleaning up the drive space part of the solution. &lt;em&gt;Joe Ritchey&lt;/em&gt; set to work writing scripts that throttled the cleanup process. Even with the scripts running 24x7 we weren&amp;#39;t buying ourselves much time.&lt;/p&gt;

&lt;p&gt;We knew that ideally we&amp;#39;d switch to using Amazon&amp;#39;s Simple Storage Solution, but that would require significant code changes to most of our applications.&lt;/p&gt;

&lt;p&gt;Gluster File System became our technology of choice. Applications wouldn&amp;#39;t need to know whether the servers were using Gluster or our SAN. Since we had already moved some of our infrastructure to AWS we had several unused servers sitting around. They didn&amp;#39;t have much disk space, but for less than the cost of a new server we could buy enough new drives to equal the capacity of our old SAN.&lt;/p&gt;

&lt;p&gt;Gluster also has the ability to do geo-replication. That meant that moving files to Gluster inside our colocation facility would also give us a way to replicate it into the cloud. After a few days of informal discussion we had a plan.&lt;/p&gt;

&lt;p&gt;On my way out of the office that evening, &lt;em&gt;Doug Wilson&lt;/em&gt; mentioned that he was really interested in learning Gluster and working on the data migration. Sounded like he was volunteering to me, so the project landed in his lap (the whole team would be working on it of course, but Doug took the lead on researching and implementing Gluster).&lt;/p&gt;

&lt;h3 id=&quot;swapping-in-new-parts&quot;&gt;Swapping in New Parts&lt;/h3&gt;

&lt;p&gt;I put the order for the drives on my company card and by the next week we had a pair of Gluster servers up and running. Shortly after that we ranked the applications based on the risk to the business if we lost data and started migrating them to using Gluster.&lt;/p&gt;

&lt;p&gt;It was still a balancing act. The existing data had to be copied from the SAN to Gluster and we had the same issue with saturating the throughput as we did with the cleanup scripts. Never-the-less we gradually got to the point where we were freeing up disk space faster than we were using it.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/rebuilding-the-plane-were-flying-in/wrench_man-d5d169c1acc3b30fa6dfa8ba665226816de30dbe87edd9cf68690b497f1c3488.png&quot; alt=&quot;mechanic&quot;&gt;&lt;/p&gt;

&lt;p&gt;In the end we made it through the busiest period the company had ever seen in it&amp;#39;s 12 years of existence while completely re-creating the shared storage solution it depended on.&lt;/p&gt;

&lt;p&gt;We actually did work closely with our development teams to move completely out of the colocation facility, and at this point we are close to having removed the need for even the Gluster filesystem. We&amp;#39;ve largely managed to do it without any negative impact to the company which now has over 1,500 employees. I love working with a team that is creative enough to find ways to pull off massive changes like this.&lt;/p&gt;
</description>
        <pubDate>Tue, 16 Aug 2016 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2016/08/16/rebuilding-the-plane-were-flying-in/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/08/16/rebuilding-the-plane-were-flying-in/</guid>
      </item>
    
      <item>
        <title>How to add badges to iterm2</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://www.iterm2.com/index.html&quot;&gt;iTerm2&lt;/a&gt; - the popular terminal emulator for OSX has added some really neat features. One of those is badges. &lt;a href=&quot;https://www.iterm2.com/documentation-badges.html&quot;&gt;From the documentation&lt;/a&gt;: A badge is a large text label that appears in the top right of a terminal session to provide dynamic status, such as the current host name or git branch.&lt;/p&gt;

&lt;p&gt;I had some trouble figuring out how to build a badge so I wanted to share a quick walk-through. Thanks to &lt;a href=&quot;https://twitter.com/cmar&quot;&gt;Chris Mar&lt;/a&gt; for walking me through the process.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;First, a couple of things to keep in mind. This walk-through includes code for &lt;a href=&quot;http://www.zsh.org/&quot;&gt;zshell&lt;/a&gt; but should work for the most part, or be very similar for other popular shells like &lt;a href=&quot;https://www.gnu.org/software/bash/&quot;&gt;bash&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Second, the emoji characters I used in the tutorial are built right into the mac keyboard. Here&amp;#39;s a &lt;a href=&quot;http://www.imore.com/how-insert-emoji-text-os-x-yosemite&quot;&gt;quick tutorial on how to insert them&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here&amp;#39;s the walk-through&lt;/p&gt;

&lt;h3 id=&quot;install-shell-integrations-on-iterm&quot;&gt;Install shell integrations on iTerm.&lt;/h3&gt;

&lt;p&gt;Easy enough - it&amp;#39;s an option on the dropdown menu&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3.amazonaws.com/moarcats/EwGj0.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;p&gt;Open your &lt;code&gt;.zshrc&lt;/code&gt; file and verify that the integrations are installed. iTerm should have added the line &lt;code&gt;test -e &amp;quot;${HOME}/.iterm2_shell_integration.zsh&amp;quot; &amp;amp;&amp;amp; source &amp;quot;${HOME}/.iterm2_shell_integration.zsh&amp;quot;&lt;/code&gt; &lt;code&gt;.zshrc&lt;/code&gt; is the configuration file for Zsh and generally lives in your home directory.&lt;/p&gt;

&lt;h3 id=&quot;declare-a-custom-variable-in-your-zshrc-file&quot;&gt;Declare a custom variable in your &lt;code&gt;.zshrc&lt;/code&gt; file&lt;/h3&gt;

&lt;p&gt;You now need to write a special function in &lt;code&gt;.zshrc&lt;/code&gt; that Zsh understands. It looks like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;iterm2_print_user_vars&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  iterm2_set_user_var bananas &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;do_fun_stuff&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The function &lt;code&gt;iterm2_print_user_vars()&lt;/code&gt; calls &lt;code&gt;iterm2_print_user_vars()&lt;/code&gt; one or more times. The function &lt;code&gt;iterm2_set_user_var&lt;/code&gt; assigns your &lt;code&gt;user var&lt;/code&gt; &lt;code&gt;bananas&lt;/code&gt; to &lt;code&gt;do_fun_stuff&lt;/code&gt;, which can be written directly there or encapsulated in another function.&lt;/p&gt;

&lt;p&gt;Finally you need to declare your &lt;code&gt;user var&lt;/code&gt; in iterm for each profile you want to use it in.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3.amazonaws.com/moarcats/FUnmv.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;lets-create-two-different-examples&quot;&gt;Let&amp;#39;s create two different examples&lt;/h3&gt;

&lt;h4 id=&quot;display-when-theres-a-diff-in-your-git-branch&quot;&gt;Display when there&amp;#39;s a diff in your git branch&lt;/h4&gt;

&lt;p&gt;Add the following to your &lt;code&gt;.zshrc&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;iterm2_print_user_vars&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  iterm2_set_user_var gitDiff &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;is_git_branch_dirty&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;is_git_branch_dirty &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;git diff &lt;span class=&quot;nt&quot;&gt;--shortstat&lt;/span&gt; 2&amp;gt; /dev/null | &lt;span class=&quot;nb&quot;&gt;tail&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n1&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;⚡⚡&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add &lt;code&gt;\(user.gitDiff)&lt;/code&gt; to your badge in the profile settings.&lt;/p&gt;

&lt;p&gt;Couldn&amp;#39;t read the code? Checkout &lt;a href=&quot;http://stackoverflow.com/questions/2188199/how-to-use-double-or-single-bracket-parentheses-curly-braces&quot;&gt;this stackoverflow&lt;/a&gt; for the skinny on brackets in shell scripting. I found it to be quite helpful.&lt;/p&gt;

&lt;h4 id=&quot;how-to-add-a-camel-on-wednesdays-and-an-octopus-on-others&quot;&gt;How to add a camel on Wednesdays and an Octopus on others&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;is_it_wednesday &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; +%A&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Wednesday&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;then
     &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;🐪&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Camel Prompt&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;🐙&quot;&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# Inky Prompt&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add &lt;code&gt;\(user.humpDay)&lt;/code&gt; to your badge in the profile settings.&lt;/p&gt;

&lt;p&gt;Your homework is to combine two badges!
&lt;img src=&quot;https://s3.amazonaws.com/moarcats/mPosM.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 18 Jul 2016 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2016/07/18/how-to-add-badges-to-iterm2/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/07/18/how-to-add-badges-to-iterm2/</guid>
      </item>
    
      <item>
        <title>Contributing to Open-Source</title>
        <description>&lt;p&gt;Over the last six months here at CustomInk we’ve been building an internal Content Management System (CMS) named Inkpress to help various company stakeholders design and publish a wide array of landing pages that drive overall business objectives. Inkpress makes heavy use of &lt;a href=&quot;http://alchemy-cms.com/about&quot;&gt;AlchemyCMS&lt;/a&gt; - an open-source Rails engine - to help power the user interface and manage much of the back-end page template and element data. It’s a fantastic piece of software, but there was one small issue: we rely heavily on using Sass frameworks that are compatible with SassC and hence &lt;a href=&quot;https://github.com/sass/sassc-rails&quot;&gt;SassC::Rails&lt;/a&gt;. Unfortunately, because AlchemyCMS was using the SassyButtons and Compass libraries, we were unable to make use of the super fast SassC pre-processor to make Inkpress as quick and snappy as the rest of the site. As a result, my colleague &lt;a href=&quot;https://twitter.com/metaskills&quot;&gt;Ken&lt;/a&gt; and I decided to reach out to the project’s primary maintainer to get his thoughts on making some contributions that we felt would improve not only his software, but also improve ours in the process. He agreed, and we decided to use this year’s &lt;a href=&quot;http://technology.customink.com/blog/2015/10/07/inkovate-2015-lightning-talks/&quot;&gt;Inkovate&lt;/a&gt; as an opportunity to take the initial leap.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;why-open-source-is-important&quot;&gt;Why Open Source is Important&lt;/h3&gt;

&lt;p&gt;Before jumping into my specific experience contributing to AlchemyCMS, it makes sense to discuss a little bit about why we, at CustomInk, believe that contributing to open source is important. Here are just a few reasons:&lt;/p&gt;

&lt;h4 id=&quot;1-it-builds-community&quot;&gt;1. It Builds Community&lt;/h4&gt;

&lt;p&gt;At CustomInk we put a maaaaajor emphasis on building communities. So much of the work we do as a company orbits around the idea of creating bonds, building bridges, and uniting people around the things they care about. Heck, even our &lt;a href=&quot;http://www.customink.com/&quot;&gt;homepage&lt;/a&gt; proclaims that “We Believe T-shirts Unite!” It’s right there, next to our primary call-to-action. This core business philosophy also happens to line up perfectly with the open-source software model’s very core. The idea (and you can find much of this and more from the &lt;a href=&quot;https://en.wikipedia.org/wiki/Open-source_software&quot;&gt;Open-source software wikipedia page&lt;/a&gt;) is that “collaborative development from multiple independent sources generates an increasingly more diverse scope of design perspective than any one company is capable of developing and sustaining long term.” In other words, community-driven projects are often more useful to more people in more ways for longer amounts of time than those developed by individual entities. As believers in the power of community, it only makes sense that we at CustomInk stay involved in contributing to these types of open-source projects.&lt;/p&gt;

&lt;h4 id=&quot;2-its-great-practice&quot;&gt;2. It&amp;#39;s great practice!&lt;/h4&gt;

&lt;p&gt;Taking some time to redirect your attention away from your day-to-day projects to take on an open-source contribution really helps to hone your skill set. In my case, it forced me to crack open a library we use for one of our company apps and deeply explore its unfamiliar insides. In doing so, I gained even more perspective into the way the library is structured, how the code flows, and what other abilities or limitations might exist. Developing that amount of familiarity with a library we rely on daily has been extremely rewarding and given me even more insight into the context of the entire app-to-engine relationship between Inkpress and AlchemyCMS.&lt;/p&gt;

&lt;h4 id=&quot;3-it-s-incredibly-rewarding&quot;&gt;3. It’s incredibly rewarding&lt;/h4&gt;

&lt;p&gt;This is likely one of the main reasons any of us decided to become software developers in the first place, but it holds particularly true when working in an open-source environment. We all know it’s rewarding to tap on a few keys, click a button, and see our work come to to life and make business impacts, but it’s even more rewarding when the problems we solve and the impacts we make reverberate beyond our immediate environment and extend into the community at large. I may have no idea who else out there is using the AlchemyCMS library, but knowing that the hard work I put into improving its speed also means improving the speed of all those developers’ apps too, really enhances the reward.&lt;/p&gt;

&lt;h3 id=&quot;the-work&quot;&gt;The Work&lt;/h3&gt;

&lt;p&gt;I really want to focus this post more on what I learned as opposed to what Ken and I actually did, but I also feel it makes sense to provide at the very least a basic context of the work involved, so here’s a brief rundown:&lt;/p&gt;

&lt;p&gt;As I mentioned above, the AlchemyCMS engine was depending on two Sass libraries that were prohibitive to moving Inkpress off of the Sass::Rails pre-processor to its new and faster equivalent, SassC::Rails. Our contribution involved removing those two dependencies and rewriting the css with Sass mixins to replace the styles that they provided originally. We ended up using &lt;a href=&quot;http://bourbon.io/&quot;&gt;Bourbon&lt;/a&gt; for a chunk of this. Then we created a helper file required from AlchemyCMS’s &lt;code&gt;engine.rb&lt;/code&gt; that would check for either a &lt;code&gt;sass-rails&lt;/code&gt; or &lt;code&gt;sassc-rails&lt;/code&gt; pre-processor in the parent app and alert its developer in the event it didn’t find one, thus allowing the flexibility for the developer to choose between either Sass or SassC in the main application. Feel free to check out the &lt;a href=&quot;https://github.com/AlchemyCMS/alchemy_cms/issues/1037&quot;&gt;initial issue&lt;/a&gt; we opened to the maintainers, as well as the &lt;a href=&quot;https://github.com/AlchemyCMS/alchemy_cms/pull/1052&quot;&gt;resulting PR&lt;/a&gt;, which was ultimately merged into the master codebase.&lt;/p&gt;

&lt;p&gt;Ken and I working on our AlchemyCMS contribution during Inkovate:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://i.giphy.com/3oEjHJPAMv5dUnK8Sc.gif&quot; alt=&quot;&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;impressions-from-contributing&quot;&gt;Impressions from Contributing&lt;/h3&gt;

&lt;h4 id=&quot;1-getting-started-is-hard-but-totally-worth-it&quot;&gt;1. Getting started is hard, but totally worth it.&lt;/h4&gt;

&lt;p&gt;It’s sometimes difficult to know how and where to start when considering contributing to open-source projects. As an early-career developer myself I’ve heard all kinds of advice on this topic, from tracking down and correcting typos in documentation to suggesting and implementing new features. My personal belief is that it doesn’t make sense to contribute to open-source just for the sake of contributing, but rather that it should be meaningful to you and purpose-driven. Is there a library you use regularly that could use an improvement? Is there an issue that’s important to you that needs open-source support? Maybe you see a problem that needs a solution and you start your own open-source project from scratch! Contributing in a meaningful way to a project that matters to you is the key to getting involved in the open-source world.&lt;/p&gt;

&lt;h4 id=&quot;2-there-s-more-reward-in-familiarity&quot;&gt;2. There’s more reward in familiarity.&lt;/h4&gt;

&lt;p&gt;Similar to the above, I found this PR to the AlchemyCMS project particularly rewarding because it had an effect on an app that I work on regularly, and will improve the quality of our project here at CustomInk. Having some sort of personal familiarity with the problems that your contribution solves can really help bring that extra motivation and result to your work.&lt;/p&gt;

&lt;h4 id=&quot;3-grab-a-buddy&quot;&gt;3. Grab a buddy.&lt;/h4&gt;

&lt;p&gt;Having a partner in crime when you’re contributing to an open-source project really goes a long way. We’ve all heard about the benefits of pair programming, and carrying those same benefits to an open-source contribution can not only enhance the quality of your output, but it drives the project forward faster and enhances the community feeling that’s at the heart of open-source in the first place. I was fortunate enough to team up with my colleague Ken, who was always available to correspond with the maintainers, contribute some code of his own to push the project forward, or just offer an extra set of eyes and new approach to our work when necessary. Teamwork is at the heart of what open-source software is all about, anyway. Why not practice the same when contributing?&lt;/p&gt;

&lt;h4 id=&quot;4-respect-goes-a-long-way&quot;&gt;4. Respect goes a long way.&lt;/h4&gt;

&lt;p&gt;Don’t let your ego get the best of you. Remember that the project’s maintainers have their own vision for the project and that your contribution is a small part of that vision. Your code may be the cleanest most perfect code ever written (by decree of the code gods), but if it doesn’t fit the vision for the project, it likely won’t get accepted. Make sure you respect the maintainers’ guidance and feedback. You’re doing them a favor by contributing some code, but they have the most knowledge of the code base and should be the project leads. Ultimately you need them to green-light your work if it’s ever going to get accepted, so be respectful of that and the whole experience will be much more pleasant.&lt;/p&gt;

&lt;p&gt;We did our best with our issue and PR &lt;a href=&quot;https://github.com/AlchemyCMS/alchemy_cms/issues/1037&quot;&gt;to explain what we were doing&lt;/a&gt; as we did it, provide screenshots and/or animated gifs explaining what we were seeing or changing, and asked as many questions as we could of the maintainers to make sure that the work we were doing fit within the framework of the project and was the most logical and practical approach in their minds. Having a good rapport with the maintainers isn’t just common courtesy, it’s critical to the success of your work and builds trust for the future if you plan to continue contributing going forward.&lt;/p&gt;

&lt;h3 id=&quot;more-resources&quot;&gt;More Resources&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.firsttimersonly.com/&quot;&gt;Contributing to open source for the first time&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://help.github.com/articles/where-can-i-find-open-source-projects-to-work-on/&quot;&gt;Finding a project to contribute to on GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://thoughtbot.com/open-source-code-of-conduct&quot;&gt;Thoughtbot&amp;#39;s open source code of conduct&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://blog.codeship.com/why-your-employees-should-be-contributing-to-open-source/&quot;&gt;Why companies should encourage employees to get involved in open source&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://blog.smartbear.com/programming/14-ways-to-contribute-to-open-source-without-being-a-programming-genius-or-a-rock-star/&quot;&gt;14 ways to contribute to open source without being a genius&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Mon, 11 Jul 2016 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2016/07/11/contributing-to-open-source/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/07/11/contributing-to-open-source/</guid>
      </item>
    
      <item>
        <title>ruby-for-good-2016</title>
        <description>&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/smithsonian-c98f941e7c42e6e5cefd0c4693663a7b74c8b2c7e7d78d5c0bf0bc4fb1d06fc6.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;campus&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This past weekend  was the third installment of &lt;a href=&quot;http://rubyforgood.org&quot;&gt;Ruby For Good&lt;/a&gt;. As clichéd as it sounds, this
was the best one yet! The conference was held at the picturesque &lt;a href=&quot;http://smconservation.gmu.edu/&quot;&gt;Smithsonian George Mason School of Conservation&lt;/a&gt;. Get ready for lots of photos!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/campus-6ac14cd4f0eb116fe28776ad5ef7d311c45737ae6e68d5e85cb117d15aa08de0.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;campus&quot; /&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;what-is-ruby-for-good&quot;&gt;What is Ruby For Good&lt;/h3&gt;

&lt;p&gt;Ruby For Good is an annual conference that brings together software developers and designers for a weekend to work on technology projects for a variety of community driven non-profits. This year attendees came from Australia, Germany, and all across the United States. Participants spent their days working and their evenings bonding through board games, karaoke and conversation. We also got to experience a beautiful campfire with smores and a beautiful view.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/campfire-4-44a53f3bfd88404abb2ad7a61ad588c5a04dd9b1d15b1dc503d7613e264d7f2f.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;campfire&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/campfire-5-4a3c5c06dee84804dd7a4da3dae52c4c1925866678f2a519ba998aee1b34cb72.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;campfire&quot; /&gt;
 &lt;a href=&quot;http://technology.customink.com/blog/2015/08/05/ruby-for-good/&quot;&gt;Last year&lt;/a&gt; everyone took turns helping out in the kitchen preparing meals. This year we were spoiled by the wonderful meals provided by the campus staff. Not worrying about meals meant more time to code and have fun.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/board-games-8cc0520a5e76d3d7d59b82aa82d0be11bd68e5fc2c4059df452cb8a56c4b8b3b.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;board games&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/working-124ae1411d040f594fc2a7bddfe94ddd829a0f6722f18bf8303c40fede53986a.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;campus&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;the-location&quot;&gt;The Location&lt;/h3&gt;

&lt;p&gt;The &lt;a href=&quot;http://smconservation.gmu.edu/&quot;&gt;Smithsonian George Mason School of Conservation&lt;/a&gt; is the closest thing to a real life Jurassic Park! Their research is focused on bringing back animals and plants that are on the brink of extinction. We were very fortunate to go on the special Friends of the National Zoo (FONZ) tour. They showed us cheetahs, Przewalski&amp;#39;s horses, red-crowned cranes, and more. We heard interesting stories about work done to make the American chestnut blight resistant and about a Saudi prince who is helping to bring back the Scimitar-horned oryx. The tour turned out to be an important motivator for some of the projects and participants. &lt;em&gt;Chris Mar, CustomInk software engineer&lt;/em&gt; said it well:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;After learning about the plight of the Scimitar-horned Oryx on our tour of the Smithsonian-Mason facility, I was excited to build software to help the scientists with their efforts to return these animals to their native home.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/working-2-ec511a7b249641b9d722d48b7b53ab790471aeddf9055dc8800a3ae91e4e124c.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;working&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/campfire-2-ce79d504ed02b314fb5a9e23aca81ff8816795b18a4d5fe482c1cf6d6a2c23f0.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;campfire&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;2016-community-projects&quot;&gt;2016 Community Projects&lt;/h3&gt;

&lt;p&gt;This year&amp;#39;s projects included:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/rubyforgood/habitat_humanity&quot;&gt;New Orleans Habitat For Humanity&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://Manjia.org&quot;&gt;Manjia&lt;/a&gt; - a DC non-profit that collects unused food distributes it to those in need.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.pdxdiaperbank.org/&quot;&gt;Portland Diaper Bank&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/rubyforgood/share_christmas&quot;&gt;Share Christmas&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://vaworkinglandscapes.org/&quot;&gt;Virginia Working Landscapes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Smithsonian projects:

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/rubyforgood/scimitar_oryx&quot;&gt;Studying the Scimitar Oryx&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/rubyforgood/loggerhead_shrike&quot;&gt;Logging the Loggerhead Shrike&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/rubyforgood/panda_app&quot;&gt;Red Pandas&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;inkers-at-ruby-for-good&quot;&gt;Inkers at Ruby For Good&lt;/h3&gt;

&lt;p&gt;This year &lt;a href=&quot;http://booster.com&quot;&gt;Booster&lt;/a&gt; and &lt;a href=&quot;http://customink.com&quot;&gt;CustomInk&lt;/a&gt; were well represented with eight engineers.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/inkers-7c5134d2cbb72c062356000122899ba49f6077aa236a65eb6a9de4d7e8c38a33.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;inkers&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/shirts-9f9ffb92c97df6c53dbb92e4012985222ad50befc9edc7c125a14657c380135a.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;shirts&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Max Tedford&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I found Ruby for Good to be an incredibly fun and valuable experience. It seems to me that it&amp;#39;s a great place to meet up with some of the DC Ruby community&amp;#39;s stalwarts, and get to build connections with other programmers who share a mutual interest. One of my goals for the year was to use my programming skills to make an impact on something that&amp;#39;s important to me—the environment—and Ruby for Good provided me a perfect opportunity to meet that goal, and I&amp;#39;m very thankful I was able to make new friends and have some fun while doing it. Also, I found the site particularly stimulating both for its physical beauty, and as an animal-lover, and it didn&amp;#39;t hurt that all my meals were accounted for the duration of the weekend.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;Brandon Lawrence&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;One of the most rewarding weekends I&amp;#39;ve ever had. ~80 developers together building software for non profits. Not only were the applications exciting, but the people rocked too!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;Alex Egan&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;My favorite part about Ruby for Good is how welcoming it is to people of all skill levels. It allows everyone to contribute to a project, teach, and learn while making new friends and helping a great cause.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;Chris Mar&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The unexpected benefit of attending Ruby for Good was working with an uncommon team with gender diversity and a range of skill levels. Everyone was able to contribute to the project bringing their unique perspective. I’m grateful for the experience.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;Tien Nguyen&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;I was constantly impressed that so many people with different skill sets and backgrounds were able to come together to accomplish so much in such a short amount of time. It was a pleasure working with a group so dedicated to donating their time to make a positive impact.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;Howard Miller&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;One great thing about Ruby for Good is that, year after year, everyone rises to the occasion. I’ve consistently seen people nervous about whether they were skilled enough or had enough experience for the work at hand, and they’ve gone on to surprise themselves and everyone else with how much they can accomplish in a few days.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;Dylan Pulliam&lt;/em&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Ruby for good was a great experience. I got to work on some cool non-profit projects and learned about some technologies I hadn’t touched before. I also enjoyed meeting ruby-ists from around the country.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;http://www.customink.com/about/three_hearts/&quot;&gt;Three Hearts&lt;/a&gt; played a part too! They sponsored and designed the shirt.&lt;/p&gt;

&lt;h3 id=&quot;how-to-get-involved&quot;&gt;How to Get Involved&lt;/h3&gt;

&lt;p&gt;The hardest part of Ruby For Good is finding projects. This is where you can come in. If you are involved with a non-profit or know of a non-profit that needs help implementing technology we&amp;#39;d love to hear about it. Please email us at &lt;a href=&quot;mailto:info@rubyforgood.com&quot;&gt;info@rubyforgood.com&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2016/gooders-52bb2e52f9578f75e128d6dffeafb195e2ddc27941f20329b7c90b2f82a333b8.jpg&quot; class=&quot;tb-Img tb-Img--responsive-ctr&quot; alt=&quot;gooders&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 23 Jun 2016 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2016/06/23/ruby-for-good-2016/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/06/23/ruby-for-good-2016/</guid>
      </item>
    
      <item>
        <title>Configuring Atom</title>
        <description>&lt;p&gt;I&amp;#39;ve been using Atom for a while now, and I thought I&amp;#39;d write a blog post describing some quick ways to modify Atom to work better for you. GitHub describes Atom as &amp;quot;modern, approachable, yet hackable to the core&amp;quot;. This post will focus mostly on the &amp;quot;approachable&amp;quot; side of customizing your editor. We&amp;#39;ll first look at editor and package settings before moving to configuration files you can modify, with a few small examples of how you can use them.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;: As of writing, Atom is on version 1.7.4, and the beta build is 1.8.0-beta4.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;settings&quot;&gt;Settings&lt;/h3&gt;

&lt;h4 id=&quot;editor-settings&quot;&gt;Editor Settings&lt;/h4&gt;

&lt;p&gt;This is a good place to look when starting to use Atom. There aren&amp;#39;t too many settings here, and the options available to you can be very useful. One of the more common options you might look at here is the &lt;code&gt;font-family&lt;/code&gt; that will be applied to your editor&amp;#39;s text. Another option that is important to know about is &lt;code&gt;Exclude VCS Ignored Paths&lt;/code&gt;. With this option enabled, files ignored from version control will not show up when using the &lt;a href=&quot;https://atom.io/packages/fuzzy-finder&quot;&gt;&lt;code&gt;fuzzy-finder&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://atom.io/packages/find-and-replace&quot;&gt;&lt;code&gt;find-and-replace&lt;/code&gt;&lt;/a&gt; packages. This can help eliminate search results that may be irrelevant while also improving performance. For an example of how this can help, try toggling the setting and using &lt;code&gt;fuzzy-finder&lt;/code&gt; and &lt;code&gt;find-and-replace&lt;/code&gt; on a project with a large &lt;code&gt;node_modules&lt;/code&gt; folder. Enabling this behavior may be detrimental to your workflow if you routinely edit files you have ignored by your VCS, so knowing about this option can help avoid some frustration.&lt;/p&gt;

&lt;h4 id=&quot;package-settings&quot;&gt;Package Settings&lt;/h4&gt;

&lt;p&gt;The majority of the modifications you can make to Atom will come from packages. There are a ton of &lt;a href=&quot;https://atom.io/packages&quot;&gt;community made packages&lt;/a&gt; to browse through, but a fresh install of Atom will still contain many core packages that you&amp;#39;ll find useful. Navigate to your Preferences and select &amp;quot;Packages&amp;quot; from the menu on the left. You can search through your installed packages here. There will be a settings button next to the package name if that package has settings you are able to configure.&lt;/p&gt;

&lt;p&gt;I&amp;#39;d recommend browsing through your package list for the things you use most often. If you use autocomplete a lot, check out the settings for &lt;a href=&quot;https://atom.io/packages/autocomplete-plus&quot;&gt;&lt;code&gt;autocomplete-plus&lt;/code&gt;&lt;/a&gt;. Language support is also contained in packages. The language support packages that ship with Atom usually follow the naming convention of &lt;code&gt;language-&amp;lt;name&amp;gt;&lt;/code&gt;. Be sure to check out the packages for the languages you work with to see settings for things like maximum line length and indentation preferences. These settings allow you to keep style preferences in line with your team&amp;#39;s style guide. Language packages may also include available keybindings, and snippets used in conjunction with autocomplete.&lt;/p&gt;

&lt;h3 id=&quot;configuration-files&quot;&gt;Configuration Files&lt;/h3&gt;

&lt;h4 id=&quot;init-script&quot;&gt;Init Script&lt;/h4&gt;

&lt;p&gt;You can open your init script by opening the command palette with &lt;code&gt;cmd-shift-p&lt;/code&gt; and searching for the command &lt;code&gt;Application: Open Your Init Script&lt;/code&gt;. This CoffeeScript or JavaScript file will be evaluated after all of your packages are loaded. This is a good place to write some code to hack together custom commands and modifications that aren&amp;#39;t limited to a single package you have installed, and aren&amp;#39;t suited to be its own package. This file is also great for prototyping new package ideas or modifications you are thinking of developing.&lt;/p&gt;

&lt;p&gt;Recently I&amp;#39;ve been learning React, and found myself frequently changing the grammar for a file from regular &lt;code&gt;JavaScript&lt;/code&gt; to &lt;code&gt;JavaScript (JSX)&lt;/code&gt; for better syntax highlighting and autocomplete behavior. This was a perfect use case for the init script. I changed this process from 3 commands to 1 by creating a custom command in my init script.
The code for this is below if you&amp;#39;d like to try it out yourself, but I won&amp;#39;t dive into the Atom API in this post. Check the &lt;a href=&quot;https://atom.io/docs/api/v1.7.3/AtomEnvironment&quot;&gt;documentation&lt;/a&gt; for more details.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-coffeescript&quot; data-lang=&quot;coffeescript&quot;&gt;&lt;span class=&quot;nx&quot;&gt;atom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;commands&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'atom-text-editor'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'custom:js-to-jsx'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;grammars&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;atom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;grammars&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getGrammars&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;grammar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;grammars&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;JavaScript (JSX)&quot;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;editor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;atom&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;workspace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getActiveTextEditor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;editor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setGrammar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;grammar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;keymap&quot;&gt;Keymap&lt;/h4&gt;

&lt;p&gt;Are you sick of accidentally quitting Atom instead of closing a tab? Let&amp;#39;s override the &lt;code&gt;cmd-q&lt;/code&gt; keybinding! We can do this by editing our keymap file. Open your keymap the same way you opened your init script, but this time looking for the &lt;code&gt;Application: Open Your Keymap&lt;/code&gt; command. This is a CSON or JSON file that you can use to map a keybinding to a command. Your first step when creating a new keybinding is finding the selector you want to apply the keybinding to. For example, you can use &lt;code&gt;atom-text-editor&lt;/code&gt; to refer to your text editing area, or &lt;code&gt;body&lt;/code&gt; for just about everything in the application window. Atom includes Chrome&amp;#39;s developer tools (View -&amp;gt; Developer -&amp;gt; Toggle Developer Tools), which can help you find the right selector. The next option is the keybinding you wish to apply. We want to override &lt;code&gt;cmd-q&lt;/code&gt; to save, and make sure we can still quit Atom with a second press. In this case we will have two keybindings: &lt;code&gt;cmd-q&lt;/code&gt; and &lt;code&gt;cmd-q cmd-q&lt;/code&gt;.
The last step is the name of the command we want to dispatch. Command names are usually in the format &lt;code&gt;package-name:command-name&lt;/code&gt;. The quit command, like the commands used to open the keymap and init files, is part of &lt;code&gt;Application&lt;/code&gt; and is called &lt;code&gt;application:quit&lt;/code&gt;. Saving is part of Atom Core, and is attached to the command &lt;code&gt;core:save&lt;/code&gt;. Putting all this together, we would get the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cson&quot; data-lang=&quot;cson&quot;&gt;'body':
  'cmd-q': 'core:save'
  'cmd-q cmd-q': 'application:quit'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This overrides &lt;code&gt;cmd-q&lt;/code&gt; to save, and allows you to confirm quitting with another &lt;code&gt;cmd-q&lt;/code&gt;.&lt;/p&gt;

&lt;h4 id=&quot;stylesheet&quot;&gt;Stylesheet&lt;/h4&gt;

&lt;p&gt;Your stylesheet, &lt;code&gt;styles.less&lt;/code&gt;, is used to customize how your editor looks. You can open this file by running the &amp;quot;Application: Open Your Stylesheet&amp;quot; command. You can use this to apply styles to the core editor, as well as views created by third party packages. You can even modify styles set by your syntax theme to get it just right.&lt;/p&gt;

&lt;p&gt;I use panes often, and sometimes lose track of which pane I&amp;#39;m focused on. I was able to solve this small but annoying problem by adding a blue border around my active pane.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-less&quot; data-lang=&quot;less&quot;&gt;atom-pane {
  border: 1px solid #000000;
  &amp;amp;.active {
    border: 1px solid #3fcef4;
  }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;snippets&quot;&gt;Snippets&lt;/h4&gt;

&lt;p&gt;Snippets are your way of adding custom autocomplete options. You can edit your snippets by running the &amp;#39;Application: Open Your Snippets&amp;#39; command. Snippets are defined using CSON or JSON. The outer most key is the language scope. You can find this by looking at the package settings for a language. For &lt;a href=&quot;https://atom.io/packages/language-ruby&quot;&gt;&lt;code&gt;language-ruby&lt;/code&gt;&lt;/a&gt; this is &lt;code&gt;source.ruby&lt;/code&gt;, and for &lt;a href=&quot;https://atom.io/packages/language-ruby&quot;&gt;&lt;code&gt;language-javascript&lt;/code&gt;&lt;/a&gt; it&amp;#39;s &lt;code&gt;source.js&lt;/code&gt;. Each key within this source is the short description of what this snippet is for. There are two attributes that you should add inside of that description. The first is a prefix, used as the &amp;quot;trigger&amp;quot; for autocomplete. The next is the body, which will be the text inserted when the snippet is confirmed. An example I use to set up a &lt;code&gt;describe&lt;/code&gt; method when testing ruby is below.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cson&quot; data-lang=&quot;cson&quot;&gt;'.source.ruby':
  'describe block':
    'prefix': 'describe'
    'body': &quot;&quot;&quot;
      describe '${1:message}' do
        $2
      end
    &quot;&quot;&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The dollar signs are Tab Stops, used to signal which part of the snippets are supposed to be edited after the snippet is confirmed.&lt;/p&gt;

&lt;h3 id=&quot;summary&quot;&gt;Summary&lt;/h3&gt;

&lt;p&gt;This is a very high level overview of where different settings can be found and modified. The Atom team has written much more detailed documentation for these settings and more. The main documentation can be found &lt;a href=&quot;http://flight-manual.atom.io/&quot;&gt;here&lt;/a&gt;. It includes entire sections on &lt;a href=&quot;http://flight-manual.atom.io/using-atom/sections/atom-packages/&quot;&gt;Packages&lt;/a&gt;, &lt;a href=&quot;http://flight-manual.atom.io/using-atom/sections/snippets/&quot;&gt;Snippets&lt;/a&gt;, &lt;a href=&quot;http://flight-manual.atom.io/hacking-atom/sections/the-init-file/&quot;&gt;The Init File&lt;/a&gt;, and &lt;a href=&quot;http://flight-manual.atom.io/behind-atom/sections/keymaps-in-depth/&quot;&gt;Keymaps&lt;/a&gt; if you would like to learn more about the specific topics covered in this blog post.&lt;/p&gt;
</description>
        <pubDate>Mon, 23 May 2016 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2016/05/23/configuring_atom/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/05/23/configuring_atom/</guid>
      </item>
    
      <item>
        <title>Introducing the activerecord-collection_cache_key Gem</title>
        <description>&lt;p&gt;Today we&amp;#39;re releasing a backport gem of a new feature in Rails 5—cache keys for ActiveRecord collections. It tracks fairly closely with the implementation seen &lt;a href=&quot;https://github.com/rails/rails/pull/20884&quot;&gt;in the Rails source&lt;/a&gt; but has a few minor differences arising from support back to AR 3. We&amp;#39;ve certainly been missing this feature for a long time and hope it comes in handy.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Rails already has fairly advanced fragment caching available at the view layer—if you wanted to cache the rendered representation of a collection of objects, you could do something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-erb&quot; data-lang=&quot;erb&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;table&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;cp&quot;&gt;&amp;lt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@cached_things&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;cp&quot;&gt;&amp;lt;%&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@cached_things&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cached_thing&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;tr&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;%=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cached_thing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;%=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cached_thing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;td&amp;gt;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;%=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cached_thing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/td&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;/tr&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;cp&quot;&gt;&amp;lt;%&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;cp&quot;&gt;&amp;lt;%&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/table&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With caching enabled, you&amp;#39;d see a fragment read/write in your console that looks something like the following:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;views/cached_things/1-20160404161453044590000/cached_things/2-20160404161002789386000/fda68e69e4c5ced06fcdd5a88ebd2fe5&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;That key includes a few data points. There&amp;#39;s a key for each record in the collection that includes the &lt;code&gt;id&lt;/code&gt; and &lt;code&gt;updated_at&lt;/code&gt; timestamp. There&amp;#39;s also a digest of the template fragment&amp;#39;s content, so the cache can be invalidated when the cached part of the template changes. This is pretty great, but it requires that each instance of &lt;code&gt;CachedThing&lt;/code&gt; be initialized by ActiveRecord. As collection sizes grow this begins to significantly cut into the benefits of caching. Implementing &lt;code&gt;#cache_key&lt;/code&gt; at the collection level allows us to cache upstream of AR object initialization, making rendering from cache a matter of linear time.&lt;/p&gt;

&lt;h3 id=&quot;installation&quot;&gt;Installation&lt;/h3&gt;

&lt;p&gt;Add it to your &lt;code&gt;Gemfile&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'activerecord-collection_cache_key'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and run &lt;code&gt;bundle&lt;/code&gt;. The gem will be autorequired and will augment &lt;code&gt;ActiveRecord::Base&lt;/code&gt; with a &lt;code&gt;.collection_cache_key&lt;/code&gt; method, as well as adding a &lt;code&gt;#cache_key&lt;/code&gt; method to &lt;code&gt;Activerecord::Relation&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;usage&quot;&gt;Usage&lt;/h3&gt;

&lt;p&gt;You can call &lt;code&gt;#cache_key&lt;/code&gt; on any activerecord relation to get a deterministic key for use with the Rails cache interface, and caching of a response can be implemented at the controller layer for maximum performance gains:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;index&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@collection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;CachedThing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;status: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'published'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@collection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cache_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;respond_with&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@collection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a simplistic example; a real-world implementation would most likely need to handle things like response format, query params, or anything else that could manipulate the output in a unique way given the same collection. You&amp;#39;ll be able to read all about how we&amp;#39;re using it in an upcoming post.&lt;/p&gt;

&lt;h3 id=&quot;key-format&quot;&gt;Key Format&lt;/h3&gt;

&lt;p&gt;Cache keys look the same as the official Rails implementation:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;#{model_name}/query-#{md5_digest}-#{collection_size}-#{timestamp}&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Where the MD5 digest is a hash of the output of &lt;code&gt;Relation#to_sql&lt;/code&gt;, and the timestamp is the most recent &lt;code&gt;updated_at&lt;/code&gt; (or :timestamp_column of your choice) of the matching records in the collection.&lt;/p&gt;

&lt;h3 id=&quot;caveats&quot;&gt;Caveats&lt;/h3&gt;

&lt;p&gt;While keys from this gem follow the same format as the Rails implementation, they are not identical. There are three notable ways in which they differ:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;The SQL digest for full-collection caches includes &lt;code&gt;where (1 = 1)&lt;/code&gt; in its source.&lt;/p&gt;

&lt;p&gt;This is because in ActiveRecord 3, Model.all returns an instance of Array, not ActiveRecord::Relation. We can add a where clause to unbound collections to force the correct type.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The &lt;code&gt;collection_size&lt;/code&gt; integer for limited queries will be the full collection size, not the size of the limited collection. &lt;/p&gt;

&lt;p&gt;There are &lt;a href=&quot;https://github.com/rails/rails/pull/20884#issuecomment-128910649&quot;&gt;documented edge cases&lt;/a&gt; where the key for a limited collection may not change when its contents do. We&amp;#39;ve found that including the total size of the collection in the key and letting the sql digest handle uniqueness around limits and offsets suffices to yield properly deterministic caching.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The default &lt;code&gt;cache_timestamp_format&lt;/code&gt; for Rails 3.2 is &lt;code&gt;:number&lt;/code&gt; rather than &lt;code&gt;:nsec&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This is because the &lt;code&gt;cache_timestamp_format&lt;/code&gt; method was introduced in AR 3.2, but the &lt;code&gt;:nsec&lt;/code&gt; formatter did not yet exist. For consistency with other keys in 3.2, we&amp;#39;ve left the default untouched there. All other versions of AR will implement an &lt;code&gt;:nsec&lt;/code&gt; formatter and use it as the default.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;thats-it&quot;&gt;That&amp;#39;s it!&lt;/h3&gt;

&lt;p&gt;Give &lt;a href=&quot;https://github.com/customink/activerecord-collection_cache_key&quot;&gt;the code a look&lt;/a&gt;, try it out, and let us know what you think!&lt;/p&gt;
</description>
        <pubDate>Thu, 07 Apr 2016 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2016/04/07/introducing-the-activerecord-collection_cache_key-gem/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/04/07/introducing-the-activerecord-collection_cache_key-gem/</guid>
      </item>
    
      <item>
        <title>Outrunning a Hurricane</title>
        <description>&lt;p&gt;&lt;em&gt;Two guys are walking thru the woods when they see a charging Grizzly Bear. First guy says &amp;quot;Run for it!&amp;quot; Second guy says, &amp;quot;You can&amp;#39;t outrun a Grizzly!&amp;quot; First guy says &amp;quot;I don&amp;#39;t have to outrun the bear, I just have to outrun YOU.&amp;quot;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/outrunning-a-hurricane-dba8f2e4aeed28dc33af754692cdf80a43aa9a0a178c5d165eb15aef7f424c52.jpg&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; alt=&quot;Eye on the tropics, tracking Joaquin on the East coast.&quot; /&gt;This past Fall, &lt;a href=&quot;https://en.wikipedia.org/wiki/Hurricane_Joaquin&quot;&gt;Hurricane Joaquin&lt;/a&gt; was threatening to hit the East Coast. Many models had Northern Va (also known as US East-1) in its crosshairs. The Derecho of 2012 showed that AWS Regions are vulnerable to weather related events. The derecho knocked out big names like &lt;a href=&quot;http://www.forbes.com/sites/anthonykosner/2012/06/30/amazon-cloud-goes-down-friday-night-taking-netflix-instagram-and-pinterest-with-it/#14b0305b12ce&quot;&gt;Netflix, Instagram and Pinterest&lt;/a&gt; for up to three days. It was our first look at who the big players that were using AWS.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;3 years later, there are a LOT more large companies in the cloud. When an event like this happens again, and unfortunately it will, there will be a mad scramble for resources in other AWS Regions. A &lt;a href=&quot;http://news.netcraft.com/archives/2013/05/20/amazon-web-services-growth-unrelenting.html&quot;&gt;2013 report&lt;/a&gt; by Netcraft showed that 60% of all web facing instances were in the US East Region. There are not enough instances in both US West Regions to absorb the inevitable load that would come.&lt;/p&gt;

&lt;p&gt;We made the call on Wednesday night, 5 days prior to the arrival of Joaquin, to put on our running shoes. We weren&amp;#39;t interested in outrunning Joaquin, but to outrun the rest of you. If you are running in a data center there was nothing you could do other than to dust off that DR binder, start sandbagging and print your resume before the power goes out.&lt;/p&gt;

&lt;p&gt;With a team of 6, we had the frontend site and a functioning backend system up and running in 8 hours. By Friday afternoon, we had 90% of our systems running in two regions. You read that right. In less than 2 days, with no one working overtime, we had fully migrated CustomInk across the United States. The other 10% were Tier 2 applications that could afford a 3-5 day outage and not critical to the business.&lt;/p&gt;

&lt;p&gt;This was our true test of the cloud&amp;#39;s abilities but it also reinforced the groundwork laid down by my team years earlier. CustomInk is truly a DevOps organization. We have fully embraced Infrastructure as a Service in WebOps and everyone has bought into our cloud environment. We have daily standups, blameless postmortems and the team shares the workload and on-call. No one is siloed as the infrastructure guy or supports a single company org. One for all...!&lt;/p&gt;

&lt;p&gt;In regards to our infrastructure, Infrastructure as Code is a working principle of the WebOps team. IaC is a great buzzword and many of my peers claim this. If you can&amp;#39;t build your applications in less than 5 Chef/Ansible/Puppet commands please move aside. This single principle allowed us to deploy 90 applications across 200 load balanced servers in two availability zones in a new AWS Region. Our engineers are able to literally fire off the commands to build out an application and then move on to the next application. Rather than futzing with servers, we could focus on database replication, networking and security groups.&lt;/p&gt;

&lt;p&gt;The conclusion was a bit anti-climatic. There were a few high fives and congrats by senior management.  The systems ran over the weekend and we scaled them back on Monday. Our applications are now multi-region and and we treat US West-2A as a 4th AZ. At the end of the day, we proved that our cloud infrastructure was elastic and dynamic and  our WebOps Team was agile and able to respond to what we believe is our biggest threat.&lt;/p&gt;
</description>
        <pubDate>Wed, 16 Mar 2016 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2016/03/16/outrunning-a-hurricane/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/03/16/outrunning-a-hurricane/</guid>
      </item>
    
      <item>
        <title>Rolling Builds on TravisCI</title>
        <description>&lt;p&gt;Work on the Ruby SQL Server stack often requires long build times. Dependencies need to be downloaded, native extensions built, followed by long test runs to remote services. One feature I have come to rely on with &lt;a href=&quot;http://www.appveyor.com&quot;&gt;Appveyor&lt;/a&gt; are their &lt;a href=&quot;https://www.appveyor.com/docs/build-configuration#rolling-builds&quot;&gt;rolling builds&lt;/a&gt; - where commits to the same branch cancel previous running builds. Though Appveyor is great for Windows builds, my 💖 belongs to TravisCI. They are my goto for continuous integration due to their GitHub integration and open source presence.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Making rolling builds work on TravisCI led me to &lt;a href=&quot;https://git.io/wpo7Tw&quot;&gt;open GitHub issues&lt;/a&gt; where instead I had hoped for a simple configuration option. I did find great work done by &lt;a href=&quot;https://github.com/grosser/travis_dedup#readme&quot;&gt;Michael Grosser&lt;/a&gt; which allowed use of his open server to a) receive GitHub webhooks and b) make subsequent TravisCI API calls on your behalf. For us at CustomInk, we wanted something to host ourselves while ensuring GitHub payloads were verified to originate from our private repositories. All while ensuring that API calls to Travis are only our own.&lt;/p&gt;

&lt;h2 id=&quot;enter-the-rolling-travis-app&quot;&gt;Enter The Rolling Travis App&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/rolling-travisci-builds-9c7cad612f28eb2e30bc03efac7a717b5b8002e93c3f23cf0f537b25b79a4d7c.gif&quot; width=&quot;125&quot; style=&quot;float:right;&quot; alt=&quot;Rolling TravisCI Builds&quot; /&gt;With an emphasis on TravisCI pro accounts and your company&amp;#39;s security, we build a simple Rails 5 API application that you can configure and deploy to Heroku.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/customink/rolling_travis_builds&quot;&gt;https://github.com/customink/rolling_travis_builds&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Without duplicating that project&amp;#39;s README, here are a few highlights of what this application does and how it can accomplish rolling builds for your repos.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Responds to GitHub webhooks for repository activity.&lt;/li&gt;
&lt;li&gt;Verifies the webhook payload using a SHA1 signature.&lt;/li&gt;
&lt;li&gt;Makes API calls to TravisCI to cancel duplicate builds.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;verify-github-payloads&quot;&gt;Verify GitHub Payloads&lt;/h4&gt;

&lt;p&gt;The most important part of this process is &lt;a href=&quot;https://developer.github.com/webhooks/securing/&quot;&gt;verifying the GitHub payloads&lt;/a&gt; are indeed from your repositories. Here is an excerpt from the application&amp;#39;s root controller.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActionController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;API&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;before_filter&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:webhook_verify!&lt;/span&gt;

  &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;webhook_verify!&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;signature&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;sha1=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;OpenSSL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;HMAC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;hexdigest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;OpenSSL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Digest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'sha1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;WEBHOOK_SECRET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;ActiveSupport&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SecurityUtils&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;secure_compare&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;signature&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'X-Hub-Signature'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you can see, GitHub signs the JSON payload using the &lt;code&gt;X-Hub-Signature&lt;/code&gt;. All we need to do is check the signature against the payload. Using a before filter will ensure that if the secure compare returns false, no further actions are taken.&lt;/p&gt;

&lt;h4 id=&quot;async-with-sucker-punch-2-0&quot;&gt;Async With Sucker Punch 2.0&lt;/h4&gt;

&lt;p&gt;API calls to Travis could take a second or two. If your organization is big and repositories are numerous, this could block your the webhook application from responding. In order to solve this, we bundle the latest version of &lt;a href=&quot;https://github.com/brandonhilkert/sucker_punch&quot;&gt;Sucker Punch&lt;/a&gt; which uses concurrent-ruby to asynchronously process work.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActionController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;API&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;webhook&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;CancelDuplicateBuildsJob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;perform_in&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;webhook_repo&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:ok&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CancelDuplicateBuildsJob&lt;/span&gt;
  &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SuckerPunch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Job&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;perform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;webhook_repo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;TravisApi&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cancel_duplicate_builds!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;webhook_repo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here we are using the &lt;code&gt;perform_in&lt;/code&gt; set to 5 seconds to give TravisCI a shot at first scheduling new builds before looking for duplicates.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/customink/rolling_travis_builds&quot;&gt;https://github.com/customink/rolling_travis_builds&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We hope you enjoy the Rolling Travis Builds application and help make it better. Thanks!&lt;/p&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/customink/rolling_travis_builds&quot;&gt;Rolling TravisCI builds GitHub Webhook Template Application&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://git.io/wpo7Tw&quot;&gt;TravisCI GitHub Issue To Cancel Builds&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/brandonhilkert/sucker_punch&quot;&gt;Sucker Punch - Async Ruby processing using concurrent-ruby&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Sun, 14 Feb 2016 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2016/02/14/rolling-builds-on-travisci/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/02/14/rolling-builds-on-travisci/</guid>
      </item>
    
      <item>
        <title>Two Headed Cat! Using Secondbase to provide some level of sanity in a two-database Rails application.</title>
        <description>&lt;p&gt;Rails has never played nice with using multiple databases. While it is very easy to go and set up a new connection via &lt;code&gt;ActiveRecord.establish_connection&lt;/code&gt;,
the niceties that rails provides just don&amp;#39;t exist for your second database. Fixtures don&amp;#39;t work without explicitly calling &lt;code&gt;set_fixture_class&lt;/code&gt; and you do not have
access to any of the database tasks or generators that are provided by rails. To help alleviate this pain point for us at CustomInk, &lt;a href=&quot;https://twitter.com/karledurante&quot;&gt;Karle Durante&lt;/a&gt; wrote &lt;a href=&quot;https://github.com/customink/secondbase&quot;&gt;SecondBase&lt;/a&gt;
five years ago to provide database task support and migration generation to Rails applications. Between then and now the internals of Rails changed significantly. &lt;code&gt;DatabaseTasks&lt;/code&gt; took over much of the responsibility for the rake tasks we come to depend on for managing databases. While this refactor is a nice addition.
It required changing the internals of Secondbase to support newer versions of Rails. To this end, &lt;a href=&quot;https://twitter.com/metaskills&quot;&gt;Ken Collins&lt;/a&gt; and I set out to upgrade and modernize SecondBase.
The solution we settled on is to &lt;a href=&quot;https://github.com/customink/secondbase/blob/master/lib/second_base/databases.rake&quot;&gt;wrap and enhance&lt;/a&gt; the existing Rails database tasks and subclass the &lt;a href=&quot;https://github.com/customink/secondbase/blob/master/lib/rails/second_base/generators/migration_generator.rb&quot;&gt;migration generator&lt;/a&gt;. This provides us with almost all of the tools that
Rails gives the original database in a somewhat future proof fashion and does what &lt;a href=&quot;http://technology.customink.com/blog/2015/06/22/rails-multi-database-best-practices-roundup/#comment-2101344338&quot;&gt;Ken alluded to&lt;/a&gt; in his &lt;a href=&quot;http://technology.customink.com/blog/2015/06/22/rails-multi-database-best-practices-roundup&quot;&gt;Multi-Database practices article&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;using-secondbase&quot;&gt;Using SecondBase&lt;/h2&gt;

&lt;p&gt;In your Gemfile add the SecondBase gem:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'secondbase'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then in your &lt;code&gt;config/database.yml&lt;/code&gt; add your SecondBase configuration:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-yaml&quot; data-lang=&quot;yaml&quot;&gt;&lt;span class=&quot;na&quot;&gt;secondbase&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;development&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;adapter&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mysql&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;database&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;myapp_development&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;adapter&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;mysql&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;database&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;myapp_test&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This configuration block supports any options that your regular database supports including &lt;code&gt;url&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Now any model that inherits from &lt;code&gt;SecondBase::Base&lt;/code&gt; will connect to and use the database like a regular ActiveRecord model. You can also use associations between your primary database&amp;#39;s
and secondary database&amp;#39;s models.&lt;/p&gt;

&lt;h2 id=&quot;tasks-and-generators&quot;&gt;Tasks and Generators&lt;/h2&gt;

&lt;p&gt;SecondBase enhances key rake tasks to make having two databases as seamless as possible. All create, drop, purge and test tasks will run across both databases by invoking the original.
The only time you will need to call a &lt;code&gt;db:second_base&lt;/code&gt; namespace task is to run a migration on the secondary database exclusively.&lt;/p&gt;

&lt;p&gt;Rails&amp;#39; migration generator is  subclassed to provide the same features as the original. Simply invoke &lt;code&gt;second_base:migration&lt;/code&gt; and a new migration will be created targeting your
secondary database.&lt;/p&gt;

&lt;h2 id=&quot;extra-helpers&quot;&gt;Extra Helpers&lt;/h2&gt;

&lt;p&gt;We provide a &lt;code&gt;SecondBase::Forced&lt;/code&gt; helper to allow you to force a class that inherits from ActiveRecord::Base to use your secondary database.
For example, &lt;code&gt;ActiveRecord::SessionStore::Session.extend SecondBase::Forced&lt;/code&gt; will make &lt;code&gt;SessionStore&lt;/code&gt; use your secondary database.&lt;/p&gt;

&lt;p&gt;We also provide a &lt;code&gt;Secondbase.on_base&lt;/code&gt; helper for situations where you need to temporarily force ActiveRecord::Base to be your secondary database.
The helper is used internally by SecondBase  to help deal with the global mutable state issues the migrator and database task objects suffer from.
For instance, you can combo this with DatabaseCleaner&amp;#39;s truncation strategy to clean out your database for each test.&lt;/p&gt;

&lt;h2 id=&quot;closing-thoughts&quot;&gt;Closing Thoughts&lt;/h2&gt;

&lt;p&gt;I&amp;#39;ve provided a brief overview of SecondBase here. For a longer explanation of the features provided &lt;a href=&quot;https://github.com/customink/secondbase#readme&quot;&gt;check out the readme&lt;/a&gt;.
If you would like to see a demo of this gem in action, &lt;a href=&quot;https://github.com/customink/encom_dbs/tree/secondbase&quot;&gt;check out this demo project&lt;/a&gt;.
To get a better understanding of multi-database rails applications, I would recommend you check out &lt;a href=&quot;http://technology.customink.com/blog/2015/06/22/rails-multi-database-best-practices-roundup/&quot;&gt;this post by Ken Collins&lt;/a&gt;.
Finally, if your still running into issues with any of this, please feel free to open an issue on &lt;a href=&quot;https://github.com/customink/secondbase/issues&quot;&gt;the SecondBase repo&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Sun, 10 Jan 2016 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2016/01/10/two-headed-cat-using-secondbase-to-provide-some-level-of-sanity-in-a-two-database-rails-application/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2016/01/10/two-headed-cat-using-secondbase-to-provide-some-level-of-sanity-in-a-two-database-rails-application/</guid>
      </item>
    
      <item>
        <title>The Art of Ruby Technical Interviews</title>
        <description>&lt;p&gt;This is an exciting time in the Ruby Community. We are welcoming many new developers from bootcamps and online code schools. We need more developers. We want to hire more developers. We want to hire you.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Many of the new Ruby developers we interview are nervous during the technical interview. It is difficult for us to evaluate nervous candidates. We can&amp;#39;t be confident in your skills if you&amp;#39;re not confident.&lt;/p&gt;

&lt;p&gt;It doesn&amp;#39;t have to be so daunting. We are just engineers. We want to talk to you about Ruby. We love Ruby. We hope you love Ruby too.&lt;/p&gt;

&lt;p&gt;Understanding the process and practicing can prepare candidates for technical interviews. Knowing what to expect and being prepared is the best way to enter an interview with confidence.&lt;/p&gt;

&lt;p&gt;I gave a talk at RubyConf 2015 to help new Ruby Developers. I explain the interview process and provide tips on how to practice and prepare. There is also a good question and answer session at the end.&lt;/p&gt;

&lt;h2 id=&quot;video-from-rubyconf-2015&quot;&gt;Video from RubyConf 2015&lt;/h2&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/nZNfSQKC-Yk&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;slides&quot;&gt;Slides&lt;/h2&gt;

&lt;script async class=&quot;speakerdeck-embed&quot; data-id=&quot;36707794cdb24ee0aa3e78e7eb71b28e&quot; data-ratio=&quot;1.77777777777778&quot; src=&quot;//speakerdeck.com/assets/embed.js&quot;&gt;&lt;/script&gt;
</description>
        <pubDate>Mon, 23 Nov 2015 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2015/11/23/the-art-of-ruby-technical-interviews/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/11/23/the-art-of-ruby-technical-interviews/</guid>
      </item>
    
      <item>
        <title>RubyConf 5k 2015</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://twitter.com/custominktech&quot;&gt;CustomInkTech&lt;/a&gt; sponsored the &lt;a href=&quot;https://twitter.com/rubyconf5k&quot;&gt;RubyConf 5k&lt;/a&gt; in San Antonio, Texas. It was a &lt;a href=&quot;https://runkeeper.com/user/wingrunr21/route/4085546&quot;&gt;beautiful course&lt;/a&gt; along the famous River Walk.&lt;/p&gt;

&lt;p&gt;The results are posted below. Special thanks to &lt;a href=&quot;https://twitter.com/wingrunr21&quot;&gt;Stafford&lt;/a&gt; for designing the race course. And running it multiple times to set up and clean up.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;race-start&quot;&gt;Race Start&lt;/h2&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/cjkO6aCyxC0&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;shirts&quot;&gt;Shirts&lt;/h2&gt;

&lt;p&gt;Thanks &lt;a href=&quot;http://customink.com&quot;&gt;CustomInk&lt;/a&gt; for providing the comfortable shirts for the participants.&lt;/p&gt;

&lt;div class=&quot;tb-Images&quot;&gt;
  &lt;img src=&quot;/assets/content/rubyconf5k_2015/shirt_front-201946e782faf245391493c649de7f0ba2498150f5bbab4f22b7a4c216adda29.jpg&quot; class=&quot;tb-Img--half&quot; alt=&quot;shirt front&quot; /&gt;

  &lt;img src=&quot;/assets/content/rubyconf5k_2015/shirt_back-2fa83ab884df9a3fadc65abf6f330c90a42f46bc75ffcb59f62c18f6c63f0e91.jpg&quot; class=&quot;tb-Img--half&quot; alt=&quot;shirt back&quot; /&gt;
&lt;/div&gt;

&lt;h2 id=&quot;results&quot;&gt;Results&lt;/h2&gt;

&lt;p&gt;Congratulations to all the participants. Just showing up for an
early morning race at the conference was a victory.&lt;/p&gt;

&lt;table&gt;&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Place&lt;/th&gt;
&lt;th&gt;Name&lt;/th&gt;
&lt;th&gt;Time&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1.&lt;/td&gt;
&lt;td&gt;Patrick Sinclair&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;20:18.6&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2.&lt;/td&gt;
&lt;td&gt;Jed Prentice&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;20:54.2&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3.&lt;/td&gt;
&lt;td&gt;Carlos Mateos&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;21:11.8&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;4.&lt;/td&gt;
&lt;td&gt;Britt Ballard&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;21:38.8&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5.&lt;/td&gt;
&lt;td&gt;John Fadgen&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;21:54.7&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;6.&lt;/td&gt;
&lt;td&gt;Joshua Flanagan&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;21:57.8&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7.&lt;/td&gt;
&lt;td&gt;Marty Haught&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;22:16.8&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;8.&lt;/td&gt;
&lt;td&gt;Bibek Shrestha&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;22:28.2&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9.&lt;/td&gt;
&lt;td&gt;Lukas Maciulis&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;22:34.1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;10.&lt;/td&gt;
&lt;td&gt;Erik Krietsch&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;22:41.2&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11.&lt;/td&gt;
&lt;td&gt;Lucas Florio&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;23:00.3&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;12.&lt;/td&gt;
&lt;td&gt;Ralph Churchill&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;23:07.5&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;13.&lt;/td&gt;
&lt;td&gt;Isura Edirisinghe&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;23:16.6&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;14.&lt;/td&gt;
&lt;td&gt;John Cinnamond&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;23:47.6&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;15.&lt;/td&gt;
&lt;td&gt;Nathaniel Talbott&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;24:03.7&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;16.&lt;/td&gt;
&lt;td&gt;Paul Thiebauth&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;24:19.1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;17.&lt;/td&gt;
&lt;td&gt;Aaron Patterson&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;24:35.0&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;18.&lt;/td&gt;
&lt;td&gt;Thomas Enebo&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;24:35.8&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;19.&lt;/td&gt;
&lt;td&gt;Danny Guinther&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;24:47.8&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;20.&lt;/td&gt;
&lt;td&gt;Damir Zekic&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;25:01.0&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;21.&lt;/td&gt;
&lt;td&gt;Nadia Odunayo&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;25:06.5&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;22.&lt;/td&gt;
&lt;td&gt;Barrett Clark&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;25:17.3&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;23.&lt;/td&gt;
&lt;td&gt;Tieg Zaharia&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;25:26.0&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;24.&lt;/td&gt;
&lt;td&gt;Hsing-Hui Hsu&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;25:38.9&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;25.&lt;/td&gt;
&lt;td&gt;Joey Chamberlin&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;25:48.3&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;26.&lt;/td&gt;
&lt;td&gt;Julie Swoope&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;25:53.9&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;27.&lt;/td&gt;
&lt;td&gt;Kayla Kahl&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;25:54.9&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;28.&lt;/td&gt;
&lt;td&gt;Terence Lee&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;26:06.0&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;29.&lt;/td&gt;
&lt;td&gt;Thomas Powell&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;26:35.1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;30.&lt;/td&gt;
&lt;td&gt;Andy Bettisworth&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;26:40.7&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;31.&lt;/td&gt;
&lt;td&gt;Jason Kaskel&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;27:05.5&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;32.&lt;/td&gt;
&lt;td&gt;Michael Shpa&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;27:06.5&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;33.&lt;/td&gt;
&lt;td&gt;Jean Bahnik&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;27:07.1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;34.&lt;/td&gt;
&lt;td&gt;Emmanuel Sambo&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;27:19.5&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;35.&lt;/td&gt;
&lt;td&gt;Tyler Boyd&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;28:01.9&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;36.&lt;/td&gt;
&lt;td&gt;John Landes&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;28:04.3&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;37.&lt;/td&gt;
&lt;td&gt;Jordan Bach&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;28:07.4&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;38.&lt;/td&gt;
&lt;td&gt;Tracie D&amp;#39;Antonio&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;28:08.9&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;39.&lt;/td&gt;
&lt;td&gt;Jerry D&amp;#39;Antonio&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;28:11.0&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;40.&lt;/td&gt;
&lt;td&gt;Emma Colner&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;28:14.9&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;41.&lt;/td&gt;
&lt;td&gt;Laura Kinson&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;28:30.9&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;42.&lt;/td&gt;
&lt;td&gt;Mike Perham&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;28:56.7&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;43.&lt;/td&gt;
&lt;td&gt;Angel Huezo&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;29:03.6&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;44.&lt;/td&gt;
&lt;td&gt;Dylan Fitzgerald&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;27:55.3&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;45.&lt;/td&gt;
&lt;td&gt;Ian Whitney&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;29:18.2&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;46.&lt;/td&gt;
&lt;td&gt;Leah Goldberg&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;29:48.7&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;47.&lt;/td&gt;
&lt;td&gt;Britney Wright&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;29:49.6&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;48.&lt;/td&gt;
&lt;td&gt;Rodrigo DeJuana&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;29:58.9&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;49.&lt;/td&gt;
&lt;td&gt;Mike Vormwald&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;29:59.7&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;50.&lt;/td&gt;
&lt;td&gt;Bella Woo&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;30:05.9&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;51.&lt;/td&gt;
&lt;td&gt;Nicole Lopez&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;30:32.1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;52.&lt;/td&gt;
&lt;td&gt;Adriana Amelia Padua&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;30:55.1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;53.&lt;/td&gt;
&lt;td&gt;Jason Toy&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;32:44.5&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;54.&lt;/td&gt;
&lt;td&gt;Fernando Seror&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;33:05.4&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;55.&lt;/td&gt;
&lt;td&gt;Kirk Haines&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;33:20.6&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;56.&lt;/td&gt;
&lt;td&gt;Spencer Winegar&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;33:33.2&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;57.&lt;/td&gt;
&lt;td&gt;Adam Cuppy&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;34:13.5&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;58.&lt;/td&gt;
&lt;td&gt;Miki Rezentes&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;34:58.4&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;59.&lt;/td&gt;
&lt;td&gt;Kevin Menard&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;35:04.3&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;60.&lt;/td&gt;
&lt;td&gt;Chad Moran&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;35:18.8&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;61.&lt;/td&gt;
&lt;td&gt;Jennie Chamberlin&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;35:52.9&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;62.&lt;/td&gt;
&lt;td&gt;Zoee Silcock&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;36:07.1&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;63.&lt;/td&gt;
&lt;td&gt;Ernie Miller&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;36:39.6&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;64.&lt;/td&gt;
&lt;td&gt;Brandon Byers&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;37:30.5&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;65.&lt;/td&gt;
&lt;td&gt;Rashmi Yadav&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;40:16.4&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;66.&lt;/td&gt;
&lt;td&gt;Theeba Rajan&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;42:09.2&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;67.&lt;/td&gt;
&lt;td&gt;Jeffrey ODell&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;42:23.7&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;68.&lt;/td&gt;
&lt;td&gt;Ben Ward&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;69.&lt;/td&gt;
&lt;td&gt;Emily Golden&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;70.&lt;/td&gt;
&lt;td&gt;Sam Livingston-Gray&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
</description>
        <pubDate>Mon, 16 Nov 2015 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2015/11/16/rubyconf-5k-2015/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/11/16/rubyconf-5k-2015/</guid>
      </item>
    
      <item>
        <title>Microsoft's First Open Source DataCamp</title>
        <description>&lt;p&gt;Rarely do the words &amp;quot;open source&amp;quot; come to mind when the Microsoft Corporation is mentioned. As the maintainer of the SQL Server stack for both Ruby &amp;amp; Rails, and a long time Apple/UNIX fan, I have been engineering solutions to make working with SQL Server as easy as possible. Often times the work has required outside in hacks to a closed &amp;amp; proprietary set of technologies. That changed last week.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ossdatacamp/meeting-6348827ac90cef0e7d7f96c5f8b1df053b94b0d3d8439a5d2949a7f707ddf571.jpg&quot; class=&quot;tb-Img tb-Img--fancy&quot; alt=&quot;First day of introductions at Microsoft's OSSDataCamp&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Both &lt;a href=&quot;https://twitter.com/sgrif&quot;&gt;Sean Griffin&lt;/a&gt; and I were invited to represent the Ruby/Rails community at Microsoft&amp;#39;s first &lt;a href=&quot;https://twitter.com/hashtag/OSSDataCamp&quot;&gt;#OSSDataCamp&lt;/a&gt;. The idea is simple; to open up and engage our community at an intimate level. The results so far are incredibly positive and these new relationships feel lasting and honest.&lt;/p&gt;

&lt;p&gt;This post contains interesting details if you want to learn more about &lt;a href=&quot;http://azure.microsoft.com/&quot;&gt;Microsoft&amp;#39;s Azure&lt;/a&gt; platform. We were lucky enough to be exposed to some candid inner workings of their latest service offerings which look to be a strong competitor to Amazon&amp;#39;s Web Services.&lt;/p&gt;

&lt;h2 id=&quot;we-want-to-learn-from-you&quot;&gt;We Want To Learn From You&lt;/h2&gt;

&lt;p&gt;That sentiment was echoed by everyone I met. From engineers to leadership and various product managers in-between, Microsoft is hungry to learn and this time it does not feel like the old consume &amp;amp; conquer strategies from the &lt;a href=&quot;http://ironruby.net&quot;&gt;IronRuby&lt;/a&gt; days. Instead their new culture closely reflects that of &lt;a href=&quot;http://www.customink.com/about/our_story/&quot;&gt;CustomInk&amp;#39;s&lt;/a&gt; own Inkers. Our hosts were the most upbeat and polite folks I have seen.&lt;/p&gt;

&lt;aside class=&quot;tb-AsideQuote&quot;&gt;
  Microsoft is hungry to learn and this time it does not feel like the old consume &amp;amp; conquer...
&lt;/aside&gt;

&lt;h5 id=&quot;windows-support-a-diversity-issue&quot;&gt;Windows Support - A Diversity Issue&lt;/h5&gt;

&lt;p&gt;As Sean Griffin put it, we cannot require new engineers to buy a MacBook Pro to learn Ruby. Be it a &lt;a href=&quot;http://railsgirls.com&quot;&gt;Rails Girls&lt;/a&gt; workshop or your local meetup group, a poor Windows experience can literally lose good, diverse talent in our community. Thanks to projects like RailsInstaller, and the modern replacement &lt;a href=&quot;http://rubyinstaller.org&quot;&gt;RubyInstaller&lt;/a&gt;, we are stronger than we have historically been. But we can do better.&lt;/p&gt;

&lt;p&gt;To that end, Microsoft has kindly agreed to provide key projects like Rails, TinyTDS, and the ActiveRecord SQLServerAdapter with funded continuous integration using &lt;a href=&quot;http://www.appveyor.com&quot;&gt;AppVeyor&lt;/a&gt; services. Such a small cost can greatly impact our feedback loop and identify pain points quickly.&lt;/p&gt;

&lt;h5 id=&quot;a-changing-culture&quot;&gt;A Changing Culture&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ossdatacamp/learn-ruby-0b4c5cd3070a6c9d07024adafa582678e87402fcb715ba6eafa8e219a66aa965.jpg&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--third tb-Img--third--sm&quot; alt=&quot;Jack Yang learns Ruby in 1 day!&quot; /&gt;Change is hard on all sides. For me, getting into the mindset that Microsoft can help was a big step. When Sean found issues with &lt;a href=&quot;https://github.com/sstephenson/execjs&quot;&gt;execjs&lt;/a&gt; that led back to Windows Script Host, they introduced us to that team. Likewise, the SQL Server adapter has always needed a bullet-proof cross platform binary to dump the schema. &amp;quot;We can help and here are the engineers...&amp;quot; was the reply. Wow!&lt;/p&gt;

&lt;p&gt;Some issues sit well in Microsoft&amp;#39;s sphere to solve. What most impressed me was how eager they were to address them. Being a large company, often times the immediate answer was to schedule a series of 1-on-1s with the team(s) responsible. Connections and conversations like this quickly led to even pondering if Ruby could be installed on Windows by default. Or maybe even build cross platform SQL Server development binaries! 😱&lt;/p&gt;

&lt;h5 id=&quot;quid-pro-quo&quot;&gt;Quid Pro Quo&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ossdatacamp/keepit-weird-d53badd278a1edb1c401e4586df6bfabdb6877e297cbddbe1106cd6f9da6e1ae.jpg&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--half tb-Img--half--sm&quot; alt=&quot;Sean Griffin keeps it weird while helping you not blow up.&quot; style=&quot;float:left; margin-left:0; margin-right:1rem;&quot; /&gt;So what did Microsoft learn most from us? Other than Rubyists keep it weird? Likely their biggest takeaway was that Sean Griffin loves to play the &lt;a href=&quot;http://www.keeptalkinggame.com&quot;&gt;Keep Talking and Nobody Explodes&lt;/a&gt; game. I mean he &lt;em&gt;really&lt;/em&gt; loves to play this game.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s simple, use 2-way, fast-paced, verbal communication to quickly identify and defuse a virtual ticking time bomb. As it turned out, this is a great team building exercise. Becoming a bomb defusing expert is high on my list and I can not wait to play with a group of my fellow Inkers. Thanks Sean!&lt;/p&gt;

&lt;h2 id=&quot;coming-soon-to-ruby-rails&quot;&gt;Coming Soon To Ruby/Rails&lt;/h2&gt;

&lt;p&gt;We got a lot of work done along with establishing some big milestones for those using Windows and/or SQL Server with Ruby. Here are some things you can look forward to:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Upgrade TinyTDS to the latest FreeTDS v0.95 which supports the TDS v7.3 protocol.&lt;/li&gt;
&lt;li&gt;Making the adapter pass all tests for Rails 5 under active development.&lt;/li&gt;
&lt;li&gt;Allow TinyTDS to be statically compiled on every platform w/OpenSSL for easier Azure support.&lt;/li&gt;
&lt;li&gt;ActiveRecord JSON support via a v4.2 update. Leverages SQL 16 Box/Azure built-in JSON.&lt;/li&gt;
&lt;li&gt;Binstub wrappers for all statically compiled FreeTDS binaries.&lt;/li&gt;
&lt;li&gt;First class Azure support for Rails which includes proper DB setup and clone tasks.&lt;/li&gt;
&lt;li&gt;Allow the rails-sqlserver adapter to use an alternate jTDS connection mode.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These items are tracked in the &lt;a href=&quot;https://github.com/rails-sqlserver/tiny_tds/milestones&quot;&gt;TinyTDS&lt;/a&gt; and/or the &lt;a href=&quot;https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/milestones&quot;&gt;SQL Server Adapter&lt;/a&gt; milestones on GitHub. Follow along or contribute if anything interests you.&lt;/p&gt;

&lt;h2 id=&quot;microsoft-azure-in-brief&quot;&gt;Microsoft Azure In Brief&lt;/h2&gt;

&lt;p&gt;Azure != SQL Server, it is much more. Think AWS (Analytics, IoT, CDN, Etc) with a &lt;a href=&quot;https://portal.azure.com&quot;&gt;better frontend portal&lt;/a&gt;. Microsoft&amp;#39;s Azure platform and PaaS offerings are amazing and accessible for anyone looking to rapidly build out their new web application suite of microservices. Seriously, you really should consider it next time you are looking for a Heroku-style marketplace. Here is a quick brief:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;1 out of 4 VMs are Linux.&lt;/li&gt;
&lt;li&gt;7 million requests a second.&lt;/li&gt;
&lt;li&gt;1.6 million SQL databases.&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;command-line-application-interfaces&quot;&gt;Command Line &amp;amp; Application Interfaces&lt;/h5&gt;

&lt;p&gt;Portal smortal, who wants GUIs? The real power is in the command line and automation. Just like Heroku&amp;#39;s toolbelt, Azure has cross platform binaries that are open source on GitHub. This client has rich 2FA and is packed with interfaces. Services can even be stood up with a simple JSON template hosted on GitHub. Need an application interface? They have a Ruby SDK too.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Azure/azure-xplat-cli&quot;&gt;Cross Platform Command Line&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Azure/azure-quickstart-templates&quot;&gt;Quickstart Templates&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Azure/azure-sdk-for-ruby&quot;&gt;SDK for Ruby&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;services-marketplace&quot;&gt;Services Marketplace&lt;/h5&gt;

&lt;p&gt;Their marketplace and open source service offerings are seriously impressive. One that stood out is their Elasticsearch service and how well it can integrate with any data source. They literally built an entire frontend GUI that can help you build out super impressive search indexes.&lt;/p&gt;

&lt;p&gt;The message, &amp;quot;We give you 99.99% uptime, you worry about how search works, and we take care of the rest.&amp;quot; really stood out to me as a market differentiator. Maintaining shard strategies and the complexities of Elasticsearch is not what I want to do.&lt;/p&gt;

&lt;h5 id=&quot;sql-server-2016&quot;&gt;SQL Server 2016&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ossdatacamp/sql-server-stretch-dd93c4c92375890e248d7c85047e1540c2e2bc75eecf3444faf78395ad024832.png&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--third tb-Img--third--sm&quot; alt=&quot;Stretch On-Premises SQL Servers to Azure.&quot; /&gt;I can&amp;#39;t even begin to go into all the amazing features of SQL Server 2016 now available on Azure. A quick list includes:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Built-In JSON Support.&lt;/li&gt;
&lt;li&gt;Always encrypted data with transparent app/client usage.&lt;/li&gt;
&lt;li&gt;Data Lake infinite storage with built-in Revolution-R analytics.&lt;/li&gt;
&lt;li&gt;Diverse sharding and multi-tenant structures.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;One feature that stood out was SQL Server&amp;#39;s ability to &lt;a href=&quot;https://msdn.microsoft.com/en-us/library/dn935011.aspx&quot;&gt;stretch&lt;/a&gt; or archive historical data transparently and securely. This can be done entirely via their hosted service or coupled with your on-premises SQL Server databases. All without the application caring about managing that cold &amp;lt;=&amp;gt; hot data.&lt;/p&gt;

&lt;h2 id=&quot;many-thanks&quot;&gt;Many Thanks!&lt;/h2&gt;

&lt;p&gt;Special thanks to Microsoft as a whole. Especially to Andrea Lam and Meet Bhagdev for their personal &amp;amp; professional support during our trip. You made us feel right at home. Also in attendance for the first #OSSDataCamp were &lt;a href=&quot;https://twitter.com/manfre&quot;&gt;Michael Manfre&lt;/a&gt;, &lt;a href=&quot;https://twitter.com/michiyata&quot;&gt;Michiya Takahashi&lt;/a&gt;, and &lt;a href=&quot;https://github.com/timgraham?tab=activity&quot;&gt;Tim Graham&lt;/a&gt;. All of whom represented the Python/Django community and helped our open source cause.&lt;/p&gt;

&lt;p&gt;This is a process and one that I hope continues with Ruby and other languages. It will succeed if Microsoft actively contributes back to open source and in some cases, champions certain projects with an earnest level of excellence.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ossdatacamp/fetch-tobias-ternstrom-a2049eccce1dc3aa59f8e73633e8c919b1ce22b93ac1be8934bb8a057ecf7b80.jpg&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--third tb-Img--third--sm&quot; alt=&quot;Tobias Ternstrom helped make FETCH happen in SQL Server.&quot; /&gt;To the right is Tobias Ternstrom and myself. The reason I am so happy in that photo is that Tobias literally helped &lt;a href=&quot;http://style.mtv.com//wp-content/uploads/style/2014/03/so-fetch.gif&quot;&gt;make FETCH happen&lt;/a&gt; in SQL Server. Supporting a sane limit/offset model &lt;a href=&quot;http://metaskills.net/2015/01/25/activerecord-sqlserver-v4.2.0---code-name-kantishna/&quot;&gt;allowed projects&lt;/a&gt; like the ActiveRecord adapter to delete hundreds of lines of code while becoming more maintainable. Thanks so much Tobias! All ORMs everywhere love you.&lt;/p&gt;

&lt;p&gt;And lastly, I want to give a shout out to &lt;a href=&quot;https://github.com/larskanis&quot;&gt;Lars Kanis&lt;/a&gt; who has been a huge contributor over the past many months by making TinyTDS work well on Windows. Let him know it if you see his pull requests!&lt;/p&gt;
</description>
        <pubDate>Mon, 19 Oct 2015 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2015/10/19/microsofts-first-open-source-datacamp/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/10/19/microsofts-first-open-source-datacamp/</guid>
      </item>
    
      <item>
        <title>Inkovate 2015 Lightning Talks</title>
        <description>&lt;p&gt;Each year, our engineers gather together for an internal conference we call Inkovate. This year, we started with a series of lightning talks. Topics included everything from emerging technologies to useful tool tips. We recorded the talks to share with the Ruby community.&lt;/p&gt;

&lt;p&gt;Inkovate 2015 was a huge success. After the lightning talks, our engineers spent 2 days hacking on anything they fancied. The results exceeded our expectations. Unleashed creativity brings true inkovation. We’ll share more about the projects in the future.&lt;/p&gt;

&lt;p&gt;Please enjoy the lightning talks from our team members, or as we like to call them, Inkers.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;playlist-of-all-lightning-talks&quot;&gt;Playlist of all Lightning Talks&lt;/h2&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/videoseries?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;individual-talks&quot;&gt;Individual Talks&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://youtu.be/SycIL-bWyow?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot;&gt;Karle Durante &amp;quot;Developer Communities&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://youtu.be/jEV-aNGsR1o?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot;&gt;RJ Pittman &amp;quot;Our Boxen&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://youtu.be/7ThrvPV9mx4?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot;&gt;Dylan Pulliam &amp;quot;Semantic Web&amp;quot;&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://youtu.be/nb3GSHYoAtc?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot;&gt;John B. Hall &amp;quot;Catching my Metro train with Raspberry PID&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://youtu.be/bh8egnmZ2g4?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot;&gt;Matt Thompson &amp;quot;Prototyping with Yeoman&amp;quot;&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://youtu.be/mvcfHdzEw0g?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot;&gt;Kalimar Maia &amp;quot;The Turtle and the Panther&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://youtu.be/8JxeR6V7-3A?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot;&gt;Howard Miller &amp;quot;How to Troll Your Own Code and Win&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://youtu.be/3ZcGrv5abxk?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot;&gt;Jeremy Weiland &amp;quot;#noestimates: because developers cannot predict the future&amp;quot;&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://youtu.be/VvIpdbUwvkI?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot;&gt;Michael Peteuil &amp;quot;A (very) Brief History of Web Performance Optimization&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://youtu.be/4qm6JqsYC1A?list=PLRp9jPf602CCu8xiaUwp-fZqAnMVAjIZ-&quot;&gt;Adam Maas &amp;quot;Delay Faster with a Sidekiq&amp;quot;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Wed, 07 Oct 2015 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2015/10/07/inkovate-2015-lightning-talks/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/10/07/inkovate-2015-lightning-talks/</guid>
      </item>
    
      <item>
        <title>How to Dismantle a Data Center</title>
        <description>&lt;p&gt;Sorry for the bad reference to a &lt;a href=&quot;https://en.wikipedia.org/wiki/How_to_Dismantle_an_Atomic_Bomb&quot;&gt;great U2 Album&lt;/a&gt;, but taking out a data center was not as an easy endeavor as it seemed. It took too much planning, coordination, prioritization and sometimes resorted to endless begging for an engineer or developer to get applications moved, but that’s another story. I’m here to share the fun of finally getting a chance to tearing down the hard work, rip out all of the well routed networking cables and pull the dozens of racked servers that we carefully and thoughfully installed by my predecessors. &lt;a href=&quot;https://twitter.com/nathenharvey&quot;&gt;Mr. Harvey&lt;/a&gt;, AndrewD, Ramez and those before you, congrats on a very clean and well constructed set of cabinets.&lt;/p&gt;

&lt;p&gt;A couple weeks back, Gerald, Vandad and I headed out to Nokesville Blvd. It became quite clear that we needed something more than a couple of cars to haul it out. What was I thinking? Luckily, the Home Depot had their hourly truck available across the street.&lt;/p&gt;

&lt;p&gt;The 3PAR is in that stack. The desire to leave it hanging off the back of the truck was there, but we have one more event for that gear.
&lt;img src=&quot;/assets/content/how_dismantle_a_data_center/3par-36c6b8c0e49bedadaa178d16172518ca49ebc891afc75adac95e40f243a45135.jpg&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--responsive-ctr&quot; alt=&quot;3par&quot; /&gt;&lt;/p&gt;

&lt;p&gt;It’s been a while since we’ve moved so much gear. &lt;img src=&quot;/assets/content/how_dismantle_a_data_center/gerald-2e0b390e70aaf181de184a3123a4031542a3c1dd4ab7c744f96d6e62d3a605a5.jpg&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--responsive-ctr&quot; alt=&quot;gerald&quot; /&gt;&lt;/p&gt;

&lt;p&gt;That looks like gas money for one lucky engineer. &lt;img src=&quot;/assets/content/how_dismantle_a_data_center/wires-44e26bdf578405fb6bdccd7c529cf4ea74e817b0e90b29c4747d3853452c092a.jpg&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--responsive-ctr&quot; alt=&quot;wires&quot; /&gt;&lt;/p&gt;

&lt;p&gt; It’s all out. That’s a full truckload of CustomInk.
&lt;img src=&quot;/assets/content/how_dismantle_a_data_center/truck-42606487a06ef4d07335c2f5bf99a64b6b3494580750057fe8748d228529e18d.jpg&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--responsive-ctr&quot; alt=&quot;truck&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 11 Sep 2015 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2015/09/11/how-to-dismantle-a-data-center/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/09/11/how-to-dismantle-a-data-center/</guid>
      </item>
    
      <item>
        <title>Ruby For Good</title>
        <description>&lt;p&gt;This weekend I had the pleasure of co-hosting &lt;a href=&quot;http://rubyforgood.com/&quot;&gt;Ruby For Good&lt;/a&gt;, a conference that brings programmers together to work on projects for a variety of charities and non-profit organizations. This year, adorable kittens were involved.
&lt;/br&gt;
&lt;img src=&quot;/assets/content/ruby_for_good_2015/kitten-fd73cb1d457b5f57e00395069de120ac656a20b2640fd3ad2a6ec4aa389cd7d2.jpg&quot; class=&quot;tb-Img tb-Img--responsive-ctr&quot; alt=&quot;cute kitten&quot; /&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;how-it-works&quot;&gt;How it Works&lt;/h2&gt;

&lt;p&gt;Conference attendees stayed in the dorms at &lt;a href=&quot;http://www.gmu.edu/&quot;&gt;George Mason University&lt;/a&gt; for three days. They assembled into teams and worked on projects throughout the day. They were also responsible for preparing meals for everyone. In the evening, folks relaxed by playing board games and hanging out.&lt;/br&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2015/kitchen-111bb1986c02777f01f7aa860743dfd82a9c8f5553d0e326ae8603f851432403.jpg&quot; class=&quot;tb-Img tb-Img--responsive-ctr&quot; alt=&quot;kitchen duty&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Although the format is very simple, attendees told us they got a lot out of participating, regardless of their experience levels. We are still going through the feedback surveys but here&amp;#39;s a great blog post by one of this year&amp;#39;s do-gooders &lt;a href=&quot;http://rolentle.com/ruby-for-good/&quot;&gt;http://rolentle.com/ruby-for-good/&lt;/a&gt;.
&lt;/br&gt;
&lt;img src=&quot;/assets/content/ruby_for_good_2015/pairing-ccfaf0b6ff090b62c6f8c269be758c83bf68808591beb0d47850a835fe2c087d.jpg&quot; class=&quot;tb-Img tb-Img--responsive-ctr&quot; alt=&quot;pair programming&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;this-years-projects&quot;&gt;This Year&amp;#39;s Projects&lt;/h2&gt;

&lt;p&gt;This year&amp;#39;s projects were all really exciting. The work ranged from building an entirely new web presence, to updating an existing Rails application, to contributing to open source projects.  Here&amp;#39;s the list of groups we worked with:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.hsfc.org/&quot;&gt;Humane Society of Fairfax&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.thegrowhaus.org/&quot;&gt;Denver GrowHaus&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.worldwildlife.org/&quot;&gt;World Wildlife Fund&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.purpledoorcoffee.com/&quot;&gt;Purple Door&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/ysiadf/AllIncomeFoods/&quot;&gt;All Income Foods&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.publicartcommons.org/&quot;&gt;Balitmore Arts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.usvotefoundation.org/&quot;&gt;US Vote Foundation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/rspec/rspec-rails/&quot;&gt;RSpec-Rails&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It&amp;#39;s so cool to hear a junior developer talk about their opportunity to contribute to something as widely used as Rspec!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2015/group-hug-1e7025598e1a81c0756b38f499c55132a70d8f1993f164506a7afff167e0539f.jpg&quot; class=&quot;tb-Img tb-Img--responsive-ctr&quot; alt=&quot;group hug&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;you-can-get-involved-today&quot;&gt;You Can Get Involved Today!&lt;/h2&gt;

&lt;p&gt;Contribute to next year&amp;#39;s Ruby For Good by &lt;a href=&quot;https://www.booster.com/rubyforgood&quot;&gt;purchasing a t-shirt&lt;/a&gt; - proceeds go to scholarships for future attendees.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/ruby_for_good_2015/group-heart-944f814f7946bcc58534f6a6ea5edc6a543368e77c039548143928de67706a51.jpg&quot; class=&quot;tb-Img tb-Img--responsive-ctr&quot; alt=&quot;group heart&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 05 Aug 2015 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2015/08/05/ruby-for-good/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/08/05/ruby-for-good/</guid>
      </item>
    
      <item>
        <title>Bundler Inline Gemfile Dependencies</title>
        <description>&lt;p&gt;If you haven&amp;#39;t noticed, the &lt;a href=&quot;http://bundler.io/blog/2015/06/24/version-1-10-released.html&quot;&gt;Bundler&lt;/a&gt; team has been on a tear lately. It&amp;#39;s hard
to keep up with the pace of the 1.10.x releases. Along with improvements, they have been adding features. One that you might have missed is the new &lt;a href=&quot;https://github.com/bundler/bundler/blob/master/lib/bundler/inline.rb&quot;&gt;bundler/inline&lt;/a&gt; and it&amp;#39;s &lt;code&gt;gemfile&lt;/code&gt; method.&lt;/p&gt;

&lt;p&gt;Bundler Inline allows you declare your gem dependencies &amp;quot;inline&amp;quot; instead of a Gemfile. This is perfect for single file scripts. Everything can be contained in a single file, no Gemfile, no &lt;code&gt;bundle install&lt;/code&gt;, and you can run your script without a prefixing it with &lt;code&gt;bundle exec&lt;/code&gt;.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Recently at &lt;a href=&quot;http://rubyloco.com&quot;&gt;RubyLoCo Hack Night&lt;/a&gt;, we were challenged with creating an ASCII flag. Given a &lt;a href=&quot;https://github.com/rubyloco/hack-night/blob/master/meetings/2015-07-13/flag.rb&quot;&gt;starter script&lt;/a&gt; that printed out a simple ASCII art American flag, our  first thought was to print it in color. There is a gem for that named &lt;a href=&quot;https://github.com/fazibear/colorize&quot;&gt;colorize&lt;/a&gt;. But how do we install the gem and require it in our script? We wouldn&amp;#39;t be so pedestrian as to actually run &lt;code&gt;gem install colorize&lt;/code&gt;. We are proud bundlers.&lt;/p&gt;

&lt;p&gt;&lt;img src=/assets/content/bundler_inline_gemfile/pre_flag-0180d46177063c57a3378b4cf6e021082a1de074506a82064a9d11a8192d0b87.png alt=&quot;Default Flag&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;inline-gemfile&quot;&gt;Inline Gemfile&lt;/h2&gt;

&lt;p&gt;For a simple script, creating a Gemfile is too much ceremony. The new &lt;a href=&quot;https://github.com/bundler/bundler/blob/master/lib/bundler/inline.rb&quot;&gt;Bundler Inline&lt;/a&gt; will help us. We require &lt;code&gt;bundler/inline&lt;/code&gt; and then pass a block to &lt;code&gt;gemfile&lt;/code&gt;. Inside the block, we use the traditional Bundler DSL.&lt;/p&gt;

&lt;p&gt;The gems declared inside the &lt;code&gt;gemfile&lt;/code&gt; block will automatically be required into our script. You can still pass the option to &lt;code&gt;require: false&lt;/code&gt;. At the top of our script, we declare our gemfile &lt;em&gt;inline&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env ruby&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'bundler/inline'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gemfile&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://rubygems.org'&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'colorize'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;By default, running your script will not install gems to your system. But, we can pass &amp;quot;true&amp;quot; as the first argument to check and install gems when our script is run.&lt;/p&gt;

&lt;p&gt;Because this is all inline, we do not need to prefix our command line with &lt;code&gt;bundle exec&lt;/code&gt;. We can just run our script, Bundler will install the required gems and require them for us. Now that we have required the colorize gem, our strings have color changing methods like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'* * * * * * '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_blue&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0000000000000000000000000000000000000000000000000000000'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_white&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1111111111111111111111111111111111111111111111111111111'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_red&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And now... With the help of Bundler... And colorize... We present &lt;strong&gt;Happy Birthday America&lt;/strong&gt;!&lt;/p&gt;

&lt;p&gt;&lt;img src=/assets/content/bundler_inline_gemfile/post_flag-96759bb2218646ba696491d739be1f7c28a578012931c71893f00dfba835dd84.png alt=&quot;Colored Flag&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;what-did-we-accomplish&quot;&gt;What did we accomplish?&lt;/h2&gt;

&lt;p&gt;We started with an example script that printed an American flag in black and white. We wanted to make it red, white and blue with the colorize gem. We did not want to add a Gemfile to our directory for this single file script. We declared our gem dependencies inline using the new &lt;code&gt;bundler/inline&lt;/code&gt;. Now,  our gems will install when we run the script.&lt;/p&gt;

&lt;h2 id=&quot;final-script&quot;&gt;Final Script&lt;/h2&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#!/bin/env ruby&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;#!/usr/bin/env ruby&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'bundler/inline'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gemfile&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://rubygems.org'&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'colorize'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'* * * * * * '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_blue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1111111111111111111111111111111111111111111'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_red&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;' * * * * *  '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0000000000000000000000000000000000000000000'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_white&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'* * * * * * '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1111111111111111111111111111111111111111111'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_red&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;' * * * * *  '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0000000000000000000000000000000000000000000'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_white&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'* * * * * * '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1111111111111111111111111111111111111111111'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_red&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;' * * * * *  '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0000000000000000000000000000000000000000000'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_white&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'* * * * * * '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1111111111111111111111111111111111111111111'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_red&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0000000000000000000000000000000000000000000000000000000'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_white&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1111111111111111111111111111111111111111111111111111111'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_red&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0000000000000000000000000000000000000000000000000000000'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_white&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1111111111111111111111111111111111111111111111111111111'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_red&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0000000000000000000000000000000000000000000000000000000'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_white&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1111111111111111111111111111111111111111111111111111111'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on_red&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;CustomInk is a proud supporter of &lt;a href=&quot;https://rubytogether.org/&quot;&gt;Ruby Together&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 17 Jul 2015 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2015/07/17/bundler-inline-gemfile-dependencies/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/07/17/bundler-inline-gemfile-dependencies/</guid>
      </item>
    
      <item>
        <title>Colorized SQL Log Backport for ActiveRecord</title>
        <description>&lt;p&gt;One of the &lt;a href=&quot;https://github.com/rails/rails/pull/20607&quot;&gt;new features&lt;/a&gt; of Rails 5 will be granular SQL logging so you can easily see &lt;code&gt;SELECT&lt;/code&gt;, &lt;code&gt;INSERT&lt;/code&gt;, &lt;code&gt;UPDATE&lt;/code&gt;, &lt;code&gt;DELETE&lt;/code&gt;, and &lt;code&gt;TRANSACTION&lt;/code&gt; statements in your log. For example:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/colored-logging-86436848bcea9b5fea72c77f2031c12c1b9dbcc156a5f8ef177644ad1ac1f099.png&quot; class=&quot;tb-Img tb-Img--fancy tb-Img--responsive-ctr&quot; alt=&quot;Colorized SQL Log Backport for Rails 5&quot; /&gt;&lt;/p&gt;

&lt;p&gt;But why let Rails 5 have all the fun? Today I created a gem that allows you to leverage this feature now. The gem is currently compatible and tested for Rails 3.2 to 4.2. Get it here and happy logging!&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/customink/activerecord-colored_log_subscriber&quot;&gt;https://github.com/customink/activerecord-colored_log_subscriber&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/customink/activerecord-colored_log_subscriber&quot;&gt;Colorized SQL Log Backport Gem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/rails/rails/pull/20607&quot;&gt;Rails 5 Pull Request&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Thu, 16 Jul 2015 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2015/07/16/colorized-sql-log-backport-for-activerecord/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/07/16/colorized-sql-log-backport-for-activerecord/</guid>
      </item>
    
      <item>
        <title>I have the PR!</title>
        <description>&lt;p&gt;&lt;img src=&quot;http://blog.culturewaves.net/wp-content/uploads/2011/09/he-man-columbia.jpg&quot; class=&quot;tb-Img tb-Img--responsive&quot; alt=&quot;he-man&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We recently implemented a stronger, more active, pull request culture at CustomInk, as part of our deploy process. As you may already know, a pull request is a feature on &lt;a href=&quot;https://help.github.com/articles/using-pull-requests/&quot;&gt;Github&lt;/a&gt; that broadcasts to others that you would like to have your changes merged into an upstream project. [&lt;strong&gt;note:&lt;/strong&gt; &lt;em&gt;Turns out it&amp;#39;s built into git itself &lt;a href=&quot;http://git-scm.com/docs/git-request-pull&quot;&gt;http://git-scm.com/docs/git-request-pull&lt;/a&gt;&lt;/em&gt;]. We find that it&amp;#39;s great for learning what other engineering teams are working on. It&amp;#39;s also a great opportunity to share knowledge.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Case in point, this blog post is the direct result of that process. I was tasked with the simple job of updating a close button with something cleaner. Since we are no longer supporting Internet Explorer 8, why not do it with CSS and eliminate the need for an image file? Here&amp;#39;s how it evolved:&lt;/p&gt;

&lt;h3 id=&quot;first-iteration&quot;&gt;First Iteration&lt;/h3&gt;

&lt;p&gt;Give an anchor some dimensions, a border-radius of 50% so it&amp;#39;s round, and then position it absolutely in the corner of the box.
Position the &lt;code&gt;&amp;amp;times;&lt;/code&gt; icon inside the anchor and done!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot; http://qph.is.quoracdn.net/main-qimg-c987e575dca535436a6b811c189e7294?convert_to_webp=true&quot; class=&quot;tb-Img tb-Img--responsive-ctr&quot; alt=&quot;ship it squirrel&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;html&quot;&gt;HTML&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;removeItem&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;closer&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;ni&quot;&gt;&amp;amp;times;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;css&quot;&gt;CSS&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;nc&quot;&gt;.removeItem&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;absolute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;pointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;50%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;solid&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;18px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;18px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;.closer&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;relative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;-17px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;16px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-weight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;700&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://sassmeister.com/gist/2f79c9b2dba3dd036327&quot;&gt;See it on SassMeister&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Simple enough - push changes and make a pull request so it can be deployed. Or at least I thought. Constructive advice in the pull request revealed that there&amp;#39;s at least one way to do this more cleanly. Here&amp;#39;s the second iteration:&lt;/p&gt;

&lt;h3 id=&quot;second-iteration&quot;&gt;Second Iteration&lt;/h3&gt;

&lt;p&gt;The second iteration took the content out of the span by way of the CSS &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/CSS/content&quot;&gt;content property&lt;/a&gt; (which uses the &lt;code&gt;::before&lt;/code&gt; or &lt;code&gt;::after&lt;/code&gt; pseudo-elements). We also replaced the &lt;code&gt;&amp;amp;times;&lt;/code&gt; with &lt;code&gt;\00d7&lt;/code&gt; because of how the symbol gets generated in CSS vs HTML. These pseudo-elements are handy because as their names suggest, they allow you to insert content before or after another HTML element.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s just a small taste of what can be done with dynamic content. [&lt;strong&gt;note&lt;/strong&gt;: &lt;em&gt;I hear there&amp;#39;s an upcoming CustomInk blog post on with amazing examples of pseudo-generated content so keep your eyes peeled.&lt;/em&gt;]&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;removeItem&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;p&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;closer&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;nc&quot;&gt;.removeItem&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;absolute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;pointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;50%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;solid&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;18px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;18px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;closer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;before&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;relative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;'\00d7'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;-17px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;16px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-weight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;700&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://sassmeister.com/gist/fb1b09a16dbc48155c7f&quot;&gt;See it on SassMeister&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;third-iteration&quot;&gt;Third Iteration&lt;/h3&gt;

&lt;p&gt;Pushing this new revision up to Github and requesting feedback led to the third and final version which didn&amp;#39;t even use the inner &lt;code&gt;p&lt;/code&gt; element (duh!). A &lt;code&gt;::before&lt;/code&gt; pseudo-element did the trick.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;a&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;removeItem&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;nc&quot;&gt;.removeItem&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;absolute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;cursor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;pointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;50%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;solid&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;18px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;18px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;&amp;amp;::before&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;relative&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;'\00d7'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;top&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;16px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-weight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;700&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://sassmeister.com/gist/6eb615c1d07c9ccc6479&quot;&gt;See it on SassMeister&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;ending-notes&quot;&gt;Ending Notes&lt;/h3&gt;

&lt;p&gt;I hope this blog post encourages your team to start using pull requests not only for merging branches but also as a tool for sharing code and starting conversations. The experience was meaningful for me because my &lt;a href=&quot;https://www.youtube.com/watch?v=W2yIkDVs0cA&quot;&gt;grasshopper&lt;/a&gt; knowledge of CSS had me assuming I knew the only way to implement the code. Instead it turned into a great opportunity to level up my styling work.&lt;/p&gt;

&lt;p&gt;Thoughtbot has excellent resources for developers and the &lt;a href=&quot;https://github.com/thoughtbot/guides/tree/master/code-review&quot;&gt;guidelines for code reviews&lt;/a&gt; are no exception.&lt;/p&gt;
</description>
        <pubDate>Tue, 07 Jul 2015 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2015/07/07/i-have-the-pr/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/07/07/i-have-the-pr/</guid>
      </item>
    
      <item>
        <title>Rails Multi-Database Best Practices Roundup</title>
        <description>&lt;div class=&quot;sb-Dialog sb-Dialog--info&quot;&gt;
  &lt;div class=&quot;sb-Dialog-icon&quot;&gt;
    &lt;i class=&quot;sb-Icon--info&quot;&gt;&lt;/i&gt;
  &lt;/div&gt;
  &lt;div class=&quot;sb-Dialog-message&quot;&gt;
    &lt;h3&gt;Seamless second database integration for Rails.&lt;/h3&gt;
    &lt;p&gt;
      2016-01-11: We just finished a new version of SecondBase, our own gem that provides support for Rails to manage dual databases by extending ActiveRecord tasks that create, migrate, and test your application. It supports Rails 4.x and up. &lt;a href=&quot;https://github.com/customink/secondbase&quot;&gt;Check it out on GitHub.&lt;/a&gt;
    &lt;/p&gt;
   &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;Since landing my first job programming with Ruby, most Rails applications I have worked with have managed two or more database connections. Often times these connections are both readable and writable. Collectively they represent a comprehensive business domain. Today I would like to cover everything I know about this topic, without going into the bike shed of micro services or schema management gems.&lt;/p&gt;

&lt;p&gt;The goal is simple! To give you the tools you need to keep your application running smoothly when connecting to multiple databases.&lt;/p&gt;

&lt;h2 id=&quot;topics-scenarios&quot;&gt;Topics &amp;amp; Scenarios&lt;/h2&gt;

&lt;p&gt;Each topic or scenario below is tested within a demo Rails application that you can checkout on GitHub. See the &lt;a href=&quot;#resources&quot;&gt;resources section&lt;/a&gt; at the bottom of this post for more information. Examples assume that Rails 3.2.x to 4.2.x are the same behavior. When this is not the case, it will be explicitly pointed out.&lt;/p&gt;

&lt;p&gt;Reasons for multiple database connections vastly differ. To illustrate a common setup, this demo application will use PostgreSQL as the base &amp;quot;legacy&amp;quot; connection. Just imagine this base is something like Oracle or SQL Server. Our second connection is going to be MySQL. This is the database we want to migrate our primary new business logic onto.&lt;/p&gt;

&lt;p&gt;To easily follow along, MySQL models will be prefixed as such and all ActiveRecord logs have been tagged with the database connection that executed the query. This setup will give us more than enough opportunity to explore and have fun. Lets go!&lt;/p&gt;

&lt;h3 id=&quot;topic-1-connection-management&quot;&gt;Topic 1: Connection Management&lt;/h3&gt;

&lt;p&gt;First and foremost we are going to need a base class that champions a database connection. This is critical so that each subclass shares the same connection/pool. For example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MysqlBase&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;establish_connection&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;configurations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'mysql'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;abstract_class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Do not use establish_connection for other models.&lt;/strong&gt; Only use it for the base connection class. Setting your base connection class as an &lt;code&gt;abstract_class&lt;/code&gt; keeps ActiveRecord from querying the database for column information. Meaning this model has no attributes. Use this connection class as the superclass for each of your MySQL models. For example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Order&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, each model will will share the same connection pool. Benefits include:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Shared transaction blocks.&lt;/li&gt;
&lt;li&gt;Reduced database connections.&lt;/li&gt;
&lt;li&gt;Single point for connection management.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;topic-2-the-activerecord-query-cache&quot;&gt;Topic 2: The ActiveRecord Query Cache&lt;/h3&gt;

&lt;p&gt;ActiveRecord&amp;#39;s &lt;a href=&quot;http://guides.rubyonrails.org/caching_with_rails.html#sql-caching&quot;&gt;query cache&lt;/a&gt; can be a beneficial performance optimization. On by default, it caches SQL results for the same query during the request/response cycle. This caching really shines with child to parent associations where &lt;code&gt;n&lt;/code&gt; children find the same parent and only hit the database once.&lt;/p&gt;

&lt;p&gt;Unfortunately ActiveRecord can only cache your base connection. It knows not of other databases. So let&amp;#39;s &amp;quot;cash in&amp;quot; on some of our simple code dividends and put that base connection class to work.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ApplicationController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActionController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;around_filter&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:cache_other_db_connections&lt;/span&gt;

  &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;cache_other_db_connections&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cache&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Yup, it is that easy! If you had multiple database connections, just nest them in the outer block and yield once to the controller&amp;#39;s around filter.&lt;/p&gt;

&lt;h3 id=&quot;scenario-1-implicit-multi-db-transactions&quot;&gt;Scenario 1: Implicit Multi-DB Transactions&lt;/h3&gt;

&lt;p&gt;So what happens when a model for one database creates or updates another model?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MysqlUser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;table_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:users&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;after_save&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:account_create&lt;/span&gt;

  &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;account_create&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create_from_user!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Our &lt;code&gt;MysqlUser&lt;/code&gt; model is going to save a legacy account model using the &lt;code&gt;after_save&lt;/code&gt; callback. Remember, ActiveRecord runs creates or saves inside of a transaction.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;new_mysql_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;account_create&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;new_mysql_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;accounts&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RETURNING&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;id&quot;&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;COMMIT&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;COMMIT&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So the outcome is pretty clear here. We have two distinct database transactions. One is not going to affect the other. What would happen if the account raised an exception when being created? Possibly due to a validation error?&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;new_mysql_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;account_create&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;new_mysql_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;account_fails_validation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;new_mysql_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;ROLLBACK&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;ROLLBACK&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Not bad. We can see that ActiveRecord handles this simple setup quite well. Both the user and the account are rolled back.&lt;/p&gt;

&lt;h3 id=&quot;topic-3-the-activerecord-rollback-exception&quot;&gt;Topic 3: The ActiveRecord::Rollback Exception&lt;/h3&gt;

&lt;p&gt;With our first scenario understood, it is time for another topic. Time to talk about the &lt;code&gt;ActiveRecord::Rollback&lt;/code&gt; exception object. Please take a moment to read the ActiveRecord documentation.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Transaction uses this exception to distinguish a deliberate
rollback from other exceptional situations. Normally, raising
an exception will cause the transaction method to rollback
the database transaction and pass on the exception. But if
you raise an ActiveRecord::Rollback exception, then the database
transaction will be rolled back, without passing on the exception.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Did you see that? Using an &lt;code&gt;ActiveRecord::Rollback&lt;/code&gt; will &lt;strong&gt;NOT&lt;/strong&gt; pass the exception to a higher transaction block. To illustrate what happens, let&amp;#39;s take our last scenario example and change the account to raise an &lt;code&gt;ActiveRecord::Rollback&lt;/code&gt; vs a validation exception.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;new_mysql_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;account_create&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;new_mysql_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;account_raise_rollback&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;new_mysql_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;ROLLBACK&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;COMMIT&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And there we go! The MySQL user just carries along on its happy way and commits the change. I will have more rollback examples below, but I might go so far as to say that you may never want to use &lt;code&gt;ActiveRecord::Rollback&lt;/code&gt; unless you have a very clear grasp on how to manage transactions.&lt;/p&gt;

&lt;h3 id=&quot;scenario-2-explicit-multi-db-transactions&quot;&gt;Scenario 2: Explicit Multi-DB Transactions&lt;/h3&gt;

&lt;p&gt;Implicit transactions are great for one or two model instances, but sooner are later you will need to orchestrate more objects within a larger commit. Explicit transactions give you this control. Here is a simple multi-database example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;MysqlUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transaction&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;MysqlUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create!&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;email: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'one@one.com'&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;MysqlUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create!&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;email: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'two@two.com'&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create!&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;email: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'one@one.com'&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create!&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;email: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'two@two.com'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;accounts&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RETURNING&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;id&quot;&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;COMMIT&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;accounts&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;VALUES&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RETURNING&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;id&quot;&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;COMMIT&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;COMMIT&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The outer MySQL transaction was automatically joinable during the first two creates. This is because the model creates detected that the connection was already under a sharable transaction. The problem here is that the base connection had no joinable transaction block. Despite which connection we started the outer block with, the problem is the same. The solution is to open a transaction for each connection before doing any work.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;MysqlUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transaction&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transaction&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;MysqlUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create!&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;email: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'one@one.com'&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;MysqlUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create!&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;email: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'two@two.com'&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create!&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;email: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'one@one.com'&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create!&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;email: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'two@two.com'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sql&quot; data-lang=&quot;sql&quot;&gt;&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;`users`&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;accounts&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RETURNING&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;id&quot;&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;INTO&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;accounts&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(...)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RETURNING&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;id&quot;&lt;/span&gt;
 &lt;span class=&quot;n&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;COMMIT&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;MySQL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;COMMIT&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we have a tidy atomic transaction across both databases. Any exception raised besides &lt;code&gt;ActiveRecord::Rollback&lt;/code&gt; will automatically rollback both transactions. This pattern is so useful, I suggest making a helper that does the work for you. Again, this leverages the base connection class for the second database – I did promise it would come in handy.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class_eval&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;multi_transaction&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transaction&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transaction&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;multi_transaction&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;multi_transaction&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now anytime you need to commit large changes, just wrap your code in &lt;code&gt;ActiveRecord::Base.multi_transaction { ... }&lt;/code&gt; and sleep better knowing that your data is clean. If you want to learn more about ActiveRecord&amp;#39;s transactions, please read the &lt;a href=&quot;http://apidock.com/rails/ActiveRecord/ConnectionAdapters/DatabaseStatements/transaction&quot;&gt;Rails API Docs&lt;/a&gt;. They cover advanced topics like isolation levels and savepoints. None of which are covered in this post.&lt;/p&gt;

&lt;h3 id=&quot;topic-4-explicit-transactions-are-serious&quot;&gt;Topic 4: Explicit Transactions Are Serious!&lt;/h3&gt;

&lt;p&gt;If you are doing explicit transactions, you likely mean business. If so, make your code serious by using ActiveRecord&amp;#39;s bang methods. Doing so helps keep code explicit to the task at hand with automatic rollbacks to two or more databases. Examples include:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;save!&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;create!&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;update_attributes!&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;update!&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;destroy!&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If you must raise exceptions during explicit transactions to multiple databases, please stay away from using &lt;code&gt;ActiveRecord::Rollback&lt;/code&gt;, this could complicate your code and in most cases need to be re-raised.&lt;/p&gt;

&lt;h3 id=&quot;topic-5-shared-connection-pools&quot;&gt;Topic 5: Shared Connection/Pools&lt;/h3&gt;

&lt;p&gt;Every now and then you may use a gem whose model(s) subclasses &lt;code&gt;ActiveRecord::Base&lt;/code&gt; and you want to force that connection to another database. The &lt;code&gt;Delayed::Job&lt;/code&gt; library is a good example. You could use &lt;code&gt;establish_connection&lt;/code&gt;, but that would generate a distinct connection pool and keep transactions from being shared. Here is a bullet proof freedom patch to use with any model.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# In config/initializers/delayed_job.rb&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Delayed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Backend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Job&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class_eval&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;connection_pool&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection_pool&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;retrieve_connection&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;retrieve_connection&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;connected?&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connected?&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;remove_connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;klass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;remove_connection&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This would change Delayed::Job from using our base connection to using our second MySQL connection. It is best to do patches like this in a Rails initializer. This guarantees gems are already reqired and in most cases have not yet connected to the database. If your model connects before these patches are applied, you could end up with an orphaned connection pool to the wrong database.&lt;/p&gt;

&lt;p&gt;The patch works by overriding critical connection specification/handling class methods defined on ActiveRecord::Base. The first two methods &lt;code&gt;connection_pool&lt;/code&gt; and &lt;code&gt;retrieve_connection&lt;/code&gt; will make all your queries work. The second two will ensure all remaining connection management methods like &lt;code&gt;remove_connection&lt;/code&gt; and &lt;code&gt;clear_all_connections!&lt;/code&gt; do the same. But remember! If you need to do any connection management, you really only need do it on the connection class, in this case, &lt;code&gt;MysqlBase&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;topic-6-forked-processes-clearing-connections&quot;&gt;Topic 6: Forked Processes &amp;amp; Clearing Connections&lt;/h3&gt;

&lt;p&gt;Most libraries that fork your Rails application process know how to reset ActiveRecord&amp;#39;s base connections. This includes web servers like Passenger or Unicorn. However, it is up to you to do the same for any other database connections. This is easy to do by leveraging our connection class in the first topic.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;clear_all_connections!&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;establish_connection&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;configurations&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'mysql'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;First we clear all connections. This is normally done before forking. Methods like &lt;code&gt;clear_all_connections!&lt;/code&gt; and &lt;code&gt;clear_active_connections!&lt;/code&gt; iterate across all connection pools. You only need to call this once, not per connection. Second, we call &lt;code&gt;establish_connection&lt;/code&gt; on our MySQL connection class using the same configuration method we did in the first topic.&lt;/p&gt;

&lt;h3 id=&quot;topic-7-rails-transactional-fixtures&quot;&gt;Topic 7: Rails Transactional Fixtures&lt;/h3&gt;

&lt;p&gt;If you are using transactional fixtures and you have fixtures for each connection, then ActiveRecord will do all the work for you by making sure each test is wrapped with transactional savepoints to each database. However, if you do not have fixtures for all connections then it is up to you to start the first transaction for each additional connection. Again, using our MySQL connection class as an example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Rails 3.2.x&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;before&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;increment_open_transactions&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transaction_joinable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;begin_db_transaction&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;after&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;open_transactions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rollback_db_transaction&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;decrement_open_transactions&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Rails 4.2.x&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;before&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;begin_transaction&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;joinable: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;after&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;MysqlBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rollback_transaction&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Please remember that ActiveRecord uses savepoints for nested transactions. Depending on your database, you will see &lt;code&gt;SAVEPOINT&lt;/code&gt; and &lt;code&gt;RELEASE SAVEPOINT&lt;/code&gt; for tests in your logs. Only the outer most transactions will use &lt;code&gt;BEGIN&lt;/code&gt; and &lt;code&gt;ROLLBACK&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;

&lt;p&gt;Thanks for reading this far. Did I miss anything important or maybe you would like to ask a question? If so, drop a comment and I would be more than happy to expand on any topic.&lt;/p&gt;

&lt;p&gt;Each topic or scenario here is fully tested in a demo rails application. Check it out on GitHub if you are interested in playing around with these or any other multi-database topics that interest you. If you find a new one or care to share your own, please drop a comment or a pull request.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/customink/encom_dbs&quot;&gt;Tested Multi-Database Rails Application&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Mon, 22 Jun 2015 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2015/06/22/rails-multi-database-best-practices-roundup/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/06/22/rails-multi-database-best-practices-roundup/</guid>
      </item>
    
      <item>
        <title>Ruby's Private is for Methods Only</title>
        <description>&lt;p&gt;The other day I saw a pull request, on a Rails project, that declared a private inner class. Having my fair share of experience with Java, I am very familiar with the construct. Essentially, you declare one class inside of another class and declare it as private. This is often done to clean up your internal data structures and hide the implementation details from others.&lt;/p&gt;

&lt;p&gt;I couldn&amp;#39;t recall ever seeing this in Ruby before, so it gave me pause. As we know, in Ruby, &amp;quot;private&amp;quot; isn&amp;#39;t really all that private. It just means that a method cannot be called with an explicit receiver.&lt;/p&gt;

&lt;!--more--&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Tommy&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pinball&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;wizard&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;blind&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;how do you think he does it?&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tommy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Tommy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#&amp;lt;Tommy:0x007f8f91074bf8&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tommy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pinball&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;wizard&quot;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tommy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;blind&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;NoMethodError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`blind' called for #&amp;lt;Tommy:0x007f8f91074bf8&amp;gt;
&amp;gt; tommy.send(:blind)
=&amp;gt; &quot;how do you think he does it?&quot;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&amp;quot;What does this &lt;i&gt;do&lt;/i&gt;?&amp;quot; I thought to myself, looking at the private class declaration. I didn&amp;#39;t know, so I decided to test it out.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Tommy&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pinball&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;wizard&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Senses&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;blind&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;how do you think he does it?&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;senses&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Tommy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Senses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#&amp;lt;Tommy::Senses:0x007f8f9211a958&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;senses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;blind&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;how do you think he does it?&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hmm...that wasn&amp;#39;t exactly what I expected. The concept of a private inner class exists in many languages, so I thought that maybe Ruby wouldn&amp;#39;t let me inherit from Tommy::Senses and override the implementation. It is private, after all.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Tommy&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pinball&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;wizard&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Senses&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;blind&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;how do you think he does it?&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BallyTableKing&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Tommy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Senses&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;blind&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;sure plays a mean pinball&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;king&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;BallyTableKing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#&amp;lt;BallyTableKing:0x007f8f920d2ba8&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;king&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;blind&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;sure plays a mean pinball&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Again, not at all what I expected. I decided to go to the &lt;a href=&quot;http://ruby-doc.org/core-2.0.0/Module.html#method-i-private&quot;&gt;Ruby docs&lt;/a&gt; to read up on private.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;With no arguments, sets the default visibility for subsequently defined methods to private. With arguments, sets the named methods to have private visibility.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;There are no mention of classes at all, which explains a lot. The private keyword in Ruby only exists to declare methods as private, not classes.&lt;/p&gt;
</description>
        <pubDate>Fri, 19 Jun 2015 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2015/06/19/rubys-private-is-for-methods-only/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/06/19/rubys-private-is-for-methods-only/</guid>
      </item>
    
      <item>
        <title>Ruby Pretzel Colons</title>
        <description>&lt;p&gt;The Ruby Pretzel Colon is one of my favorite idioms. But it&amp;#39;s salty goodness can be an acquired taste for new Ruby programmers.
There seems to be an aversion to it&amp;#39;s apparent magic. It is an unusual syntax. But it is easy to understand if you break it
down into it&amp;#39;s parts.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Here is an example of the pretzel colon:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# general style:&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;c1&quot;&gt;# pretzel style:&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The pretzel colon style &lt;code&gt;&amp;amp;:&lt;/code&gt; is more concise and focused and makes the perfect snack at the ball game.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s break down what is happening here. In the general style, the &lt;code&gt;map&lt;/code&gt; is iterating through the array and passing each person object to the block. The block is defined to take a single argument of a person, the block then calls &lt;code&gt;person.name&lt;/code&gt; and returns the name of the person.&lt;/p&gt;

&lt;p&gt;Using pretzel style, the result is the same, but the block is built for us using the &lt;code&gt;&amp;amp;&lt;/code&gt; operator. The &lt;code&gt;&amp;amp;&lt;/code&gt; operator calls &lt;code&gt;#to_proc&lt;/code&gt; on the object then converts the result into a block. If our object was a lambda or Proc, they return &lt;code&gt;self&lt;/code&gt; in their default &lt;code&gt;#to_proc&lt;/code&gt; method. But in this case, our object is a Symbol.&lt;/p&gt;

&lt;p&gt;The default implementation of &lt;code&gt;#to_proc&lt;/code&gt; on Symbol is to return a Proc that takes the first argument and &lt;code&gt;sends&lt;/code&gt; itself to the argument. Example pseudo code:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Symbol&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;to_proc&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The third act of a magic trick is called the Prestige. Using the default &lt;code&gt;#to_proc&lt;/code&gt; defined in &lt;code&gt;Symbol&lt;/code&gt;, combining it with &lt;code&gt;&amp;amp;&lt;/code&gt; which calls &lt;code&gt;#to_proc&lt;/code&gt; and converts the result into a block. We are building a block that takes the person object and sends the symbol to it. Sending &lt;code&gt;:name&lt;/code&gt; to person is the same as calling &lt;code&gt;person.name&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# expanded pretzel&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The combination of the Ruby &lt;code&gt;&amp;amp;&lt;/code&gt; operator&amp;#39;s ability to convert objects into blocks and the default implementation of Symbol&amp;#39;s &lt;code&gt;#to_proc&lt;/code&gt; combine into a magic pretzel. This makes our code more concise and expressive.&lt;/p&gt;

&lt;p&gt;A bit of history on the pretzel colon. This idiom started in Rails ActiveSupport but was eventually moved to Ruby Core. It was removed after Rails 2.3. The git history of the file shows &amp;quot;Marcel Molina authored on Nov 20, 2005&amp;quot;. The pretzel colon is almost 10 years old.&lt;/p&gt;

&lt;p&gt;see &lt;a href=&quot;https://github.com/rails/rails/blob/2-3-stable/activesupport/lib/active_support/core_ext/symbol.rb&quot;&gt;https://github.com/rails/rails/blob/2-3-stable/activesupport/lib/active_support/core_ext/symbol.rb&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 08 Jun 2015 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2015/06/08/ruby-pretzels/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/06/08/ruby-pretzels/</guid>
      </item>
    
      <item>
        <title>To the Cloud!</title>
        <description>&lt;p&gt;This month, WebOps overcame one of our final hurdles to rid ourselves of managing hardware, joining the likes of Netflix, AirBnB, and Dropbox in the cloud. We had been on a steady migration path and each step of the way, it has been a win for everyone; WebOps, Developers, Business Customers and most importantly, our customers. CustomInk now has more server capacity at it’s disposal than AOL when I left in 2010 all for an incremental hourly fee.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;As an old-school SysAdmin, not owning your own Silicon was a significant shift in mentality. In other jobs, I’ve had this false sense of security that if I knew where my hardware was, could touch it, my employees managed it, it was secure. Time and time again, we’ve learned that’s not the case. The latest security breach at Sony’s was not due to use of a public cloud. The failure of CodeSafe was poor security and not AWS. The reality is that every piece of hardware we shut down, the more liberating it was. I’m looking forward to returning the keys of our CoLo.&lt;/p&gt;

&lt;h2 id=&quot;in-the-beginning&quot;&gt;In the Beginning&lt;/h2&gt;

&lt;p&gt;A year ago, we were at a crossroads that I’m sure many of my peers are currently facing. Do we continue to roll our own or jump off the datacenter. If we stayed the course, we were facing a very large expenditure in capital. We didn’t have the additional capacity to support Customink’s exploding growth. To make matters worse, I adopted an aging infrastructure. Half of our deployed hardware was no longer under support and over 5 years old. It was going to take a lot of upfront CapEx.&lt;/p&gt;

&lt;p&gt;Moving to an enterprise cloud provider, you get scale and options that any medium sized business could never afford. For us, that’s five data centers, spread across the US, network bandwidth as wide as the Beltway, 14  staging environments (at 10% the cost of prod), multi-location DB replication with automatic failover, a data-warehouse environment built with a few clicks, VPCs without having to evaluate router vendors, a backup solution without owning ANY tape, and on and on. Before the move, every purchase was a compromise or a task to do more when additional money was budgeted for the next year.  We still have to watch costs, but it’s now pay as you go, versus buying excess capacity that never gets completely used.&lt;/p&gt;

&lt;p&gt;Like almost everyone, we started with DR. It was a minimal setup that looking back, I’m thankful we never had to implement. Phase II was the Hybrid Cloud model (½ in/out) with staging out of the data center first. This was not a sustainable model. We had an investment in networking, floorspace, racks and excess capacity. In many ways, we were paying three times. Once to Savvis, another to Dell and a third to AWS. Also, we had to have additional staff that could rack/stack/replace. Phase III was the final push to move production.&lt;/p&gt;

&lt;p&gt;There are three things that have it easier. First, our use of Chef (you owe me lunch Nathan) allows us to deploy consistent, identical application servers significantly quicker and easier. Second, our DevOps model is integrated into Chef so that Ops can build and deploy any of our applications. It has saved us time and again when the occasional hardware spike allowing us to deploy new servers in 20 minutes. If you aren’t using Chef or Puppet, you have too many WebOps Engineers. And last, we don’t have a lot of cruft. Compared to many places I’ve worked, maintenance at CustomInk is part of the way the tech teams operate. Software upgrades, patches, bug fix is built into the process.&lt;/p&gt;

&lt;p&gt;To be honest, it’s a huge relief. With a few exceptions, If a hard drive fails in the middle of the night, a server crashes everyone sleeps. If the application is throttling the servers, you can double the server size in 5 minutes, build out additional servers in 15. Horizontal and vertical scaling in minutes!&lt;/p&gt;

&lt;p&gt;I do have one regret. I am no longer invited to Dell’s suite at the Capitals games. Thanks for reading!&lt;/p&gt;
</description>
        <pubDate>Fri, 13 Feb 2015 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2015/02/13/to-the-cloud/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/02/13/to-the-cloud/</guid>
      </item>
    
      <item>
        <title>Customizing Rake Tasks In Rails 4.1 And Higher</title>
        <description>&lt;p&gt;I have been overriding, invoking, and executing custom Rake tasks since I was an early Ruby developer. Tweaking your project&amp;#39;s automated tasks are likely the closest thing Rails developers come to building their own light saber. Most popular are adding or changing how the Rails test suite behaves. For example, adding Capybara to your project.&lt;/p&gt;

&lt;p&gt;Recently I have been &lt;a href=&quot;/blog/2014/09/16/from-rails-3.2-to-4.2/&quot;&gt;upgrading projects from 3.2 to 4.2&lt;/a&gt; and one thing that really stood out to me was how Rails testing tasks are created and run. Most obvious is that the default test task now runs all model, controller, mailer, helper, job, and integration tests in a single process now. Upon investigation, I found that these major changes were introduced in Rails 4.1. Go check out their new &lt;a href=&quot;https://github.com/rails/rails/blob/4-2-stable/railties/lib/rails/test_unit/testing.rake&quot;&gt;testing.rake&lt;/a&gt; file if you are interested. Much cleaner than before!&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;So what does this mean for you? Let me describe a real scenario I had to address in one of my projects. This project uses two custom test additions. The first is called &lt;a href=&quot;https://github.com/jfirebaugh/konacha&quot;&gt;Konacha&lt;/a&gt;, a gem that leverages the asset pipeline to easily test my projects JavaScript with Mocha &amp;amp; Chai under Capybara with PhantomJS. The second addition uses the Capybara::DSL within the standard Rails &lt;code&gt;test/integration&lt;/code&gt; namespace and directory structure.&lt;/p&gt;

&lt;p&gt;When moving to Rails 4.2 I found that my integration tests were mixed together with everything else. This was a problem since I really wanted my slower integration tests to run after all my other tests. No matter what I tried, I could not get the setup I wanted. So like most problems, I solved this by diving into the code and learning.&lt;/p&gt;

&lt;h2 id=&quot;deconstructing-rails-testtask&quot;&gt;Deconstructing Rails::TestTask&lt;/h2&gt;

&lt;p&gt;So we already had a look at the new testing.rake file above. But looking closer, we can see how the default test task is defined right at the top. Also of interest to us is that &lt;code&gt;test:run&lt;/code&gt; task.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rake/testtask'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rails/test_unit/sub_test_task'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;default: :test&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Runs all tests in test folder&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:test&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TestTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;test_creator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Rake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;top_level_tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;invoke_rake_task&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:test&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TestTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pattern&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;test/**/*_test.rb&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That description for &lt;code&gt;test&lt;/code&gt; is pretty helpful and quite accurate. Indeed even though we have distinct test tasks like &lt;code&gt;test:models&lt;/code&gt; and &lt;code&gt;test:mailers&lt;/code&gt;, this default task is somehow aggregating each into a single run. To learn more about this implementation, we need to open up the &lt;a href=&quot;https://github.com/rails/rails/blob/4-2-stable/railties/lib/rails/test_unit/sub_test_task.rb&quot;&gt;sub_test_task.rb&lt;/a&gt; file required at the top.&lt;/p&gt;

&lt;p&gt;In here we can see two new utility classes. One called &lt;code&gt;TestCreator&lt;/code&gt; and another called &lt;code&gt;TestInfo&lt;/code&gt;. The &lt;code&gt;TestCreator#invoke_rake_task&lt;/code&gt; instance method is what we came here for.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;invoke_rake_task&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;files&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;any?&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;create_and_run_single_test&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;reset_application_tasks&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Rake&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'TEST'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test:single'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test:run'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;invoke&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Without knowing too much about the &lt;code&gt;@info&lt;/code&gt; object initialized by &lt;code&gt;TestCreator&lt;/code&gt;, we can make a pretty good guess that &lt;code&gt;test:run&lt;/code&gt; is what we came here to find. By looking back at the &lt;code&gt;test:run&lt;/code&gt; tasks pattern of &lt;code&gt;&amp;quot;test/**/*_test.rb&amp;quot;&lt;/code&gt; it seems clear that this is the test responsible for running all of our tests at once. Knowing that, let&amp;#39;s start adding code to the project&amp;#39;s &lt;code&gt;Rakefile&lt;/code&gt; and make our new tests tasks do our bidding.&lt;/p&gt;

&lt;h2 id=&quot;customizing-your-rakefile&quot;&gt;Customizing Your Rakefile&lt;/h2&gt;

&lt;p&gt;Here is the first cut at customizing our Rails project&amp;#39;s Rakefile. These come right after the default &lt;code&gt;Rails.application.load_tasks&lt;/code&gt; line.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Rake&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'test:run'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;clear&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:test&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'js'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'konacha:run'&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TestTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:_run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;test_files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FileList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'test/**/*_test.rb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exclude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'test/integration/**/*_test.rb'&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:run&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'test:js'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test:_run'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test:integration'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The first thing that is happening is we want to remove the existing &lt;code&gt;test:run&lt;/code&gt; task using the &lt;code&gt;clear&lt;/code&gt; method. We then open up the test task namespace and make a few additions. In order they are:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Create a simple &lt;code&gt;test:js&lt;/code&gt; alias for the Konacha provided &lt;code&gt;konacha:run&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Create our &lt;code&gt;test:run&lt;/code&gt; replacement but now named &lt;code&gt;test:_run&lt;/code&gt;. Note how we use &lt;code&gt;test_files&lt;/code&gt; vs a &lt;code&gt;pattern&lt;/code&gt; so we can use the exclude method on FileList to remove all integration tests.&lt;/li&gt;
&lt;li&gt;Make a new &lt;code&gt;test:run&lt;/code&gt; task that calls each other task in the order we want.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;If you were to run &lt;code&gt;rake test&lt;/code&gt; now, we would see that our integrations are still inter-mixed with all the other Rails test cases. But why!?!&lt;/p&gt;

&lt;h2 id=&quot;final-rakefile-separating-integrations&quot;&gt;Final Rakefile Separating Integrations&lt;/h2&gt;

&lt;p&gt;So why did our integration tests still run with all the other Rails test cases? The answer lies in one simple override that &lt;code&gt;Rails::TestTask&lt;/code&gt; implements. Normally the &lt;code&gt;Rake::TestTask&lt;/code&gt; calls an instance method named &lt;code&gt;define&lt;/code&gt; which basically builds a string and executes a Ruby subprocess. The &lt;code&gt;Rails::TestTask&lt;/code&gt; class implements the define method like so:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;define&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@name&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'TESTOPTS'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;ARGV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;replace&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Shellwords&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'TESTOPTS'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;libs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@libs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;vg&quot;&gt;$LOAD_PATH&lt;/span&gt;
    &lt;span class=&quot;vg&quot;&gt;$LOAD_PATH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;unshift&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;libs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;file_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;FileList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;expand_path&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;See what is happening there? At the end of the day, all &lt;code&gt;Rails::TestTask&lt;/code&gt; tasks do is require the test files. So now it makes perfect sense as to why it appeared that each task was being merged. With this knowledge, we can now customize our setup.&lt;/p&gt;

&lt;p&gt;Rather than using Rails test task, we will just bail out and use the default &lt;code&gt;Rake::TestTask&lt;/code&gt; instead. When doing so, we will have to push the test directory to the libs too. This is one of the few things done for us by &lt;code&gt;Rails::TestTask&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Rake&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'test:run'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;clear&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Rake&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'test:integration'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;clear&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:test&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'js'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'konacha:run'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;Rake&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TestTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:_run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;libs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;test&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;test_files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FileList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'test/**/*_test.rb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exclude&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'test/integration/**/*_test.rb'&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;Rake&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TestTask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'integration'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test:prepare'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;libs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;pattern&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test/integration/**/*_test.rb'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:run&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'test:js'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test:_run'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test:integration'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we are cooking. All of our JavaScript tests will run first, then all normal Rails test cases, and finally our integration tests. By customizing the &lt;code&gt;test:run&lt;/code&gt; task we get the full benefit of the default &lt;code&gt;test&lt;/code&gt; task implementation which allows us to pass file and/or &lt;code&gt;TESTOPTS&lt;/code&gt; arguments. This happens to be one of my favorite features of Rails 4.1 and up too.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-shell&quot; data-lang=&quot;shell&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rake &lt;span class=&quot;nb&quot;&gt;test test&lt;/span&gt;/models/user_test.rb
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rake &lt;span class=&quot;nb&quot;&gt;test test&lt;/span&gt;/integration/app_stories_test.rb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And it all just works! Thanks for reading!&lt;/p&gt;
</description>
        <pubDate>Sun, 08 Feb 2015 00:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2015/02/08/customizing-rake-tasks-in-rails-41-and-higher/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/02/08/customizing-rake-tasks-in-rails-41-and-higher/</guid>
      </item>
    
      <item>
        <title>ActiveRecord 4.2's Type Casting</title>
        <description>&lt;p&gt;Last month &lt;a href=&quot;http://weblog.rubyonrails.org/2014/12/19/Rails-4-2-final/&quot;&gt;Rails 4.2&lt;/a&gt; was released and if you have been keeping up with my posts, I even covered &lt;a href=&quot;/blog/2014/09/16/from-rails-3.2-to-4.2&quot;&gt;how you can upgrade&lt;/a&gt; from 3.2 to 4.2 in one step! This speaks volumes to how easy it is to adopt to outward facing API changes within our beloved framework. But often times, version changes bring implementation changes that we never see. For example, all of Aaron Patterson&amp;#39;s work for &lt;a href=&quot;http://tenderlovemaking.com/2014/02/19/adequaterecord-pro-like-activerecord.html&quot;&gt;AdequateRecord Pro&amp;trade;&lt;/a&gt; are performance optimizations that affect no outward API interface at all. Unless you read the source, many of these awesome changes go unnoticed and that&amp;#39;s a damn shame because some of them can make our lives easier.&lt;/p&gt;

&lt;p&gt;Today I want to share some of the new hotness I found while working on the latest ActiveRecord &lt;a href=&quot;https://github.com/rails-sqlserver/activerecord-sqlserver-adapter&quot;&gt;SQL Server Adapter&lt;/a&gt;. Specifically, how ActiveRecord type casts values. Up until Rails 4.2, all type casting was done in class methods like &lt;code&gt;value_to_date&lt;/code&gt; implemented on the &lt;code&gt;ActiveRecord::ConnectionAdapters::Column&lt;/code&gt; object. Sean Griffin does a &lt;a href=&quot;http://robots.thoughtbot.com/how-rails-works-type-casting&quot;&gt;great job&lt;/a&gt; explaining this convoluted process. Warning, it&amp;#39;s kind of boring and a chore to read.&lt;/p&gt;

&lt;p&gt;This process has been around for as long as I can remember. It made it really hard to write good abstract OO code that casts values going into and out of the database. All that has changed with the new &lt;code&gt;ActiveRecord::Type&lt;/code&gt; namespace. All objects within this namespace are simple POROs with very obvious and well documented interfaces. The base class is &lt;code&gt;ActiveRecord::Type::Value&lt;/code&gt; and below is a slightly trimmed down version of that object, sans comments. Take a quick read.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;ActiveRecord&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Type&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Value&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;type_cast_from_database&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;type_cast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;type_cast_from_user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;type_cast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;type_cast_for_database&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;type_cast_for_schema&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;inspect&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;changed?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;old_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_new_value_before_type_cast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;old_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_value&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;changed_in_place?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;


      &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;type_cast&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cast_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;cast_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Do you see what I see? This is amazing. I see an object that finally handles all of the following.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Casting raw DB values.&lt;/li&gt;
&lt;li&gt;Casting user input to prepare for DB quoting.&lt;/li&gt;
&lt;li&gt;Casting for default values in schema dumpers.&lt;/li&gt;
&lt;li&gt;Avoid &lt;code&gt;ActiveRecord::ConnectionAdapters::Column&lt;/code&gt; code bloat.&lt;/li&gt;
&lt;li&gt;So much more!&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Case in point, a lot of database connection gems still return raw strings for every value. Sub classes of &lt;code&gt;Value&lt;/code&gt; can define their own &lt;code&gt;type_cast_from_database&lt;/code&gt; implementation to deal with this. For example, here is the &lt;code&gt;Integer&lt;/code&gt; object&amp;#39;s default behavior. Super easy!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;type_cast_from_database&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;One thing that Rails core team did to make this even better allows us to type check our Ruby values ahead of time during attribute assignment vs. when we save to the database. This is now done in the &lt;code&gt;Integer&lt;/code&gt; class using the &lt;code&gt;limit&lt;/code&gt; attribute parsed from the SQL type. Here are the salient points of that class.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;ActiveRecord&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Type&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Value&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@range&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;min_value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_value&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;cast_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;ensure_in_range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ensure_in_range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cover?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RangeError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; is out of range for &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; with limit &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;max_value&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
        &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;limit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 8 bits per byte with one bit for sign&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;min_value&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;max_value&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Any type aliased to use the &lt;code&gt;Integer&lt;/code&gt; value object will now type check that the value is within the accepted database range. As far as I can tell, only Integer objects in Rails core do this, but I plan on implementing these checks for Decimal and other values too. Here is how SQL Server&amp;#39;s &lt;code&gt;smallint(2)&lt;/code&gt; SQL type attribute behaves.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;vi&quot;&gt;@obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;small_int_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32_768&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;small_int_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;32_769&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; RangeError!&lt;/span&gt;

&lt;span class=&quot;vi&quot;&gt;@obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;small_int_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32_767&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;small_int_value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32_768&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; RangeError!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There is so much more that we can do with these objects. The PostgreSQL adapter already casts the JSON data type. I can even see SQL Server returning a Nokogiri object for an XML data type. The sky is the limit. The core &lt;code&gt;Value&lt;/code&gt; object allows the SQL Server Adapter to implement guards for different connection modes. Our &lt;code&gt;TinyTDS&lt;/code&gt; connection returns all DB values mapped to their proper Ruby primitive. To avoid wasting precious time, we bypass all Rails type casting in one single place now.&lt;/p&gt;

&lt;p&gt;These objects are a great step forward and they should open up all sorts of possibilities for gems to extend our DB objects. Thanks so much to Sean Griffin and anyone else working on ActiveRecord to make it better, faster, and easier to use!&lt;/p&gt;

&lt;h1 id=&quot;resources&quot;&gt;Resources&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://robots.thoughtbot.com/how-rails-works-type-casting&quot;&gt;How Rails&amp;#39; Type Casting Works&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 06 Jan 2015 03:29:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2015/01/06/activerecord-42s-type-casting/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2015/01/06/activerecord-42s-type-casting/</guid>
      </item>
    
      <item>
        <title>RubyConf5k 2014 in San Diego</title>
        <description>&lt;p&gt;We were proud to organize and sponsor the &lt;a href=&quot;https://twitter.com/rubyconf5k&quot;&gt;RubyConf5k&lt;/a&gt; in San Diego for a second time. 75 conference attendees woke up early after a late night of Ruby karaoke for a scenic run around the marina. The camaraderie of the Ruby community was highlighted by the support the runners showed for each other. Many running a 5k for the first time. Congratulations to all the participants.&lt;/p&gt;

&lt;p&gt;Here are the &lt;a href=&quot;https://github.com/customink/rubyconf5k_2014_results&quot;&gt;official results&lt;/a&gt;.&lt;/p&gt;

&lt;!--more--&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/weexpectedTHIS&quot;&gt;Kyle Peyton&lt;/a&gt; 1st place Mens - 20m 21s 3ms&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/bridgetlandis&quot;&gt;Bridget Landis&lt;/a&gt; 1st place Ladies - 25m 29s 5ms&lt;/li&gt;
&lt;li&gt;Justin Schumacher 1st place Family - 27m 09s 5ms&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Join us next year to earn your own RubyConf5k T-Shirt.
Make sure to follow &lt;a href=&quot;https://twitter.com/rubyconf5k&quot;&gt;@RubyConf5k&lt;/a&gt; and sign up early
to guarantee your spot and CustomInk shirt.&lt;/p&gt;

&lt;h2 id=&quot;our-speedy-engineer-and-5k-organizer-stafford-explaining-the-course&quot;&gt;Our speedy engineer and 5k organizer Stafford explaining the course&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/rubyconf5k_2014/stafford-e537c7852df7c461cd572b25b0db38d4f4b8748504d045e3aab3a5212d80c6a8.jpg&quot; alt=&quot;Starting Line&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;t-shirts-the-participants&quot;&gt;T-Shirts the participants&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/rubyconf5k_2014/shirts-8d88c259d652d34716d73e5ef0303c4066c2388a180eb0f23372fd061460bd91.jpg&quot; alt=&quot;T-Shirts&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;1st-place-kyle-peyton&quot;&gt;1st Place Kyle Peyton&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/rubyconf5k_2014/kylepeyton-3cf69afa9af902d839a9d0d0016d4c9d8f056b61eff028a27d4935434660266b.jpg&quot; alt=&quot;Kyle Peyton&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;1st-place-bridget-landis&quot;&gt;1st Place Bridget Landis&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/rubyconf5k_2014/bridgetlandis-2f44464735ed6d816427430f9e4c0f01bcb5ef5441ddd2ecafd742de3f07a0cf.jpg&quot; alt=&quot;Bridget Landis&quot;&gt;&lt;/p&gt;

&lt;h2 id=&quot;1st-place-justin-schumacher&quot;&gt;1st Place Justin Schumacher&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/rubyconf5k_2014/justinschumacher-87c8a6ffec0a45d1f34262bc0bc0506a91996719858204519775d689db1e42c7.jpg&quot; alt=&quot;Justin Schumacher&quot;&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 19 Nov 2014 08:00:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2014/11/19/rubyconf5k-2014/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/11/19/rubyconf5k-2014/</guid>
      </item>
    
      <item>
        <title>eComic Con 2014</title>
        <description>&lt;p&gt;Halloween is a special time at CustomInk, especially for a group of technologists who have a healthy appreciation for Sci-Fi and comic books.  This year, our eCommerce group decided to hold an eComic-con and let our imaginations run wild.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h4 id=&quot;the-first-attendees-to-show-up&quot;&gt;The first attendees to show up&lt;/h4&gt;

&lt;p&gt;Early in the morning, we are very excited for everyone to arrive!&lt;/p&gt;

&lt;p&gt;&lt;img src=/assets/content/ecomiccon/first_attendees-de92c4802a6a5c637abf40587f55e96537da768bc63362693a122671a03f2de8.jpg alt=&quot;First Attendees&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/first_attendees2-7405164f7fd209d5f513a6db386de2a13f8e331d6d1a3616a23f19f49f2885c4.jpg alt=&quot;More First Attendees&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/by_the_stairs-7b4430e7f8db6810adbc2ce66cc8f111ed8c20d120bad47823c51d09765ce177.jpg alt=&quot;Even More First Attendees&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/hanging_out-1dbbce0f0dd1b4cfd1a8ff22d86bfa4d1329fd442ab48a57dac2db108c3092e2.jpg alt=&quot;Even Morest First Attendees&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;we-start-to-play&quot;&gt;We start to play&lt;/h4&gt;

&lt;p&gt;Everyone is here!  We can&amp;#39;t contain ourselves, we must reveal our moves.&lt;/p&gt;

&lt;p&gt;&lt;img src=/assets/content/ecomiccon/gogopowerrangers-01dfdd7b5ad6462a4a1081a61725b390ab19eab5afd433b1819947d62642903d.jpg alt=&quot;Power Rangers&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/rocket-1e7931bfff1152a8dda69118b80192a6c8cf76dbca8bfe43e880e5369105ee1c.jpg alt=&quot;Rocket Raccoon&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/strength_test-c560ee667d8d68df87da6218e9512f4c6265cb1e67bc0b55018243bc9d376917.jpg alt=&quot;Strength Test&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/drdoom_link-a9c7801652f196ddd8cc1d454cf6e9c2c7ea4664cf5facd42c120a7b1b3b527d.jpg alt=&quot;DrDoom Link&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/morhpin_lunch-ab0e13bfe301a53a11ec83af82fe4a50d33f4d7ec462251d5230a24f80ebef24.jpg alt=&quot;DrDoom Link&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;we-start-to-work&quot;&gt;We start to work&lt;/h4&gt;

&lt;p&gt;Eventually, we realize there is work to do. At some point you forget you are even in costume.&lt;/p&gt;

&lt;p&gt;&lt;img src=/assets/content/ecomiccon/working_link-64d49a31c5309cf694a8462b40482785cdc8f812a9fbf0a07efc8ee5d139928e.jpg alt=&quot;Saving Zelda?&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/super_meeting-ca825c4932b6d4ae674cd3eaca8931ff3a08388a67096450c43531e9a0c07a22.png alt=&quot;Super Meeting&quot; class=&quot;tb-Img tb-Img--fancy sb-ContentImg--left&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/kickass_thirsty-6c601b06f864d5433d2bd7271548ad1678fd18926d75556b312b59a650850c3c.jpg alt=&quot;Kickass is Thirsty&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/working_riker-2ef8edace8686e9837471e41b955f708139209513df446de7081c7aab6aa3f8c.jpg alt=&quot;Riker&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;the-photo-shoot&quot;&gt;The Photo Shoot&lt;/h4&gt;

&lt;p&gt;We pile into the photo studio and find our counterparts.&lt;/p&gt;

&lt;p&gt;&lt;img src=/assets/content/ecomiccon/photo_thrones-2274c5db2349af0fd44d950d3d30e1903c23866ffdd4b7e960ab9afafdda3ed3.jpg alt=&quot;Game of Thrones&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/photo_power-f50002be0e99a4ef7865b86ae1fe1d9f320aa5dd50f25333ecc75f7c51d58465.jpg alt=&quot;Power Rangers&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;
&lt;img src=/assets/content/ecomiccon/photo_marvel-847e392b63f296bee8eb9ebd51d9a6541c4319a01bed27a8f36a0c7be873f29f.jpg alt=&quot;Marvel&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;the-whole-team&quot;&gt;The Whole Team&lt;/h3&gt;

&lt;p&gt;We put a lot of work into organizing our event and building our costumes. What a great day!
&lt;img src=/assets/content/ecomiccon/all_of_ecomiccon-a4679a345038eab38e4b28c0973739a1d0193ba1154f75b3a3c3fcc2e751a079.jpg alt=&quot;All of eComiccon&quot; class=&quot;tb-Img tb-Img--fancy&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 31 Oct 2014 09:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/10/31/ecomic-con-2014/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/10/31/ecomic-con-2014/</guid>
      </item>
    
      <item>
        <title>Welcome Arild Shirazi!</title>
        <description>&lt;p&gt;&lt;img src=/assets/content/arild-shirazi-7458f4d1710e5c667a8ca81bd9fe53693cdabc3f219d3da028d2fd59a6d5d8b3.jpg alt=&quot;Arild Shirazi&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;He &lt;a href=&quot;http://technology.customink.com/blog/2014/09/26/ruby-meta-method-madness&quot;&gt;beat us to the punch&lt;/a&gt;, but we&amp;#39;d
like to give &lt;a href=&quot;https://github.com/ashirazi&quot;&gt;Arild&lt;/a&gt; a warm welcome to CustomInk.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;You may already know Arild as an organizer of RubyNation and NationJS. And you
may have run into him (no pun intended) on the local autocross circuit.&lt;/p&gt;

&lt;p&gt;On Danger Squad!, Arild is working on improvements to our &lt;a href=&quot;http://www.customink.com/lab&quot;&gt;design
lab&lt;/a&gt;. The lab, a substantial client-side
application, has served us well for over six years and has evolved to meet the
needs of our customers. In that time, web technologies have also advanced
dramatically. This presents an interesting challenge: how do we balance the
promise of new technologies with the safety of proven implementations?&lt;/p&gt;

&lt;p&gt;These are the types of questions Arild is helping us answer and we hope to talk
more about it here soon. In the meantime, welcome to the team Arild!&lt;/p&gt;
</description>
        <pubDate>Thu, 23 Oct 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/10/23/welcome-arild-shirazi/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/10/23/welcome-arild-shirazi/</guid>
      </item>
    
      <item>
        <title>Managing Your Local Project Repos</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://www.git-scm.com/&quot;&gt;Git&lt;/a&gt; is great for managing a project. And &lt;a href=&quot;http://github.com&quot;&gt;Github&lt;/a&gt; is a great way to share your git managed project with your teammates and the world. But, how do you manage all of those projects locally? I&amp;#39;m not claiming this is the only way or even the best way. It&amp;#39;s just my way of managing the repos I need to have locally. So let&amp;#39;s get down to it.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;projects-namespace&quot;&gt;Projects Namespace&lt;/h3&gt;

&lt;p&gt;I like to put all of the projects under a main projects folder. I use the name projects, but you could use whatever you like: workspace, repos, code, gits, etc...&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-Terminal256&quot; data-lang=&quot;Terminal256&quot;&gt;  projects/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pretty simple stuff. What&amp;#39;s next?&lt;/p&gt;

&lt;h3 id=&quot;author-project-folder-structure&quot;&gt;Author/Project Folder Structure&lt;/h3&gt;

&lt;p&gt;Whenever I clone a repo I create a folder for the author or organization name that matches up with github then clone the project into that. An easy example would be projects under my account that were created by me. I don&amp;#39;t put forked projects under my name, but I will get to that later.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-Terminal256&quot; data-lang=&quot;Terminal256&quot;&gt;  projects/
  └── nhessler/
      ├── converserver/
      └── hacknut-theme/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And I have projects at customink that I work on so let&amp;#39;s add some of those projects in and see what things look like.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-Terminal256&quot; data-lang=&quot;Terminal256&quot;&gt;  projects/
  ├── customink/
  ¦    ├── fauxhai/
  ¦    ├── gigo/
  ¦    ├── secondbase/
  ¦    └── stoplight/
  └── nhessler/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This should be enough to see the basic structure of how I manage my projects. You can see that each project is located inside of a folder representing the originating author.&lt;/p&gt;

&lt;h3 id=&quot;local-projects&quot;&gt;Local Projects&lt;/h3&gt;

&lt;p&gt;This works great for projects on github, but what about projects you have only on your machine? Well, you could put them under the account you plan to push them to. But, that breaks the convention of projects living under their author namespace. And, it makes it hard to remember what has and hasn&amp;#39;t been pushed up under that account. So, until I&amp;#39;ve pushed a project to github I put them under the _local folder. The _ is added to make sure it&amp;#39;s always at the top of the author list.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-Terminal256&quot; data-lang=&quot;Terminal256&quot;&gt;  projects/
  ├── _local/
  ¦    ├── dotfiles/
  ¦    └── blog/
  ├── customink/
  └── nhessler/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I know, I know. I really should get those pushed to github. but at least I can easily see that they aren&amp;#39;t on github yet and resolve that issue quickly. The _local folder is also great for playing around with projects you don&amp;#39;t ever plan to push github. You can write some code, play around with it, and delete later. when it is time to push it to github then you can move it under the appropriate folder.&lt;/p&gt;

&lt;h3 id=&quot;forked-projects&quot;&gt;Forked Projects&lt;/h3&gt;

&lt;p&gt;As I said earlier, I deal with forked libraries a bit differently. Let&amp;#39;s look at a couple of those projects. Specifically, we&amp;#39;ll look at &lt;a href=&quot;https://github.com/robbyrussell/oh-my-zsh&quot;&gt;oh-my-zsh&lt;/a&gt; by Robby Russel, &lt;a href=&quot;https://github.com/bbatsov/prelude&quot;&gt;prelude&lt;/a&gt; by Bozhidar Batsov, and &lt;a href=&quot;https://github.com/oneKelvinSmith/monokai-emacs&quot;&gt;monokai-emacs&lt;/a&gt; by Kelvin Smith. First, let&amp;#39;s just see the directory structure for these projects.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-Terminal256&quot; data-lang=&quot;Terminal256&quot;&gt;  projects/
  ├── _local/
  ├── bbatsov/
  ¦   └── prelude/
  ├── customink/
  ├── nhessler/
  ├── oneKelvinSmith/
  ¦   └── monokai-emacs/
  └── robbyrussel/
      └── oh-my-zsh/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that each project is under the original author&amp;#39;s name. Why do I do this? There are a couple reasons. First, I like to remember where the projects came from and this helps remind me who the original authors are. Second, project names are not unique. There are forks of projects, and there are projects with the same name that are completely different. Doing a search on github for rails turned up 138K repositories and on the first page 7 out of ten were named &amp;#39;rails&amp;#39; the only difference was author name. the first two projects were &amp;#39;rails/rails&amp;#39; and &amp;#39;capistrano/rails&amp;#39;. Two projects I can easily see people forking. You could complain that maybe capistrano should have used the project name capistrano-rails over rails, but is it worth it? Finally, prelude and oh-my-zsh are libraries that were meant to be used by cloning them to your local machine, and I don&amp;#39;t need or want to fork them to use them. I can just clone them from the original repo.&lt;/p&gt;

&lt;h3 id=&quot;final-thoughts&quot;&gt;Final Thoughts&lt;/h3&gt;

&lt;p&gt;Here are some other things to think about that make this setup a little more useful.&lt;/p&gt;

&lt;p&gt;If you use ZSH it would be helpful to add your projects folder to the CDPATH environment variable. I also add the nhessler and customink folders. This way I can jump to my frequently used projects by name only.&lt;/p&gt;

&lt;p&gt;I also diverge a bit from how github recommends you &lt;a href=&quot;https://help.github.com/articles/fork-a-repo/&quot;&gt;fork and clone a repo&lt;/a&gt;. I still fork the repo, but I then clone the original and set up a remote called &amp;#39;fork&amp;#39; which points at my fork of the repo. I find this matches how I think about forked projects better and seems to be in line with my folder structure as well.&lt;/p&gt;

&lt;p&gt;If you have a workflow that you like to use for managing your repos that differs from, this I would love to hear about it.&lt;/p&gt;
</description>
        <pubDate>Wed, 22 Oct 2014 07:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/10/22/managing-your-local-project-repos/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/10/22/managing-your-local-project-repos/</guid>
      </item>
    
      <item>
        <title>Open Sourcing a Gem: Part 2</title>
        <description>&lt;h2 id=&quot;considerations-when-open-sourcing&quot;&gt;Considerations when Open Sourcing&lt;/h2&gt;

&lt;p&gt;When open sourcing a gem (or any project, this post can be generalized to not just focus on gems), there are a number of things to consider. The first check is to ensure that the use case is general enough that it is likely to be helpful to other parties. Though the project might never gain many external users, it is a good sanity check before taking on the work to open source the project. Following this there are a number of things to think out, with the purpose of determining a track of work that needs to be taken (if any) before the gem can be open sourced.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;generalize-the-implementation&quot;&gt;Generalize the implementation&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Remove coupled business logic and application specific code.&lt;/li&gt;
&lt;li&gt;Ensure no keys/account information were stored in the repo (even in past commits). Typically not considered a good practice, but it is something to be aware of when releasing the source of a project publicly.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;set-bounds-on-the-responsibilities&quot;&gt;Set bounds on the responsibilities&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;What is the purpose of this gem and what needs is it fulfilling?&lt;/li&gt;
&lt;li&gt;Take a step back from how you currently use the library. What other potential use cases might others use it for? Is it worth generalizing the implementation to aid these other use cases?&lt;/li&gt;
&lt;li&gt;Set bounds on the responsibilities that the gem will take care of.&lt;/li&gt;
&lt;li&gt;What will the gem provide and what is left up to the user? In the case of Signalman, we allow users to customize the URL of the Signalman admin page, but it is up to the user to provide additional authentication besides obscurity. Signalman is a gem designed to aid with A/B testing, not authentication.

&lt;ul&gt;
&lt;li&gt;Try to stick to the gem&amp;#39;s core competencies. Do not add features at a whim to quell user requests. This can cause a gem to grow out of control and become hard to manage or even discern its original purpose/intent.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;consider-strategies-to-manage-repository-ownership&quot;&gt;Consider strategies to manage repository ownership&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;Like it or not, becoming a maintainer is a big responsibility. If you are open sourcing a project with a team, this will greatly ease the burden, but you must still consider processes to manage external pull requests and issues that arise.&lt;/li&gt;
&lt;li&gt;Giving the user power and encouraging pull requests and a community that supports each other&amp;#39;s issues can also relieve the burden of being a project maintainer. You can help this process by adding documentation for contributing and making it easy for other parties to contribute to the project. This also means providing help to newer developers; you never know who might become a leading contributor in the future.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;more-from-this-series&quot;&gt;More from this series&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;/blog/2014/09/12/open-sourcing-a-gem-pt-1/&quot;&gt;Part 1&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 20 Oct 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/10/20/open-sourcing-a-gem-pt-2/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/10/20/open-sourcing-a-gem-pt-2/</guid>
      </item>
    
      <item>
        <title>Better Hash Injection using each_with_object</title>
        <description>&lt;p&gt;A common Ruby pattern for injecting values from an Array into to a Hash
is to use the Enumerable#inject method and pass the hash as the memo. If you
had an enumeration of User objects, you might convert them to a hash
with something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;  &lt;span class=&quot;c1&quot;&gt;# build a hash of { name =&amp;gt; email }&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;all&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;inject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({})&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;memo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;memo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;email&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;memo&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# you must return the memo each time!&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;While this will reduce the Array down to a Hash, it has the gotcha that
you must return the memo each time. Enumerable#inject sets the memo to the return value of the block.
If you forget to return the memo hash, your next memo will be set to the result of the assignment
which is user.email.&lt;/p&gt;

&lt;p&gt;There are some alternatives you can use to avoid the explicit return for the memo. Hash#merge is a
popular choice. Hash#merge will combine the current hash with the new values and return a new hash. Which sets
the memo to the new hash:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;  &lt;span class=&quot;c1&quot;&gt;# build a hash of { name =&amp;gt; email }&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;all&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;inject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({})&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;memo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;memo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Hash#merge returns a hash lest you forget to return the memo. It could be argued that using
merge is not clear in this use case. Using plain merge also creates a new hash each time. This
could be mitigated with the Hash#merge! which updates and returns the current hash. But it does
not clean up our ruby code. We&amp;#39;d prefer if our intentions were presented in a clear and concise way.&lt;/p&gt;

&lt;p&gt;Why are we so intent to use the Enumerable#inject method when building hashes? Enumerable#inject is wonderful when
reducing a list, like determining the sum of values from the list. For example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;   &lt;span class=&quot;c1&quot;&gt;# inject is great for reducing a list to a value&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;all&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;inject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But not so great when building a hash (see above). There is another way! Enumerable also has a less
commonly used method: Enumerable#each_with_object, which solves our issues. Enumerable#each_with_object
passes the same memo to each iteration of the block. It does not reassign it to the return value. This
gives us the behavior we expected with Enumerable#inject but without the caveats.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;  &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each_with_object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({})&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# note object and memo reversed from #inject&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;memo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;email&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ah! Nice and clean. Our intentions are clear. The code in the block is exactly what you would expect. The block
is called for each element and the same memo object is passed in for each iteration. You
set the name/value in the hash and need not concern yourself with the return value.&lt;/p&gt;

&lt;p&gt;Using Enumerable#inject to build a hash never felt comfortable. It always felt like a hack. Ruby&amp;#39;s Enumerable#inject
was never a good fit for Hash building, but Enumerable#each_with_object fits just right.&lt;/p&gt;

&lt;p&gt;Enumerable is a powerful mixin. Even after many years of coding with it in Ruby, we find new ways of expressing
ourselves and revealing our intentions. Next time you have to reduce an Array to a Hash, don&amp;#39;t fall into
the #inject trap. Use Enumerable#each_with_object and impress your friends and family.&lt;/p&gt;
</description>
        <pubDate>Tue, 14 Oct 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/10/14/better-hash-injection-using-each-with-object/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/10/14/better-hash-injection-using-each-with-object/</guid>
      </item>
    
      <item>
        <title>Understanding and Using Sass Load Paths</title>
        <description>&lt;p&gt;One of the biggest hurdles in effectively using &lt;a href=&quot;http://sass-lang.com/&quot;&gt;Sass&lt;/a&gt; is correctly setting the load path when using Sass libraries. Surprisingly not all libraries set up the load paths correctly. Some libraries add themselves to the &lt;code&gt;Sass.load_paths&lt;/code&gt; or the &lt;code&gt;SASS_PATH&lt;/code&gt; environment variable, but stomp on paths that were already loaded, which introduces problems like requirements for the order dependencies are loaded. It is clear that the current state of things could use improvement.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;For those of you that are aware of the challenges using the &lt;code&gt;SASS_PATH&lt;/code&gt; environment variable and just want a solution to help manage and wire up the &lt;code&gt;SASS_PATH&lt;/code&gt;, the &lt;a href=&quot;https://rubygems.org/gems/sass_paths&quot;&gt;SassPaths gem&lt;/a&gt; provides utilities to easily include directories, Sass gems, and Bower Sass dependencies in the &lt;code&gt;SASS_PATH&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;why-do-load-paths-matter&quot;&gt;Why do load paths matter?&lt;/h2&gt;

&lt;p&gt;The Sass load paths let Sass know the directories it should look in when trying to import files. Correctly setting up the load paths allow us to import a Sass library with its name, rather than having to use the relative path to the resource.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sass&quot; data-lang=&quot;sass&quot;&gt;&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'susy';&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// versus&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'bundle/ruby/2.1.0/gems/susy-2.1.3/sass/susy';&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It is important to write libraries such that they append to the Sass load paths, assuming that other libraries may be loaded before or after them, instead of overwriting any libraries that might have appended to the load paths first.&lt;/p&gt;

&lt;h2 id=&quot;where-sass-is-headed&quot;&gt;Where Sass is headed&lt;/h2&gt;

&lt;p&gt;To help solve the load path problem, Sass 3.2 introduced the &lt;code&gt;SASS_PATH&lt;/code&gt; environment variable, an environment variable that can be hooked into to set the load paths for Sass. As first specified in the &lt;a href=&quot;https://github.com/sass/sass/blob/stable/doc-src/SASS_CHANGELOG.md#smaller-improvements-2&quot;&gt;3.2 change log&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;Sass.load_paths is initialized to the value of the SASS_PATH environment variable. This variable should contain a colon-separated list of load paths (semicolon-separated on Windows).&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The &lt;code&gt;SASS_PATH&lt;/code&gt; environment variable is not just an optional alternative, it is at the core of where Sass is headed regarding setting up/managing its load paths. In fact, Sass 3.4 introduces a backwards incompatibility with how the load path was handled before. As specified in the &lt;a href=&quot;https://github.com/sass/sass/blob/stable/doc-src/SASS_CHANGELOG.md#backwards-incompatibilities----must-read&quot;&gt;Sass 3.4 change log&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;The current working directory will no longer be placed onto the Sass load path by default. If you need the current working directory to be available, set SASS_PATH=. in your shell&amp;#39;s environment.&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Another significant change occurring in the Sass community is that Sass no longer requires Ruby. &lt;a href=&quot;http://libsass.org/&quot;&gt;LibSass&lt;/a&gt; brings a C implementation of Sass to the table to remove the requirement of Ruby as well as provide a significant performance increase in compilation. LibSass also &lt;a href=&quot;https://github.com/sass/libsass/issues/90&quot;&gt;implements&lt;/a&gt; the &lt;code&gt;SASS_PATH&lt;/code&gt; environment variable so there is no denying that the &lt;code&gt;SASS_PATH&lt;/code&gt; is the accepted way forward. This is where the &lt;code&gt;SASS_PATH&lt;/code&gt; environment variable really shines, it can be configured to provide a common interface for setting up Sass load paths despite the implementation of Sass (Ruby, C, or otherwise).&lt;/p&gt;

&lt;p&gt;The problem with LibSass is that it currently only implements features up to Sass 3.2, meaning most notably, it does not support Sass maps. The good news is that the core team recently &lt;a href=&quot;https://github.com/sass/libsass/wiki/The-LibSass-Compatibility-Plan&quot;&gt;announced&lt;/a&gt; that they plan on getting LibSass to be 100% compatible with Ruby Sass.&lt;/p&gt;

&lt;h2 id=&quot;all-your-sass-paths-are-belong-to-us&quot;&gt;All Your Sass Paths Are Belong To Us&lt;/h2&gt;

&lt;p&gt;If &lt;code&gt;SASS_PATH&lt;/code&gt; is the way to go, why does it seem that so many projects are having difficulties setting the path correctly? While I cannot give a definitive answer, my guess is that it takes time for change to permeate through all resources and despites Sass&amp;#39; newfound maturity, users have grown accustomed to hacking their own paths together. We no longer need to hack together the load paths, these should just work as long as we use the provided environment variable as an interface.&lt;/p&gt;

&lt;p&gt;Though the environment variable provides a common interface to hook into, there are many ways Sass libraries might be pulled into a project. How do we rectify setting up the &lt;code&gt;SASS_PATH&lt;/code&gt; correctly when these paths might come via Ruby gems, Bower dependencies, or the file directory? We are releasing the &lt;a href=&quot;https://rubygems.org/gems/sass_paths&quot;&gt;SassPaths gem&lt;/a&gt; to provide a set of easy to use utility methods to include any Sass dependency, whether it comes from Bower, Ruby gems, or elsewhere. SassPaths also plays nicely with Ruby on Rails. You can read the &lt;a href=&quot;https://github.com/customink/sass_paths/blob/master/README.md&quot;&gt;documentation&lt;/a&gt; on GitHub, but I will provide a quick overview below.&lt;/p&gt;

&lt;h3 id=&quot;sasspaths-primer&quot;&gt;SassPaths Primer&lt;/h3&gt;

&lt;p&gt;First you will need to &lt;code&gt;bundle install&lt;/code&gt; the SassPaths gem in your application.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Gemfile.rb&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sass_paths'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now all you need is an initialization file that will run when your application starts, which will make use of the SassPaths utilities to setup the &lt;code&gt;SASS_PATH&lt;/code&gt;. If you are using Rails, you can simply add this file to your initializers directory.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# sass_paths_init.rb&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sass_paths'&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# append a directory, or list of directories to SASS_PATH&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;SassPaths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/my/first/sass/path'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/my/second/sass/path'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# append a Ruby gem&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;SassPaths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append_gem_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;gem_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;directory_in_gem_that_contains_sass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# append all Sass Bower components' directories&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;SassPaths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;append_bower_components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bower_components_directory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;acknowledgements&quot;&gt;Acknowledgements&lt;/h4&gt;

&lt;p&gt;Many thanks to my fellow CustomInk teammates, Stafford Brunk and Ken Collins. Stafford co-authored the gem with me and Ken has been a driving force in adopting the &lt;code&gt;SASS_PATH&lt;/code&gt; environment variable as well as &lt;a href=&quot;https://github.com/at-import/Sassy-Maps/pull/6&quot;&gt;epic pull requests&lt;/a&gt; to fix the problems existing repositories have with the &lt;code&gt;SASS_PATH&lt;/code&gt;.&lt;/p&gt;
</description>
        <pubDate>Thu, 09 Oct 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/10/09/understanding-and-using-sass-load-paths/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/10/09/understanding-and-using-sass-load-paths/</guid>
      </item>
    
      <item>
        <title>Taking a peek at Active Record Proxies</title>
        <description>&lt;p&gt;If you&amp;#39;ve worked in a Rails project before, you&amp;#39;ve undoubtedly set up associations beteween your models. Active Record provides a clean and simple way in setting up these associations, while hiding a lot of the complexity behind the scenes.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;One thing that I found interesting is how method calls are forwarded between associated models. Let&amp;#39;s take a look at a simple example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Team&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;has_many&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:players&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Players&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;belongs_to&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:team&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When we say &lt;code&gt;team.players&lt;/code&gt;, what are we really working with? One&amp;#39;s first reaction might be to inspect it&amp;#39;s class. When inspecting &lt;code&gt;team.players&lt;/code&gt;, we get back an &lt;code&gt;Array&lt;/code&gt;, but Rails is intentionally lying to us. It&amp;#39;s actually an Active Record class called CollectionProxy!&lt;/p&gt;

&lt;h3 id=&quot;association-proxies&quot;&gt;Association Proxies&lt;/h3&gt;

&lt;p&gt;So what exactly is this proxy class? From the &lt;a href=&quot;http://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html&quot;&gt;Rails documentation&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Association proxies in Active Record are middlemen between the object that holds the association, known as the @owner, and the actual associated object, known as the @target.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In our case, the &lt;code&gt;@owner&lt;/code&gt; is the team while the &lt;code&gt;@target&lt;/code&gt; is the players collection. &lt;/p&gt;

&lt;p&gt;Back to the original question, how does &lt;code&gt;team.players.class&lt;/code&gt; return an Array? The CollectionProxy class does some metaprogramming to make the magic happen. &lt;/p&gt;

&lt;p&gt;First it undefines it&amp;#39;s own &lt;code&gt;#class&lt;/code&gt; method using &lt;code&gt;undef_method&lt;/code&gt; &lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Rails 3.2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Associations::ActiveRecord::CollectionProxy&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;instance_methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;undef_method&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/^(?:nil\?|send|object_id|to_a)$|^__|^respond_to|proxy_/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Secondly, it implements &lt;code&gt;#method_missing&lt;/code&gt; to delegate unknown methods to the &lt;code&gt;@target&lt;/code&gt;, or in our case, the players array.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Rails 3.2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Within def method_missing(method, *args, &amp;amp;block)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;elsif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;respond_to?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;proxy_association&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;klass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;respond_to?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;respond_to?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;load_target&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;respond_to?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;begin&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;NoMethodError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/ for #&amp;lt;.*$/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot; via proxy for &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Therefore, our call to &lt;code&gt;class&lt;/code&gt; will be picked up by method_missing.&lt;/p&gt;

&lt;p&gt;By having this proxy class, ActiveRecord can hook into certain methods and determine whether to perform database queries or used cache records.&lt;/p&gt;
</description>
        <pubDate>Tue, 07 Oct 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/10/07/rails-association-proxies/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/10/07/rails-association-proxies/</guid>
      </item>
    
      <item>
        <title>Unit Testing Sass Frameworks</title>
        <description>&lt;p&gt;Building the &lt;a href=&quot;/blog/2014/09/08/building-the-customink-living-style-guide&quot;&gt;living style guide&lt;/a&gt; for &lt;a href=&quot;http://www.customink.com&quot;&gt;CustomInk&amp;#39;s&lt;/a&gt; new mobile/responsive sites required that we stand on the shoulders of other great frameworks. All of them well authored and hence well tested. But as we built more tools on top of these giants, we felt the need to test our own framework&amp;#39;s code and thus began the search for Sass/CSS testing methods. After surveying the current state of testing, I found myself let down.&lt;/p&gt;

&lt;p&gt;To be fair, there are some really clever solutions for this problem and some may work for you. One example is the &lt;a href=&quot;https://github.com/ericam/true&quot;&gt;True&lt;/a&gt; unit test framework for Sass. This project is written by Eric Suzanne for his awesome &lt;a href=&quot;https://github.com/ericam/susy&quot;&gt;Susy&lt;/a&gt; grid framework. True allows you to write assertions in Sass itself but is limited to only value-based assertions. Since our living style guide is built within a Ruby gem, we felt that a solution closer to Ruby would fit our needs. That said, the solutions I propose below can be used by any Sass framework if you choose to test that framework with Ruby.&lt;/p&gt;

&lt;h3 id=&quot;sass-framework-extensions&quot;&gt;Sass Framework Extensions&lt;/h3&gt;

&lt;p&gt;First, we need some Sass to test. Our awesome framework wants more Sass list power! So we created these two fancy Sass functions below for accessing the first or last item of a list.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-scss&quot; data-lang=&quot;scss&quot;&gt;&lt;span class=&quot;k&quot;&gt;@function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;my-first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;@return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;nth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;my-last&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;@return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;nth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;From here, let&amp;#39;s pretend that these extensions are loaded whenever you &lt;code&gt;@import &amp;quot;my_framework&amp;quot;;&lt;/code&gt;. With great power comes great responsibility, hence we need to test them. But how?&lt;/p&gt;

&lt;h3 id=&quot;enter-ruby-here-doc-strings&quot;&gt;Enter Ruby Here-Doc Strings&lt;/h3&gt;

&lt;p&gt;I have always wanted to use one of the many Ruby &lt;a href=&quot;http://makandracards.com/makandra/1675-using-heredoc-for-prettier-ruby-code&quot;&gt;here-doc&lt;/a&gt; string methods and testing Sass felt like a great opportunity to pay closer attention to these. Here is what I mocked up for our ideal Minitest assertion syntax. It uses the &lt;code&gt;&amp;lt;&amp;lt;-FLAG&lt;/code&gt; vs the &lt;code&gt;&amp;lt;&amp;lt;FLAG&lt;/code&gt; here-doc termination sequence so that indentation is maintained.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'my-red'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;assert_sass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SASS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;CSS&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
    .test { color: $my-red; }
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;  SASS&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
    .test { color: #ee3524; }
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;  CSS&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This looks really clean to me. It is easy to identify that we have some Sass at the top that we want to render to CSS below. If you are lucky, your editor will even syntax highlight each here-doc string too. Astute testing fans might complain that our fictional &lt;code&gt;assert_sass&lt;/code&gt; arguments&amp;#39; are backwards and that the expected CSS value needs to be the first parameter. I get it, but I think it looks and reads cleaner the other way around. And yes, I know it is &lt;a href=&quot;http://sassnotsass.com&quot;&gt;Sass not SASS&lt;/a&gt; but I wanted to stick with here-doc conventions and uppercase my termination sequences.&lt;/p&gt;

&lt;h3 id=&quot;implementation-time&quot;&gt;Implementation Time&lt;/h3&gt;

&lt;p&gt;Now that the vision is out of the way, we need to make &lt;code&gt;assert_sass&lt;/code&gt; work. Our project added the following Ruby methods to a &lt;code&gt;SassTestHelpers&lt;/code&gt; module that was in turn mixed into our base spec case. The details of where you put them in your own project is up to you.&lt;/p&gt;

&lt;p&gt;That out of the way, the first thing we will need is a helper to render Sass.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;render_sass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{})&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:syntax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:scss&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;key?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:syntax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:compact&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;key?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:cache&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Sass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Engine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;render&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The first argument here is a template string to render and some options to pass down to the Sass rendering engine. Set the default syntax to your own needs. But I suggest keeping the &lt;code&gt;:style&lt;/code&gt; option set to &lt;code&gt;:compact&lt;/code&gt;. We felt this was the best output method for tests. Lastly, this method does not leverage the Sass cache for safety. Just say no to Heisenbugs!&lt;/p&gt;

&lt;p&gt;Now we need a method to render a string of Sass within our framework&amp;#39;s context. Luckily our gem already adds itself to the Sass load path via the &lt;code&gt;SASS_PATH&lt;/code&gt; environment variable. So all we have to do is import our awesome framework before whatever Sass we want to test. Again, Ruby&amp;#39;s here-doc strings come in handy.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;render_my_framework&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;render_sass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TEMPLATE&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
    @import &quot;my_framework&quot;;
    &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;  TEMPLATE&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So with only two helper methods, we can finally implement &lt;code&gt;assert_sass&lt;/code&gt;. Since Minitest::Spec builds on top of unit style assertions, we delegate our assertion to &lt;code&gt;assert_equal&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;assert_sass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sass_template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected_css&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;expected&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected_css&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;squish&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;actual&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;render_my_framework&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sass_template&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;squish&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;assert_equal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;actual&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This time we make sure to switch the expected and actual to line up with the proper expectation order. If we did not do this, the test error output would be backwards. Lastly, we are using ActiveSupport &lt;a href=&quot;http://apidock.com/rails/ActiveSupport/CoreExtensions/String/Filters/squish&quot;&gt;squish&lt;/a&gt; string extension which removes consecutive whitespace not only from the ends of a string, but from within the middle too. This makes your CSS assertions tolerant to irrelevant white space introduced by indented here-doc strings.&lt;/p&gt;

&lt;h3 id=&quot;final-sass-tests&quot;&gt;Final Sass Tests&lt;/h3&gt;

&lt;p&gt;The final tests for our Sass framework&amp;#39;s list extensions are below.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'my-first'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;assert_sass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SASS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;CSS&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
    $list: (one two three);
    .test { content: my-first($list); }
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;  SASS&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
    .test { content: one; }
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;  CSS&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'my-last'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;assert_sass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SASS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;CSS&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
    $list: (one two three);
    .test { content: my-last($list); }
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;  SASS&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
    .test { content: three; }
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;  CSS&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The result is a simple declarative test style that boosts our confidence level as we move our living style guide&amp;#39;s Sass framework forward. We can literally test anything from values to full expressions. Ruby is a great tool for testing and makes authoring Sass frameworks fun. I hope that you can use something like this within your own project and thanks for reading!&lt;/p&gt;

&lt;h3 id=&quot;other-resources&quot;&gt;Other Resources&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;/blog/2014/09/08/building-the-customink-living-style-guide/&quot;&gt;Building the CustomInk Living Style Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/ericam/true&quot;&gt;True Sass Unit Testing Framework&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/cburgmer/csscritic&quot;&gt;CSS Critic Regression Testing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://makandracards.com/makandra/1675-using-heredoc-for-prettier-ruby-code&quot;&gt;Ruby here-doc Strings&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 30 Sep 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/09/30/unit-testing-sass-frameworks/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/09/30/unit-testing-sass-frameworks/</guid>
      </item>
    
      <item>
        <title>Ruby Meta - Method Madness</title>
        <description>&lt;p&gt;Ruby metaprogramming is fun and very rewarding, but also a little bewildering. One of the great things about Ruby is that you can dynamically add methods to objects.  Ruby gives us &lt;code&gt;#eval&lt;/code&gt;, &lt;code&gt;#instance_eval&lt;/code&gt;, and &lt;code&gt;#class_eval&lt;/code&gt; for this purpose, but the names aren’t as clear as one might expect, and can lead to some confusion. Hopefully the code examples below help clarify how each is used, and get on on the way to meta-mastery.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;One important thing to remember in Ruby is that objects are instances of a class, but classes are also objects... classes are instances of class &lt;code&gt;Class&lt;/code&gt;!!&lt;/p&gt;

&lt;p&gt;&lt;code&gt;class_eval(string)&lt;/code&gt; means that we are defining a class, and we are eval&amp;#39;ing in that context basically, the equivalent of:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ClassDemo&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Demo 1 - &lt;code&gt;class_eval&lt;/code&gt; on a class:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;speak_method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'def speak; puts &quot;hi&quot;; end'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ClassDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;ClassDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class_eval&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speak_method&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;ClassDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;speak&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# hi&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;ClassDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;speak&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# NoMethodError: undefined method `speak' for ClassDemo:Class&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Demo 1 corollary - &lt;code&gt;class_eval&lt;/code&gt; on an instance:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# No such thing!&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ClassDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class_eval&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speak_method&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# NoMethodError: undefined method `class_eval' for #&amp;lt;ClassDemo:0x...&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;instance_eval(string)&lt;/code&gt; means that we are eval&amp;#39;ing for a specific instance when instance_eval&amp;#39;ing on a class, that instance is the class&amp;#39;s instance!!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;InstanceDemo&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Demo 2 - &lt;code&gt;instance_eval&lt;/code&gt; on an instance:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;speak_method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'def speak; puts &quot;hi&quot;; end'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;InstanceDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;id1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;InstanceDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;id2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;InstanceDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;id1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speak_method&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;id1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;speak&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# hi&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;id2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;speak&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# NoMethodError: undefined method `speak' for #&amp;lt;InstanceDemo:0x...&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Demo 2 corollary - &lt;code&gt;instance_eval&lt;/code&gt; on a class:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;speak_method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'def speak; puts &quot;hi&quot;; end'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;InstanceDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;InstanceDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;speak_method&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;InstanceDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;speak&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# hi&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;InstanceDemo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;speak&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# NoMethodError: undefined method `speak' for #&amp;lt;InstanceDemo:0x...&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So hopefully this helps clarify the distinctions between &lt;code&gt;#eval&lt;/code&gt;, &lt;code&gt;#class_eval&lt;/code&gt;, and &lt;code&gt;#instance_eval&lt;/code&gt;. The next time you want to dynamically modify the methods to objects (and classes), you’ll know which of these methods to choose!&lt;/p&gt;
</description>
        <pubDate>Fri, 26 Sep 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/09/26/ruby-meta-method-madness/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/09/26/ruby-meta-method-madness/</guid>
      </item>
    
      <item>
        <title>Migrating Session Flash from Rails 3.0.x to 3.2.x</title>
        <description>&lt;p&gt;When upgrading a high-traffic Rails application from 3.0.x to 3.2.x, existing
sessions with Flash data will raise &lt;strong&gt;dump format error&lt;/strong&gt; during the session unmarshalling
step of the users next request. For an ostensibly minor patch &lt;a href=&quot;http://semver.org/&quot;&gt;(see semver)&lt;/a&gt;, breaking
user sessions is an unexpected surprise and a real bummer for your users.&lt;/p&gt;

&lt;p&gt;The Rails breaking change to &lt;code&gt;FlashHash&lt;/code&gt; was to stop inheriting from Hash:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Rails 3.0 - See: http://git.io/X8WqIw&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FlashHash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Hash&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Rails 3.2 - See: http://git.io/jJ_Qhw&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FlashHash&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Dealing with serialization errors can be notoriously difficult, even more so because these were occurring deep
in the framework. So, we monkey patched &lt;code&gt;ActiveRecord::SessionStore::Session&lt;/code&gt; to remove the offending Flash data.
The possible loss was a notification displayed on the page, the benefit was maintaining user sessions across the
upgrade deployment.&lt;/p&gt;

&lt;p&gt;If we catch the &lt;strong&gt;dump format error&lt;/strong&gt;, assume it&amp;#39;s the Flash and delete it, the remainder of the session
may be unmarshalled and accessed.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SessionStore&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class_eval&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;

 &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;unmarshal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;

   &lt;span class=&quot;n&quot;&gt;marshalled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;begin&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;decoded&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;decode64&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;marshalled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Marshal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decoded&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ArgumentError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ae&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ae&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/dump format error/&lt;/span&gt;
       &lt;span class=&quot;n&quot;&gt;with_alternate_flash_klass&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;marshalled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Marshal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decoded&lt;/span&gt;
         &lt;span class=&quot;n&quot;&gt;marshalled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'flash'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ae&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

   &lt;span class=&quot;n&quot;&gt;marshalled&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

 &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We start by monkey patching the &lt;code&gt;ActiveRecord::SessionStore::Session#unmarshal&lt;/code&gt; method to rescue
&lt;code&gt;ArgumentError&lt;/code&gt;. &lt;a href=&quot;https://github.com/rails/rails/blob/3-2-stable/activerecord/lib/active_record/session_store.rb#L59-L61&quot;&gt;see original method&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If the &lt;code&gt;ArgumentError&lt;/code&gt; message is &lt;strong&gt;dump format error&lt;/strong&gt;, we use a back-ported &lt;code&gt;FlashHash&lt;/code&gt; implementation and attempt to decode again. This
time we delete the &amp;#39;flash&amp;#39; data and return the unmarshalled session. Going forward, the session should be valid because new Flash data will
be from the current &lt;code&gt;FlashHash&lt;/code&gt; object.&lt;/p&gt;

&lt;p&gt;In the monkey patched &lt;code&gt;ActiveRecord::SessionStore::Session#unmarshal&lt;/code&gt; above, you&amp;#39;ll notice the &lt;code&gt;with_alternate_flash_klass&lt;/code&gt; block
for the second attempt to unmarshal. This method takes the block to execute and handles the redefining of the &lt;code&gt;FlashHash&lt;/code&gt; constant for you. It
conveniently restores the &lt;code&gt;FlashHash&lt;/code&gt; after the unmarshalling.&lt;/p&gt;

&lt;p&gt;First, we create helper method to dynamically create the alternate &lt;code&gt;FlashHash&lt;/code&gt; class:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;alternate_flash_klass&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FlashHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ancestors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Hash&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#rails3.2 FlashHash&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@used&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@closed&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@flashes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@now&lt;/span&gt;     &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#rails3.0 FlashHash&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
        &lt;span class=&quot;vi&quot;&gt;@used&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Using &lt;code&gt;Class.new()&lt;/code&gt;, we have the option of passing in a parent, which we do for the rails 3.0 version.&lt;/p&gt;

&lt;p&gt;Next, we need a method to swap the &lt;code&gt;FlashHash&lt;/code&gt; and execute a block:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;with_alternate_flash_klass&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;temporary_flash_hash_klass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alternate_flash_klass&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;original_flash_hash_klass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FlashHash&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:remove_const&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:FlashHash&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;const_set&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'FlashHash'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temporary_flash_hash_klass&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt;

  &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:remove_const&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:FlashHash&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;const_set&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'FlashHash'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;original_flash_hash_klass&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This saves the current &lt;code&gt;FlashHash&lt;/code&gt; in &lt;code&gt;original_flash_hash_klass&lt;/code&gt;, redefines the constant. When the block
is yielded, the unmarshal is attempted with the back-ported &lt;code&gt;FlashHash&lt;/code&gt;. Then we restore the original &lt;code&gt;FlashHash&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Astute readers, will notice &lt;code&gt;alternate_flash_klass&lt;/code&gt; will provide a back-port or forward-port implementation of &lt;code&gt;FlashHash&lt;/code&gt;.
This allows us to deploy Rails 3.2 and rollback to Rails 3.0. If you deployed Rails 3.2, allowed some sessions to be
persisted, then rolled back, those sessions would be corrupt. This implementation supports going forward and backward
with only a loss of Flash notifications.&lt;/p&gt;

&lt;h3 id=&quot;config-initializers-rails32_session_upgrade_patches-rb&quot;&gt;config/initializers/rails32_session_upgrade_patches.rb&lt;/h3&gt;

&lt;p&gt;You can add this code to an initialization file. You may only need it for 30 days or until your sessions expire. We
have a &lt;strong&gt;warn&lt;/strong&gt; so your reminded this monkey patch is still present in your code.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# ActionDispatch::Flash::FlashHash changed between 3.0 and 3.2&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Rails 3.0.x FlashHash inherits from Hash, this was removed in Rails 3.2.x&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# if a session was created in 3.0.x, after deploy we would receive&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# 'dump format error' when trying to deserialize the session&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# this monkey patch attempts to unmarshal with an alternate version&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# of FlashHash and deletes it if successful&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;warn&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[TEMPORARY] Loading session monkey patches for Rails 3.0.x =&amp;gt; 3.2.x upgrade&quot;&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SessionStore&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class_eval&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;unmarshal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;marshalled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;begin&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;decoded&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;decode64&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;marshalled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Marshal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decoded&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ArgumentError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ae&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ae&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/dump format error/&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;with_alternate_flash_klass&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;marshalled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Marshal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;decoded&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;marshalled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'flash'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ae&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;marshalled&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;alternate_flash_klass&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FlashHash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ancestors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Hash&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#rails3.2 FlashHash&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;
          &lt;span class=&quot;vi&quot;&gt;@used&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
          &lt;span class=&quot;vi&quot;&gt;@closed&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
          &lt;span class=&quot;vi&quot;&gt;@flashes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
          &lt;span class=&quot;vi&quot;&gt;@now&lt;/span&gt;     &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#rails3.0 FlashHash&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
          &lt;span class=&quot;vi&quot;&gt;@used&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;with_alternate_flash_klass&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;temporary_flash_hash_klass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;alternate_flash_klass&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;original_flash_hash_klass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;FlashHash&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:remove_const&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:FlashHash&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;const_set&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'FlashHash'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;temporary_flash_hash_klass&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:remove_const&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:FlashHash&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Flash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;const_set&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'FlashHash'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;original_flash_hash_klass&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;bonus-tests&quot;&gt;Bonus! Tests&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt; you will need to copy session from your application for these
tests to pass. The session data below is invalid.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test_helper'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Rails32SessionUpgradePatchesTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveSupport&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TestCase&lt;/span&gt;

  &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'remove flash from rails 3.0.x sessions in rails 3.2.x'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;rails30_session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'7CUkiDnByb2R1Y3RpZAY6BkVGSSIKMDExMDQGOwBUSSIMbGFiX3VybAY7
    AEYiNGh0dHA6Ly93d3cuY3VzdG6taW5rLmNvbS9sYWI/Y2lkPWNobTAtMDAx
    akxVVlYyOWVxVHRPQk9ES1NCNFliVjVWUT0GOwBGSSIKZmxhc2gGOwBGSUM6
    JUFjdGlvbkRpc3BhdGNoOjpGbGFzaDo6Rmxhc2hIYXNoewY6CmVycm9yewc6
    IGluZm9ybWF0aW9uLgY7AEY6DG1lc3NhZ2VJIiZQbGVhc2UgZmlsbCBpbiBh
    IHJlY2lwaWVudCBiZWxvdy4GOwBGBjoKQHVzZWRvOghTZXQGOgpAaGFzaHsG
    OwdU'&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SessionStore&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;unmarshal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rails30_session&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assert_nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'flash'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/^3\.2/&lt;/span&gt;

  &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'remove flash from rails 3.2.x sessions in rails 3.0.x'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;rails32_session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'7BkkiCmZsYXNoBjoGRUZvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZs
    YXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h7BjoJd2FyblQ6DEBjbG9z
    ZWRGOg1AZmxhc2hlc3sGOwp7BjoMbWVzc2FnZUkiAcJQbGVhc2Ugbm90ZSB0
    dHdvcmsgYmVmb3JlIHByb2NlZWRpbmcgd2l0aCBwcm9kdWN0aW9uLiBQbGVh
    bWVudCB3aXRoIGEgbGluayB0byB5b3VyIGZpbmFsIHBpY3R1cmUgcHJvb2Zz
    LgY7AEY6CUBub3dvOiRBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoTm93
    BjoLQGZsYXNoQAc='&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SessionStore&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;unmarshal&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rails32_session&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assert_nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'flash'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=~&lt;/span&gt; &lt;span class=&quot;sr&quot;&gt;/^3\.0/&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;pretty&quot;&gt;Pretty?&lt;/h3&gt;

&lt;p&gt;No, it&amp;#39;s not pretty. But it will help you overcome an unexpected &lt;strong&gt;dump format error&lt;/strong&gt; when deploying
a Rails 3.2 upgrade.&lt;/p&gt;
</description>
        <pubDate>Tue, 23 Sep 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/09/23/migrating-session-flash-from-rails-30x-to-32x/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/09/23/migrating-session-flash-from-rails-30x-to-32x/</guid>
      </item>
    
      <item>
        <title>Single Class vs. Multi Class CSS</title>
        <description>&lt;p&gt;As I have mentioned previously in my post on &lt;a href=&quot;/blog/2014/08/26/modular-css-with-suit/&quot;&gt;Modular CSS&lt;/a&gt;, structuring Sass/CSS is hard. One of the best ways to determine how clean and well structured the resulting CSS within a project is, is to take a look at the markup being used in project. Overly nested elements typically mean overly nested CSS and if you find it difficult to discern the purpose of the classes on those elements, the CSS itself is probably not semantically written. To add insult to injury, the more classes we add to each element, the harder it becomes to read. What if there was a better way? What if we could just write a single class that provides all the styling we need for a given element?&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;single-class-css&quot;&gt;Single Class CSS&lt;/h3&gt;

&lt;p&gt;Let&amp;#39;s give the single class approach a try. To keep it simple we will style a button (for the purposes of this example we will use &lt;a href=&quot;/blog/2014/08/26/modular-css-with-suit/&quot;&gt;SUIT CSS&lt;/a&gt; to give our CSS semantic meaning). We will assume that we might have different types of buttons, or modifications of the same button, so let&amp;#39;s write a single class for each type of button we may want on our website.&lt;/p&gt;

&lt;p&gt;First let&amp;#39;s model the HTML we would like to generate, and then build the CSS around that model.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Btn&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Just a Button&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Btn--disabled&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Disabled Button&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Btn-secondary&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Secondary Button&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Btn-secondary--disabled&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Secondary Disabled Button&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Wow, that keeps the DOM very clean, and by using SUIT, our classes are very semantic and easy to understand.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;nc&quot;&gt;.Btn&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.5rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;.Btn--disabled&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.5rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;.Btn-secondary&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.5rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;.Btn-secondary--disabled&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;light-grey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.5rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://sassmeister.com/gist/ad10c8d57ac2807bcfc8&quot; class=&quot;sb-Btn sb-Btn--secondary sb-Btn--responsive&quot;&gt;Play with this example in Sassmeister&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The CSS we have written is awfully repetitive. We can improve this by using a preprocessor like Sass.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sass&quot; data-lang=&quot;sass&quot;&gt;&lt;span class=&quot;nv&quot;&gt;%Btn-base&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5px&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;.5rem&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@mixin&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ColoredBtn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$color&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;@extend&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;%Btn-base&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$color&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$background-color&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;.Btn&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;ColoredBtn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// .Btn--disabled&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--disabled&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;ColoredBtn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// .Btn-secondary&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-secondary&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;ColoredBtn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// .Btn-secondary--disabled&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-secondary--disabled&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;ColoredBtn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;light-grey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://sassmeister.com/gist/b36147e990969e8ce40d&quot; class=&quot;sb-Btn sb-Btn--secondary sb-Btn--responsive&quot;&gt;Play with this example in Sassmeister&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;While the Sass ends up being a lot cleaner than the equivalent CSS, let&amp;#39;s further evaluate this single class approach. So far it is quite appealing, but how does it hold up in a non-trivial example?&lt;/p&gt;

&lt;p&gt;You may have already noticed one of the chinks in the single class armor, &lt;code&gt;.Btn-secondary--disabled&lt;/code&gt;. At first you may be pleased, and even feel clever at how easily we were able to compose our styles with Sass into the easy to use package of a single class. The potential problem is what if we have more classes that can be composed? We will have to create a single class to represent each of these compositions. If we want to be add a modifier that controls the button&amp;#39;s size, we will end up with permutations like &lt;code&gt;.Btn-secondary--small--disabled&lt;/code&gt; and &lt;code&gt;.Btn-secondary--large--disabled&lt;/code&gt;. Or maybe it is &lt;code&gt;.Btn-secondary--disabled--large&lt;/code&gt;? We either will have to remember the order of all of our modifiers, or generate even more CSS by representing each ordering with the same CSS. The single class approach is starting to lose its appeal. The alternative approach is to compose our styles with multiple classes via the multi class approach.&lt;/p&gt;

&lt;h4 id=&quot;multi-class-css&quot;&gt;Multi Class CSS&lt;/h4&gt;

&lt;p&gt;Rather than using a single class to represent all the styles for each element, we can use multiple classes in concert to get the desired effect. We will continue to use the button example from above. Again, the first thing we will start with is our HTML, which we can use as a contract for the CSS we write.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Btn&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Just a Button&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Btn Btn--disabled&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Disabled Button&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Btn Btn-secondary&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Secondary Button&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;button&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Btn Btn-secondary Btn--disabled&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;Secondary Disabled Button&lt;span class=&quot;nt&quot;&gt;&amp;lt;/button&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Based on this HTML, the multi class Sass would be as follows.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sass&quot; data-lang=&quot;sass&quot;&gt;&lt;span class=&quot;nc&quot;&gt;.Btn&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5px&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;.5rem&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// .Btn-secondary&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-secondary&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// .Btn--disabled&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--disabled&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grey&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://sassmeister.com/gist/5d97c03de86bd194a007&quot; class=&quot;sb-Btn sb-Btn--secondary&quot;&gt;Play with this example in Sassmeister&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The first thing you will notice about the multi class approach is that there is significantly less Sass required. This is because we do not need to generate the CSS for each combination of styles we might need. Instead we can just create the smallest pieces and compose them to get any combination of styles we desire.&lt;/p&gt;

&lt;p&gt;Multi class CSS lends itself well to writing semantic, modular CSS. If the composability doesn&amp;#39;t win you over just look at the difference in the generated CSS from our two Sass examples.&lt;/p&gt;

&lt;h4 id=&quot;single-class-generated-css&quot;&gt;Single Class Generated CSS&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;nc&quot;&gt;.Btn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;.Btn--disabled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;.Btn-secondary&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;.Btn-secondary--disabled&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.5rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;.Btn&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.Btn--disabled&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.Btn-secondary&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.Btn-secondary--disabled&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;light-grey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;multi-class-generated-css&quot;&gt;Multi Class Generated CSS&lt;/h4&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;nc&quot;&gt;.Btn&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;5px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0.5rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.Btn-secondary&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.Btn--disabled&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;grey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;Both the Sass and generated CSS are simpler and more concise in this trivial example. Imagine how many more single classes would need to be generated for a large web application, a class for each possible combination of style groupings. This would grow at an exponential rate, and become unmanageable rather quickly. Its multi class equivalent would generate the minimal pieces and enable the user to combine these classes in a number of ways in the DOM, a much more flexible approach. Single classes would also be very difficult to extend, which would be terrible in any application and even more so in a CSS framework.&lt;/p&gt;

&lt;p&gt;Though a single class approach may be tempting at first glance, reconsider before you make the leap. A multi class approach will pay off in the long run and will help enable you to write simple, but powerful classes to accomplish any styling need you may have.&lt;/p&gt;

&lt;h3 id=&quot;further-reading&quot;&gt;Further Reading&lt;/h3&gt;

&lt;p&gt;I highly recommend this &lt;a href=&quot;http://nicolasgallagher.com/about-html-semantics-front-end-architecture/&quot;&gt;article&lt;/a&gt; on HTML semantics by Nicolas Gallagher, which takes a look at semantic CSS, including the multi class vs single class issue.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;sub&gt;Reposted from &lt;a href=&quot;http://inlehmansterms.net/2014/09/19/single-class-vs-multi-class-css/&quot; rel=&quot;canonical&quot;&gt;Jonathan&amp;#39;s blog- In Lehman&amp;#39;s Terms&lt;/a&gt;.&lt;/sub&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 19 Sep 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/09/19/single-class-vs-multi-class-css/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/09/19/single-class-vs-multi-class-css/</guid>
      </item>
    
      <item>
        <title>From Rails 3.2 to 4.2</title>
        <description>&lt;p&gt;Last week I set out to upgrade &lt;a href=&quot;https://homemarks.com/&quot;&gt;HomeMarks&lt;/a&gt;, a personal bookmarking project of mine. This application sat on a very &lt;a href=&quot;https://homemarks.com/blog/2014-02-26-homemarks-v3-launches&quot;&gt;recent upgrade&lt;/a&gt; to Rails 3.2. It is written as an API to both an iOS and HTML JavaScript interface. It is by no means huge and should represent a nominal service oriented application. Here are some stats:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;8 Models (450 LOC)&lt;/li&gt;
&lt;li&gt;11 Controllers (550 LOC)&lt;/li&gt;
&lt;li&gt;2 Mailers (50 LOC)&lt;/li&gt;
&lt;li&gt;8 Libraries (500 LOC)&lt;/li&gt;
&lt;li&gt;Using Ruby 2.1.2.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The application is heavily tested with an emphasis on controller and integrations. It uses a standard Rails test setup with simple &lt;a href=&quot;https://github.com/metaskills/minitest-spec-rails#readme&quot;&gt;minitest-spec-rails&lt;/a&gt; usage. Integrations are done using the Capybara DSL with the &lt;a href=&quot;https://github.com/teampoltergeist/poltergeist&quot;&gt;Poltergeist&lt;/a&gt; driver. JavaScript tests use &lt;a href=&quot;https://github.com/jfirebaugh/konacha&quot;&gt;Konacha&lt;/a&gt; which leverage MochaJS and the Chai assertion library.&lt;/p&gt;

&lt;p&gt;With the introductions out of the way let&amp;#39;s do some fun upgrade work! Here is a step by step process of how I tackled the task and I hope you find it useful.&lt;/p&gt;

&lt;h3 id=&quot;grease-the-wheels&quot;&gt;Grease The Wheels&lt;/h3&gt;

&lt;p&gt;The first step I always recommend for any Rails upgrade is to update your entire bundle with your current Rails semver as the only gem constraint. The goal here is to have no gem versions other than &lt;code&gt;~&amp;gt; 3.2&lt;/code&gt; for Rails itself in your Gemfile - hence allowing Bundler to do all the work during your big 4.2 update. For this reason you should delete any explicit gem version specs and run &lt;code&gt;bundle update&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;During this time you will want to remove any non-essential gems as well. Great examples are test related gems. Spending time debugging any non-essential gem during an upgrade process is the worst time spent of all. Likewise, identify gems that are obsolete in your target upgrade. In my application, good examples were the &lt;code&gt;mail_view&lt;/code&gt; and the &lt;code&gt;quiet_assets&lt;/code&gt; gems. Hopefully your application has a tagging convention for notes when upgrading. At CustomInk, we use &lt;code&gt;PENDING: [Rails4]...&lt;/code&gt; style comment tags.&lt;/p&gt;

&lt;p&gt;Once done, update your master branch with this work and get that deployed. This is your new base for the push to Rails 4.2.&lt;/p&gt;

&lt;h3 id=&quot;make-a-template&quot;&gt;Make A Template&lt;/h3&gt;

&lt;p&gt;We want to reference a fresh 4.2 application as a guide. This will come in handy in many ways later on. During the time of this article Rails 4.2 was in beta2, so all examples will use that version. Please adjust your commands/examples as newer versions are released.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;rails 4.2.0.beta1
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rbenv rehash
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rails new myapp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;the-big-bundle-update&quot;&gt;The Big Bundle Update&lt;/h3&gt;

&lt;p&gt;We need to focus on the Gemfile first. Start by changing that &lt;code&gt;~&amp;gt; 3.2&lt;/code&gt; twiddle-wakka to our target version of &lt;code&gt;~&amp;gt; 4.2.0.beta2&lt;/code&gt; as our Rails gem version. Go through your notes and delete those obsolete gems too and make any adjustments to any pessimistic version if you noted any.&lt;/p&gt;

&lt;p&gt;In Rails 4.2, there is no such thing as an &lt;code&gt;assets&lt;/code&gt; group for gems. So I removed my &lt;code&gt;group :assets&lt;/code&gt; and flattened my asset gems to the root of the Gemfile. I do suggest maintaining an comment and clustering your asset gems in your Gemfile as a way to keep them organized. Due to &lt;code&gt;sass-rails&lt;/code&gt; being in beta, I ended up with something like this.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'bcrypt-ruby'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'pg'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rails'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'~&amp;gt; 4.2.0.beta2'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# PENDING: [Rails 4.2] Remove wakka.&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Assets&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'bourbon'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'coffee-rails'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'jquery-rails'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sass-rails'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'~&amp;gt; 5.0.0.beta1'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# PENDING: [Rails 4.2] Remove wakka.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'uglifier'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lastly, I find it extremely useful to delete the &lt;code&gt;Gemfile.lock&lt;/code&gt; now. In my experience Bundler will have a much better time coping by allowing the entire dep graph to be rebuilt. Now go for the big update with a simple bundle install.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ bundle install
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you run into any problems here, take them on one by one. In some cases you could be using a gem that does not optimistically include 4.x versions. Before proceeding, find each project&amp;#39;s issue tracker and do a little research. If you encounter resistance, look broadly first and avoid hacking around it. This could be your time to shine and help with an open source pull request.&lt;/p&gt;

&lt;p&gt;Once you are bundled, you are ready for the next step. &lt;strong&gt;Avoid the temptation to launch your application or running tests!&lt;/strong&gt; You are no where near ready for that, so slow your roll. We still have some good work to do.&lt;/p&gt;

&lt;h3 id=&quot;the-mimic-process&quot;&gt;The Mimic Process&lt;/h3&gt;

&lt;p&gt;This is a great time to open the template application we created above. It is a very straightforward process to go through each of the application&amp;#39;s files &amp;amp; folders and mimic the template within your own application.&lt;/p&gt;

&lt;p&gt;In my experience I have seen a lot of pain in converting over &lt;code&gt;config/environments&lt;/code&gt; files to the newer format. If you have never done so, I highly recommend following a simple practice that makes upgrading of these files easier in the future. Always keep the environment file largely untouched and add your configs to the bottom of each below a comment like this.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Rails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;configure&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;# ... Rails generated ...&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;# My Configs&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ----------&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;action_mailer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;show_previews&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This makes updating these files in the future go much quicker. Here are some general notes I had when doing my entire mimesis process.&lt;/p&gt;

&lt;h4 id=&quot;environments-initializers&quot;&gt;Environments &amp;amp; Initializers&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Removed &lt;code&gt;config.filter_parameters&lt;/code&gt; from application.rb to config/initializers/filter_parameter_logging.rb&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;config.assets.precompile&lt;/code&gt; and &lt;code&gt;config.assets.version&lt;/code&gt; have moved to config/initializers/assets.rb&lt;/li&gt;
&lt;li&gt;Many files now use the &lt;code&gt;Rails.application&lt;/code&gt; singleton resource vs &lt;code&gt;MyApp::Application&lt;/code&gt; constant.&lt;/li&gt;
&lt;li&gt;New &lt;code&gt;config.active_support.test_order = :random&lt;/code&gt; added in test environment file.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;concerns-directories&quot;&gt;Concerns Directories&lt;/h4&gt;

&lt;p&gt;I fully embraced the new concern directories. I created both &lt;code&gt;app/controllers/concerns/.keep&lt;/code&gt; and &lt;code&gt;app/models/concerns/.keep&lt;/code&gt;. I found there were a few files in my lib directory that were actually concerns. For example, I moved both my AuthenticatedSystem and RenderInvalidRecord modules to the controller concerns. This allowed me to remove any hacks I had for setting the auto load path on the lib directory too.&lt;/p&gt;

&lt;h4 id=&quot;bin-directory-spring&quot;&gt;Bin Directory &amp;amp; Spring&lt;/h4&gt;

&lt;p&gt;I have been using both bundler bin stubs and Spring in all of my 3.2 applications. Now that Rails supports both the local &lt;code&gt;bin&lt;/code&gt; directory and Spring in an integrated way, I wanted to follow the golden path of least resistance.&lt;/p&gt;

&lt;p&gt;The first step was to blow away my entire bin directory and just copy over the one from the application template. These new bin files for &lt;code&gt;rake&lt;/code&gt; and &lt;code&gt;rails&lt;/code&gt; leverage the Spring preloader. Make sure to delete your local or global bundle config for installing bins too. Do this with &lt;code&gt;bundle config --delete bin&lt;/code&gt;. Now, instead of having Bundler install bin stubs for every gem which could conflict with the preloader bins, we should be explicit on a per gem basis. For example, this would install the bins for guard.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ bundle binstubs guard
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lastly, if you have never done so, change your shell&amp;#39;s &lt;code&gt;PATH&lt;/code&gt; to look for the local &lt;code&gt;./bin&lt;/code&gt; directory before any others. I do this after my rbenv initialization.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;rbenv init -&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;./bin:&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PATH&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;routes-file&quot;&gt;Routes File&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Removed my &lt;code&gt;match&lt;/code&gt; methods in favor of &lt;code&gt;get&lt;/code&gt; verb method.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;new-test-directories&quot;&gt;New Test Directories&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;Renamed &lt;code&gt;test/functional&lt;/code&gt; folder to &lt;code&gt;test/controllers&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Renamed &lt;code&gt;test/unit&lt;/code&gt; folder to &lt;code&gt;test/models&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Created a &lt;code&gt;test/mailers&lt;/code&gt; folder and moved all my mailer tests from units to it.&lt;/li&gt;
&lt;li&gt;Renamed &lt;code&gt;ActionController::IntegrationTest&lt;/code&gt; to &lt;code&gt;ActionDispatch::IntegrationTest&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;framework-changes&quot;&gt;Framework Changes&lt;/h3&gt;

&lt;p&gt;Now is the time where you can start to run your tests and identify what needs to change. I recommend starting with the model tests and moving on from there. Though I am a big fan of Guard for automatic test runs, Rails now has a new option when using rake. Just pass the filename after the test argument. For example, this would run a single model test and since the new &lt;code&gt;bin/rake&lt;/code&gt; file uses Spring, you can run this command over and over again very quickly.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ rake test test/models/user_test.rb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Below are things I found while moving through my tests. I have organized them by framework. They are by no means comprehensive and your application may expose more differences between Rails 3.2 and 4.2.&lt;/p&gt;

&lt;h4 id=&quot;activerecord&quot;&gt;ActiveRecord&lt;/h4&gt;

&lt;p&gt;You are going to see a lot of &lt;code&gt;ArgumentError: Unknown key: ...&lt;/code&gt; errors. The reason is that Rails 4.0 now requires that scopes use a callable object such as a Proc or lambda. I saw these errors mostly on &lt;code&gt;:order&lt;/code&gt; and the &lt;code&gt;:readonly&lt;/code&gt; option arguments. Here are a few before/after examples.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Old&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;has_many&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:foos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;order: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'position'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;has_many&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:bars&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;through: :foos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;readonly: &lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;order: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'foos.position, bars.position'&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# New&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;has_many&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:foos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;order&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'position'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;has_many&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:bars&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;order&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'foos.position, bars.position'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;through: :foos&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Seems the callable object has to be the second argument and you can easily chain the scopes within. I took a wild guess that the &lt;code&gt;readyonly&lt;/code&gt; scope took an optional &lt;code&gt;false&lt;/code&gt; argument and was handsomely rewarded.&lt;/p&gt;

&lt;p&gt;I also got a few good &lt;code&gt;ArgumentError: The provided regular expression is using multiline anchors (^ or $) ...&lt;/code&gt; errors. This was easy to fix by using the suggested \A and \z instead. Really happy to see the framework warning on this common errors when using regular expressions for validations.&lt;/p&gt;

&lt;p&gt;I deleted all the &lt;code&gt;attr_accesible&lt;/code&gt; declarations from my models and switched to strong parameters in the controllers. If you are new to strong parameters, &lt;a href=&quot;http://easyactiverecord.com/blog/2014/04/01/rails4-strong-parameters-and-the-attr-accessible-macro&quot;&gt;check out this article&lt;/a&gt; which goes into great depth on the topic. Alternatively, you can start using strong parameters before you upgrade to Rails 4.x by using the backward compatible &lt;a href=&quot;https://github.com/rails/strong_parameters&quot;&gt;strong parameters gem&lt;/a&gt;. A great strategy to ease large application transitions. Thanks to &lt;a href=&quot;http://about.me/cmar&quot;&gt;Chris Mar&lt;/a&gt; for pointing out this approach to our team.&lt;/p&gt;

&lt;p&gt;The class &lt;code&gt;update_all&lt;/code&gt; no longer takes a second conditions argument. I always disliked methods that took two option hashes and this is a great change. For example:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Old&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Book&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;update_all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;author: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'David'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;title: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Rails'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# New&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Book&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;title: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Rails'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;update_all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;author: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'David'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lastly, the &lt;code&gt;all&lt;/code&gt; method no longer takes finder options.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Old&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conditions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:'ken@metaskills.net'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# New&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:'ken@metaskills.net'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;actionmailer&quot;&gt;ActionMailer&lt;/h4&gt;

&lt;p&gt;The &lt;code&gt;#deliver&lt;/code&gt; method is deprecated and will be removed in Rails 5. Now that Rails 4.2 has &lt;code&gt;ActiveJob&lt;/code&gt; the preferred way to deliver emails via it would be to call &lt;code&gt;#deliver_later&lt;/code&gt; or &lt;code&gt;#deliver_now&lt;/code&gt;. Since the default queue adapter for ActiveJob is &lt;code&gt;:inline&lt;/code&gt;, just go ahead and switch things to the deliver later method. You can then change your queue adapter and create workers later on if needed.&lt;/p&gt;

&lt;p&gt;Using &lt;code&gt;_path&lt;/code&gt; url methods in mailers will now result in a &lt;code&gt;DEPRECATION WARNING... cannot be used here as a full URL is required&lt;/code&gt; message. Unless you were manually augmenting these paths to have a host, this is a good thing and will keep developers from including partial URLs in mailers.&lt;/p&gt;

&lt;p&gt;MailView is now fully integrated into ActionMailer. Read &lt;a href=&quot;http://brewhouse.io/blog/2013/12/17/whats-new-in-rails-4-1.html&quot;&gt;this article&lt;/a&gt; for full details. If you have never used MailView in a Rails 3 application, it allows you to develop your mails in the browser as if they were controller view. When moving from old MailView support to Rails 4.x usage, follow these steps:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;config.action_mailer.show_previews&lt;/code&gt; to config/environments/development.rb file.&lt;/li&gt;
&lt;li&gt;Moved previous mailer previews to new &lt;code&gt;test/mailers/previews&lt;/code&gt; directory.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;actionpack&quot;&gt;ActionPack&lt;/h4&gt;

&lt;p&gt;Partials can no longer have &lt;code&gt;-&lt;/code&gt; hyphens in the filename. I had to change a few.&lt;/p&gt;

&lt;p&gt;There is a new and &lt;a href=&quot;https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/metal/request_forgery_protection.rb&quot;&gt;better request forgery protection&lt;/a&gt; in Rails 4.x. Read the source link for full error messages and documentation. In my case, I had already redefined a protected &lt;code&gt;protect_against_forgery?&lt;/code&gt; for a special controller and needed to only add &lt;code&gt;skip_before_action :verify_authenticity_token&lt;/code&gt; to my filters to fully work around the security warning.&lt;/p&gt;

&lt;h4 id=&quot;asset-pipeline&quot;&gt;Asset Pipeline&lt;/h4&gt;

&lt;p&gt;The biggest issue that I had is that asset compilation no longer generates non-digest filenames for each asset. This &lt;a href=&quot;https://github.com/rails/sprockets-rails/issues/49&quot;&gt;github issue&lt;/a&gt; explains the rationale, but I do believe there are some corner cases where you do want to reference the non-digest asset filename.&lt;/p&gt;

&lt;p&gt;If after careful examination you find yourself in need of this corner case, do not disable digests for all files. Instead install the &lt;a href=&quot;https://github.com/alexspeller/non-stupid-digest-assets&quot;&gt;non-stupid-digest-assets&lt;/a&gt; gem which allows you to whitelist specific asset files and thereby including a non-digest filename along with the fingerprinted filenames for said asset(s). I recommend putting the &lt;code&gt;NonStupidDigestAssets.whitelist&lt;/code&gt; settings at the bottom of the new &lt;code&gt;config/initializers/assets.rb&lt;/code&gt; file.&lt;/p&gt;

&lt;h4 id=&quot;testing&quot;&gt;Testing&lt;/h4&gt;

&lt;p&gt;The Rails testing task strategy has changed a lot. By default now, when you run &lt;code&gt;rake test&lt;/code&gt; all models, mailers, controllers and integrations are run in one collective suite run. If you are interested in learning how, read the &lt;a href=&quot;https://github.com/rails/rails/blob/master/railties/lib/rails/test_unit/testing.rake&quot;&gt;testing.rake&lt;/a&gt; source. I also talked about how to add different directories to this process within a &lt;a href=&quot;https://github.com/metaskills/minitest-spec-rails/issues/49&quot;&gt;github issues under the minitest-spec-rails&lt;/a&gt; project where &lt;a href=&quot;http://blowmage.com&quot;&gt;Mike Moore&lt;/a&gt; contributed a few helpful hints too.&lt;/p&gt;

&lt;p&gt;The reason I mention this is that it is somewhat common to expect your Capybara enhanced integrations to run in a distinct process. Because of this, it is also common to see monkey patches to the ActiveRecord connection pool to support integration tests that leverage DB transactions. Depending on your setup, you may be required to make a few tweaks.&lt;/p&gt;

&lt;h3 id=&quot;in-closing&quot;&gt;In Closing&lt;/h3&gt;

&lt;p&gt;Upgrading Rails applications used to be a pain! My recent upgrade only took two evenings of my spare time. In my opinion Rails 3.1 and up have become much more stable for both application and gem authors to leverage the framework. Thus making upgrades approachable. Keep your applications small and focused as a way to win the upgrade wars!&lt;/p&gt;

&lt;p&gt;In closing, thanks for reading and I hope you found this information helpful. If you have any questions, feel free to ask in the comments. Cheers!&lt;/p&gt;
</description>
        <pubDate>Tue, 16 Sep 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/09/16/from-rails-3.2-to-4.2/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/09/16/from-rails-3.2-to-4.2/</guid>
      </item>
    
      <item>
        <title>Fall College Recruiting Schedule</title>
        <description>&lt;p&gt;Fall is in the air and so our engineers will be heading back to college!&lt;/p&gt;

&lt;p&gt;We are looking for Summer 2015 interns and early career software engineer hires. You can learn more about our early career software engineer position by visiting our careers page: &lt;a href=&quot;http://www.customink.com/about/jobs/openings&quot;&gt;http://www.customink.com/about/jobs/openings&lt;/a&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;We would love to speak with CS, CIS, and HCI students, so please look for us at one of the following locations:&lt;/p&gt;

&lt;h4 id=&quot;pennapps&quot;&gt;PennApps&lt;/h4&gt;

&lt;p&gt;September 12th - 14th&lt;br/&gt;
&lt;a href=&quot;http://2014f.pennapps.com&quot;&gt;http://2014f.pennapps.com&lt;/a&gt;
&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;

&lt;h4 id=&quot;viginia-tech&quot;&gt;Viginia Tech&lt;/h4&gt;

&lt;p&gt;September 15th&lt;br/&gt;
&lt;a href=&quot;http://www.cs.vt.edu/partnering/events&quot;&gt;http://www.cs.vt.edu/partnering/events&lt;/a&gt;
&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;

&lt;h4 id=&quot;carnegie-mellon-university&quot;&gt;Carnegie Mellon University&lt;/h4&gt;

&lt;p&gt;September 16th&lt;br/&gt;
&lt;a href=&quot;http://engineering.cmu.edu/companies/toc/index.html&quot;&gt;http://engineering.cmu.edu/companies/toc/index.html&lt;/a&gt;
&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;

&lt;h4 id=&quot;university-of-virgina&quot;&gt;University of Virgina&lt;/h4&gt;

&lt;p&gt;September 16th&lt;br/&gt;
&lt;a href=&quot;http://www.seas.virginia.edu/admin/careerdev/general.php&quot;&gt;http://www.seas.virginia.edu/admin/careerdev/general.php&lt;/a&gt;
&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;

&lt;h4 id=&quot;university-of-maryland&quot;&gt;University of Maryland&lt;/h4&gt;

&lt;p&gt;September 18th&lt;br/&gt;
&lt;a href=&quot;http://www.careercenter.umd.edu/events_description.cfm?event_id=4870&quot;&gt;http://www.careercenter.umd.edu/events_description.cfm?event_id=4870&lt;/a&gt;
&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;

&lt;h4 id=&quot;george-mason-university&quot;&gt;George Mason University&lt;/h4&gt;

&lt;p&gt;October 1st&lt;br/&gt;
&lt;a href=&quot;https://careers.gmu.edu/employers/events/fairs&quot;&gt;https://careers.gmu.edu/employers/events/fairs&lt;/a&gt;
&lt;br/&gt;&lt;br/&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 12 Sep 2014 13:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/09/12/fall-college-recruiting-schedule/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/09/12/fall-college-recruiting-schedule/</guid>
      </item>
    
      <item>
        <title>Open Sourcing a Gem: Part 1</title>
        <description>&lt;h3 id=&quot;the-signalman-gems-origins&quot;&gt;The Signalman gem&amp;#39;s origins&lt;/h3&gt;

&lt;p&gt;As any company grows, it reaches a point where it is no longer in the &amp;quot;startup phase&amp;quot;. No longer can the target market arbitrarily be redefined or features be pushed out at a whim. At this point, analytics and A/B testing become increasingly important. A few years ago, we found this to be a point of pain at CustomInk and sought to create a more robust solution to meet our needs. Thus Signalman was born.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Though Signalman has evolved since its conception, its primary function has remained to make A/B testing easier and easily repeatable.&lt;/p&gt;

&lt;h3 id=&quot;why-are-we-open-sourcing-the-gem&quot;&gt;Why are we open sourcing the gem?&lt;/h3&gt;

&lt;p&gt;The real question is why not? We found that Signalman seemed to cover a general enough use case that it would be applicable to other teams outside of CustomInk. Since Signalman would be helpful to other teams doing split testing, then it is clear that open sourcing the gem would be beneficial to the community. As a team, we use a lot of open source software, in fact, most of our stack is composed of open source projects. We are heavy consumers of open source so we like to return the favor whenever we can. Open sourcing a project also can provide the benefit of users outside of the organization improving the gem itself, which is an added bonus.&lt;/p&gt;

&lt;p&gt;Stay tuned for future posts leading up to Signalman&amp;#39;s public release that will highlight various details in the process of open sourcing a gem.&lt;/p&gt;

&lt;h3 id=&quot;more-from-this-series&quot;&gt;More from this series&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;/blog/2014/10/20/open-sourcing-a-gem-pt-2/&quot;&gt;Part 2&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 12 Sep 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/09/12/open-sourcing-a-gem-pt-1/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/09/12/open-sourcing-a-gem-pt-1/</guid>
      </item>
    
      <item>
        <title>Building the CustomInk Living Style Guide</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://twitter.com/metaskills&quot;&gt;Ken Collins&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/inLehmans_Terms&quot;&gt;Jonathan Lehman&lt;/a&gt; will be presenting &amp;quot;Like A Ross! - Building The CustomInk.com Living Style Guide&amp;quot; at &lt;a href=&quot;http://sassydc.github.io/&quot;&gt;SassyDC&lt;/a&gt; this Wednesday, September 10th.&lt;/p&gt;

&lt;p&gt;Be sure to register if you plan on attending: &lt;a href=&quot;https://nvite.com/SassyDC/f4a&quot;&gt;https://nvite.com/SassyDC/f4a&lt;/a&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;h4 id=&quot;event-description&quot;&gt;Event description&lt;/h4&gt;

&lt;p&gt;We would like to share our thoughts and process behind CustomInk&amp;#39;s new mobile-first responsive Sass framework. Be prepared for a lively group discussion and bring your a-game of questions as we talk about our process and technical building blocks for our new living style guide.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Enacting Change with Living Style Guides&lt;/li&gt;
&lt;li&gt;Existing Framework or Building New&lt;/li&gt;
&lt;li&gt;Grid &amp;amp; Technology Choices&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;event-update&quot;&gt;Event Update&lt;/h4&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/like-a-ross-8119120f145b0d6bd8d9fbf087c81df45eb37c92a1b9abed35e39fb123ed8e7d.jpg&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; alt=&quot;Jonathan Lehman and Ken Collins presenting Like A Ross! - Building the CustomInk Living Style Guide.&quot; /&gt;
The event was a great success! Big thanks to &lt;a href=&quot;https://twitter.com/mylifeasalllly&quot;&gt;Ally Palanzi&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/xiwcx&quot;&gt;Welch Canavan&lt;/a&gt; for organizing the SassyDC group and allowing us to present and share our experiences. Huge thanks to &lt;a href=&quot;http://www.voxmedia.com&quot;&gt;Vox Media&lt;/a&gt; for hosting the event. Check out the &lt;a href=&quot;https://www.flickr.com/photos/xiwcx/sets/72157647060090380/&quot;&gt;photos of the event&lt;/a&gt; on Flickr!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://speakerdeck.com/metaskills/like-a-ross-building-the-customink-dot-com-living-style-guide&quot; class=&quot;sb-Btn sb-Btn--responsive sb-Btn--primary&quot;&gt;View Slides&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Shout out to those that attended the dinner afterward or live tweeting. It was great to meet you all!&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/heymikeflores&quot;&gt;Mike Flores&lt;/a&gt; with the &lt;a href=&quot;https://twitter.com/heymikeflores/status/509839386792706048&quot;&gt;SUIT vs. BEM&lt;/a&gt; tweet.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/taupecat&quot;&gt;Tracy Rōtton&lt;/a&gt; we wish you the best at &lt;a href=&quot;https://twitter.com/CSSDevConf&quot;&gt;CSSDevConf&lt;/a&gt;. Thanks for the &lt;a href=&quot;https://twitter.com/taupecat/status/509892259920482304&quot;&gt;mention&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://twitter.com/JohnnyReading&quot;&gt;John Reading&lt;/a&gt; for the &lt;a href=&quot;https://twitter.com/JohnnyReading/status/509837477226741760&quot;&gt;TNG References&lt;/a&gt; tweet.&lt;/li&gt;
&lt;li&gt;Lastly both &lt;a href=&quot;https://twitter.com/javierios&quot;&gt;Javier Rios&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/hilliuse&quot;&gt;Hillius Ettinoffe&lt;/a&gt; for the great dinner conversation.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;resources&quot;&gt;Resources&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;&lt;em&gt;Blog Posts&lt;/em&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;/blog/2014/08/26/modular-css-with-suit/&quot;&gt;Modular CSS With SUIT CSS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/blog/2014/09/01/a-new-living-style-guide/&quot;&gt;A New Living Style Guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/blog/2014/09/19/single-class-vs-multi-class-css/&quot;&gt;Single Class vs Multi Class CSS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/blog/2014/09/30/unit-testing-sass-frameworks&quot;&gt;Unit Testing Sass Frameworks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/blog/2014/10/09/understanding-and-using-sass-load-paths/&quot;&gt;Understanding and Using Sass Load Paths&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Presentation Slide Decks&lt;/em&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://speakerdeck.com/metaskills/like-a-ross-building-the-customink-dot-com-living-style-guide&quot;&gt;Like a Ross!&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://slides.com/jonathanlehman/an-adventure-in-style#/&quot;&gt;An Adventure in Style&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Mon, 08 Sep 2014 09:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/09/08/building-the-customink-living-style-guide/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/09/08/building-the-customink-living-style-guide/</guid>
      </item>
    
      <item>
        <title>A New Living Style Guide</title>
        <description>&lt;p&gt;Here at CustomInk we are building the foundation necessary to move forward with creating a new, fully responsive CustomInk experience. Because we have such a large codebase, and customer experience is our #1 priority, we performed exhaustive research and became fully prepared in all departments before we even thought about writing a line of code.&lt;/p&gt;

&lt;p&gt;Our UX team prepared by familiarizing themselves with the popular responsive grid systems and frameworks. They learned how to write the HTML and CSS of a page utilizing these frameworks, a skill they would soon use to mock out our new layouts in HTML and CSS- something never before done by a UX team at CustomInk.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;On the technology side, we researched the many grid systems available to us, along with some popular SASS libraries and CSS naming conventions. Common themes in our research were &lt;strong&gt;simplicity&lt;/strong&gt; and &lt;strong&gt;consistency&lt;/strong&gt;. We were setting the stage for how CustomInk would move forward, and we had to do it well.&lt;/p&gt;

&lt;p&gt;For our grid system we chose to use the &lt;a href=&quot;http://susy.oddbird.net/&quot;&gt;Susy&lt;/a&gt; grid. For those not familiar with the Susy, it is a simple, standalone grid system that integrates smoothly with &lt;a href=&quot;http://breakpoint-sass.com/&quot;&gt;Breakpoint&lt;/a&gt; for powerful media-query controls.&lt;/p&gt;

&lt;p&gt;For our mixin library we wanted just that, a mixin library. We thought about using &lt;a href=&quot;http://compass-style.org/&quot;&gt;Compass&lt;/a&gt; but it was much larger than what we needed. &lt;a href=&quot;http://bourbon.io/&quot;&gt;Bourbon&lt;/a&gt; - a lightweight SASS mixing library - was perfect for our needs.&lt;/p&gt;

&lt;p&gt;Now we had the tools in place to move forward, but we needed to determine how to move forward. What type of naming conventions would we apply to our CSS to produce the simplicity and consistency vital to our implementation? First and foremost, we would need to namespace our styles. Goes without saying, right?&lt;/p&gt;

&lt;p&gt;The next step would be determining a consistent naming convention to apply to our namespaced styles. After all, having consistency in convention would produce greater readability and an orderly structure for our classes. We took a deep-dive into &lt;a href=&quot;http://bem.github.io/bem-method/html/all.en.html&quot;&gt;BEM&lt;/a&gt; and &lt;a href=&quot;https://github.com/suitcss/suit/blob/master/doc/README.md&quot;&gt;SUIT&lt;/a&gt; and ultimately chose to move forward using the SUIT syntax.&lt;/p&gt;

&lt;p&gt;From there we had the tools in place to begin building our new living style guide. This living style guide will be used by the UX team when mocking out new responsive layouts, and of course by our engineers to build our new responsive experience.&lt;/p&gt;
</description>
        <pubDate>Mon, 01 Sep 2014 09:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/09/01/a-new-living-style-guide/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/09/01/a-new-living-style-guide/</guid>
      </item>
    
      <item>
        <title>Dynamic SVGs Using &amp;lt;defs&amp;gt; Elements &amp;amp; JavaScript</title>
        <description>&lt;p&gt;The scalable vector graphics format has a really nifty way to define and reuse objects. It does this by allowing objects or paths to be defined in the &lt;code&gt;&amp;lt;defs&amp;gt;&lt;/code&gt; element and then used one or many times with the &lt;code&gt;&amp;lt;use&amp;gt;&lt;/code&gt; element. It is a great way to keep your SVG&amp;#39;s file size low. Even better, it makes for a great programmatic interface to dynamically compose an image.&lt;/p&gt;

&lt;!-- read more --&gt;

&lt;p&gt;While designing the third iteration of my personal &lt;a href=&quot;http://metaskills.net/&quot;&gt;MetaSkills.net&lt;/a&gt; blog, I decided to carry the retro space theme into the background of the fixed left navigation area. The design called for something like this image below. Besides the planet, it has three distinct types of stars that are scattered all over the place. Each has a different scale and opacity with plans to animate a few.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/svg-planet-stars-08c9b4337e6d15b697fff6d4a6b8fb23cdc840d040f3aa8aed11df307685ec1a.png&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; alt=&quot;MetaSkills.net Planet &amp; Stars SVG Example&quot; /&gt;&lt;/p&gt;

&lt;p&gt;So where to start? We could export a final pre-designed SVG image from any type of vector program – but that would bloat the file size since it would copy and paste each star&amp;#39;s path. It would also make animating distinct stars tricky and require post production edits. Lastly, who has time to randomly scatter stars? Not me! So let&amp;#39;s program up a solution that solves all of this for us. Here is the base SVG structure that we are going to work with.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;svg&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;version=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1.1&quot;&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;width=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;300px&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;height=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;700px&quot;&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;viewBox=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;0 0 300 700&quot;&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;preserveAspectRatio=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;xMidYMax slice&quot;&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;xmlns=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://www.w3.org/2000/svg&quot;&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;xmlns:xlink=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://www.w3.org/1999/xlink&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;defs&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Define star objects here. --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/defs&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;style&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/css&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    .star    { fill: #95a8b1; }
    .burst   { fill: #e4522a; }
    .steeler { fill: #fffbe1; }
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;rect&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;x=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;0&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;y=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;0&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;width=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;100%&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;height=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;100%&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;fill=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#052838&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;g&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;starfield&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Use stars objects here. --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/g&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;script&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/ecmascript&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Dynamically create stars here. --&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/svg&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Our image will have a slender vertical portrait area to match the general proportions of the sidebar. The SVG is setup to preserve the &lt;a href=&quot;http://www.justinmccandless.com/blog/Making+Sense+of+SVG+viewBox&amp;#x27;s+Madness&quot;&gt;aspect ratio&lt;/a&gt; in such a way that allows the bottom planet to always be in view when scaled. We have a &lt;code&gt;&amp;lt;defs&amp;gt;&lt;/code&gt; area where we can add reusable objects, an in-line style sheet for our awesome CSS, and a &lt;code&gt;&amp;lt;g&amp;gt;&lt;/code&gt; starfield element to hold each star. Lastly, a place to write some JavaScript.&lt;/p&gt;

&lt;h3 id=&quot;base-star-objects&quot;&gt;Base Star Objects&lt;/h3&gt;

&lt;p&gt;Adding these to our SVG is really easy. I started by creating a canvas in my favorite vector program, &lt;a href=&quot;http://bohemiancoding.com/sketch/&quot;&gt;Sketch&lt;/a&gt;. We want to make sure our exported paths start at 0,0 position and are are generally the size you expect to use them. This will help you later when translating these paths to different positions.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/content/svg-our-awesome-sketch-c556fd04159b8596f809ad503a9657fcbdf4331de6a36ca90ea44f9e01cc8a41.png&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; alt=&quot;Setting up our base stars in the Sketch v3 application.&quot; /&gt;&lt;/p&gt;

&lt;p&gt;I exported each star type as an SVG and then copied the path into the &lt;code&gt;&amp;lt;defs&amp;gt;&lt;/code&gt; area of our template above. When you do this make sure that each path has its own unique id. Also, you may want to optimize your paths. Many programs export 6 or more decimal points for a path&amp;#39;s data. I recommend running them through some sort of &lt;a href=&quot;http://petercollingridge.appspot.com/svg_optimiser&quot;&gt;SVG optimiser&lt;/a&gt; or tweaking your export settings if your art program has them. Now we have our reusable path objects, see below. Examples have truncated &lt;code&gt;d&lt;/code&gt; attributes for brevity.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;defs&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;path&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;star&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;d=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;M2.395,0.409 C2.026,0.973 ... Z&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/path&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;path&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;burst&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;d=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;M6.092,4.816 L1.661,3.4 ... Z&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/path&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;path&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;steeler&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;d=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;M3.231,6.211 L0,5.830 ... Z&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/path&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/defs&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;using-defined-objects&quot;&gt;Using Defined Objects&lt;/h3&gt;

&lt;p&gt;If we were to view our SVG now, it would be pretty boring and contain only the colored background rect. So lets add some stars by using the defined objects above. We do this with the &lt;code&gt;&amp;lt;use&amp;gt;&lt;/code&gt; element by setting each &lt;code&gt;xlink:href&lt;/code&gt; to the id of that object we want to target. To move and size each star, we use the SVG &lt;code&gt;transform&lt;/code&gt; attribute to both translate and scale each star. Adding these elements right before the JavaScript tag will create the following image.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;use&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xlink:href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#star&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;transform=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;translate(10,10) scale(1.0)&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;star&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;use&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xlink:href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#burst&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;transform=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;translate(30,20) scale(1.0)&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;burst&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;use&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xlink:href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#steeler&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;transform=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;translate(60,10) scale(1.5)&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;steeler&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/assets/content/svg-planet-stars-v1-ece9734ba2b6813891665e3c67070f266e0f58cf72003341903e551da9fb2020.png&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; alt=&quot;MetaSkills.net Planet &amp; Stars SVG Example&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Still kind of boring... and who has time to stochastically place several dozen stars around the canvas? Time for some JavaScript automation.&lt;/p&gt;

&lt;h3 id=&quot;svgs-javascript&quot;&gt;SVGs &amp;amp; JavaScript&lt;/h3&gt;

&lt;p&gt;Yes! SVGs are distinct documents that can have their own CSS and JavaScript. But in order for this JavaScript to execute, we must embed it into the parent HTML document. Linking to an SVG via an &lt;code&gt;&amp;lt;img&amp;gt;&lt;/code&gt; tag will not allow this due to security concerns. We can get around that issue by using an &lt;code&gt;&amp;lt;object&amp;gt;&lt;/code&gt; tag instead.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;object&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;data=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;our-awesome.svg&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;image/svg+xml&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/object&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now that our SVG&amp;#39;s JavaScript will execute, how do we go about adding &lt;code&gt;&amp;lt;use&amp;gt;&lt;/code&gt; elements to our SVG&amp;#39;s document? Fortunately the techniques are very similar to how you would do this with vanilla JavaScript and the HTML DOM. The minor difference is that we have to use two namespaces. One for creating elements and the second for adding the xlink attribute. I recommend we start our JavaScript off with these namespaces as vars. We also want to create variables for our canvas width and height. Finally, we want a handle to our starfield group element.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;xmlns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;http://www.w3.org/2000/svg&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;xlinkns&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;http://www.w3.org/1999/xlink&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;width&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;height&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;700&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;starfield&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;starfield&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;random-javascript-helpers&quot;&gt;Random JavaScript Helpers&lt;/h3&gt;

&lt;p&gt;Before we just start adding some stars, we need some random functions to help us position and scale our stars. I like to start low level and build up. So here is our random function that takes a min and max value.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// 229.5510318595916&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// -22.134714818093926&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Building on that, we want to made a random position function to help place each star in our field. This helper only needs the &lt;code&gt;max&lt;/code&gt; argument which will be either our &lt;code&gt;width&lt;/code&gt; or &lt;code&gt;height&lt;/code&gt;. Notice too how it blankets our canvas area by setting the minimal and maximum to -50 and +50. This will ensure each star could be placed slightly off canvas and keeping them from appearing clustered toward the middle. We also floor the return value, no decimals are needed for position.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomPos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;randomBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here is our random scale function which takes a &lt;code&gt;min&lt;/code&gt; and &lt;code&gt;max&lt;/code&gt; threshold. This will allow us to adjust the weight of each star type in the cluster and possibly adjust the exported size differences from our image program into the &lt;code&gt;&amp;lt;defs&amp;gt;&lt;/code&gt; area. This function returns a two decimal float value.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomScale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;parseFloat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;randomBase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toFixed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomScale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 0.6&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomScale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 0.85&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally, here is a helper function that builds on top of &lt;code&gt;randomScale&lt;/code&gt;. It takes a star &lt;code&gt;name&lt;/code&gt; and returns the proper value.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomScaleNamed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;star&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomScale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;burst&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomScale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;steeler&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomScale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;adding-use-elements&quot;&gt;Adding Use Elements&lt;/h3&gt;

&lt;p&gt;Now that we have the boring random functions out of the way, time to create our star-agnostic &lt;code&gt;addElement&lt;/code&gt; function. This will create a new &lt;code&gt;&amp;lt;g&amp;gt;&lt;/code&gt; element for each star&amp;#39;s &lt;code&gt;&amp;lt;use&amp;gt;&lt;/code&gt; element. The group is for placement and size, the use is for twinkle and shine animations.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;g&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElementNS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;xmlns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElementNS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;xmlns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;t&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;translate(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomPos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomPos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;
            &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;scale(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;randomScaleNamed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setAttributeNS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setAttributeNS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;xlinkns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;xlink:href&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setAttributeNS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;starfield&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This function ends by placing the newly created element within the starfield. For example, calling &lt;code&gt;addElement(&amp;#39;burst&amp;#39;)&lt;/code&gt; once would create this.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-xml&quot; data-lang=&quot;xml&quot;&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;g&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;starfield&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;g&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;transform=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;translate(58,151) scale(0.9)&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
   &lt;span class=&quot;nt&quot;&gt;&amp;lt;use&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xlink:href=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;#burst&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;burst&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;/g&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/g&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To add a bunch of stars!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addElements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;addElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;addElements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;steeler&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;addElements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;burst&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;addElements&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;star&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;going-further&quot;&gt;Going Further&lt;/h3&gt;

&lt;p&gt;Thanks for reading this far! If you are interested in how I handled star animations using Bourbon &amp;amp; Sass, check out &lt;a href=&quot;https://gist.github.com/metaskills/f3be83a2cabf9e1061fc&quot;&gt;this gist&lt;/a&gt; on GitHub for my source code. It also shows how I animated the planet to spin at the bottom of the image and cover the background stars.&lt;/p&gt;

&lt;p&gt;I hope you have as much fun as I have with animating SVGs using JavaScript and Sass! See a full working example on &lt;a href=&quot;http://metaskills.net/2014/08/29/dynamic-svgs-using-defs-elements-and-javascript&quot;&gt;my blog&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;resources&quot;&gt;Resources&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/SVG/Element/defs&quot;&gt;SVG &lt;code&gt;&amp;lt;defs&amp;gt;&lt;/code&gt; documentation on MDN&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/SVG/Element/use&quot;&gt;SVG &lt;code&gt;&amp;lt;use&amp;gt;&lt;/code&gt; documentation on MDN&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.justinmccandless.com/blog/Making+Sense+of+SVG+viewBox&amp;#x27;s+Madness&quot;&gt;Making Sense of SVG viewBox&amp;#39;s Madness&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://bohemiancoding.com/sketch/&quot;&gt;Sketch v3 - Lightweight Design Program&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://petercollingridge.appspot.com/svg_optimiser&quot;&gt;SVG Optimiser Tools &amp;amp; Experiments&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Fri, 29 Aug 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/08/29/dynamic-svgs-using-defs-elements-and-javascript/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/08/29/dynamic-svgs-using-defs-elements-and-javascript/</guid>
      </item>
    
      <item>
        <title>Modular CSS with SUIT CSS</title>
        <description>&lt;p&gt;Structuring CSS is hard. I have worked on many projects where the CSS was just an afterthought, a hack to get the page to look a particular way. With the increasing interest in frontend tools and development, these days are behind us.&lt;/p&gt;

&lt;p&gt;Ask yourself the question, &amp;quot;how and why do we apply structure to the code we write?&amp;quot; Now you might wonder, why don&amp;#39;t we apply these same rules and considerations to the CSS (and Sass) that we write? There is no reason to skimp on our style architecture. One way we can bring clarity and structure is by writing modular CSS with the &lt;a href=&quot;http://suitcss.github.io&quot;&gt;SUIT CSS&lt;/a&gt; convention.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;suit-css-introduction&quot;&gt;SUIT CSS Introduction&lt;/h3&gt;

&lt;p&gt;Let&amp;#39;s dive right into it. The basic structure of SUIT is as follows:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;nc&quot;&gt;.namespace-ComponentName-descendantName--modifierName.is-stateName&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;.u-utilityName&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It might look weird at first as it is different than the CSS you have written in the past, but bear with me, it&amp;#39;s purpose will become clear. This is not necessarily what each of your class declarations will look like, but is meant to serve as a guide and reference to writing semantic SUIT CSS. Each declaration you make will probably contain parts of the structure above.&lt;/p&gt;

&lt;h4 id=&quot;breaking-it-down&quot;&gt;Breaking it down&lt;/h4&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;namespace&lt;/strong&gt;

&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;namespace&lt;/code&gt; is optional and allows you to write CSS that will not conflict with any other libraries. This is written in camel case.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ComponentName&lt;/strong&gt;

&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;ComponentName&lt;/code&gt; is your top level component such as &lt;code&gt;Form&lt;/code&gt;. This is written in pascal case.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;descendantName&lt;/strong&gt;

&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;descendantName&lt;/code&gt; is a part of your component that is applying styles on the components behalf. Your &lt;code&gt;Form&lt;/code&gt; component might have a &lt;code&gt;group&lt;/code&gt; descendant, &lt;code&gt;Form-group&lt;/code&gt;. This is written in camel case and follows the base component with a &lt;code&gt;-&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;modifierName&lt;/strong&gt;

&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;modifierName&lt;/code&gt; is a presentation class that modifies the base class in some way. Ex: &lt;code&gt;Form--small&lt;/code&gt;, &lt;code&gt;Form--large&lt;/code&gt;, &lt;code&gt;Btn--primary&lt;/code&gt;, etc. This is written in camel case and follows the base component with a &lt;code&gt;--&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;is-stateName&lt;/strong&gt;

&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;is-stateName&lt;/code&gt; represents the current state of the element (if any). Ex: &lt;code&gt;is-disabled&lt;/code&gt;, &lt;code&gt;is-active&lt;/code&gt;, etc. This is written in camel case and is unlike the previous examples as it is a separate class added to an element.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;u-utilityName&lt;/strong&gt;

&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;u-utilityName&lt;/code&gt; is the odd one. The utility class does not apply to a single component, but is general enough in nature that it can add styling to just about any component. Ex: &lt;code&gt;u-inlineBlock&lt;/code&gt;, &lt;code&gt;u-floatRight&lt;/code&gt;, &lt;code&gt;u-clearfix&lt;/code&gt;, etc. &lt;a href=&quot;http://www.basscss.com/&quot;&gt;BASSCSS&lt;/a&gt; has many good example utility classes (though not written in a strict SUIT CSS syntax).&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;a-practical-example&quot;&gt;A Practical Example&lt;/h3&gt;

&lt;p&gt;Let&amp;#39;s get some SUIT under our belts with an actual example. We will build out the &amp;quot;awesome box&amp;quot; component.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sass&quot; data-lang=&quot;sass&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// sass&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.my-AwesomeBox&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;solid&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;black&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1rem&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;250px&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// .my-AwesomeBox--small&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--small&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100px&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// .my-AwesomeBox-title&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-title&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1rem&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// .my-AwesomeBox--large&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;--large&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nl&quot;&gt;font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2rem&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// .my-AwesomeBox.is-selected&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;.is-selected&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;.my-u-center&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;text-align&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;center&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;c&quot;&gt;/* generated css */&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.my-AwesomeBox&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1px&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;solid&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;black&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;250px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.my-AwesomeBox--small&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100px&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.my-AwesomeBox-title&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;white&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.my-AwesomeBox-title--large&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2rem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;.my-AwesomeBox.is-selected&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;.my-u-center&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;text-align&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;center&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://sassmeister.com/gist/a166888f44271c291c80&quot; class=&quot;sb-Btn sb-Btn--secondary sb-Btn--responsive&quot;&gt;Play with this example in Sassmeister&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;why&quot;&gt;Why?&lt;/h3&gt;

&lt;p&gt;While it might feel strange at first glance, give SUIT a shot (or at least another modular CSS variant like &lt;a href=&quot;http://csswizardry.com/2013/01/mindbemding-getting-your-head-round-bem-syntax/&quot;&gt;BEM&lt;/a&gt;). Writing CSS/Sass in this manner provides a number of great benefits:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Consistency and structure

&lt;ul&gt;
&lt;li&gt;This is much better than a hodgepodge of arbitrary CSS randomly strung about with no semantic meaning&lt;/li&gt;
&lt;li&gt;Anyone can enter the project and easily understand and contribute&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Separation of concerns&lt;/li&gt;
&lt;li&gt;Promotes reuse of code by creating the building blocks for the site with components&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://nicolasgallagher.com/about-html-semantics-front-end-architecture/&quot;&gt;Semantic syntax&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Composable and extendable CSS

&lt;ul&gt;
&lt;li&gt;Modularity makes it easy to extend components and compose components to get the sum of their parts&lt;/li&gt;
&lt;li&gt;This is particularly useful for building style frameworks as it allows users of the framework to easily make it their own without fighting the framework&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr&gt;

&lt;p&gt;&lt;sub&gt;Reposted from &lt;a href=&quot;http://inlehmansterms.net/2014/08/25/modular-css-with-suitcss/&quot; rel=&quot;canonical&quot;&gt;Jonathan&amp;#39;s blog- In Lehman&amp;#39;s Terms&lt;/a&gt;.&lt;/sub&gt;&lt;/p&gt;
</description>
        <pubDate>Tue, 26 Aug 2014 00:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/08/26/modular-css-with-suit/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/08/26/modular-css-with-suit/</guid>
      </item>
    
      <item>
        <title>Welcome John Dyer!</title>
        <description>&lt;p&gt;&lt;img src=/assets/content/john-dyer-first-deploy-f45c9bf89c3960034590cda4d06aa7ad225e0bf82864c2d3100e8cab7c85bef2.jpg alt=&quot;John Dyer&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;CustomInk technology is proud to announce that &lt;a href=&quot;https://github.com/lbrapid&quot;&gt;John Dyer&lt;/a&gt; is our newest Inker! Following the new hire tradition, John pushed his first deploy within a couple days of arrival.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;John joins us from &lt;a href=&quot;http://spreecommerce.com&quot;&gt;Spree Commerce&lt;/a&gt;, where he worked as a core contributer to their open source e-commerce platform.&lt;/p&gt;

&lt;p&gt;We just moved our oldest, and biggest application fully onto the asset pipeline. And, for his first deploy, John dove into the deep end and helped with some much needed cleanup. He&amp;#39;ll be looking into some test suite upgrades next. Fixing tests, he&amp;#39;ll know more about the application in no time.&lt;/p&gt;

&lt;p&gt;Welcome to the team John!&lt;/p&gt;
</description>
        <pubDate>Fri, 22 Aug 2014 15:30:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/08/22/welcome-john-dyer/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/08/22/welcome-john-dyer/</guid>
      </item>
    
      <item>
        <title>Tapas Time!</title>
        <description>&lt;p&gt;The engineering team at CustomInk is always looking to learn new things.  We&amp;#39;ve come to realize that the density of the information is not always the most important thing.  Rather, exploring a single idea in depth can be a lot of fun.&lt;/p&gt;

&lt;p&gt;Avdi Grimm&amp;#39;s &lt;a href=&quot;http://www.rubytapas.com&quot;&gt;Ruby Tapas&lt;/a&gt; has provided us with a really simple way to execute on this idea.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;We started by purchasing a (very affordable) site license so that every engineer could easily access the content. We thought that it would be great to listen to these little nuggets of information on our own time to level up our skills.  It was interesting to see how quickly found ourselves wanting to chat about an episode we had recently reviewed, only to find that people had listened to a different episode all together.&lt;/p&gt;

&lt;p&gt;Our solution was simple:  Start at episode 1 and have a regular &amp;quot;Tapas Talk&amp;quot; after our daily standup to explore the topic.  The Tapas Talk is optional, and since each episode is only a few minutes, it&amp;#39;s very easy to catch up if you get behind.&lt;/p&gt;

&lt;p&gt;We find ourselves regularly gathering around an editor to explore a concept and are often suprised at what we learn.&lt;/p&gt;

&lt;p&gt;A happy team is a team that learns together.&lt;/p&gt;
</description>
        <pubDate>Fri, 15 Aug 2014 15:24:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/08/15/tapas-time/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/08/15/tapas-time/</guid>
      </item>
    
      <item>
        <title>Learning Ruby on Rails</title>
        <description>&lt;p&gt;Learning a new programming language is not easy, and learning a new framework on top of that is definitely not easy, unless you have the right resources and mentors.&lt;/p&gt;

&lt;p&gt;Here at CustomInk they have provided me with an environment that facilitates learning and produces results. This has made my journey of learning ruby on rails substantially easier. On my first day it seemed that the team had planned out my journey very well. I began my introduction to both the ruby language and the rails framework through an online educational program provided by Envy Labs, called Code School.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Code School, continues to provide me with a high level knowledge of both ruby and rails. Envy labs accomplishes this through online courses that push you to apply your knowledge on exercises. These exercises allow you comprehend how such concepts are used in real world programming challenges.&lt;/p&gt;

&lt;p&gt;Overall I am fairly happy with the experience that Envy Labs had provided. However, I personally felt that just using Code School would not be beneficial to my success. Therefore, I utilized other tools and resources to speed up my learning process. Below I will mention a couple of other resources that I have pushed onto the learning stack.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://rubymonk.com/&quot;&gt;Ruby Monk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://guides.rubyonrails.org/index.html&quot;&gt;Rails Guides&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://pragprog.com/book/rails4/agile-web-development-with-rails-4&quot;&gt;Agile Web Development with Rails 4&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These additional resources have allowed me to fill in the gaps, and get a better depth level knowledge of both ruby and rails. It seemed that it would be quite easy to dive into rails without having a good grasp of the framework, since rails generates so much code for you. However, I really did not want to proceed this way. Instead, I wanted to obtain a depth level of knowledge, due to the complexity of CustomInk&amp;#39;s applications.&lt;/p&gt;

&lt;p&gt;Is my method of learning rails correct? No. People have different learning styles; therefore, no approach is perfect. You must tailor the learning process to meet your needs and ensure your success. In my case, using code school, extra resources, analyzing well written code, and building simple rails applications has allowed me to learn and apply my knowledge. In no form am I a solid Ruby on Rails developer. However, using these tools I can make great efforts to become better as I continue my journey.&lt;/p&gt;
</description>
        <pubDate>Tue, 12 Aug 2014 11:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/08/12/learning-ruby-on-rails/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/08/12/learning-ruby-on-rails/</guid>
      </item>
    
      <item>
        <title>0-60 in ten weeks at CustomInk’s eCommerce Technology Department</title>
        <description>&lt;p&gt;Going from 0 to 60 miles per hour in ten weeks is impossibly slow for any sports car, but for a summer internship - starting as a novice developer just learning the ropes of CustomInk Tech, to ending the summer developing alongside full-time engineers has been a fast and exciting ride.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/summer_at_customink.png&quot; alt=&quot;Summer at CustomInk&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;At CustomInk, the bar is set extremely high for being a developer in the eCommerce Technology department as well as being a resourceful mentor. Most of what has made my summer both productive, efficient, and awesome was the willingness of the full-time engineers to help me get up to speed on working with real world problems that CustomInk Tech solves each day. From my first day at the office, I felt a sense that I wasn’t &amp;quot;just an intern” but that the people on CustomInk’s eCommerce Tech team cared that I was there for the summer, recognized I could help benefit the team, and helped enable me to do so.&lt;/p&gt;

&lt;p&gt;From working alongside UX designers, learning important DevOps practices, taking care of routine site maintenance, strategizing for large data migrations, refactoring sections of an extensive test suite, developing the code behind new business initiatives, and continually learning and testing my development knowledge and practices are just a few facets of CustomInk Tech I had the privilege to experience over the course of my 10 weeks here.&lt;/p&gt;

&lt;p&gt;To any upperclass college students looking for a summer internship or early career position in a fast-paced and collaborative software engineering environment, I highly recommend researching and applying for the opportunities with CustomInk’s eCommerce Technology department. Some important skills and familiar tools to have would include; a growing proficiency in Ruby, JavaScript, and Git, experience with the development of a Rails application, work well in a collaborative environment,  understanding proper data modeling practices and techniques, being good friends with the command line, and being able to communicate and understand complex and sometime novel technical problems and ideas with fellow engineers and non-engineers.&lt;/p&gt;

&lt;p&gt;Overall, I could not have asked for a more challenging, educating, and enjoyable summer internship experience. I feel that this experience has left me well prepared  for the next steps of my career after my senior year at Carnegie Mellon. A huge thanks to everyone on the team who has made this an amazing summer!&lt;/p&gt;
</description>
        <pubDate>Fri, 25 Jul 2014 11:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/07/25/anthcor-summer-internship/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/07/25/anthcor-summer-internship/</guid>
      </item>
    
      <item>
        <title>Welcome Hunter Madison!</title>
        <description>&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/hunter_madison.jpg&quot; alt=&quot;Hunter Madison&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Hunter joins CustomInk for the summer as a development intern on the DangerSquad!&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;He recently finished upgrading our Clipart application from Ruby 1.8.7 (it&amp;#39;s a
classic!) to 1.9.3. This is a mission-critical app that gets plenty of
traffic, so he worked closely with our webops group to roll this out to production
without downtime or disruption (just in time to upgrade to Ruby 2.1).&lt;/p&gt;

&lt;p&gt;Data grows ever faster and knowing exactly where and how fast it grows has
become an important metric to watch.  Hunter is currently working on a utility to monitor the growth of data in CustomInk applications.&lt;/p&gt;

&lt;p&gt;Welcome to the team Hunter!&lt;/p&gt;
</description>
        <pubDate>Tue, 08 Jul 2014 07:18:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/07/08/welcome-hunter-madison/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/07/08/welcome-hunter-madison/</guid>
      </item>
    
      <item>
        <title>Build Better Teams with Dashing Dashboards</title>
        <description>&lt;p&gt;Around here, we love our dashboards. They are the modern water cooler gathering spot. Inkers gather around
and watch the latest T-Shirt designs and track sales across the country. We built the first dashboard as
a spare time experiment, but they quickly grew into an important part of our culture.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Our engineers &lt;a href=&quot;http://twitter.com/cmar&quot;&gt;Chris Mar&lt;/a&gt; and &lt;a href=&quot;http://twitter.com/karledurante&quot;&gt;Karle Durante&lt;/a&gt;
demonstrated at &lt;a href=&quot;http://www.rubynation.org/&quot;&gt;Ruby Nation 2014&lt;/a&gt; just how easy it is to
create and deploy your own dashboards. They showed how to identify key metrics for your project,
aggregate the data, and share it with your team.&lt;/p&gt;

&lt;script async class=&quot;speakerdeck-embed&quot; data-id=&quot;0772bb20d2d901311e317a88ebacabb8&quot;
data-ratio=&quot;1.33333333333333&quot; src=&quot;//speakerdeck.com/assets/embed.js&quot;&gt;&lt;/script&gt;
</description>
        <pubDate>Tue, 17 Jun 2014 07:18:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/06/17/build-better-teams-with-dashing-dashboards/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/06/17/build-better-teams-with-dashing-dashboards/</guid>
      </item>
    
      <item>
        <title>Welcome Anthony Corletti!</title>
        <description>&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/anthony_corletti.png&quot; alt=&quot;Summer at CustomInk&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;As a rising senior at Carnegie Mellon Unviersity, Anthony joins CustomInk Tech for the summer as a development intern in the Tako Stand!&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Welcome to the team Anthony!&lt;/p&gt;
</description>
        <pubDate>Mon, 19 May 2014 07:18:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2014/05/19/welcome-anthony-corletti/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2014/05/19/welcome-anthony-corletti/</guid>
      </item>
    
      <item>
        <title>Instrumenting Your Code With ActiveSupport Notifications</title>
        <description>&lt;p&gt;&lt;img src=&quot;https://f.cloud.github.com/assets/2381/1786122/793bf63a-68ef-11e3-8bfc-bd1959c4730b.jpg&quot; alt=&quot;Moving past the supernatural ability to garner information from the log!&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;
Have you ever wondered how tools like New Relic are able to gain valuable metrics to your Rails application&amp;#39;s internals? Or maybe you are interested in learning how to write your own libraries and gems so they can be instrumented using those same techniques? Once again the answer is to look deep into the Rails source code – and the answer is &lt;a href=&quot;http://apidock.com/rails/ActiveSupport/Notifications&quot;&gt;&lt;code&gt;ActiveSupport::Notifications&lt;/code&gt;&lt;/a&gt;. A simple and powerful instrumentation API for Ruby available in Rails v3.0 and upward.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Today I want to share a working example of how you might use ActiveSupport::Notifications. Instead of presenting some contrived code, I thought it would be fun to &lt;a href=&quot;http://vimeo.com/17420638#t=27m27s&quot;&gt;freedom-patch&lt;/a&gt; a popular gem so that we can garner supernatural metrics that would have otherwise been lost or hidden deep in our log. For this exercise I have chosen the &lt;a href=&quot;https://github.com/nulayer/subexec&quot;&gt;Subexec&lt;/a&gt; gem. Subexec is a simple library that spawns an external command with an optional timeout parameter. It is used by other gems like &lt;a href=&quot;https://github.com/minimagick/minimagick&quot;&gt;MiniMagick&lt;/a&gt; – a popular minimal replacement for RMagick.&lt;/p&gt;

&lt;h2 id=&quot;building-subexec-notifications&quot;&gt;Building Subexec::Notifications&lt;/h2&gt;

&lt;p&gt;Our goal will be to build a new gem called subexec-notifications that instruments all commands run by the Subexec library. Once completed, third-party subscribers would be able collect these metrics thereby opening up developer/operational insights into how long certain commands were taking and on which server(s).&lt;/p&gt;

&lt;p&gt;Lucky for us, the Subexec gem has one interface, the &lt;code&gt;Subexec#run!&lt;/code&gt; method. So our work is going to be straight forward. All we have to do is &lt;a href=&quot;http://erniemiller.org/2011/02/03/when-to-use-alias_method_chain/&quot;&gt;alias method chain&lt;/a&gt; that instance method and wrap it with some instrumentation. Assuming you are up to speed on this practice, here is our new implementation.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run_with_notifications!&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;sub: &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;hostname: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Socket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;gethostname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;ActiveSupport&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Notifications&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instrument&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;subexec.run&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;run_without_notifications!&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This small snippet of code exemplifies how simple it is to instrument our code. The Notifications instrument class method takes two arguments, a string for the name and an optional payload hash. The name will be used by subscribers and the payload hash can contain anything you want.&lt;/p&gt;

&lt;p&gt;Since the Subexec instance has tons of valuable information like the commands output, process id, exit status, and the command string itself - I decided to include it with our payload. The host name is provided with the payload to help us aggregate or subdivide our metrics for each server.&lt;/p&gt;

&lt;p&gt;Believe it or not, that pretty much wraps up all that is needed for our new gem&amp;#39;s code. Everything else like tests and gem structure are orthogonal to our learning today. But please, browse the entire &lt;a href=&quot;https://github.com/customink/subexec-notifications&quot;&gt;subexec-notifications&lt;/a&gt; gem if you are interested in how it is put together.&lt;/p&gt;

&lt;h2 id=&quot;choosing-a-metrics-service&quot;&gt;Choosing A Metrics Service&lt;/h2&gt;

&lt;p&gt;So now we have a way to instrument all of our system commands, but how do we collect and view that data? To be honest, your options are incredibly numerous at this point. While learning ActiveSupport::Notifications myself, these two services kept appearing.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.datadoghq.com&quot;&gt;Datadog - Monitoring Service&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://metrics.librato.com&quot;&gt;Librato - Highly Scalable Metrics, Monitoring &amp;amp; Alerts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;My examples below will use Librato since I found their service extremely simple to use. I was able to quickly get metrics submitted to them and viewable via their dashboard gauges. Librato also has a very nice presence on Github and some impressive tools for Ruby. Datadog is no slouch in any of these areas either. So please use what best fits your own needs.&lt;/p&gt;

&lt;p&gt;IMPORTANT: The example Rails application code that follows makes direct use of the &lt;a href=&quot;https://github.com/librato/librato-metrics&quot;&gt;librato-metrics&lt;/a&gt; gem. This means that submissions will happen synchronously while your application is running. You would never do this in your Rails application! If you choose to use Librato, please use the &lt;a href=&quot;https://github.com/librato/librato-rails&quot;&gt;librato-rails&lt;/a&gt; gem instead. Metrics are then delivered asynchronously behind the scenes so they won&amp;#39;t affect the performance of your requests. Other possibilities would be to use background jobs or some other worker message queue.&lt;/p&gt;

&lt;h2 id=&quot;subscribing-to-events&quot;&gt;Subscribing To Events&lt;/h2&gt;

&lt;p&gt;Assuming we have a Rails application that makes use of MiniMagick, Subexec or both, all we have to do now is bundle up our new notification gem along with librato-metrics.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# In Gemfile&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'subexec-notifications'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'librato-metrics'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we need to subscribe to the &lt;code&gt;subexec.run&lt;/code&gt; events that we instrumented in the subexec-notifications gem. For a Rails application, this is best done in an initializer named after the gem.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# In config/initializers/subexec_notifications.rb&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;ActiveSupport&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Notifications&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subscribe&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'subexec.run'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Subscribers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;SubexecLibrato&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;publishing-metrics&quot;&gt;Publishing Metrics&lt;/h2&gt;

&lt;p&gt;As you can see in the code above, subscribing to an event will yield an array of arguments. Technically, these will be the name of the event, a few timestamps, a unique id, and the payload. Because dealing with individual arguments is not very object-oriented, I always recommend creating an event object using the &lt;code&gt;ActiveSupport::Notifications::Event&lt;/code&gt; class. It consumes these arguments and gives you a clean interface to the &lt;code&gt;duration&lt;/code&gt; of the event, &lt;code&gt;payload&lt;/code&gt;, and more.&lt;/p&gt;

&lt;p&gt;To accomplish this in one place for our publishing code, I created a simple base class for all our subscribers to inherit from. This base class creates our &lt;code&gt;event&lt;/code&gt; object as well as a &lt;code&gt;process&lt;/code&gt; method that subclasses must implement.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# In app/models/subscribers/base.rb&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Subscribers&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Base&lt;/span&gt;

    &lt;span class=&quot;nb&quot;&gt;attr_reader&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:event&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;vi&quot;&gt;@event&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveSupport&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Notifications&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;process&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;process&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;NotImplementedError&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now to the fun part, sending some metrics to Librato. Below is the full implementation of our &lt;code&gt;SubexecLibrato&lt;/code&gt; event consumer. This creates two different types of metrics. One for each command/binary that was run and the other for the host the commands are run on. Each of these metrics will allow us to build some interesting gauges. The Librato site has a great developer section titled &lt;a href=&quot;http://dev.librato.com/v1/metrics&quot;&gt;What Are Metrics&lt;/a&gt; that can guide you on what type of data you may want to submit.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# In app/models/subscribers/subexec_librato.rb&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Subscribers&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SubexecLibrato&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;process&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;sub&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:sub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;dur&lt;/span&gt;   &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;duration&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;first&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:hostname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;current&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;Librato&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Metrics&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;submit&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'subexec.hosts'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;measure_time: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;value: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;source: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;Librato&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Metrics&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;submit&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'subexec.types'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;measure_time: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;value: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dur&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;source: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;viewing-metrics&quot;&gt;Viewing Metrics&lt;/h2&gt;

&lt;p&gt;Here are what each of these metrics look like in Librato. To generate some commands, I wrote a small tests case that did some random MiniMagick commands along with a few &lt;code&gt;echo&lt;/code&gt; and &lt;code&gt;uptime&lt;/code&gt; commands. All of these ran on my local machine.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://f.cloud.github.com/assets/2381/1786123/794fa874-68ef-11e3-896c-7d1ff0c64fa0.png&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://f.cloud.github.com/assets/2381/1786124/79513810-68ef-11e3-915c-3278d1394f8d.png&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;in-closing&quot;&gt;In Closing&lt;/h2&gt;

&lt;p&gt;Hopefully these simple examples we built will help get you excited both about instrumenting your application as well as collecting and viewing those metrics. If you are hungry for more, check out the links in the resources below. You can even dig deep into the Rails source to see where and how it uses ActiveSupport::Notifications. Thanks!&lt;/p&gt;

&lt;h2 id=&quot;other-resources&quot;&gt;Other Resources&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://apidock.com/rails/ActiveSupport/Notifications&quot;&gt;APIdock ActiveSupport::Notifications&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://speakerdeck.com/nextmat/digging-deep-with-activesupportnotifications&quot;&gt;Digging Deep with ActiveSupport::Notifications&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/customink/subexec-notifications&quot;&gt;Final Subexec::Notifications Gem&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.datadoghq.com&quot;&gt;Datadog - Monitoring Service&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/DataDog&quot;&gt;Datadog - On Github&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://metrics.librato.com&quot;&gt;Librato - Highly Scalable Metrics, Monitoring &amp;amp; Alerts&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/librato&quot;&gt;Librato - On Github&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Thu, 19 Dec 2013 13:36:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2013/12/19/instrumenting-your-code-with-activesupport-notifications/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2013/12/19/instrumenting-your-code-with-activesupport-notifications/</guid>
      </item>
    
      <item>
        <title>Welcome Michael Peteuil!</title>
        <description>&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/welcome_michael_peteuil.jpg&quot; alt=&quot;Michael Peteuil&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Michael has joined CustomInk and is a member of the Wildcards Fireteam. He&amp;#39;s been focusing on our new text generation service. And will be helping us with a big upgrade on our main Rails project.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Welcome to the team Michael!&lt;/p&gt;
</description>
        <pubDate>Sun, 01 Dec 2013 07:18:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2013/12/01/welcome-michael-peteuil/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2013/12/01/welcome-michael-peteuil/</guid>
      </item>
    
      <item>
        <title>Upper Lipsters 2013</title>
        <description>&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/upperlipsters.jpg&quot; alt=&quot;upperlipsters&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Our hipster engineers donated their upper lips to change the face of men’s health. They formed
the &lt;a href=&quot;http://moteam.co/lipsters&quot;&gt;Upper Lipsters&lt;/a&gt; and raised $4,202 to support men&amp;#39;s health
awareness.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;They sold these &lt;a href=&quot;https://www.booster.com/lipsters2013&quot;&gt;sweet v-neck shirts&lt;/a&gt; using CustomInk&amp;#39;s Booster
campaign platform. And even received support from the &lt;a href=&quot;https://www.booster.com/lipstersmosistas2013&quot;&gt;Mo&amp;#39; Sistas&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The culmination of weeks of growing is the photo shoot in our professional studio. Followed by the soothing
relief of a clean shave, the heartfelt joy of charity and the planning for next years `stache.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/2013-12-02_movember_portraits.jpg&quot; alt=&quot;upperlipsters&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/2013-12-02_movember_portraits121.jpg&quot; alt=&quot;upperlipsters&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;
&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/2013-12-02_movember_portraits158.jpg&quot; alt=&quot;upperlipsters&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Sat, 30 Nov 2013 13:36:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2013/11/30/upper-lipsters/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2013/11/30/upper-lipsters/</guid>
      </item>
    
      <item>
        <title>Welcome Jonathan Lehman!</title>
        <description>&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/jonathan_lehman.jpg&quot; alt=&quot;Jonathan Lehman&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Jonathan joins CustomInk from &lt;a href=&quot;http://www.wm.edu/&quot;&gt;William &amp;amp; Mary&lt;/a&gt; where he  studied Computer Science powered by bread ends and house dressing at the local &lt;a href=&quot;http://www.cheeseshopwilliamsburg.com/&quot;&gt;Cheese Shop&lt;/a&gt;. He joins the Ironborn Industries fireteam.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;He will be working on &lt;a href=&quot;http://booster.com&quot;&gt;Booster&lt;/a&gt; - the best way to raise money and awareness for your cause, passion
or project.&lt;/p&gt;

&lt;p&gt;Welcome to the team Jonathan!&lt;/p&gt;
</description>
        <pubDate>Thu, 31 Oct 2013 13:36:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2013/10/31/welcome-jonathan-lehman/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2013/10/31/welcome-jonathan-lehman/</guid>
      </item>
    
      <item>
        <title>Halloween Costume Winners!</title>
        <description>&lt;p&gt;What happens when you challenge a group of engineers to a costume contest? They go BIG. CustomInk has
a spirit of creativity and inkers approach the art Halloween Costuming very seriously. All of
our e-commerce fireteams joined together to recreate Toy Story.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;The company voted among the hundreds of wonderful costumes. This year our island of misfit engineers,
UX designers and product managers took first place.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/halloween2013.jpg&quot; alt=&quot;Halloween Winners&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Thu, 31 Oct 2013 07:08:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2013/10/31/halloween-costume-winners/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2013/10/31/halloween-costume-winners/</guid>
      </item>
    
      <item>
        <title>Welcome Ryan Billings!</title>
        <description>&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/ryan_billings.jpg&quot; alt=&quot;Ryan Billings&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Ryan joins CustomInk as a software engineer. He recently added features that
allow our staff to quickly cancel and refund orders on &lt;a href=&quot;http://www.booster.com&quot;&gt;Booster&lt;/a&gt;.&lt;/p&gt;

&lt;!--more--&gt; 

&lt;p&gt;We&amp;#39;re fans of lean product development, so it&amp;#39;s not uncommon to deploy features
with simple implementations in order to quickly learn about our customers.
Alas, there comes a time to pay the piper: the manual order cancelation process
we got by with was becoming a burden.&lt;/p&gt;

&lt;p&gt;Just as important, we realized that our financial data model no longer
reflected our reality; a refactor was in order. Ever the consummate team
player, Ryan worked with engineers and stakeholders to design a better data
model. Through a series of deploys, he updated the system with no downtime or
impact on customers or client applications.&lt;/p&gt;

&lt;p&gt;Finally, Ryan made quick work of the actual cancel feature, a good sign that we
had refactored correctly.&lt;/p&gt;

&lt;p&gt;Welcome to the team, Ryan! We’re glad you’re here.&lt;/p&gt;
</description>
        <pubDate>Tue, 15 Oct 2013 13:36:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2013/10/15/welcome-ryan-billings/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2013/10/15/welcome-ryan-billings/</guid>
      </item>
    
      <item>
        <title>Chris Mar is an Inker</title>
        <description>&lt;p&gt;CustomInk technology is proud to announce that &lt;a href=&quot;https://github.com/cmar&quot;&gt;Chris Mar&lt;/a&gt; is our newest Inker!  Following the new hire tradition, Chris pushed his first deploy to &lt;a href=&quot;http://www.booster.com&quot;&gt;Booster.com&lt;/a&gt; within hours of arrival.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/chris_mar_first_deploy.jpg&quot; alt=&quot;Chris' first deploy&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Chris joins us from &lt;a href=&quot;http://spreecommerce.com&quot;&gt;Spree Commerce&lt;/a&gt;, where he worked as a core contributer to their open source e-commerce platform.  Chris is also a co-organizer of &lt;a href=&quot;http://rubyloco.com/&quot;&gt;Ruby LoCo&lt;/a&gt;, a Loudoun County, Virgina based Ruby user group.
You can hear him every third Friday on the &lt;a href=&quot;http://ruby5.envylabs.com&quot;&gt;Ruby5&lt;/a&gt; podcast.&lt;/p&gt;

&lt;p&gt;If you missed Chris at &lt;a href=&quot;http://rubydcamp.org/&quot;&gt;Ruby DCamp&lt;/a&gt; last weekend, then be sure to look out for him at &lt;a href=&quot;http://rubyconf.org&quot;&gt;RubyConf&lt;/a&gt; this November.&lt;/p&gt;
</description>
        <pubDate>Tue, 01 Oct 2013 08:38:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2013/10/01/chris-mar-is-an-inker/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2013/10/01/chris-mar-is-an-inker/</guid>
      </item>
    
      <item>
        <title>Welcome Lisa Pourkhomami!</title>
        <description>&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/lisap.jpg&quot; alt=&quot;Lisa Pourkhomami&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Lisa joins CustomInk as a software engineer. She recently completed integrating payment processing into our new cart for &lt;a href=&quot;http://campaigns.customink.com&quot;&gt;CustomInk Campaigns&lt;/a&gt;, a huge upgrade in our user experience.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;We are organized into small fire teams, each with a product manager, user experience designer, and a handful of software engineers. We succeed when we work together, balancing getting it done and getting it right. Lucky for &lt;em&gt;Danger Squad!&lt;/em&gt;, Lisa brings an awesome mix of pragmatism and attention to detail to the team.&lt;/p&gt;

&lt;p&gt;She also brings a broad skill set, which is great because we tackle projects at every level of the stack. Sometimes it&amp;#39;s a responsive customer experience, other times it&amp;#39;s extracting a new web service. And it&amp;#39;s always measured and analyzed in frightening detail.&lt;/p&gt;

&lt;p&gt;Welcome to the team, Lisa. We&amp;#39;re looking forward to great things!&lt;/p&gt;
</description>
        <pubDate>Mon, 24 Jun 2013 10:43:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2013/06/24/welcome-lisa-pourkhomami/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2013/06/24/welcome-lisa-pourkhomami/</guid>
      </item>
    
      <item>
        <title>Welcome Sukhada Kulkarni</title>
        <description>&lt;p&gt;CustomInk technology is very excited to welcome one of our new summer interns, &lt;a href=&quot;http://www.sukhadakulkarni.com&quot;&gt;Sukhada Kulkarni&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/sukhada_deploy.jpg&quot; alt=&quot;Sukhada's First Day&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Sukhada started her internship with CustomInk on Monday and wasted no time jumping into our code base!  After getting acquainted with CustomInk, and getting her development environment setup, Sukhada deployed her first changes this afternoon to &lt;a href=&quot;http://campaigns.customink.com&quot;&gt;CustomInk | Campaigns&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Sukhada lives in Cincinnati, Ohio and is a Computer Science major at &lt;a href=&quot;http://www.cmu.edu&quot;&gt;Carnegie Mellon University&lt;/a&gt;.  She will intern with us through the summer and we are looking forward to the great things that we&amp;#39;ll accomplish together.&lt;/p&gt;

&lt;p&gt;This is our third year hosting &lt;a href=&quot;http://technology.customink.com/blog/2012/05/24/welcome-interns/&quot;&gt;interns&lt;/a&gt; from Carnegie Mellon and we&amp;#39;re are looking forward to many more.&lt;/p&gt;
</description>
        <pubDate>Wed, 05 Jun 2013 21:35:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2013/06/05/welcome-sukhada-kulkarni/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2013/06/05/welcome-sukhada-kulkarni/</guid>
      </item>
    
      <item>
        <title>Bootstrap Your Next Project With The HolyGrailHarness</title>
        <description>&lt;p&gt;The &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness&quot;&gt;HolyGrailHarness&lt;/a&gt; is a curated Rails application prototype that focuses on simple test patterns for Ruby &amp;amp; JavaScript!&lt;/p&gt;

&lt;p&gt;Unlike normal &lt;a href=&quot;http://guides.rubyonrails.org/rails_application_templates.html&quot;&gt;Rails Application Templates&lt;/a&gt; or more modern Rails application generators like &lt;a href=&quot;http://railsapps.github.com/rails-composer/&quot;&gt;Rails Composer&lt;/a&gt;, the HolyGrailHarness is a basic Rails application that can be considered a prototype and customized via a simple setup script. It is also somewhat opinionated in that it promotes simple and powerful testing choices and focuses on using Ruby 1.9 and up, MiniTest::Spec, Capybara, Poltergeist/PhantomJS, and Konacha. More details on each component and what HolyGrailHarness provides are below.&lt;/p&gt;

&lt;p&gt;The HolyGrailHarness is perfect for any of the following:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Bootstrapping your next Rails application.&lt;/li&gt;
&lt;li&gt;Learning and promoting MiniTest::Spec&lt;/li&gt;
&lt;li&gt;Modern JavaScript testing setups.&lt;/li&gt;
&lt;li&gt;Teaching Rails and/or JavaScript at your next meetup.&lt;/li&gt;
&lt;/ul&gt;

&lt;!--more--&gt;

&lt;h1 id=&quot;usage&quot;&gt;Usage&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/archive/master.zip&quot;&gt;Download&lt;/a&gt; the project.&lt;/li&gt;
&lt;li&gt;Now from the root of &amp;quot;holy_grail_harness&amp;quot; directory.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bundle &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;thor setup my_app_name
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Make sure to replace &lt;code&gt;my_app_name&lt;/code&gt; above with the name of your new Rails application. The setup script has a few options, but the end result will be a new Rails application all ready to go. &lt;strong&gt;So why not a normal Rails application template?&lt;/strong&gt; Although, Rails application templates provide a really nice feature set. It was much easier to bootstrap a new Rails application using this prototype method. The end result is a cleaner Gemfile and application setup that can be vetted and tested from within HolyGrailHarness itself.&lt;/p&gt;

&lt;p&gt;The script will rename your directory and prompt you to &lt;code&gt;cd&lt;/code&gt; to that directory. Once you do that, run &lt;code&gt;rake test:all&lt;/code&gt; to see that everything is working.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ../my_app_name
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;rake &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;:all
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id=&quot;rails-3&quot;&gt;Rails 3&lt;/h1&gt;

&lt;p&gt;This application prototype will focus on the latest Rails version. At this time, the bundle is locked down to v3.2.9. As Rails updates and is compatible with each component, so will this prototype application be updated. The bundle includes:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/evrone/quiet_assets&quot;&gt;QuietAssets&lt;/a&gt; gem for silent pipeline logging.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/macournoyer/thin/&quot;&gt;Thin&lt;/a&gt; webserver. Primarily to be automatically used by Konacha but also good for development if you are not using something like &lt;a href=&quot;http://pow.cx&quot;&gt;Pow&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;testing&quot;&gt;Testing&lt;/h1&gt;

&lt;h3 id=&quot;minitest-spec-all-the-way-across-the-sky&quot;&gt;MiniTest::Spec All The Way Across The Sky!&lt;/h3&gt;

&lt;p&gt;Don&amp;#39;t wait for Rails 4 to use MiniTest::Spec! This application is using the &lt;a href=&quot;https://github.com/metaskills/minitest-spec-rails&quot;&gt;minitest-spec-rails&lt;/a&gt; gem which forces &lt;code&gt;ActiveSupport::TestCase&lt;/code&gt; to subclass &lt;code&gt;MiniTest::Spec&lt;/code&gt;. This means that you can start using the MiniTest&amp;#39;s Spec or Unit structure and assertions directly within the familiar Rails unit, functional, or integration directories. For full details, check out the &lt;a href=&quot;https://github.com/metaskills/minitest-spec-rails&quot;&gt;minitest-spec-rails&lt;/a&gt; documentation or some of the &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/test/functional/application_controller_test.rb&quot;&gt;test shims&lt;/a&gt; within HolyGrailHarness. For example, a &lt;code&gt;test/unit/user_test.rb&lt;/code&gt; might look like this.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test_helper'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UserTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveSupport&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TestCase&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:bob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:bob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:admin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:admin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'must respond true to #admin? for administrators only'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;admin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;must_be&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:admin?&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;wont_be&lt;/span&gt;   &lt;span class=&quot;ss&quot;&gt;:admin?&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;capybara-integration-tests-with-poltergeist-using-phantomjs&quot;&gt;Capybara Integration Tests With Poltergeist Using PhantomJS&lt;/h3&gt;

&lt;p&gt;You don&amp;#39;t need Cucumber to write good integration tests. Instead use the basic &lt;a href=&quot;https://github.com/jnicklas/capybara#the-dsl&quot;&gt;Capybara DSL&lt;/a&gt; directly within a Rails integration tests with the most bad ass driver available, &lt;a href=&quot;https://github.com/jonleighton/poltergeist&quot;&gt;Poltergeist&lt;/a&gt;, which is built on top of &lt;a href=&quot;http://phantomjs.org&quot;&gt;PhantomJS&lt;/a&gt;. Never again worry about installing Qt so you can compile capybara-webkit, just go download a &lt;a href=&quot;http://phantomjs.org/download.html&quot;&gt;pre-compiled PhantomJS binary&lt;/a&gt; for your specific platform and enjoy 20% faster integration test runs vs capybara-webkit.&lt;/p&gt;

&lt;p&gt;Integration tests are still within the &lt;code&gt;ActionDispatch::IntegrationTest&lt;/code&gt; class and as promised, MiniTest::Spec is available here too. Each test file needs to require the &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/test/test_helper_integration.rb&quot;&gt;test_helper_integration&lt;/a&gt; which provides the following base features.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Sets page size to that of a 13&amp;quot; MacBook Air.&lt;/li&gt;
&lt;li&gt;Resets Capybara sessions after each test.&lt;/li&gt;
&lt;li&gt;Provides a &lt;code&gt;#save_and_open_page&lt;/code&gt;, or &lt;code&gt;#page!&lt;/code&gt; for short, screen shot method.&lt;/li&gt;
&lt;li&gt;Ensures a single ActiveRecord DB connection for transactional test runs.&lt;/li&gt;
&lt;li&gt;An &lt;code&gt;#execjs&lt;/code&gt; helper for bridging Ruby and the JavaScript under test.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;HolyGrailHarness comes with a integration test example in the &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/test/integration/application_test.rb&quot;&gt;test/integration/application_test.rb&lt;/a&gt; file. An integration test might look something like this.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'test_helper_integration'&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ApplicationTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActionDispatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;IntegrationTest&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;before&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;visit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root_path&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'h1'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'renders'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;must_be&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:present?&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;konacha-javascript-tests-using-phantomjs&quot;&gt;Konacha JavaScript Tests Using PhantomJS&lt;/h3&gt;

&lt;p&gt;Move over Jasmine(rice), &lt;a href=&quot;https://github.com/jfirebaugh/konacha&quot;&gt;Konacha&lt;/a&gt; is the way to test your JavaScript now. Konacha is a Rails engine that allows you to test your JavaScript with the &lt;a href=&quot;http://visionmedia.github.com/mocha/&quot;&gt;Mocha&lt;/a&gt; test framework and &lt;a href=&quot;http://chaijs.com&quot;&gt;Chai&lt;/a&gt; assertion library. Konacha&amp;#39;s killer feature is a sandboxed &lt;code&gt;&amp;lt;iframe&amp;gt;&lt;/code&gt; for each test spec to run within as well as full Rails asset pipeline integration. The HolyGrailHarness does all the work to get your Konacha &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/tree/master/spec/javascripts&quot;&gt;&lt;code&gt;spec/javascripts&lt;/code&gt;&lt;/a&gt; directory all setup and ready to go. Highlights include:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;An &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/config/initializers/konacha.rb&quot;&gt;initializer&lt;/a&gt; that sets up Poltergeist as the Capybara driver.&lt;/li&gt;
&lt;li&gt;A directory structure for model, view, and controller specs.&lt;/li&gt;
&lt;li&gt;A &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/spec/javascripts/spec_helper.js.coffee&quot;&gt;&lt;code&gt;spec_helper.js.coffee&lt;/code&gt;&lt;/a&gt; for your specs to require. Provides global setup, configurations and vendor requires.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;HolyGrailHarness also has a &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/tree/master/spec/javascripts/spec_helper&quot;&gt;&lt;code&gt;spec/javascripts/spec_helper&lt;/code&gt;&lt;/a&gt; directory meant for helpers and extensions that should be available to all specs. We have included a &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/spec/javascripts/spec_helper/fixtures.js.coffee&quot;&gt;&lt;code&gt;fixtures.js.coffee&lt;/code&gt;&lt;/a&gt; file that demonstrates how to setup JSON data fixtures for use from anything to stubbing requests to instantiating new model objects. We also have a &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/spec/javascripts/spec_helper/helpers.js.coffee&quot;&gt;&lt;code&gt;helpers.js.coffee&lt;/code&gt;&lt;/a&gt; file that exposes a few top level functions that make debugging your JavaScript easy. Below are the vendored JavaScript libraries that are required by the &lt;code&gt;spec_helper&lt;/code&gt;.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://sinonjs.org&quot;&gt;Sinon.JS&lt;/a&gt; - For spies, stubs, faking time, etc.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/appendto/jquery-mockjax&quot;&gt;jQuery Mockjax&lt;/a&gt; - Best way to mock jQuery&amp;#39;s AJAX functions.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/chaijs/chai-jquery&quot;&gt;Chai jQuery&lt;/a&gt; - Chai assertions for jQuery.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://github.com/NV/jsDump&quot;&gt;jsDump&lt;/a&gt; - Used by the &lt;code&gt;myLog()&lt;/code&gt; helper.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Because your CI system should run all your tests, the HolyGrailHarness has added a Rake task to the test namespace that runs the default rails test task (units, functional, integrations) then your Konacha tests.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rake &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;:all     &lt;span class=&quot;c&quot;&gt;# Runs all Rails tests, then Konacha tests.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;guard&quot;&gt;Guard&lt;/h3&gt;

&lt;p&gt;TDD in style and run your tests when you hit save! Both &lt;a href=&quot;https://github.com/guard/guard-minitest&quot;&gt;guard-minitest&lt;/a&gt; and &lt;a href=&quot;https://github.com/alexgb/guard-konacha&quot;&gt;guard-konacha&lt;/a&gt; are bundled and ready to go. A basic &lt;code&gt;Guardfile&lt;/code&gt; is already setup too. Unlike most, this one is split into two groups &lt;code&gt;:ruby&lt;/code&gt; or &lt;code&gt;:js&lt;/code&gt;. This lets you focus on either everything or a specific language for your tests.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;guard             &lt;span class=&quot;c&quot;&gt;# Monitor both Ruby and JavaScript tests.&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;guard &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; ruby     &lt;span class=&quot;c&quot;&gt;# Monitor Ruby tests.&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;guard &lt;span class=&quot;nt&quot;&gt;-g&lt;/span&gt; js       &lt;span class=&quot;c&quot;&gt;# Monitor JavaScript tests.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The Guardfile assumes you are running OS X and wish to use the Ruby GNTP (Growl Notification Transport Protocol). If this is not the case, consult the Guard documentation on different &lt;a href=&quot;https://github.com/guard/guard#system-notifications&quot;&gt;system notification&lt;/a&gt; alternatives.&lt;/p&gt;

&lt;h3 id=&quot;factories-and-fixtures&quot;&gt;Factories And Fixtures&lt;/h3&gt;

&lt;p&gt;ActiveRecord YAML fixtures suck, but so do slow tests that rely on an empty database with excessive setups based on factories. The answer? Take advantage of the best each has to offer. Use factories to populate fixtures into the test database while leveraging database transactions during your test runs. The end result is a known factory story with the ability to create more test data as needed using the same factories. Allowing factories to properly hook into model logic means no more decomposing business logic into YAML text files. How?&lt;/p&gt;

&lt;p&gt;The HolyGrailHarness bundles the &lt;a href=&quot;https://github.com/metaskills/named_seeds&quot;&gt;named_seeds&lt;/a&gt; gem along with the &lt;a href=&quot;https://github.com/thoughtbot/factory_girl&quot;&gt;factory_girl&lt;/a&gt; gem. The NamedSeeds library checks for the existence of a &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/db/test/seeds.rb&quot;&gt;&lt;code&gt;db/test/seeds.rb&lt;/code&gt;&lt;/a&gt; file and if present, loads that file. Just like Rails&amp;#39; own &lt;code&gt;db/seeds.rb&lt;/code&gt; anything in this file goes. The only difference is that this seed file is populated right before you tests are run so they persist between transactions. You also get the benefit of using this same seed data in development as part of the normal Rails &lt;code&gt;db:setup&lt;/code&gt; process. Read the &lt;a href=&quot;https://github.com/metaskills/named_seeds#namedseeds&quot;&gt;full documentationn&lt;/a&gt; on their site on how to use it. Below is a brief example.&lt;/p&gt;

&lt;p&gt;Create factories in the &lt;code&gt;test/factories&lt;/code&gt; directory. Note, factories are best when they make &lt;code&gt;valid garbage™&lt;/code&gt;, so the HolyGrailHarness also requires the &lt;a href=&quot;https://github.com/sevenwire/forgery&quot;&gt;forgery&lt;/a&gt; gem to help with that.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# In test/factories/user_factory.rb&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;FactoryGirl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;factory&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:user&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Forgery&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;address&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;first_name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Forgery&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;first_name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;last_name&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Forgery&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;first_name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;password&lt;/span&gt;   &lt;span class=&quot;s1&quot;&gt;'test'&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When making seed data, be explicit with your attributes that may be forged in the factory, database seeds should be consistent and have meaningful attributes. In this example we are creating an admin user. Note too how we are using &lt;code&gt;NamedSeeds.identify&lt;/code&gt; which mimics AcctiveRecord&amp;#39;s fixture identity. This gives us a handle to the fixture within our tests. We also create the &lt;code&gt;@admin&lt;/code&gt; instance variable because we might want to use that user later on in the fixture story.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# In db/test/seeds.rb&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'factory_girl'&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;FactoryGirl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find_definitions&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FactoryGirl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Syntax&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Methods&lt;/span&gt;

&lt;span class=&quot;vi&quot;&gt;@admin&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;no&quot;&gt;NamedSeeds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;identify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:admin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                       &lt;span class=&quot;ss&quot;&gt;first_name: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Admin'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;last_name: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'User'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;email: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'admin@test.com'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lastly, in your &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/test/test_helper.rb&quot;&gt;&lt;code&gt;test/test_helper.rb&lt;/code&gt;&lt;/a&gt; file, declare that you have a named seed to the users model. This will allow your tests to act just like those with ActiveRecord fixtures and use the &lt;code&gt;users(:admin)&lt;/code&gt; helper to get to that seeded fixture.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# In test/test_helper.rb&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ActiveSupport&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TestCase&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;named_seeds&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:users&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h1 id=&quot;mvc-javascript&quot;&gt;MVC JavaScript&lt;/h1&gt;

&lt;p&gt;The HolyGrailHarness wants you to use some type MV* structure for your JavaScript. The setup script supports &lt;a href=&quot;http://spinejs.com&quot;&gt;Spine.js&lt;/a&gt; as an option, however you can decline and all traces of Spine.js will be removed. If so, the following features will still remain.&lt;/p&gt;

&lt;p&gt;A single JavaScript &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/javascripts/holy_grail_harness/lib/namespaces.js.coffee&quot;&gt;namespace&lt;/a&gt; on the window object. This namespace creates a model, view, controller object structure that direly matches to the &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/tree/master/app/assets/javascripts/holy_grail_harness&quot;&gt;&lt;code&gt;app/assets/javascripts/#{my_app_name}/(model|view|controller)&lt;/code&gt;&lt;/a&gt; directory structure within the Rails asset pipeline. This JavaScript namespace and matching directories will be changed to your new application name as part of the setup task. Here is an example of a User model whose corresponding file would be found in the &lt;code&gt;app/assets/javascripts/my_app_name/models/user.js.coffee&lt;/code&gt; file.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-coffeescript&quot; data-lang=&quot;coffeescript&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;MyAppName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Models&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;View&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;configure&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'User'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'id'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'email'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The main &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/javascripts/application.js&quot;&gt;&lt;code&gt;application.js&lt;/code&gt;&lt;/a&gt; file requires all vendor frameworks, then the &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/javascripts/holy_grail_harness/index.js.coffee&quot;&gt;&lt;code&gt;index.js.coffee&lt;/code&gt;&lt;/a&gt; within your application name directory. Use this file to boot your JavaScript application and/or setup your root view controller.&lt;/p&gt;

&lt;p&gt;Also included is the &lt;a href=&quot;https://github.com/nathansobo/space-pen&quot;&gt;SpacePen&lt;/a&gt; view framework. SpacePen is a powerful and minimalist client-side view framework authored in CoffeeScript. It is actually a jQuery subclass which makes your views really easy to traverse and respond to controller events. Read my &lt;a href=&quot;http://metaskills.net/2012/05/22/view-controller-patterns-with-spine-js-and-spacepen/&quot;&gt;&lt;em&gt;View Controller Patterns With Spine.js &amp;amp; SpacePen&lt;/em&gt;&lt;/a&gt; article to learn why views should not be dumb and how you can take advantage of SpacePen no matter what JavaScript MV* framework you use.&lt;/p&gt;

&lt;h3 id=&quot;with-spine-js&quot;&gt;With Spine.js&lt;/h3&gt;

&lt;p&gt;If you choose to use Spine.js as your JavaScript MVC structure, the setup script will create a git submodule to the Spine repository to the &lt;code&gt;vendor/assets/javascripts/spine&lt;/code&gt; directory. This allows your project to use the the source CoffeeScript files, which makes for a wonderful &lt;a href=&quot;http://metaskills.net/2012/01/15/rails-and-spine-js-using-the-coffeescript-source/&quot;&gt;learning experience&lt;/a&gt; to both Spine.js and idomatic CoffeeScript.&lt;/p&gt;

&lt;p&gt;By default the &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/javascripts/holy_grail_harness/index.js.coffee&quot;&gt;&lt;code&gt;index.js.coffee&lt;/code&gt;&lt;/a&gt; will require all Spine components. This includes manager (stacks), ajax, route, and relation. Remove anything that you do not need. This file also defines the root view controller along with a &lt;code&gt;MyAppName.App.Index.init()&lt;/code&gt; class level initialization function. This is called in the main &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/app/views/layouts/application.html.erb&quot;&gt;&lt;code&gt;application.html.erb&lt;/code&gt;&lt;/a&gt; layout file for you too. Likewise, the application init is done in the Mocha before filters mentioned above in both the &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/spec/javascripts/spec_helper.js.coffee&quot;&gt;&lt;code&gt;spec_helper.js.coffee&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/spec/javascripts/spec_helper/fixtures.js.coffee&quot;&gt;&lt;code&gt;fixtures.js.coffee&lt;/code&gt;&lt;/a&gt; files. If you examine these files closely, you will see how they make use of Mocha&amp;#39;s &lt;code&gt;done()&lt;/code&gt; callback so that you can cleanly abstract AJAX mocks and anything else related to your JavaScript application&amp;#39;s boot process. Here is an example of how you might setup your &lt;code&gt;initApplication()&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-coffeescript&quot; data-lang=&quot;coffeescript&quot;&gt;&lt;span class=&quot;vi&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;initApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;bob&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;MyAppName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Seeds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bob&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;mockjax&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/users/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;responseText&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;MyAppName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;bobInitial&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;responseText&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;MyAppName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Models&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;fetch&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;MyAppName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Models&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;one&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'refresh'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;No JavaScript project should be without a local notification system to help keep disparate components up to date. Thankfully, Spine&amp;#39;s event module makes a local PubSub system a breeze. The HolyGrailHarness has a &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/javascripts/holy_grail_harness/lib/notifications.js.coffee&quot;&gt;&lt;code&gt;notifications.js.coffee&lt;/code&gt;&lt;/a&gt; that exposes a class level &lt;code&gt;bind()&lt;/code&gt; and &lt;code&gt;trigger()&lt;/code&gt; to any event string/namespace you want. To make more simple, we recommend creating class level functions that expose the event name as the function name and pass the args to the &lt;code&gt;handle()&lt;/code&gt; function. We have done this for the &lt;code&gt;MyAppName.Notifications.appReady()&lt;/code&gt; to demonstrate. Calling this function will trigger the &lt;code&gt;app.ready&lt;/code&gt; event and passing a function to this function will bind that function to the same event name.&lt;/p&gt;

&lt;h1 id=&quot;sass-compass&quot;&gt;Sass &amp;amp; Compass&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;http://sass-lang.com&quot;&gt;Sass&lt;/a&gt; is the only way to write CSS for today&amp;#39;s modern web applications. &lt;a href=&quot;http://compass-style.org&quot;&gt;Compass&lt;/a&gt; is the CSS framework that no Sass user should go without. Together they provide a foundation for writing beautiful CSS using pre-built time saving functions. The HolyGrailHarness includes both the &lt;a href=&quot;https://github.com/rails/sass-rails&quot;&gt;sass-rails&lt;/a&gt; and &lt;a href=&quot;https://github.com/Compass/compass-rails&quot;&gt;compass-rails&lt;/a&gt; gems.&lt;/p&gt;

&lt;p&gt;To get you started on the right path, we have also created a basic structure within the &lt;code&gt;app/assets/stylesheets&lt;/code&gt; asset pipeline directory to help you organize your Sass files. Here is the directory structure below.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;├── application.css
├── application
│   ├── _layout.scss
│   ├── index.scss
│   ├── components
│   │   └── _foo.scss
└── shared
    ├── _animations.scss
    ├── _fonts.scss
    ├── _mixins.scss
    ├── _placeholders.scss
    ├── _variables.scss
    └── base.scss
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;the-application-css-file&quot;&gt;The application.css file.&lt;/h3&gt;

&lt;p&gt;Never write CSS in &lt;code&gt;application.css&lt;/code&gt;. Say what? I know right, but trust me. Just consider this file a top level bundle dependency that only requires other top level bundle assets. Here is the contents of that file. Notice how it requires a bundle called twitter and an index. One is for twitter bootstrap, see section below, and the other is the index to your own Sass framework.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span class=&quot;c&quot;&gt;/*
 *= require application/twitter
 *= require application/index
*/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;the-shared-directory&quot;&gt;The shared directory.&lt;/h3&gt;

&lt;p&gt;Think of this as your own Compass framework. The &lt;a href=&quot;https://github.com/metaskills/holy_grail_harness/blob/master/app/assets/stylesheets/shared/base.scss&quot;&gt;&lt;code&gt;base.scss&lt;/code&gt;&lt;/a&gt; is your single file to &lt;code&gt;@import&lt;/code&gt; to get everything loaded and ready to go. &lt;strong&gt;Nothing in any of the shared files should generate CSS!&lt;/strong&gt; Importing &lt;code&gt;shared/base&lt;/code&gt; should act just like importing &lt;code&gt;compass&lt;/code&gt;. Use these files for setting your own variables and creating misc helper functions &amp;amp; mixins. There is a variables file for... variables! Another for animations, fonts and mixins too.&lt;/p&gt;

&lt;p&gt;Pay special attention to the &lt;code&gt;_placeholders.scss&lt;/code&gt; file. If you do not know about Sass 3.2&amp;#39;s placeholder selectors (silent classes) and how they make presentational classes efficiently extended by semantic ones, then I highly suggest you read Dale Sande&amp;#39;s presentation titled &lt;a href=&quot;https://speakerdeck.com/anotheruiguy/sass-32-silent-classes&quot;&gt;Sass 3.2 Silent Classes&lt;/a&gt; on Speaker Deck.&lt;/p&gt;

&lt;p&gt;Below is the contents of the &lt;code&gt;base.scss&lt;/code&gt; file, take note of the order. See too how we import the entire Compass framework. This means that all of your Sass code in any of the shared files can take full advantage of both Bootstrap and Compass&amp;#39; variables and mixins. Epic win!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sass&quot; data-lang=&quot;sass&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// Think of this file as your own compass. Importing the base, never generates CSS.&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;shared/variables&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;bootstrap/mixins&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;compass&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;compass/layout&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;compass/css3/user-interface&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;shared/fonts&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;shared/mixins&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;shared/animations&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;shared/placeholders&quot;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;the-application-directory&quot;&gt;The application directory.&lt;/h3&gt;

&lt;p&gt;Organize this as you see fit. We have started you off by creating a &lt;code&gt;_layout.scss&lt;/code&gt; file for your general layout/structure styles. There is also a &lt;code&gt;components&lt;/code&gt; directory which all sub files are imported via a glob. The idea is that components are not dependent upon another. Files that might go in here are things like datepicker, navigation, and general files named after components or widgets. Below is what the &lt;code&gt;application/index.scss&lt;/code&gt; looks like.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sass&quot; data-lang=&quot;sass&quot;&gt;&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;shared/base&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;./layout&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;components/*&quot;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you are more advanced with your CSS and like the idea of style guides, take a looks a the &lt;a href=&quot;https://github.com/Anotheruiguy/toadstool&quot;&gt;Toadstool&lt;/a&gt; style guide framework.&lt;/p&gt;

&lt;h1 id=&quot;twitter-bootstrap&quot;&gt;Twitter Bootstrap&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;http://twitter.github.com/bootstrap/&quot;&gt;Twitter Bootstrap&lt;/a&gt; is awesome, but &lt;a href=&quot;http://metaskills.net/2012/02/27/too-less-should-you-be-using-sass/&quot;&gt;LESS is not&lt;/a&gt;. That is why the HolyGrailHarness uses the &lt;a href=&quot;https://github.com/thomas-mcdonald/bootstrap-sass&quot;&gt;bootstrap-sass&lt;/a&gt; gem that converts all the Bootstrap LESS files to Sass. Making them ready to import via the Rails asset pipeline.&lt;/p&gt;

&lt;p&gt;As shown above in the Sass section, we require the &lt;code&gt;application/twitter.scss&lt;/code&gt; bundle asset from the top level &lt;code&gt;application.css&lt;/code&gt; bundle file. This twitter bundle file, contents below, take advantage of your shared variables before importing bootstrap from the gem. In this way you can define variables that tweak bootstrap. A good example would be button colors, column widths, etc. Later on in the file you can extend bootstrap styles to your liking. For instance, add more padding to buttons.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sass&quot; data-lang=&quot;sass&quot;&gt;&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;shared/variables&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;bootstrap&quot;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;font-awesome&quot;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Tweak or redefine Twitter classes below.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;font-awesome&quot;&gt;Font Awesome&lt;/h3&gt;

&lt;p&gt;The glyph icons included in Twitter Bootstrap are horrible for hi-resolution &amp;quot;retina&amp;quot; displays typically found on mobile devices. Thankfully the &lt;a href=&quot;http://fortawesome.github.com/Font-Awesome/&quot;&gt;Font Awesome&lt;/a&gt; project provides a drop in replacement that instead uses icon fonts vs raster images.&lt;/p&gt;

&lt;p&gt;The HolyGrailHarness vendors these font files and the needed &lt;code&gt;font-awesome.scss&lt;/code&gt; file and requires them as part of the Twitter Bootstrap bundle shown above. More advanced users may prefer to only include the icon fonts needed in their application or a few custom icons. If that is the case, check out &lt;a href=&quot;http://endtwist.github.com/fontcustom/&quot;&gt;Font Custom&lt;/a&gt;, webfonts from the comfort of the command line.&lt;/p&gt;
</description>
        <pubDate>Thu, 06 Dec 2012 14:19:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2012/12/06/bootstrap-your-next-project-with-holygrailharness/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/12/06/bootstrap-your-next-project-with-holygrailharness/</guid>
      </item>
    
      <item>
        <title>Welcome Ken Collins!</title>
        <description>&lt;p&gt;CustomInk technology is very excited to announce that Ken Collins has joined the team!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/ken_collins.jpg&quot; alt=&quot;Ken Collins&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Ken is better known online as &lt;a href=&quot;http://metaskills.net/&quot;&gt;metaskills&lt;/a&gt; and is an active open source contributor who currently maintains the rails &lt;a href=&quot;https://github.com/rails-sqlserver/activerecord-sqlserver-adapter&quot;&gt;MS SQL Server Adapter&lt;/a&gt;.  More recently Ken has developed an interest in Javascript contributing submissions to Spine and creating &lt;a href=&quot;https://github.com/metaskills/mocha-phantomjs&quot;&gt;PhantomJS Runners for Mocha&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Ken spent the week with us here in our Tyson&amp;#39;s Corner headquarters, but he will continue to work from his Norfolk, VA home as a remote developer.&lt;/p&gt;
</description>
        <pubDate>Fri, 14 Sep 2012 15:34:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/09/14/welcome-ken-collins/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/09/14/welcome-ken-collins/</guid>
      </item>
    
      <item>
        <title>/etc/hosts Management with Chef</title>
        <description>&lt;p&gt;We recently ran into a situation where we needed to use Chef Search to modify our &lt;code&gt;/etc/hosts&lt;/code&gt; file dynamically on each Chef run. Originally seeming to be a relatively simple task, managing the hosts file with Chef rose some interesting challenges. While there are a few existing &lt;a href=&quot;http://community.opscode.com/search?query=hosts&amp;scope=home&quot;&gt;community-maintained /etc/hosts management cookbooks&lt;/a&gt; out there, none of them suited our needs. We wanted a highly customizable, easily expandable, simple, LWRP that was idempotent.&lt;/p&gt;

&lt;p&gt;In this post, I will discuss creating your own LWRP, as well as some of the challenges faced while writing this LWRP. There will also be links to the community LWRP that we&amp;#39;ve created.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;for-those-that-just-cant-wait&quot;&gt;For those that just can&amp;#39;t wait!&lt;/h2&gt;

&lt;p&gt;Here are the links to the &lt;a href=&quot;https://github.com/customink-webops/hostsfile&quot;&gt;hostsfile github repo&lt;/a&gt; and &lt;a href=&quot;http://community.opscode.com/cookbooks/hostsfile&quot;&gt;hostsfile on the Chef community website&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;working-backwards&quot;&gt;Working Backwards&lt;/h2&gt;

&lt;p&gt;Before writing this LWRP, I knew &lt;em&gt;exactly&lt;/em&gt; what I wanted the interface to look like. I knew that it needed to follow the patterns of resource built into Chef. I wanted it to be simple, yet configurable, yet still lightweight. This gave me a great opportunity to practice &lt;a href=&quot;http://tom.preston-werner.com/2010/08/23/readme-driven-development.html&quot;&gt;README-drive development&lt;/a&gt;. There are a lot of advantages to RDD, especially on smaller projects:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Ensure you have fully thought out your implementation&lt;/li&gt;
&lt;li&gt;Chooses your organization structure&lt;/li&gt;
&lt;li&gt;Ensures you have a great README&lt;/li&gt;
&lt;li&gt;Makes you really focus on usage over implementation&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;The last option is, in my opinion, the most important. This LWRP would eventually end up on the Chef community site. I asked myself multiple times:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;How will people use this?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;And that question is king in open source development. If adding a few lines of code to your implementation allows people to more easily understand your &amp;quot;product&amp;quot;, then it&amp;#39;s worth it. It&amp;#39;s &lt;strong&gt;always&lt;/strong&gt; worth it. This cookbook was written &lt;em&gt;for&lt;/em&gt; the end-user.&lt;/p&gt;

&lt;p&gt;And yes, I actually did write the &lt;a href=&quot;https://github.com/customink-webops/hostsfile/blob/master/README.md&quot;&gt;README&lt;/a&gt; &lt;strong&gt;first&lt;/strong&gt;.&lt;/p&gt;

&lt;h2 id=&quot;getting-started&quot;&gt;Getting Started&lt;/h2&gt;

&lt;p&gt;With the README done and polished, it was time to start working forward. Luckily, I had a good, solid understanding of the implementation details as a result of the RDD I discussed earlier.&lt;/p&gt;

&lt;p&gt;To get started with a custom LWRP, you actually create a cookbook:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ knife cookbook create hostsfile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;... and then delete everything until you&amp;#39;re left with:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;|_libraries
|_providers
|_resources
|_LICENSE
|_metadata.rb
|_README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Spend a few minutes adding all the LICENSE files and replacing &amp;quot;YOUR NAME HERE&amp;quot; where appropriate.&lt;/p&gt;

&lt;p&gt;Next, because I already know my implementation, I can actually start by writing the resource file first:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# List of all actions supported by the provider&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;actions&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:create_if_missing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:remove&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Make create the default action&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;default_action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:create&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Required attributes&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;attribute&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:ip_address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:kind_of&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name_attribute&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:required&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;attribute&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:hostname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:kind_of&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;String&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Optional attributes&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;attribute&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:aliases&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:kind_of&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Array&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;attribute&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:comment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:kind_of&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;String&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The design is so elegant and makes perfect sense based off our the README.&lt;/p&gt;

&lt;p&gt;Now it&amp;#39;s time to move onto the more difficult part. Actually writing the provider code (the implementation):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Creates a new hosts file entry. If an entry already exists, it will be&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# overwritten by this one.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:create&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Create a new hosts file entry, only if one does not already exist for&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# the given IP address. If one exists, this does nothing.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:create_if_missing&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Updates the given hosts file entry. Does nothing if the entry does not&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# exist.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:update&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Removes an entry from the hosts file. Does nothing if the entry does&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# not exist.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:remove&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;a href=&quot;https://github.com/customink-webops/hostsfile/blob/master/providers/entry.rb&quot;&gt;full source for the provider entry&lt;/a&gt; is available on github. I&amp;#39;ve suppressed a lot here.&lt;/p&gt;

&lt;h2 id=&quot;initial-roadblock&quot;&gt;Initial Roadblock&lt;/h2&gt;

&lt;p&gt;My initial intention was to use the &lt;a href=&quot;https://rubygems.org/gems/ghost&quot;&gt;ghost gem&lt;/a&gt; for managing the hosts file in Ruby. However, ghost did not support he features I needed, and it did not provide a great interface beyond the command line.&lt;/p&gt;

&lt;p&gt;So, I reinvented the wheel.&lt;/p&gt;

&lt;h2 id=&quot;reinventing-the-wheel&quot;&gt;Reinventing the Wheel&lt;/h2&gt;

&lt;p&gt;In short, I created my own &lt;code&gt;/etc/hosts&lt;/code&gt; management library in Ruby. It&amp;#39;s *nix specific, but it works. I spent significantly less time writing my own code than trying to make something like ghost suit my needs.&lt;/p&gt;

&lt;p&gt;The library consisted of two files:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;entry.rb&lt;/code&gt; - represents a single line in the &lt;code&gt;/etc/hosts&lt;/code&gt; file&lt;/li&gt;
&lt;li&gt;&lt;code&gt;manipulator.rb&lt;/code&gt; - contains commands for querying and manipulating the &lt;code&gt;/etc/hosts&lt;/code&gt; file.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;It&amp;#39;s a lot of file parsing and making things look pretty to be honest.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;Manipulate&lt;/code&gt; class works a lot like a database object - you must call &lt;code&gt;save&lt;/code&gt; or &lt;code&gt;save!&lt;/code&gt; in order to write the changes out.&lt;/p&gt;

&lt;p&gt;Take a look at the &lt;a href=&quot;https://github.com/customink-webops/hostsfile/tree/master/libraries&quot;&gt;source on github&lt;/a&gt; if your curious, but it&amp;#39;s mostly Ruby code. There&amp;#39;s actually no Chef magic going on. I could easily have packaged the library into a gem and used that instead...&lt;/p&gt;

&lt;h2 id=&quot;usage&quot;&gt;Usage&lt;/h2&gt;

&lt;p&gt;The &lt;code&gt;hostsfile&lt;/code&gt; LWRP comes equipped with 4 actions:&lt;/p&gt;

&lt;h4 id=&quot;create&quot;&gt;&lt;code&gt;create&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;Creates a new hosts file entry. If an entry already exists, it will be overwritten by this one.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;hostsfile_entry&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1.2.3.4'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;hostname&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'example.com'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:create&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will create an entry like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;1.2.3.4          example.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;create_if_missing&quot;&gt;&lt;code&gt;create_if_missing&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;Create a new hosts file entry, only if one does not already exist for the given IP address. If one exists, this does nothing.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;hostsfile_entry&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1.2.3.4'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;hostname&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'example.com'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:create_if_missing&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;update&quot;&gt;&lt;code&gt;update&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;Updates the given hosts file entry. Does nothing if the entry does not exist.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;hostsfile_entry&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1.2.3.4'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;hostname&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'example.com'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;comment&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Update by Chef'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:update&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will create an entry like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;1.2.3.4           example # Updated by Chef
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;remove&quot;&gt;&lt;code&gt;remove&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;Removes an entry from the hosts file. Does nothing if the entry does not
exist.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;hostsfile_entry&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'1.2.3.4'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:remove&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will remove the entry for &lt;code&gt;1.2.3.4&lt;/code&gt;.&lt;/p&gt;

&lt;h2 id=&quot;i-want-it-now&quot;&gt;I want it now!&lt;/h2&gt;

&lt;p&gt;Install it&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ knife cookbook site install hostsfile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Include it&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# recipes/my_recipe.rb&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;include_recipe&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'hostsfile'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You&amp;#39;re done!&lt;/p&gt;
</description>
        <pubDate>Fri, 03 Aug 2012 21:19:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/08/03/etc-hosts-management-with-chef/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/08/03/etc-hosts-management-with-chef/</guid>
      </item>
    
      <item>
        <title>Testing Chef Cookbooks</title>
        <description>&lt;p&gt;Throughout my internship at CustomInk, I&amp;#39;ve put a significant focus on Chef cookbook testing. At the time of this writing, there are a few solutions for testing cookbooks - &lt;a href=&quot;https://github.com/acrmp/chefspec&quot;&gt;ChefSpec&lt;/a&gt;, &lt;a href=&quot;http://www.cucumber-chef.org/&quot;&gt;cucumber-chef&lt;/a&gt;, &lt;a href=&quot;https://github.com/calavera/minitest-chef-handler&quot;&gt;minitest-chef-handler&lt;/a&gt;, and &lt;a href=&quot;https://github.com/calavera/rspec-chef&quot;&gt;rspec-chef&lt;/a&gt; – and they each have their own distinct advantages. At the very least, you should run &lt;code&gt;knife cookbook test&lt;/code&gt; and &lt;code&gt;foodcritic&lt;/code&gt; against all your cookbooks. Nathen Harvey covered this in his &lt;a href=&quot;http://technology.customink.com/blog/2012/07/06/mvt-knife-test-and-travisci/&quot;&gt;MVT: knife test and TravisCI&lt;/a&gt; blog post.&lt;/p&gt;

&lt;p&gt;At CustomInk, we test using &lt;a href=&quot;https://github.com/acrmp/chefspec&quot;&gt;ChefSpec&lt;/a&gt;. Additionally, we use some home-grown gems such as &lt;a href=&quot;https://github.com/customink/fauxhai&quot;&gt;fauxhai&lt;/a&gt; and &lt;a href=&quot;https://github.com/customink/strainer&quot;&gt;Strainer&lt;/a&gt; to make testing easier.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;foodcritic&quot;&gt;Foodcritic&lt;/h2&gt;

&lt;p&gt;Foodcritic is a linting tool for your cookbooks. Although technically not a &amp;quot;test&amp;quot;, linting tools are frequently grouped with testing. Foodcritic is like jslint for cookbooks. &lt;strong&gt;At the bare minimum, you should run &lt;code&gt;foodcritic&lt;/code&gt; against all your cookbooks.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;As mentioned in &lt;a href=&quot;/blog/our-team/nathen-harvey.html&quot;&gt;Nathen Harvey&amp;#39;s&lt;/a&gt; &lt;a href=&quot;/blog/2012/07/06/mvt-knife-test-and-travisci/&quot;&gt;MVT: knife test and TravisCI&lt;/a&gt;, foodcritic does not verify that you have proper Ruby code. It is only a linting tool.&lt;/p&gt;

&lt;p&gt;When running foodcritic, I recommend adding both &lt;a href=&quot;https://github.com/customink-webops/foodcritic-rules&quot;&gt;CustomInk foodcritic rules&lt;/a&gt; and &lt;a href=&quot;https://github.com/etsy/foodcritic-rules&quot;&gt;Etsy foodcritic rules&lt;/a&gt;. Clone the repositories (or use submodules) into a &lt;code&gt;foodcritic&lt;/code&gt; directory in the root of your chef-repo:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;|_cookbooks
|_data_bags
|_environments
|_foodcritic
  |_customink
  |_etsy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, you can run &lt;code&gt;foodcritic&lt;/code&gt; like so:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ bundle exec foodcritic -I foodcritic/* cookbooks/my_cookbook
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There are more details about the &lt;a href=&quot;https://github.com/customink-webops/foodcritic-rules&quot;&gt;CustomInk foodcritic rules&lt;/a&gt; and &lt;a href=&quot;https://github.com/etsy/foodcritic-rules&quot;&gt;Etsy foodcritic rules&lt;/a&gt; in their respective repositories on github.&lt;/p&gt;

&lt;h2 id=&quot;strainer&quot;&gt;Strainer&lt;/h2&gt;

&lt;p&gt;Very quickly, you can see the need to run multiple commands against every cookbook:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;knife cookbook test&lt;/code&gt; for ruby syntax&lt;/li&gt;
&lt;li&gt;&lt;code&gt;foodcritic&lt;/code&gt; to lint your code&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;chefspec&lt;/code&gt;, &lt;code&gt;minitest&lt;/code&gt;, or &lt;code&gt;cucumber&lt;/code&gt; for your actual unit, function, or integration tests
&lt;br&gt;&lt;/p&gt;

&lt;p&gt;$ bundle exec knife cookbook test COOKBOOK
$ bundle exec foodcritic -I foodcritic/* cookbooks/COOKBOOK
$ bundle exec spec&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This is why I wrote &lt;a href=&quot;https://github.com/customink/strainer&quot;&gt;Strainer&lt;/a&gt;. Strainer uses a &lt;code&gt;Colanderfile&lt;/code&gt; at either the project-level or cookbook-level to run isolated tests on your cookbooks. The cookbook is actually copied to a temporary location and then the tests are run against it. To get started, create a Colander file in your editor and enter the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;knife &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;: bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;knife cookbook &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$COOKBOOK&lt;/span&gt;
foodcritic: bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;foodcritic &lt;span class=&quot;nt&quot;&gt;-I&lt;/span&gt; foodcritic/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; cookbooks/&lt;span class=&quot;nv&quot;&gt;$COOKBOOK&lt;/span&gt;
chefspec: bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;spec
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that we have this &lt;code&gt;$COOKBOOK&lt;/code&gt; variable. There&amp;#39;s also a &lt;code&gt;$ENVIRONMENT&lt;/code&gt; variable provided. These are replaced with the cookbook or cookbooks you are straining.&lt;/p&gt;

&lt;p&gt;If you&amp;#39;ve used &lt;a href=&quot;https://github.com/ddollar/foreman&quot;&gt;foreman&lt;/a&gt;, you should be familiar with this syntax.&lt;/p&gt;

&lt;p&gt;Next, we want to &lt;code&gt;strain&lt;/code&gt; out the cookbook we want to test:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ bundle exec strain my_cookbook
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Strainer is also useful for setting up multiple builds or jobs against your single chef repository. You can create a separate job (on Jenkins for example), with the same base repository, but change the script (or use environment variables) to only run the cookbooks you want to test!&lt;/p&gt;

&lt;p&gt;I recommend also checking out &lt;a href=&quot;https://github.com/customink/strainer&quot;&gt;Strainer on github&lt;/a&gt; for the most up-to-date documentation. There&amp;#39;s still a lot of work to be done. Get the bottom of the README for the most up-to-date list of features that need your help!&lt;/p&gt;

&lt;h2 id=&quot;fauxhai&quot;&gt;Fauxhai&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Problem&lt;/strong&gt;: Ohai is awesome. Ohai does a LOT. I don&amp;#39;t want to type out all my ohai data for a single test.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Solution&lt;/strong&gt;: &lt;a href=&quot;http://technology.customink.com/fauxhai/&quot;&gt;Fauxhai&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://technology.customink.com/fauxhai/&quot;&gt;Fauxhai&lt;/a&gt; is &amp;quot;fake ohai&amp;quot;, as it&amp;#39;s name implies. Fauxhai, as featured on the &lt;a href=&quot;http://foodfightshow.org/index.html&quot;&gt;foodfight show&lt;/a&gt; multiple times is a community-backed node-mocking utility. In short, it looks like this.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Fauxhai&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;mock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;platform: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'ubuntu'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will mock out the default ubuntu node. You can use this in combination with Chefspec or other testing tools.&lt;/p&gt;

&lt;p&gt;I recently released the first non-alpha version of fauxhai. In this edition, fauxhai is actually capable of mocking &amp;quot;real&amp;quot; nodes. It will SSH into your server, download the real Ohai data, and then run your tests against that Ohai data:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Fauxhai&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:'node.example.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Check out the &lt;a href=&quot;http://technology.customink.com/fauxhai/&quot;&gt;fauxhai github page&lt;/a&gt; or &lt;a href=&quot;https://github.com/customink/fauxhai&quot;&gt;fauxhai github repo&lt;/a&gt; for more information on how to use fauxhai.&lt;/p&gt;

&lt;h2 id=&quot;chefspec&quot;&gt;ChefSpec&lt;/h2&gt;

&lt;p&gt;At CustomInk, we test our cookbooks with &lt;a href=&quot;https://github.com/acrmp/chefspec&quot;&gt;ChefSpec&lt;/a&gt; by &lt;a href=&quot;https://github.com/acrmp&quot;&gt;Andrew Crump&lt;/a&gt;. There are a lot of great testing solutions out there, but ChefSpec is what works for us and our needs as a company. We also rarely use ChefSpec without fauxhai, so here&amp;#39;s an example from &lt;a href=&quot;https://github.com/customink-webops/phantomjs&quot;&gt;our phantomjs cookbook&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'chefspec'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'fauxhai'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;describe&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'phantomjs::default'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'on ubuntu'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;before&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Fauxhai&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;mock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;platform&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:'ubuntu'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;let&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:chef_run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ChefSpec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ChefRunner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;converge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'phantomjs::default'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'should install the correct packages'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;chef_run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;should&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install_package&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'fontconfig'&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;chef_run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;should&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;install_package&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'libfreetype6'&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It&amp;#39;s simple, it&amp;#39;s explicit, and it reads a whole lot easier than TestUnit or MiniTest (shhh, don&amp;#39;t tell DHH).&lt;/p&gt;

&lt;h4 id=&quot;the-catch&quot;&gt;The Catch&lt;/h4&gt;

&lt;p&gt;There is one hang-up about ChefSpec - it has incredibly confusing documentation. Depending on where you look, some methods have changed, syntax is different, things have been removed, and there&amp;#39;s &lt;a href=&quot;https://github.com/acrmp/chefspec/issues/30&quot;&gt;a few different places for documentation&lt;/a&gt;. The solution - just dive into the source. It&amp;#39;s the easiest way, and you&amp;#39;ll have a better understanding from the start.&lt;/p&gt;

&lt;h2 id=&quot;travis-jenkins&quot;&gt;Travis &amp;amp; Jenkins&lt;/h2&gt;

&lt;p&gt;Internally, we use &lt;a href=&quot;http://jenkins-ci.org&quot;&gt;Jenkins&lt;/a&gt; as our build server. However, for all our public-facing cookbooks, we use &lt;a href=&quot;http://travis-ci.org&quot;&gt;Travis&lt;/a&gt;. This causes somewhat of a gap between our build statuses - we have to look in two locations to see the status of all our builds...&lt;/p&gt;

&lt;p&gt;Okay, I lied. We don&amp;#39;t. We actually use another project I wrote, &lt;a href=&quot;https://github.com/customink/stoplight&quot;&gt;stoplight&lt;/a&gt;, that shows the build status from multiple build servers in a single UI. It&amp;#39;s incredibly handy for these kinds of situations. And, for you hardcore Chef users, there&amp;#39;s even a &lt;a href=&quot;https://github.com/customink-webops/stoplight&quot;&gt;Chef cookbook for stoplight&lt;/a&gt; for installing stoplight on your infrastructure.&lt;/p&gt;

&lt;h2 id=&quot;the-long-short-of-it&quot;&gt;The Long &amp;amp; Short of it&lt;/h2&gt;

&lt;p&gt;Chef testing is a huge topic, and it&amp;#39;s going to be awhile until the community agrees on a single method for testing. Rails still has yet to figure it out... Here&amp;#39;s what is important - &lt;strong&gt;test your cookbooks&lt;/strong&gt;. Even if it&amp;#39;s just running foodcritic against all your cookbooks, you are making the cookbook-world a better place. And &lt;strong&gt;talk about it&lt;/strong&gt;. Tutorials like this one, as well as &lt;a href=&quot;/blog/our-team/seth-vargo&quot;&gt;some of the other posts I&amp;#39;ve written&lt;/a&gt; will help the community embrace testing :)!&lt;/p&gt;
</description>
        <pubDate>Fri, 03 Aug 2012 10:39:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/08/03/testing-chef-cookbooks/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/08/03/testing-chef-cookbooks/</guid>
      </item>
    
      <item>
        <title>Easily test your DNS</title>
        <description>&lt;p&gt;At CustomInk, we recently made the switch to a new DNS provider. During the switch, we mass-imported records from our existing provider to our new provider. Did we get them all? Are they live yet? The immediate solution was to open up the terminal and fire off cURL requests, but there had to be a better way...&lt;/p&gt;

&lt;p&gt;In this post/tutorial, I will show you how I created a test suite for our DNS records using RSpec. The solution is amazingly simple, and your specs will only be about 7 lines of code!&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;the-end-result&quot;&gt;The End Result&lt;/h2&gt;

&lt;p&gt;I don&amp;#39;t often do this, but to demonstrate just how awesome these tests are going to be, here is a final example spec:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'spec_helper'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;describe&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'www.customink.com'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;expects&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;ttl: &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;type: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;value: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'1.2.3.4'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;getting-started&quot;&gt;Getting Started&lt;/h2&gt;

&lt;p&gt;As with any Ruby-based project, there&amp;#39;s some initial setup. Generate a new project and create a &lt;code&gt;Gemfile&lt;/code&gt; with the following content:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:rubygems&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rspec'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'~&amp;gt; 2.11.0'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Don&amp;#39;t forget to run the &lt;code&gt;bundle&lt;/code&gt; command to install the gems:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ bundle
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next, create a folder named &lt;code&gt;spec&lt;/code&gt; in your project directory and then create a &lt;code&gt;spec/spec_helper.rb&lt;/code&gt; file with the following content:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rspec'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'resolv'&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'spec/macros/zones_macro'&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;RSpec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;configure&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tty&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ZonesMacro&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There are a few things to cover here:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;We are requiring &lt;code&gt;resolv&lt;/code&gt;, which is a Ruby 1.9 library for resolving DNS queries (it&amp;#39;s like &lt;code&gt;dig&lt;/code&gt; on steroids). Here is the &lt;a href=&quot;http://ruby-doc.org/stdlib-1.9.3/libdoc/resolv/rdoc/&quot;&gt;official documentation for resolv&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;We require our custom macro - &lt;code&gt;ZonesMacro&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Lastly, we enable &lt;code&gt;tty&lt;/code&gt; so that we get colored output on our CI server and include our &lt;code&gt;ZoneMacro&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;writing-zonemacro&quot;&gt;Writing &lt;code&gt;ZoneMacro&lt;/code&gt;&lt;/h2&gt;

&lt;p&gt;The &lt;code&gt;ZoneMacro&lt;/code&gt; is where the &amp;quot;hardest&amp;quot; of our logic will live. That being said, it&amp;#39;s not very complicated.&lt;/p&gt;

&lt;p&gt;Create the &lt;code&gt;macros/zones_macro.rb&lt;/code&gt; file and start with the &amp;quot;boiler-plate&amp;quot; macro:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;ZonesMacro&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;ClassMethods&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;InstanceMethods&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;included&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;extend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ClassMethods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:include&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;InstanceMethods&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the context of RSpec (no pun intended), &lt;code&gt;ClassMethods&lt;/code&gt; are things directly inside a &lt;code&gt;describe&lt;/code&gt; block, and &lt;code&gt;InstanceMethods&lt;/code&gt; are things inside an &lt;code&gt;it&lt;/code&gt; declaration.&lt;/p&gt;

&lt;p&gt;If you look back at our earlier example, you can see that we actually want &lt;code&gt;ClassMethods&lt;/code&gt; for our &lt;code&gt;expects&lt;/code&gt; method:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;expects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expected&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{})&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;matched_records&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;records&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;upcase&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ttl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;expected&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:ttl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;include?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expected&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;upcase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;should have the correct DNS entry&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;matched_records&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;should_not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;be_empty&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So what is &lt;code&gt;records&lt;/code&gt;? Well, we need to define it. Because &lt;code&gt;records&lt;/code&gt; exists outside an &lt;code&gt;it&lt;/code&gt; block, the declaration needs to go inside the &lt;code&gt;ClassMethods&lt;/code&gt; module:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;records&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@records&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;begin&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;Timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;Resolv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DNS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getresources&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;display_name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Resolv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DNS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Resource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;IN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ANY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;rescue&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;
    &lt;span class=&quot;vg&quot;&gt;$stderr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Connection timed out for &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;display_name&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We add the &lt;code&gt;Timeout::timeout&lt;/code&gt; so that resources that cannot be reached timeout in a reasonable amount of time.&lt;/p&gt;

&lt;p&gt;Most of that is directly out of the &lt;a href=&quot;http://ruby-doc.org/stdlib-1.9.3/libdoc/resolv/rdoc/&quot;&gt;Resolv Documentation&lt;/a&gt;, except for the &lt;code&gt;self.class.display_name&lt;/code&gt;. This is provided by RSpec, and it&amp;#39;s the value of the &lt;code&gt;describe&lt;/code&gt; block.&lt;/p&gt;

&lt;p&gt;In other words:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;describe&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'This is the self.display_name'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;Resolv&lt;/code&gt; block will make a DNS query to the &lt;code&gt;display_name&lt;/code&gt;. Notice that we are returning an array of resources. You may also see a method called &lt;code&gt;getresource&lt;/code&gt; (singular) for &lt;code&gt;Resolve::DNS&lt;/code&gt; that returns only the first resource. If you have multiple records for the same key (like an A record and an MX record), your tests will not pass, because &lt;code&gt;getresource&lt;/code&gt; just grabs the first record it sees...&lt;/p&gt;

&lt;p&gt;We are also searching for a &lt;code&gt;resource_type&lt;/code&gt; of &lt;code&gt;ANY&lt;/code&gt;. This doesn&amp;#39;t really matter because we are caching the result, and we are also already checking the type of the record returned.&lt;/p&gt;

&lt;p&gt;If you run this right now, you&amp;#39;ll get a lot of &lt;code&gt;undefined method&lt;/code&gt; errors. That&amp;#39;s because I also monkey-patched &lt;code&gt;Resolv::DNS::Resource&lt;/code&gt; to return normalized data:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Resolv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;DNS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Resource&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;value&lt;/span&gt;
    &lt;span class=&quot;sx&quot;&gt;%w(address data exchange name target)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;collect&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;upcase&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;respond_to?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;compact&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;type&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'::'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;upcase&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;dynamically-writing-tests&quot;&gt;Dynamically Writing Tests&lt;/h2&gt;

&lt;p&gt;We have 500+ DNS records, so manually writing all of those tests was also a daunting task. Of course, I scripted it. You can get an export file of your current configuration from your DNS provider. The format may vary, but here&amp;#39;s the simple little script I wrote to automatically generate all our tests.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# `config` is the existing DNS configuration file&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;readlines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/Users/svargo/Desktop/config'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# For each line, split on a space, remove the drunk, and&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# create a hash for easy access.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;collect&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;split&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;strip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;chomp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:ttl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# For each record, write out the spec and expected results.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# I had to massage some data using `gsub` because of inconsistent formatting.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOH&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
require 'spec_helper'

describe '&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;' do
  expects ttl: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:ttl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;, type: '&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;', value: '&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;gsub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'&quot;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;'
end
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOH&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;# Write the spec to the proper file&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;spec/units/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;_spec.rb&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'w'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Needless to say, this saved a significant amount of time and energy.&lt;/p&gt;

&lt;h2 id=&quot;add-to-ci&quot;&gt;Add to CI&lt;/h2&gt;

&lt;p&gt;I created a quick Jenkins job for these specs and set them to run every 15 minutes. Super simple and reliable CI for our DNS entires. Now, we can easily spot outdated records or problem servers.&lt;/p&gt;

&lt;h2 id=&quot;a-question-of-completeness&quot;&gt;A Question of Completeness?&lt;/h2&gt;

&lt;dl&gt;
  &lt;dt&gt;Q: Is this a complete solution?&lt;/dt&gt;
  &lt;dd&gt;A: No&lt;/dd&gt;
&lt;/dl&gt;

&lt;p&gt;&lt;br&gt;&lt;/p&gt;

&lt;p&gt;While this solution is expandable, it&amp;#39;s far from complete. That being said, do you really require 100% coverage for all your DNS entires? It was very useful to have 100% coverage here, because we were migrating from our existing provider entirely. If you are writing these specs as &amp;quot;health checks&amp;quot;, you will probably have significantly less...&lt;/p&gt;

&lt;p&gt;This is definitely not a replacement for solutions like New Relic or other monitoring software, but it&amp;#39;s an excellent homegrown solution in under 2 hours.&lt;/p&gt;

&lt;h2 id=&quot;disclaimer&quot;&gt;Disclaimer&lt;/h2&gt;

&lt;p&gt;This post was written using Ruby 1.9.3. It should work on Ruby 1.9.x, but I guarantee it won&amp;#39;t work on 1.8.7.&lt;/p&gt;
</description>
        <pubDate>Tue, 31 Jul 2012 01:31:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/07/31/easily-test-your-dns/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/07/31/easily-test-your-dns/</guid>
      </item>
    
      <item>
        <title>Provision your laptop with Chef: Part 2</title>
        <description>&lt;p&gt;In &lt;a href=&quot;/blog/2012/05/28/provision-your-laptop-with-chef-part-1/&quot;&gt;Provision your laptop with Chef: Part 1&lt;/a&gt;, I showed you how to setup your free Opscode Chef account and register your local development machine as a client. In Part 2, we will explore a few handy ways to manage and provision your new or existing laptop with Chef. Whether it&amp;#39;s creating users, installing applications, or always having the perfect desktop background, Chef can make it happen!&lt;/p&gt;

&lt;p&gt;Part 2 of this series assumes that you have successfully completed all of the steps in &lt;a href=&quot;http://technology.customink.com/blog/2012/05/28/provision-your-laptop-with-chef-part-1/&quot;&gt;Part 1&lt;/a&gt;. If you have not yet completed Part I, please do so before continuing.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;overview&quot;&gt;Overview&lt;/h2&gt;

&lt;p&gt;In this blog post, we will be using an Ubuntu 12.04 Precise desktop environment. These steps may be tweaked to work on Windows or Mac (mainly just changing the file paths). You could even bake conditional logic into your cookbooks so that it will work on all your laptops, Mac, PC, Linux or otherwise!&lt;/p&gt;

&lt;p&gt;My local chef repository lives at &lt;code&gt;~/Development/chef-repo&lt;/code&gt;. I will use this path throughout this blog post. You do not need to have your chef-repo in the same place - just replace my path with yours where appropriate.&lt;/p&gt;

&lt;h2 id=&quot;starting-small&quot;&gt;Starting Small&lt;/h2&gt;

&lt;p&gt;To get your feet wet, we will create a cookbook for a very simplistic task - setting the Desktop background.&lt;/p&gt;

&lt;p&gt;Before beginning anything with Chef, you should check the &lt;a href=&quot;http://community.opscode.com&quot;&gt;Chef Community Site&lt;/a&gt; - someone may have already done the hard work for you! Even if you can&amp;#39;t find exactly what you are looking for, explore a little. You may find small syntax shortcuts or new ways to solve problems from looking at various cookbooks.&lt;/p&gt;

&lt;p&gt;I did a quick search on the Chef Community Site for &amp;quot;desktop&amp;quot; and &amp;quot;background&amp;quot; and it doesn&amp;#39;t look like there&amp;#39;s anything we can use there, so we&amp;#39;ll have to build our own.&lt;/p&gt;

&lt;p&gt;First, go into your local chef repository:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ cd ~/Development/chef-repo/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and make sure you have a clean working directory:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ git status
# On branch master
nothing to commit (working directory clean)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you have unstaged commits, make sure to either stash or commit them before continuing.&lt;/p&gt;

&lt;p&gt;Before we create our first cookbook, let&amp;#39;s add a couple of things to our &lt;code&gt;knife.rb&lt;/code&gt; file to make the process go a little more smoothly. Open up your &lt;code&gt;knife.rb&lt;/code&gt; file and add the following two lines to the end of the file replacing the sample values with your information. (NOTE:  if you set-up your chef-repo like the &lt;a href=&quot;(/blog/2012/05/28/provision-your-laptop-with-chef-part-1/)&quot;&gt;previous post&lt;/a&gt;, you&amp;#39;ll find the file at &lt;code&gt;~/Development/chef-repo/.chef/knife.rb&lt;/code&gt;.)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;cookbook_email      'email@example.com'
cookbook_copyright  'Your Name'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With these new knife values, we&amp;#39;re ready to create our first cookbook. This cookbook will manage our Desktop background. If we were creating a cookbook that installed a particular piece of software, like ImageMagick, convention would dictate that we name it after that software. However, in this case, we are free to choose any name we&amp;#39;d like. You could be boring and pick something like &amp;quot;desktop-background&amp;quot;, but that&amp;#39;s no fun. Let&amp;#39;s name our cookbook &amp;quot;major-tom&amp;quot; (background-control =&amp;gt; ground-control =&amp;gt; major-tom for those following along at home). Use the &lt;code&gt;knife cookbook create&lt;/code&gt; command to generate the cookbook skeleton:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ knife cookbook create major-tom
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; You may need to prefix the command with &lt;code&gt;bundle exec&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;You should see output like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;** Creating cookbook major-tom
** Creating README for cookbook: major-tom
** Creating metadata for cookbook: major-tom
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Take a moment to explore the new cookbook. You should have a directory structure like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;major-tom
|_attributes
|_definitions
|_files
  |_default
|_libraries
|_providers
|_recipes
  |_default.rb
|_resources
|_templates
  |_default
|_metadata.rb
|_README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;strong&gt;first&lt;/strong&gt; thing you should do before continuing is to create a &lt;code&gt;CHANGELOG.md&lt;/code&gt; file in the cookbook root. This will be unnecessary if &lt;a href=&quot;https://github.com/opscode/chef/pull/345&quot;&gt;this pull request&lt;/a&gt; is merged. Add an entry indicating our initial release:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;CHANGELOG
=========
### v0.0.1
- Initial release
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next, we need to fix up the &lt;code&gt;metadata.rb&lt;/code&gt;. Update the description to include a bit more detail. Everything else should be OK.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;maintainer&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Your Name'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;maintainer_email&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'email@example.com'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;license&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'All rights reserved'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;description&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Installs/Configures desktop background images'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;long_description&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;IO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dirname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;__FILE__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'README.md'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;version&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0.0.1'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In this scenario, let&amp;#39;s imagine that we want to download our desktop image from the Internet. We will use the &lt;a href=&quot;http://wiki.opscode.com/display/chef/Resources#Resources-RemoteFile&quot;&gt;Remote File&lt;/a&gt; resource to fetch the remote image:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# recipes/default.rb&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;remote_file&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:file_cache_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/background.png&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice how we &lt;strong&gt;don&amp;#39;t&lt;/strong&gt; hardcode the temporary path. You may be tempted to do something like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;remote_file&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/tmp/background.png'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;but this is generally considered bad practice and will not pass &lt;a href=&quot;http://acrmp.github.com/foodcritic/#FC013&quot;&gt;foodcritic&lt;/a&gt; tests. Use Chef&amp;#39;s &lt;code&gt;:file_cache_path&lt;/code&gt; configuration option instead. This is especially important when developing a community cookbook.&lt;/p&gt;

&lt;p&gt;Next we need to give the background image a &lt;code&gt;source&lt;/code&gt; url. For copyright reasons, I&amp;#39;m going to use a &lt;a href=&quot;http://placehold.it&quot;&gt;placehold.it&lt;/a&gt; to generate our image. You could use any image you&amp;#39;d like, including one directly inside the cookbook (you would need to use the &lt;code&gt;cookbook_file&lt;/code&gt; resource instead of &lt;code&gt;remote_file&lt;/code&gt; in that case). I have a high resolution display, so I want a background image 1920x1080 (HD):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;remote_file&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:file_cache_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/background.png&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'http://placehold.it/1920x1080'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This declaration says:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;quot;Hey Chef, go out to &lt;a href=&quot;http://placehold.it/1920x1080&quot;&gt;http://placehold.it/1920x1080&lt;/a&gt; and download
and save whatever you get to your file cache path. kthxbye.&amp;quot;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;If you&amp;#39;re a super-nerd, this declaration says&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /tmp &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; wget &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; background.png http://placehold.it/1920x1080&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now that we have the remote file downloaded to the system, we need to programatically set it as the background. In your head, you may think:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Okay, I need to right-click on that image and click on the &lt;code&gt;Set as Desktop Background&lt;/code&gt; option...&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Unfortunately, Chef doesn&amp;#39;t work quite that way :). All the commands you run are executed in the context of a command line or terminal. We need to find a way to use the command line to set the Desktop background. Fortunately, most of the GUI commands on your machine actually use underling command line tools to execute. A quick Google search turned up &lt;a href=&quot;http://askubuntu.com/questions/51564/setting-desktop-wallpaper-via-terminal&quot;&gt;Setting Desktop Wallpaper via Terminal&lt;/a&gt; and &lt;a href=&quot;http://askubuntu.com/questions/50019/how-do-i-change-the-desktop-background-from-command-line&quot;&gt;How do I change the desktop background from command line?&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It turns out we need to do something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;gconftool-2 &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; string &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; /desktop/gnome/background/picture_filename &amp;lt;path&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Because this is a bash command, we could use the &lt;code&gt;Bash&lt;/code&gt; resource. However, I like the &lt;code&gt;execute&lt;/code&gt; resource, because it is more Rubyesque in my opinion:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;execute&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'set Desktop background'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;gconftool-2 -t string -s /desktop/gnome/background/picture_filename &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:file_cache_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/background.png&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:nothing&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice how I set the &lt;code&gt;action :nothing&lt;/code&gt;. This may seem strange. Don&amp;#39;t we run this code to run? (Note, the default action is &lt;code&gt;:run&lt;/code&gt;). Well, we only want to run this command once the &lt;code&gt;remote_file&lt;/code&gt; has completed successfully. Otherwise, this command will fail. We need to modify our &lt;code&gt;remote_file&lt;/code&gt; declaration to execute this command:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;remote_file&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:file_cache_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/background.png&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'http://placehold.it/1920x1080'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;notifies&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'execute[set Desktop background]'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:immediately&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This now says:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;quot;Hey Chef, go out to &lt;a href=&quot;http://placehold.it/1920x1080&quot;&gt;http://placehold.it/1920x1080&lt;/a&gt; and download
and save whatever you get to your file cache path.
Then tell &lt;code&gt;set Desktop background&lt;/code&gt; to run immediately.&amp;quot;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This ensures that:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;The execute command won&amp;#39;t be run before the remote file is downloaded.&lt;/li&gt;
&lt;li&gt;The execute command only executes if the remote file was downloaded successfully.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now we need to add this recipe to the node&amp;#39;s &lt;code&gt;run_list&lt;/code&gt;. I won&amp;#39;t go into too much detail here. A quick solution is to do something like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;knife node edit NODE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the &lt;code&gt;run_list&lt;/code&gt; part of the JSON file, add &lt;code&gt;recipe[major-tom]&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;NODE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;chef_environment&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;_default&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;run_list&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;recipe[major-tom]&quot;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Save and close this file so that it is updated on the Chef Server.&lt;/p&gt;

&lt;p&gt;Upload the cookbook (&lt;code&gt;knife cookbook upload major-tom&lt;/code&gt;) and run &lt;code&gt;sudo chef-client&lt;/code&gt;. You should see that the command completes successfully. However, your Desktop background may not change. Why? Well, by default, Chef runs as the root user. We just set the root user&amp;#39;s background, but we wanted to set our own! After a bit of research, it turns out that we need to set the &lt;code&gt;user&lt;/code&gt; attribute on the &lt;code&gt;execute&lt;/code&gt; block to tell Chef which user to run the command as:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;execute&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'set Desktop background'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;gconftool-2 -t string -s /desktop/gnome/background/picture_filename &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:file_cache_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/background.png&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'svargo'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# replace with your user id&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:nothing&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But what if you wanted to set the Desktop background for &lt;strong&gt;all&lt;/strong&gt; the users? Maybe you operate in an Enterprise that requires the company logo be on the Desktop background. Or maybe you just have OCD and like everything to be the same. Either way, there are a few possible solutions for accomplishing this. Let&amp;#39;s look at one way to do this.&lt;/p&gt;

&lt;h4 id=&quot;using-node-etc-password&quot;&gt;Using &lt;code&gt;node[&amp;#39;etc&amp;#39;][&amp;#39;password&amp;#39;]&lt;/code&gt;&lt;/h4&gt;

&lt;p&gt;You can iterate over all the local accounts on a given machine using the &lt;code&gt;node[&amp;#39;etc&amp;#39;][&amp;#39;passwd&amp;#39;]&lt;/code&gt; hash. It looks like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'etc'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'passwd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;execute&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'set Desktop background'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;gconftool-2 -t string -s /desktop/gnome/background/picture_filename &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:file_cache_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/background.png&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:nothing&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;only_if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'uid'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here, we iterate over each user and execute the command once for each user. Notice the &lt;code&gt;only_if&lt;/code&gt; block as well. This tells Chef to only run for non-system accounts (&amp;gt; 1000).&lt;/p&gt;

&lt;p&gt;Upload the cookbook and run &lt;code&gt;sudo chef-client&lt;/code&gt; again and you should see you Desktop background change. Depending on your machine, you may need to logout and login for the changes to take effect.&lt;/p&gt;

&lt;p&gt;For those of you who cheated and read ahead, here&amp;#39;s the full recipe:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Cookbook Name:: major-tom&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Recipe:: default&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Copyright 2012, Your Name&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# All rights reserved - Do Not Redistribute&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Download the remote file&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;remote_file&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:file_cache_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/background.png&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'http://placehold.it/1920x1080'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;notifies&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'execute[set Desktop background]'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:immediately&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Set the Desktop background for each user&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'etc'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'passwd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;execute&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'set Desktop background'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;gconftool-2 -t string -s /desktop/gnome/background/picture_filename &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:file_cache_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/background.png&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:nothing&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;only_if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'uid'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;wrap-up&quot;&gt;Wrap Up&lt;/h4&gt;

&lt;p&gt;There&amp;#39;s definitely room for improvement on this cookbook. We could create attributes and allow the end user to customize it further. However, for the purpose of this tutorial, we are done working with this cookbook.&lt;/p&gt;

&lt;h2 id=&quot;diving-head-first&quot;&gt;Diving Head First&lt;/h2&gt;

&lt;p&gt;In this next step, I&amp;#39;m going to switch over to a Mac because I personally use a Mac. Before beginning, let&amp;#39;s take a step back and ask ourselves:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;quot;What should I configure?&amp;quot;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;This question has potentially endless number of answers and all depends on how much time you want to spend capturing your current configuration in Chef. For this tutorial, I&amp;#39;m going to do the following:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Install the following packages:

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;apple-gcc42&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;aspell&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;bash-completion&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;elasticsearch&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;erlang&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ghostscript&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;imagemagick&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;jasper&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mongodb&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mysql&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;node&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;postgresql&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;qt&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;rabbitmq&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;readline&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;redis&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;solr&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;wget&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Clone a bunch of git repositories&lt;/li&gt;
&lt;li&gt;Install my dotfiles&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This is a very basic start and should cover many helpful topics for when you begin provisioning your own laptop.&lt;/p&gt;

&lt;p&gt;Just as important as before, the cookbook name should be descriptive and fun. I&amp;#39;m going to call this cookbook &lt;code&gt;sethinator&lt;/code&gt;, because my name is Seth, and I&amp;#39;m &amp;quot;Sethinating&amp;quot; my laptop.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ knife cookbook create sethinator
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Be sure to change the &lt;code&gt;metadata.rb&lt;/code&gt;, add a &lt;code&gt;CHANGELOG.md&lt;/code&gt;, and everything else we did in the &amp;quot;Getting your Feet Wet&amp;quot;.&lt;/p&gt;

&lt;h3 id=&quot;installing-packages&quot;&gt;Installing packages&lt;/h3&gt;

&lt;p&gt;As you already know, there is no &amp;quot;built-in&amp;quot; package manager for Mac. Instead, there are two popular alternatives - homebrew and MacPorts. I will be using homebrew in these examples.&lt;/p&gt;

&lt;p&gt;First, we need to tell Chef to use homebrew as the package manager:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;$ knife cookbook site install homebrew
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will download the homebrew cookbook from the &lt;a href=&quot;http://community.opscode.com/cookbooks/homebrew&quot;&gt;community site&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;We should also list this cookbook as a &lt;a href=&quot;http://wiki.opscode.com/display/chef/Cookbooks#Cookbooks-CookbookDependencies&quot;&gt;dependency&lt;/a&gt;. Open up the &lt;code&gt;metadata.rb&lt;/code&gt; and add the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# metadata.rb&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;depends&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'homebrew'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This way, if we choose to publish the cookbook to the community site, the homebrew cookbook will automatically be downloaded and installed with this cookbook.&lt;/p&gt;

&lt;p&gt;To keep things organized, I&amp;#39;m going to create a separate recipe for each of the tasks above. Create a new recipe named &lt;code&gt;packages.rb&lt;/code&gt; and add the following content:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Cookbook Name:: sethinator&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Recipe:: packages&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Copyright 2012, Seth Vargo&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# All rights reserved - Do Not Redistribute&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Configures and installs the following packages using homebrew:&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - apple-gcc42&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - aspell&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - bash-completion&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - elasticsearch&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - erlang&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - ghostscript&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - git&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - imagemagick&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - jasper&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - mongodb&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - mysql&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - node&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - postgresql&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - qt&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - rabbitmq&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - readline&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - redis&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - solr&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#   - wget&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Include homebrew as the default package manager.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# (default is MacPorts)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;include_recipe&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'homebrew'&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Install each of the packages using the `package` resource&lt;/span&gt;
&lt;span class=&quot;sx&quot;&gt;%w(apple-gcc42 aspell bash-completion elasticsearch erlang ghostscript git imagemagick jasper mongodb mysql node postgresql qt rabbitmq readline redis solr wget)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;package&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;package&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;That&amp;#39;s it!&lt;/strong&gt; See how simple that was?&lt;/p&gt;

&lt;h3 id=&quot;cloning-git-repositories&quot;&gt;Cloning git repositories&lt;/h3&gt;

&lt;p&gt;I have a very particular setup for my development workflow. Additionally, I regularly use a bunch of repositories. I could manually clone them, but why would I do that when I could manage them with Chef?&lt;/p&gt;

&lt;p&gt;Create another cookbook named &amp;#39;git.rb&amp;#39; in the recipes directory and add the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Cookbook Name:: sethinator&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Recipe:: git&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Copyright 2012, Seth Vargo&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# All rights reserved - Do Not Redistribute&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Creates the ~/Development directory and installs git repositories&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# specified as attributes on the node.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'etc'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'passwd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userdata&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# Create the ~/Development directory&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;directory&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'dir'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/Development&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;owner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'gid'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0755'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;not_if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'dir'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'dir'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/var/empty'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;# Clone each git repository from the node's attributes&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# We are using the `checkout` action because it will only checkout the&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# repository if it is not already there. We don't want a Chef run overwriting&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;# local changes, but we do want an initial clone, so this is the best option.&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'sethinator'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'git'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'dir'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;repository&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'name'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;repository&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repository&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'url'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;reference&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repository&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'reference'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'master'&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;revision&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;repository&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'revision'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'HEAD'&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'gid'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0755'&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:checkout&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Slightly more complex than the last example, but still just a few lines of code. Notice that we haven&amp;#39;t defined the git repositories inside the recipe. Instead they are attributes on the node itself. Create the default attributes file in &lt;code&gt;attributes/default.rb&lt;/code&gt; and this is where I&amp;#39;m going to add all my repositories like so:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# attributes/default.rb&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'sethinator'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'git'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'chef-hosted'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git@github.com:customink/...'&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'autotomy'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git@github.com:customink/...'&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'knife-spork'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git@github.com:jonlives/knife-spork'&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I&amp;#39;ve suppressed the URLs to our private repositories, but you get the general idea. Notice there are additional options such as &lt;code&gt;reference&lt;/code&gt; and &lt;code&gt;revision&lt;/code&gt; that I have left out because I&amp;#39;m okay with their default values. If you use another CVS such as SVN, you may want to support additional attributes and tweak accordingly. Specifying the attribute values in the cookbook works but there are lots of other places that are more appropriate for managing these attributes. Checkout the &lt;a href=&quot;http://wiki.opscode.com/display/chef/Attributes&quot;&gt;Attributes page on the Opscode wiki&lt;/a&gt; for more details.&lt;/p&gt;

&lt;h3 id=&quot;installing-dotfiles&quot;&gt;Installing dotfiles&lt;/h3&gt;

&lt;p&gt;Since I spend 90% of my time working in Terminal, I have a small &lt;a href=&quot;https://github.com/sethvargo/dotfiles&quot;&gt;collection of dotfiles&lt;/a&gt; that I&amp;#39;ve accumulated over the years. Everything from my bash prompt to RVM setup.&lt;/p&gt;

&lt;p&gt;First, create a new cookbook named &lt;code&gt;dotfiles.rb&lt;/code&gt; and add the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Cookbook Name:: sethinator&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Recipe:: dotfiles&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Copyright 2012, Seth Vargo&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# All rights reserved - Do Not Redistribute&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Clone the remote dotfiles&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Again, only use :checkout because we don't want to clone on future attempts.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# We also don't plan on working with this repository, so we don't need the entire&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# git history. Setting the depth to `1` makes a shallow clone. We use the git://&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# url here because this computer (assuming it's new) does not have access to&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# clone using its public key yet.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Lastly, we only want to clone these if we haven't already installed our dotfiles.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# There are a few ways to do this, such as checking for the existence of a file,&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# creating a file, checking the contents of a file, etc. Here we are just going to check&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# and see if the `.gitconfig` file exists. That isn't created automatically with a new&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# user, so it's a reasonable file to choose.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:file_cache_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/dotfiles&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git://github.com/sethvargo/dotfiles.git'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'svargo'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;gid&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'wheel'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0755'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:checkout&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;depth&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;not_if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;exists?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/Users/svargo/.gitconfig'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;notifies&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'execute[install dotfiles]'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Run the dotfile rake task to install the files&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;gem&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rake'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;execute&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'install dotfiles'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cwd&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:file_cache_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/dotfiles&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;command&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rake install'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:nothing&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That rake task will copy all the dotfiles into their proper locations. That&amp;#39;s it!&lt;/p&gt;

&lt;h3 id=&quot;put-it-all-together&quot;&gt;Put it all together&lt;/h3&gt;

&lt;p&gt;Open up the default recipe (&lt;code&gt;recipes/default.rb&lt;/code&gt;) and add the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Cookbook Name:: sethinator&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Recipe:: default&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# Copyright 2012, Seth Vargo&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# All rights reserved - Do Not Redistribute&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;include_recipe&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sethinator::packages'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;include_recipe&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sethinator::git'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;include_recipe&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sethinator::dotfiles'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now add &lt;code&gt;sethinator&lt;/code&gt; (or whatever you called your cookbook) to your node&amp;#39;s &lt;code&gt;run_list&lt;/code&gt; and run &lt;code&gt;sudo chef-client&lt;/code&gt;. You should have your bash prompt, configuration, aliases, and more right at your fingertips!&lt;/p&gt;

&lt;p&gt;If you&amp;#39;re looking for a more complete and customizable solution that you don&amp;#39;t need to write from scratch, head on over to &lt;a href=&quot;http://jtimberman.housepub.org/blog/2012/07/29/os-x-workstation-management-with-chef/&quot;&gt;Joshua Timberman&amp;#39;s blog post&lt;/a&gt;. He goes into much more detail about MacOSX provisioning.&lt;/p&gt;

&lt;h2 id=&quot;caveats&quot;&gt;Caveats&lt;/h2&gt;

&lt;h3 id=&quot;croning-chef&quot;&gt;Croning Chef&lt;/h3&gt;

&lt;p&gt;At &lt;a href=&quot;http://www.customink.com&quot;&gt;CustomInk&lt;/a&gt;, we create a cron task to run Chef at a regular interval (on a randomly generated seed). This is great because we need only update a cookbook and all our servers will receive the change without having to touch them. However, when provisioning your local laptop, I do &lt;strong&gt;not&lt;/strong&gt; recommend setting up a cron task for Chef. Because you are using the same machine for both writing Chef stuff and running Chef stuff, you could potentially brick your computer if you aren&amp;#39;t careful. Because of this, I recommend running &lt;code&gt;chef-client&lt;/code&gt; manually on your local machine.&lt;/p&gt;

&lt;h3 id=&quot;development&quot;&gt;Development&lt;/h3&gt;

&lt;p&gt;Along similar lines as Croning Chef, I do not recommend that you &amp;quot;test&amp;quot; cookbooks on your local machine. Instead, replicate your current environment in a Virtual Machine. There are great tools out there like &lt;a href=&quot;https://www.virtualbox.org/&quot;&gt;Oracle&amp;#39;s VirtualBox&lt;/a&gt; + &lt;a href=&quot;http://vagrantup.com&quot;&gt;Vagrant&lt;/a&gt;. Run your cookbooks against a machine that you can easily snapshot and restore should something go awry, before pushing to &amp;quot;production&amp;quot; (your local machine).&lt;/p&gt;

&lt;h3 id=&quot;workflow&quot;&gt;Workflow&lt;/h3&gt;

&lt;p&gt;If this is your first time using Chef, the workflow will feel awkward. There&amp;#39;s a major disconnect between what is on your local box, what is on your CVS, and what is on the Chef Server (Opscode). Even if you are using semantic versioning, you may have different cookbook versions in different environments. First of all, don&amp;#39;t worry. Chef is a big piece of software, and you can&amp;#39;t expect to master it in a weekend. Secondly, there are a few tools that help you manage your workflow.&lt;/p&gt;

&lt;h5 id=&quot;opscode-workflow-wiki&quot;&gt;&lt;a href=&quot;http://wiki.opscode.com/display/chef/Cookbook+Workflows&quot;&gt;Opscode Workflow Wiki&lt;/a&gt;&lt;/h5&gt;

&lt;p&gt;The official Opscode wiki detailing various workflow implementations.&lt;/p&gt;

&lt;h5 id=&quot;knife-spork&quot;&gt;&lt;a href=&quot;https://github.com/jonlives/knife-spork&quot;&gt;knife-spork&lt;/a&gt;&lt;/h5&gt;

&lt;p&gt;Created by &lt;a href=&quot;https://github.com/jonlives&quot;&gt;Jon Cowie&lt;/a&gt; over at &lt;a href=&quot;http://www.etsy.com/&quot;&gt;Etsy&lt;/a&gt;, KnifeSpork makes bumping, uploading, and sharing cookbooks a breeze, especially in collaborative environments.&lt;/p&gt;

&lt;h5 id=&quot;librarian&quot;&gt;&lt;a href=&quot;https://github.com/applicationsonline/librarian&quot;&gt;Librarian&lt;/a&gt;&lt;/h5&gt;

&lt;p&gt;Librarian is a tool for managing cookbooks. If you&amp;#39;re familiar with Ruby, it&amp;#39;s the equivalent of a &lt;code&gt;Gemfile&lt;/code&gt;.&lt;/p&gt;

&lt;h5 id=&quot;berkshelf&quot;&gt;&lt;a href=&quot;https://github.com/RiotGames/berkshelf&quot;&gt;Berkshelf&lt;/a&gt;&lt;/h5&gt;

&lt;p&gt;Berkshelf allows you to manage a cookbook or an application&amp;#39;s cookbook dependencies. Check-out this &lt;a href=&quot;http://christian-trabold.de/librarian-chef-vs-berkshelf&quot;&gt;comparison of Librarian and Berkshelf&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;testing&quot;&gt;Testing&lt;/h3&gt;

&lt;p&gt;I will not go into cookbook testing extensively here, but it&amp;#39;s very important that your cookbooks follow some standard. At the time of this writing, there are a few solutions for testing cookbooks - &lt;a href=&quot;https://github.com/acrmp/chefspec&quot;&gt;chefspec&lt;/a&gt;, &lt;a href=&quot;http://www.cucumber-chef.org/&quot;&gt;cucumber-chef&lt;/a&gt;, &lt;a href=&quot;https://github.com/calavera/minitest-chef-handler&quot;&gt;minitest-chef-handler&lt;/a&gt;, and &lt;a href=&quot;https://github.com/calavera/rspec-chef&quot;&gt;rspec-chef&lt;/a&gt; – and they each have their own distinct advantages. At the very least, you should run &lt;code&gt;knife cookbook test&lt;/code&gt; and &lt;code&gt;foodcritic&lt;/code&gt; against all your cookbooks. Nathen Harvey covered this in his &lt;a href=&quot;http://technology.customink.com/blog/2012/07/06/mvt-knife-test-and-travisci/&quot;&gt;MVT: knife test and TravisCI&lt;/a&gt; blog post.&lt;/p&gt;

&lt;p&gt;When running foodcritic, I recommend adding both &lt;a href=&quot;https://github.com/customink-webops/foodcritic-rules&quot;&gt;CustomInk foodcritic rules&lt;/a&gt; and &lt;a href=&quot;https://github.com/etsy/foodcritic-rules&quot;&gt;Etsy foodcritic rules&lt;/a&gt;. Clone the repositories (or use submodules) into a &lt;code&gt;foodcritic&lt;/code&gt; directory in the root of your chef-repo:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot; data-lang=&quot;text&quot;&gt;chef-repo
  |_cookbooks
  |_environments
  ...
  |_foodcritic
    |_customink
    |_etsy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then you can run &lt;code&gt;foodcritic&lt;/code&gt; like so:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;bundle &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;foodcritic &lt;span class=&quot;nt&quot;&gt;-I&lt;/span&gt; foodcritic/&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; cookbooks/COOKBOOK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For more information on the rules provided, see the individual repos.&lt;/p&gt;
</description>
        <pubDate>Mon, 30 Jul 2012 20:43:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/07/30/provision-your-laptop-with-chef-part-2/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/07/30/provision-your-laptop-with-chef-part-2/</guid>
      </item>
    
      <item>
        <title>Stay Cool</title>
        <description>&lt;p&gt;We had a fairly severe production issue the other day.  The kind of issue where you get sick to your stomach as you begin to realize what...just....happened......&lt;/p&gt;

&lt;p&gt;As the issue escalated, news spread and a core group of people took control to work towards a resolution.  The questions were always &amp;quot;what&amp;#39;s happening&amp;quot; and &amp;quot;what&amp;#39;s changed recently&amp;quot; and &amp;quot;what kinds of things might cause this&amp;quot; and never &amp;quot;who deployed last&amp;quot; and &amp;quot;who worked on this code originally&amp;quot;.  It says a lot about a person that can keep their cool and focus on issue resolution instead of blame assignment.  Even when your tired, punchy, and irritated because you can&amp;#39;t figure out exactly what&amp;#39;s going on, keeping your cool is ultimately the key to success.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;It&amp;#39;s really obvious that something is wrong when you see a group of people huddled together all staring intensely at a single monitor and not saying a word.  People instinctively want to ask &amp;quot;what&amp;#39;s wrong?&amp;quot; and the follow up question is usually &amp;quot;do we know who did that?&amp;quot;.  During our ordeal, teammate after teammate approached and offered simple words &amp;quot;Please let me know what I can do to help&amp;quot;.  Developers, product managers, people from other teams - the skillset each person possessed was irrelevant, but the intent was uniform: help fix the problem in whatever way possible.&lt;/p&gt;

&lt;p&gt;When something goes wrong, it doesn&amp;#39;t matter who caused the problem.  Everyone is human, everyone is capable of making the same mistake.  All that matters is &amp;quot;what&amp;quot; is causing the problem.  It&amp;#39;s much easier to find the &amp;quot;what&amp;quot; when your team is calm and working together.  Once you understand the cause of the problem it&amp;#39;s easy to determine a clear plan of action.  With a clear plan of action and a blameless environment, problem resolution is imminent because everyone is ready to help (and not hide).&lt;/p&gt;

&lt;p&gt;We&amp;#39;re not completely out of the weeds just yet, but we understand the issue and we our executing our plan of action.  Tomorrow we&amp;#39;ll conduct a blameless postmortem to help us identify, and further prevent, the root cause of the issue.&lt;/p&gt;

&lt;p&gt;I&amp;#39;m proud to be apart of such a great support system.  I have no gripes about the 16 hours I spent at my computer yesterday because I was helping our customers.  More importantly, I was helping my friends.&lt;/p&gt;
</description>
        <pubDate>Tue, 10 Jul 2012 19:15:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/07/10/stay-cool/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/07/10/stay-cool/</guid>
      </item>
    
      <item>
        <title>MVT: knife test and TravisCI</title>
        <description>&lt;p&gt;In my last post, &lt;a href=&quot;/blog/2012/06/04/mvt-foodcritic-and-travis-ci/&quot;&gt;MVT: Foodcritic and Travis CI&lt;/a&gt; I described the process for having Travis CI look after your cookbooks and run Foodcritic, the cookbook lint tool, on your cookbook after each &lt;code&gt;git push&lt;/code&gt;.  In this post, we&amp;#39;ll iterate on the &amp;quot;Minimum Viable Test&amp;quot; idea by adding in support for knife&amp;#39;s cookbook testing.&lt;/p&gt;

&lt;p&gt;Wait, I&amp;#39;m already running foodcritic, do I really need to run &lt;code&gt;knife cookbook test&lt;/code&gt;, too?&lt;/p&gt;

&lt;p&gt;I&amp;#39;ll use a very simple example to demonstrate that you do.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s create a very basic cookbook:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;knife cookbook create very_basic
&lt;span class=&quot;k&quot;&gt;**&lt;/span&gt; Creating cookbook very_basic
&lt;span class=&quot;k&quot;&gt;**&lt;/span&gt; Creating README &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;cookbook: very_basic
&lt;span class=&quot;k&quot;&gt;**&lt;/span&gt; Creating metadata &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;cookbook: very_basic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next, we&amp;#39;ll write a flawed recipe:&lt;/p&gt;

&lt;p&gt;``` ruby cookbooks/very_basic/recipes/default.rb
package &amp;quot;flawed&amp;quot; do
  action :nothing
end
end&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;
Now, run foodcritic on this cookbook:

``` sh
foodcritic cookbooks/very_basic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Foodcritic doesn&amp;#39;t throw any errors or find any problem with the cookbook.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s try testing it with knife:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;knife cookbook &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;very_basic
checking very_basic
Running syntax check on very_basic
Validating ruby files
FATAL: Cookbook file recipes/default.rb has a ruby syntax error:
FATAL: /Users/nharvey/projects/chef-hosted/.chef/../cookbooks/very_basic/recipes/default.rb:22: syntax error, unexpected keyword_end, expecting &lt;span class=&quot;nv&quot;&gt;$end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;OK, it should now be obvious that &lt;code&gt;knife cookbook test&lt;/code&gt; should be included as part of our MVT.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;To get Travis CI running &lt;code&gt;knife cookbook test&lt;/code&gt; for us, we&amp;#39;ll need to add or update the following files:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;.travis.yml&lt;/li&gt;
&lt;li&gt;Rakefile&lt;/li&gt;
&lt;li&gt;test/.chef/knife.rb&lt;/li&gt;
&lt;li&gt;test/support/Gemfile&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Of course, this assumes you&amp;#39;ve configured your cookbook as described in the &lt;a href=&quot;/blog/2012/06/04/mvt-foodcritic-and-travis-ci/&quot;&gt;previous post&lt;/a&gt;.  Let&amp;#39;s start with the Rakefile.&lt;/p&gt;

&lt;p&gt;``` ruby Rakefile&lt;/p&gt;

&lt;h1 id=&quot;usr-bin-env-rake&quot;&gt;!/usr/bin/env rake&lt;/h1&gt;

&lt;p&gt;desc &amp;quot;Runs knife cookbook test&amp;quot;
task :knife do
  Rake::Task[:prepare_sandbox].execute&lt;/p&gt;

&lt;p&gt;sh &amp;quot;bundle exec knife cookbook test cookbook -c test/.chef/knife.rb -o #{sandbox_path}/../&amp;quot;
end&lt;/p&gt;

&lt;p&gt;task :prepare_sandbox do
  files = %w{*.md *.rb attributes definitions files libraries providers recipes resources templates}&lt;/p&gt;

&lt;p&gt;rm_rf sandbox_path
  mkdir_p sandbox_path
   cp_r Dir.glob(&amp;quot;{#{files.join(&amp;#39;,&amp;#39;)}}&amp;quot;), sandbox_path
end&lt;/p&gt;

&lt;p&gt;private
def sandbox_path
  File.join(File.dirname(&lt;strong&gt;FILE&lt;/strong&gt;), %w(tmp cookbooks cookbook))
end&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;
In the file snippet above, I've only included the parts that are relevant for getting knife working.  I'll include the full source of the Rakefile at the end of the article.

Next, let's add this rake task to our .travis.yml file.

``` ruby .travis.yml
language: ruby
gemfile:
   - test/support/Gemfile
rvm:
  - 1.9.2
  - 1.9.3
script:
  - bundle exec rake knife
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To successfully run the knife command, Travis CI will need a very minimal Chef configuration.&lt;/p&gt;

&lt;p&gt;``` ruby test/.chef/knife.rb
cache_type &amp;#39;BasicFile&amp;#39;
cache_options(:path =&amp;gt; &amp;quot;#{ENV[&amp;#39;HOME&amp;#39;]}/.chef/checksums&amp;quot;)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;
And, of course, we'll need to add Chef to our Gemfile.  Be sure to specify a modern version as Travis CI will use 0.8.10 by default (at the time of this writing).

``` ruby test/support/Gemfile
source &quot;https://rubygems.org&quot;

gem 'rake'
gem 'chef', '~&amp;gt; 10.12.0'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That&amp;#39;s it.  On your next &lt;code&gt;git push&lt;/code&gt; Travis CI should run &lt;code&gt;knife cookbook test&lt;/code&gt; on your cookbook.&lt;/p&gt;

&lt;h2 id=&quot;running-locally&quot;&gt;Running locally&lt;/h2&gt;

&lt;p&gt;To run the rake tasks locally, you&amp;#39;ll need to tell bundler where the Gemfile is, or you&amp;#39;ll need to move it to the root directory of your cookbook and update .travis.yml appropriately.  Use the following command to run your tests locally:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;BUNDLE_GEMFILE=test/support/Gemfile rake knife&lt;/code&gt;
&lt;code&gt;BUNDLE_GEMFILE=test/support/Gemfile rake foodcritic&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;full-source-code&quot;&gt;Full source code&lt;/h2&gt;

&lt;p&gt;You can checkout this &lt;a href=&quot;https://github.com/customink-webops/percona-install/compare/03b9446...d423b14&quot;&gt;Github compare view&lt;/a&gt; to see the changes made to the code from the &lt;a href=&quot;/blog/2012/06/04/mvt-foodcritic-and-travis-ci/&quot;&gt;previous post&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;``` ruby test/.chef/knife.rb
cache_type &amp;#39;BasicFile&amp;#39;
cache_options(:path =&amp;gt; &amp;quot;#{ENV[&amp;#39;HOME&amp;#39;]}/.chef/checksums&amp;quot;)&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;
``` ruby .travis.yml
language: ruby
gemfile:
   - test/support/Gemfile
rvm:
  - 1.9.2
  - 1.9.3
script:
  - bundle exec rake knife
  - bundle exec rake foodcritic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The Rakefile was refactored a bit since the previous post:&lt;/p&gt;

&lt;p&gt;``` ruby Rakefile&lt;/p&gt;

&lt;h1 id=&quot;usr-bin-env-rake&quot;&gt;!/usr/bin/env rake&lt;/h1&gt;

&lt;p&gt;task :default =&amp;gt; &amp;#39;foodcritic&amp;#39;&lt;/p&gt;

&lt;p&gt;desc &amp;quot;Runs foodcritic linter&amp;quot;
task :foodcritic do
  Rake::Task[:prepare_sandbox].execute&lt;/p&gt;

&lt;p&gt;if Gem::Version.new(&amp;quot;1.9.2&amp;quot;) &amp;lt;= Gem::Version.new(RUBY_VERSION.dup)
    sh &amp;quot;foodcritic -f any #{sandbox_path}&amp;quot;
  else
    puts &amp;quot;WARN: foodcritic run is skipped as Ruby #{RUBY_VERSION} is &amp;lt; 1.9.2.&amp;quot;
  end
end&lt;/p&gt;

&lt;p&gt;desc &amp;quot;Runs knife cookbook test&amp;quot;
task :knife do
  Rake::Task[:prepare_sandbox].execute&lt;/p&gt;

&lt;p&gt;sh &amp;quot;bundle exec knife cookbook test cookbook -c test/.chef/knife.rb -o #{sandbox_path}/../&amp;quot;
end&lt;/p&gt;

&lt;p&gt;task :prepare_sandbox do
  files = %w{*.md *.rb attributes definitions files libraries providers recipes resources templates}&lt;/p&gt;

&lt;p&gt;rm_rf sandbox_path
  mkdir_p sandbox_path
  cp_r Dir.glob(&amp;quot;{#{files.join(&amp;#39;,&amp;#39;)}}&amp;quot;), sandbox_path
end&lt;/p&gt;

&lt;p&gt;private
def sandbox_path
  File.join(File.dirname(&lt;strong&gt;FILE&lt;/strong&gt;), %w(tmp cookbooks cookbook))
end&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;
``` ruby test/support/Gemfile
source &quot;https://rubygems.org&quot;

gem 'rake'
gem 'foodcritic'
gem 'chef', '~&amp;gt; 10.12.0'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;credit&quot;&gt;Credit&lt;/h3&gt;

&lt;p&gt;A big &amp;quot;Thank You!&amp;quot; shout-out to &lt;a href=&quot;/blog/our-team/seth-vargo.html&quot;&gt;Seth Vargo&lt;/a&gt; for writing most of the code used in this post!&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;sub&gt;Reposted from &lt;a href=&quot;http://nathenharvey.com/blog/2012/07/06/mvt-knife-test-and-travisci/&quot;&gt;Nathen Harvey&amp;#39;s blog&lt;/a&gt;&lt;sub&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 06 Jul 2012 22:52:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/07/06/mvt-knife-test-and-travisci/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/07/06/mvt-knife-test-and-travisci/</guid>
      </item>
    
      <item>
        <title>Welcome, Dan Hensgen</title>
        <description>&lt;p&gt;Let me start off by apologizing to Dan for such a belated welcome post. It is belated for good reason though. Normally we mark our new engineer&amp;#39;s first deploy. Today does not mark Dan&amp;#39;s first deploy to production. But today&amp;#39;s deploy is the culmination of many deploys. And, it has been the one I&amp;#39;ve been waiting for.
&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/dan_hensgen_the_new_hotness.jpg&quot; alt=&quot;Long Day at Work&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;Dan actually started in the middle of May, and we immediately began working on a maintenance project. We would be replacing a reliable, but old application running ruby 1.8.3 and rails 1.2.6 to a new app using ruby 1.9.x and rails 3.2.x. We&amp;#39;ll call the old app OldNotBusted and the new app TheNewHottness. Along with this update we would decouple TheNewHottness from the couplings of OldNotBusted to allow for new needs within the company. This update and decoupling also meant updating code in other apps that communicate with OldNotBusted to communicate with TheNewHotness.&lt;/p&gt;

&lt;p&gt;Remember how I said this is not Dan&amp;#39;s first deploy. Well, first off TheNewHottness is new so it had nothing talking to it and could go to production very easily. And, in the other applications we have been doing what I will call &amp;quot;preploys&amp;quot;. We have, at proper milestones, merged our code in the other applications and tested it, staged it, and deployed it. We did not remove any of the old code and the code we wrote was not being exercised in the other apps. But, the &amp;quot;preploys&amp;quot; allowed us to test the code in those environments and kick off calls to TheNewHottness manually using rails console and such. Also, we could verify our changes were not breaking other parts of those apps in unexpected ways. And Finally, &amp;quot;preploys&amp;quot; allowed us to make the final deploy very undramatic. It was a flip of the switch so to speak and now TheNewHotness is running and accepting calls that OldNotBusted used to take. The next deploy will by my favorite. Legacy code removal.&lt;/p&gt;

&lt;p&gt;I&amp;#39;ll finish by saying it has been a joy to work with Dan on TheNewHotness. And, I&amp;#39;m looking forward to working with him on future projects. Glad to have you aboard at CustomInk.&lt;/p&gt;
</description>
        <pubDate>Wed, 27 Jun 2012 16:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/06/27/welcome-dan-hensgen/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/06/27/welcome-dan-hensgen/</guid>
      </item>
    
      <item>
        <title>Profiling OpenStruct, Eager Loading, Method Missing, and Lazy Loading</title>
        <description>&lt;p&gt;I was recently working on a gem that involved marshaling data from a remote API. I really wanted the gem to behave like a native Ruby object, but they methods would vary depending on the response. Since the data was dynamic, it would have been counter-productive and not scalable to define each of the methods individually.&lt;/p&gt;

&lt;p&gt;As such, I thought of a few different ways to get the result I wanted, but that just raised more questions, mainly &lt;strong&gt;performance&lt;/strong&gt;. How would each of these methods perform? This was especially important given the large number of queries I would be making. In this blog post, I detail the exploration of these different methods and arrive at some pretty cool conclusions.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;the-scenario&quot;&gt;The Scenario&lt;/h2&gt;

&lt;p&gt;In this scenario, we will be using the result of a &lt;a href=&quot;https://api.github.com/users/sethvargo/repos&quot;&gt;Github API call to my profile&lt;/a&gt;. The hash (as follows) will be stored and referenced in the &lt;code&gt;@store&lt;/code&gt; variable:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'has_wiki'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'has_issues'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'forks'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'open_issues'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'language'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Ruby'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'description'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'A distributed build system for the open source community.'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'svn_url'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://github.com/sethvargo/travis-ci'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'pushed_at'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2012-06-16T17:32:35Z'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'full_name'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sethvargo/travis-ci'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'git_url'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git://github.com/sethvargo/travis-ci.git'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'created_at'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2012-06-16T17:00:29Z'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'url'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://api.github.com/repos/sethvargo/travis-ci'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'has_downloads'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'watchers'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'size'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;188&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'homepage'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'http://travis-ci.org'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'clone_url'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://github.com/sethvargo/travis-ci.git'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'ssh_url'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'git@github.com:sethvargo/travis-ci.git'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'html_url'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://github.com/sethvargo/travis-ci'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'updated_at'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'2012-06-16T17:32:35Z'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'owner'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'avatar_url'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://secure.gravatar.com/avatar/87f282c6c2cdad13100dffe8c1daf77d?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-140.png'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'login'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'sethvargo'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'gravatar_id'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'87f282c6c2cdad13100dffe8c1daf77d'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'url'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'https://api.github.com/users/sethvargo'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'id'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;408570&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'name'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'travis-ci'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;the-metrics&quot;&gt;The Metrics&lt;/h3&gt;

&lt;p&gt;Because of the nature of my curiosity, we will measure on three different metrics:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;creating the object&lt;/li&gt;
&lt;li&gt;initial request time&lt;/li&gt;
&lt;li&gt;average request time for requests (2-100)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;pure-hash&quot;&gt;Pure Hash&lt;/h3&gt;

&lt;p&gt;The Pure Hash is our baseline. This is without any magic. We are just using the straight-forward bracket-notation for accessing a value in the hash:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;openstruct&quot;&gt;OpenStruct&lt;/h3&gt;

&lt;p&gt;The &lt;a href=&quot;http://ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html&quot;&gt;OpenStruct&lt;/a&gt; is a Ruby library that allows builds methods from a given hash.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;OpenStruct&lt;/code&gt; certainly has advantages, being only two lines of code. It also returns &lt;code&gt;nil&lt;/code&gt; instead of raising an exception when calling a &amp;quot;method&amp;quot; that doesn&amp;#39;t exist.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;nb&quot;&gt;require&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ostruct'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FiddleOpenStruct&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;OpenStruct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;eager-loading&quot;&gt;Eager Loading&lt;/h3&gt;

&lt;p&gt;With Eager Loading, we parse the data on initial object creation and define methods for each of the objects in the hash. This is obviously expensive on the object creation, but should be faster for subsequent calls.&lt;/p&gt;

&lt;p&gt;Eager Loading will raise an exception when calling a method that does not exist, although this could be overridden with &lt;code&gt;method_missing&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FiddleEagerLoading&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;define_singleton_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;method_missing&quot;&gt;method_missing&lt;/h3&gt;

&lt;p&gt;Using &lt;code&gt;method_missing&lt;/code&gt;, we &amp;quot;proxy&amp;quot; the requests to their associated keys in the hash store. The biggest problem with &lt;code&gt;method_missing&lt;/code&gt; is performance, and that fact is very well-documented. Every call must go through the entire object stack before it hits &lt;code&gt;method_missing&lt;/code&gt;, so we can except this method to not perform well.&lt;/p&gt;

&lt;p&gt;With &lt;code&gt;method_missing&lt;/code&gt;, we can either call &lt;code&gt;super&lt;/code&gt; (raise an exception) or end with &lt;code&gt;nil&lt;/code&gt; and any non-existent methods will return &lt;code&gt;nil&lt;/code&gt;, just like &lt;code&gt;OpenStruct&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FiddleMethodMissing&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;method_missing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;lazy-loading&quot;&gt;Lazy Loading&lt;/h3&gt;

&lt;p&gt;A hybrid of &lt;code&gt;Eager Loading&lt;/code&gt; and &lt;code&gt;method_missing&lt;/code&gt;, in Lazy Loading, we dynamically create methods as they are requested in &lt;code&gt;method_missing&lt;/code&gt;. On an initial request, no methods exist, so we hit &lt;code&gt;method_missing&lt;/code&gt;. However, &lt;code&gt;method_missing&lt;/code&gt; defines a method. On a subsequent call, we don&amp;#39;t execute the entire stack and call the newly created method (meta-programming for the win)!&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FiddleLazyLoading&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;method_missing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nil?&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;define_singleton_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;the-test-suite&quot;&gt;The Test Suite&lt;/h2&gt;

&lt;p&gt;This test suite is very simplistic, coming in under 50 lines of code. You can see we are testing the three different metrics with appropriate &lt;code&gt;puts&lt;/code&gt; statements to differentiate the output:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;keys&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Creating the Object'&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Benchmark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;bm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'pure hash:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'open struct:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleOpenStruct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'eager loading:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleEagerLoading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'method_missing:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleMethodMissing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'lazy loading:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleLazyLoading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'First method call'&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Benchmark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;bm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'pure hash:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'open struct:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleOpenStruct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'eager loading:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleEagerLoading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'method_missing:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleMethodMissing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'lazy loading:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleLazyLoading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;[2..&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;] times&quot;&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@fiddle_open_struct&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleOpenStruct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@fiddle_eager_loading&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleEagerLoading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@fiddle_method_missing&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleMethodMissing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;vi&quot;&gt;@fiddle_lazy_loading&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;FiddleLazyLoading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@fiddle_open_struct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@fiddle_eager_loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@fiddle_method_missing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@fiddle_lazy_loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Benchmark&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;bm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'pure hash:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'open struct:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@fiddle_open_struct&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'eager loading:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@fiddle_eager_loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'method_missing:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@fiddle_method_missing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'lazy loading:'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@fiddle_lazy_loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_sym&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;results&quot;&gt;Results&lt;/h2&gt;

&lt;p&gt;And the moment you have been waiting for - the results:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;Creating the Object
                      user     system      total        real
pure hash:        0.000000   0.000000   0.000000 (  0.000515)
open struct:      1.440000   0.000000   1.440000 (  1.440354)
eager loading:    0.470000   0.000000   0.470000 (  0.468859)
method_missing:   0.000000   0.000000   0.000000 (  0.003673)
lazy loading:     0.000000   0.000000   0.000000 (  0.002815)


First method call
                      user     system      total        real
pure hash:        0.030000   0.000000   0.030000 (  0.021060)
open struct:     32.720000   0.010000  32.730000 ( 32.740407)
eager loading:   10.470000   0.030000  10.500000 ( 10.496159)
method_missing:   0.270000   0.000000   0.270000 (  0.261547)
lazy loading:     0.970000   0.000000   0.970000 (  0.976031)


[2..10000] times
                      user     system      total        real
pure hash:        0.020000   0.000000   0.020000 (  0.021658)
open struct:      0.080000   0.000000   0.080000 (  0.077467)
eager loading:    0.080000   0.000000   0.080000 (  0.081599)
method_missing:   0.190000   0.000000   0.190000 (  0.191151)
lazy loading:     0.080000   0.000000   0.080000 (  0.071562)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As expected, the pure hash (base) out-performed all other methods. In creating the initial object, the &lt;code&gt;OpenStruct&lt;/code&gt; performed very poorly at over a second. Furthermore, as you might expect, eager loading took about half a second. The rest of the methods had negligible results. On the first method call, the &lt;code&gt;OpenStruct&lt;/code&gt; took over 30 seconds, and eager loading took about 10 seconds. We also see that lazy loading began pulling ahead of &lt;code&gt;method_missing&lt;/code&gt;. Finally, in subsequent requests (after initial object creation and first method call), &lt;code&gt;method_missing&lt;/code&gt; performed the poorest.&lt;/p&gt;

&lt;p&gt;Here are some observations to help you visualize the results:&lt;/p&gt;

&lt;h3 id=&quot;creating-initial-object&quot;&gt;Creating Initial Object&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;                       0        10       100      1000     10000
pure hash       0.000007  0.000003  0.000008  0.000052  0.000514
open struct     0.000002  0.001660  0.014470  0.147943  1.507701
eager loading   0.000002  0.000406  0.004800  0.046868  0.482254
method_missing  0.000003  0.000007  0.000029  0.000269  0.003883
lazy loading    0.000002  0.000007  0.000029  0.000535  0.002656
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div id=&quot;chart_creating_initial_object&quot; style=&quot;width:100%; height:500px; min-width:600px;&quot;&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Clearly the &lt;code&gt;OpenStruct&lt;/code&gt; took a significant amount of time, measuring over 4x its closest competitor. Ignoring the &lt;code&gt;OpenStruct&lt;/code&gt; outlier, eager loading, as expected, took longer than all other methods. This is because it generates all those methods on each object creation. Comparing the other results, we can conclude the following:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Don&amp;#39;t use OpenStruct&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;If you are creating a lot of objects, avoid Eager Loading (for now)&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;first-method-call&quot;&gt;First Method Call&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;                       0        10       100      1000      10000
pure hash       0.000008  0.000026  0.000236  0.002248  0.0210930
open struct     0.000002  0.032629  0.328859  3.340419  33.446652
eager loading   0.000003  0.011754  0.103952  1.072228  10.856142
method_missing  0.000002  0.000329  0.003961  0.027261  0.2574720
lazy loading    0.000002  0.000968  0.009337  0.100895  1.0136820
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div id=&quot;chart_first_method_call&quot; style=&quot;width:100%; height:500px; min-width:600px;&quot;&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Again we see that &lt;code&gt;OpenStruct&lt;/code&gt; performs poorly, taking over 30 seconds to process 10,000 first method calls. &lt;code&gt;method_missing&lt;/code&gt; surprisingly performed very well. Lazy loading doesn&amp;#39;t have a chance to shine here because we are only calling the method once (thus essentially using &lt;code&gt;method_missing&lt;/code&gt;). The extra time is from actually defining the method. With this data, we can conclude the following:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Don&amp;#39;t use OpenStruct&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;method_missing&lt;/code&gt; wins when only calling a few methods&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;subsequent-method-calls&quot;&gt;Subsequent Method Calls&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;                       0        10       100      1000     10000    100000    1000000    10000000
pure hash       0.000008  0.000027  0.000229  0.002292  0.021919  0.210670  2.1555960   21.669286
open struct     0.000003  0.000090  0.000825  0.008313  0.078974  0.781603  7.9774830   76.648551
eager loading   0.000002  0.000093  0.000878  0.008558  0.084123  0.839965  8.5130510   80.623932
method_missing  0.000002  0.000217  0.001972  0.020136  0.186405  1.916927  19.288969  188.095461
lazy loading    0.000002  0.000081  0.000754  0.007333  0.072564  0.737112  7.4007320   72.202056
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div id=&quot;subsequent_method_calls&quot; style=&quot;width:100%; height:500px; min-width:600px;&quot;&gt;&lt;/div&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;In drawing conclusions from this data, it&amp;#39;s more important to look at &lt;em&gt;how&lt;/em&gt; the data is scaling, rather than the factors themselves. In the long run, lazy loading performed the best, but OpenStruct is a close second. It turns out OpenStruct isn&amp;#39;t that bad when making a lot of queries. &lt;code&gt;method_missing&lt;/code&gt; performed very poorly.&lt;/p&gt;

&lt;h2 id=&quot;final-conclusions&quot;&gt;Final Conclusions&lt;/h2&gt;

&lt;p&gt;Each of the methods we analyzed provide different benefits under different circumstances. It&amp;#39;s impossible to say &amp;quot;use method x, because it&amp;#39;s better&amp;quot;. One of the reasons I chose to analyze multiple use cases is because it illustrates the fact that there is no &amp;quot;silver bullet&amp;quot; answer to this common problem.&lt;/p&gt;

&lt;p&gt;If you&amp;#39;re in &lt;code&gt;irb&lt;/code&gt; and need to marshall a hash into an object, &lt;code&gt;OpenStruct&lt;/code&gt; is the easiest and fastest route. Similarly, if you are creating an object that receives thousands of requests, you may want to implement lazy loading. There is not easy answer, but hopefully these statistics and benchmarks help in your next project.&lt;/p&gt;

&lt;h2 id=&quot;known-caveats&quot;&gt;Known Caveats&lt;/h2&gt;

&lt;p&gt;These methods are purely for example and fails many edge cases.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;These methods require special cases when your object returns data that is actually &lt;code&gt;nil&lt;/code&gt; or &lt;code&gt;null&lt;/code&gt;. It could raise an exception instead of actually returning &lt;code&gt;nil&lt;/code&gt; as expected.&lt;/li&gt;
&lt;li&gt;Allowing methods to by dynamically called opens you up to a world of hurt - especially if your data&amp;#39;s keys correspond to existing Ruby methods. As an example, when writing this blog post, my original hash had a key named &lt;code&gt;fork&lt;/code&gt;. When I was actually sending &lt;code&gt;fork&lt;/code&gt;, it was calling the Ruby &lt;code&gt;Kernel.fork&lt;/code&gt; method, which really threw me for a loop.&lt;/li&gt;
&lt;li&gt;I neglected many qualitative metrics, such as ease of use, implementation time, and readability, when conducting this study. Those metrics, by definition, are extremely difficult to measure.&lt;/li&gt;
&lt;/ol&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
  google.load('visualization', '1', { packages:['corechart'] });
  google.setOnLoadCallback(drawCharts);

  var options = {
    hAxis: {
      title: 'Iterations'
    },
    vAxis: {
      title: 'Seconds'
    }
  }

  function drawCharts() {
    _drawCreatingInitialObjectChart();
    _drawFirstMethodCallChart();
    _drawSubsequentMethodCallsChart();
  }

  function _drawCreatingInitialObjectChart() {
    var data = google.visualization.arrayToDataTable([
      [ 'Iterations', 'Pure Hash', 'OpenStruct', 'Eager Loading', 'Method Missing', 'Lazy Loading' ],
      [          '0',    0.000007,     0.000002,        0.000002,         0.000003,       0.000002 ],
      [         '10',    0.000003,     0.001660,        0.000406,         0.000007,       0.000007 ],
      [        '100',    0.000008,     0.014470,        0.004800,         0.000029,       0.000029 ],
      [       '1000',    0.000052,     0.147943,        0.046868,         0.000269,       0.000535 ],
      [      '10000',    0.000514,     1.507701,        0.482254,         0.003883,       0.002656 ]
    ]);

    var chart = new google.visualization.LineChart(document.getElementById('chart_creating_initial_object'));
    chart.draw(data, options);
  }

  function _drawFirstMethodCallChart() {
    var data = google.visualization.arrayToDataTable([
      [ 'Iterations', 'Pure Hash', ' OpenStruct', 'Eager Loading', 'Method Missing', 'Lazy Loading' ],
      [          '0',    0.000008,      0.000002,        0.000003,         0.000002,       0.000002 ],
      [         '10',    0.000003,      0.001660,        0.000406,         0.000007,       0.000007 ],
      [        '100',    0.000236,      0.328859,        0.103952,         0.003961,       0.009337 ],
      [       '1000',    0.002248,      3.340419,        1.072228,         0.027261,       0.100895 ],
      [      '10000',    0.021093,     33.446652,       10.856142,         0.257472,       1.013682 ]
    ]);

    var chart = new google.visualization.LineChart(document.getElementById('chart_first_method_call'));
    chart.draw(data, options);
  }

  function _drawSubsequentMethodCallsChart() {
    var data = google.visualization.arrayToDataTable([
      [ 'Iterations', 'Pure Hash', ' OpenStruct', 'Eager Loading',  'Method Missing',  'Lazy Loading' ],
      [     '10,000',    0.021919,      0.078974,        0.084123,          0.186405,        0.072564 ],
      [    '100,000',    0.210670,      0.781603,        0.839965,          1.916927,        0.737112 ],
      [  '1,000,000',    2.155596,      7.977483,        8.513051,         19.288969,        7.400732 ],
      [ '10,000,000',   21.669286,     76.648551,       80.623932,        188.095461,       72.202056 ]
    ]);

    var chart = new google.visualization.LineChart(document.getElementById('subsequent_method_calls'));
    chart.draw(data, options);
  }
&lt;/script&gt;
</description>
        <pubDate>Mon, 18 Jun 2012 21:32:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/06/18/profiling-openstruct-eager-loading-method-missing-and-lazy-loading/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/06/18/profiling-openstruct-eager-loading-method-missing-and-lazy-loading/</guid>
      </item>
    
      <item>
        <title>Welcome Jason Gilbertson!</title>
        <description>&lt;p&gt;The CustomInk technology team would like welcome Jason Gilbertson.  Jason, a native of Iowa and a graduate of the Georgia Institute of Technology, has relocated himself to McLean, VA to join our team and we couldn&amp;#39;t be more excited.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/jason_gilbertson.jpg&quot; alt=&quot;Jason Gilberston&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Like everyone on the CustomInk technology team, Jason was quick to create a &lt;a href=&quot;/blog/2012/05/24/welcome-interns/&quot;&gt;feature branch&lt;/a&gt; and then &lt;a href=&quot;/blog/2012/05/14/welcome-josh-born/&quot;&gt;deploy his first feature&lt;/a&gt; to production.  But there is another important aspect of our continuous deployment strategy that Jason participated in: feature verification.&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;When engineers think they are done with the feature, they need to show it to the feature owners.  For internal features, the people who care are our internal business owners.  For customer facing features, our product managers take ownership.  The best way to show a feature to someone is to let them use it.  And the best way to let someone use a feature is to put it on an easily accessible &amp;quot;production like&amp;quot; environment (aka a &amp;#39;Staging Environment&amp;#39;).&lt;/p&gt;

&lt;p&gt;Thanks to the power of &lt;a href=&quot;/blog/2012/05/25/taming-the-kraken-how-operations-enables-developer-productivity/&quot;&gt;Web Ops&lt;/a&gt; we can easily &lt;a href=&quot;/blog/2012/05/25/the-joy-of-cooking-whip-up-a-rails-environment-with-chef/&quot;&gt;whip up a rails environment&lt;/a&gt; any time and any where we please.  With our Chef recipes, we can make use of Amazon Web Services to spin up temporary staging environments and give them friendly URL&amp;#39;s that are easy for our feature owners to remember.  For instance, if feature branch is named &amp;quot;color_picker&amp;quot;, the URL for the staging server would be &amp;quot;color-picker.staging.ci.com&amp;quot;.&lt;/p&gt;

&lt;p&gt;When a feature is &amp;quot;done&amp;quot;, we stage it, drop a note in the ticket&amp;#39;s comments indicating the staged URL, and then move on to the next ticket.  If there is feedback about the feature, we can easily make the changes and redeploy the branch to the staging environment.  Once the ticket is verified, we tear down the staging environment and deploy the feature to production.&lt;/p&gt;

&lt;p&gt;Putting the new feature in a staging environment lets us do a few things.  First, it makes us more confident that our code can be deployed in a repeatable fashion (no surprises when we go to production).  Second, it let&amp;#39;s more than one person use the feature at a time.  Lastly, it removes the necessity for people to &amp;quot;get together&amp;quot; to review changes.&lt;/p&gt;

&lt;p&gt;Since we work on tickets one at a time, we can follow a simple process to continuously deploy new features to our site and tools:  Branch, build, verify, deploy.&lt;/p&gt;
</description>
        <pubDate>Fri, 15 Jun 2012 10:47:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/06/15/welcome-jason-gilbertson/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/06/15/welcome-jason-gilbertson/</guid>
      </item>
    
      <item>
        <title>Introducing Stoplight: Greenscreen 2.0</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://technology-customink-com.s3.amazonaws.com/images/stoplight.png&quot;&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/stoplight.png&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/a&gt;
At CustomInk, we use a variety of tools to monitor the status of our builds. One such tool was &lt;a href=&quot;https://github.com/customink-webops/greenscreen&quot;&gt;Greenscreen&lt;/a&gt;. In fact, we even wrote &lt;a href=&quot;/blog/2012/01/02/green-screen/&quot;&gt;a blog post about how we use Greenscreen at CustomInk&lt;/a&gt; not too long ago.&lt;/p&gt;

&lt;p&gt;One of the biggest problems with Greenscreen was its extensibility. By default, Greenscreen only works with Hudson and Jenkins servers. With &lt;a href=&quot;http://travis-ci.org&quot;&gt;Travis CI&lt;/a&gt; becoming quite popular in the open-source community, Greenscreen needed a major upgrade. Furthermore, Greenscreen was not very extensible.&lt;/p&gt;

&lt;p&gt;After some significant refactoring, Greenscreen evolved into &lt;a href=&quot;https://github.com/customink/stoplight&quot;&gt;Stoplight&lt;/a&gt;...&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;significant-improvements&quot;&gt;Significant Improvements&lt;/h2&gt;

&lt;p&gt;There are a number of improvements in Stoplight. These are the most critical or useful to the end-user:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Support for multiple (any) continuous integration server&lt;/li&gt;
&lt;li&gt;Highly configurable yaml files&lt;/li&gt;
&lt;li&gt;Cross-browser beautiful UI&lt;/li&gt;
&lt;li&gt;More informative build statuses&lt;/li&gt;
&lt;li&gt;Extensibility&lt;/li&gt;
&lt;li&gt;Usability&lt;/li&gt;
&lt;li&gt;Full test suite&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;refactoring&quot;&gt;Refactoring&lt;/h2&gt;

&lt;p&gt;Originally, I was just going to add Travis CI support to Greenscreen. However, I quickly asked myself, &amp;quot;why stop at Travis CI?&amp;quot;; we should allow developers to connect Greenscreen to any continuous integration server. After cleaning up the code a bit, I introduced the concept of a &lt;code&gt;Provider&lt;/code&gt;. Simply put, a &lt;code&gt;Provider&lt;/code&gt; is an abstract Ruby class that maps server-data into Greenscreen data. It looks like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# Provider is an abstract class that all providers inherit from. It requires that a specified format be returned. This way, stoplight&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# doesn't care who it's talking to, as long as it guarantees certain information.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Stoplight::Providers&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Provider&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_reader&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:response&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# Initializes a hash `@options` of default options&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{})&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# `projects` must return an array of Stoplight::Project&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# see Stoplight::Project for more information on the spec&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;projects&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;On the front-end, now we don&amp;#39;t have to worry about parsing different server responses; we know that any provider will respond to the &lt;code&gt;Provider#projects&lt;/code&gt; instance method. This makes refactoring our front-end code much easier.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;Stoplight::Project&lt;/code&gt; clearly defines a schema and method-set that must be adhered to. In the front-end, we can simply call &lt;code&gt;.projects&lt;/code&gt; on any provider and know with 100% certainty that the given objects respond to a certain set of methods. Those methods are defined in the &lt;code&gt;Stoplight::Project&lt;/code&gt; class:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Stoplight&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Project&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:build_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:last_build_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:last_build_time&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:last_build_status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:current_status&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# Initialize (new) takes in a hash of options in the following format:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# {&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   :name =&amp;gt; 'my_project',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   :build_url =&amp;gt; 'http://ci.jenkins.org/job/my_project',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   :web_url =&amp;gt; 'http://github.com/username/my_project', # optional&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   :last_build_id =&amp;gt; '7',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   :last_build_time =&amp;gt; '2012-05-24T03:19:53Z',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   :last_build_status =&amp;gt; 0,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   :current_status =&amp;gt; 1,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# }&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# - `name` - the name of this project&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# - `build_url` - the url where the build came from&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# - `build_id` - the unique build_id for this project&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# - `last_build_time` - last successful build&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# - `last_build_status` - integer representing the exit code of the last build:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   - -1: unknown&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   -  0: passed (success)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   -  1: failed (error, failure)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# - `current_status` - the current status of the build:&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   - -1: unknwon&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   -  0: done (sleeping, waiting)&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#   -  1: building (building, working, compiling)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{})&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This set of simple instructions tells a provider how it must format data. Essentially this makes &lt;code&gt;Provider&lt;/code&gt; a micro-data-mapper, massaging data from remote APIs into a standard format. Stoplight then uses that standard format to create a unified user experience.&lt;/p&gt;

&lt;h3 id=&quot;adding-tests&quot;&gt;Adding Tests&lt;/h3&gt;

&lt;p&gt;Since Stoplight is destined to become an open-source project, it needs a comprehensive test suite. Furthermore, during our refactoring, it&amp;#39;s important that we don&amp;#39;t break existing functionality. As such, I added a full test suite with RSpec. To make development easier, I also use Spork, Guard, and Growl-Ruby to automatically run tests in the background while I&amp;#39;m coding. This makes TDD much more exciting.&lt;/p&gt;

&lt;h3 id=&quot;foreman&quot;&gt;Foreman&lt;/h3&gt;

&lt;p&gt;With all those dependencies, plus running the server, it only made sense to use &lt;a href=&quot;https://github.com/ddollar/foreman&quot;&gt;Foreman&lt;/a&gt; to manage all those processes. What used to be (in three different terminal tabs):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;bundle exec shotgun -p 4567
bundle exec compass watch -c config/compass.rb
bundle exec guard
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;simply became:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;bundle exec foreman start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;with a tiny &lt;code&gt;Procfile&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;web:      shotgun -p 4567
compass:  compass watch -c config/compass.rb
guard:    guard
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;compass&quot;&gt;Compass&lt;/h3&gt;

&lt;p&gt;Under the hood, all the styles for Stoplight are generated by a framework called &lt;a href=&quot;http://compass-style.org&quot;&gt;Compass&lt;/a&gt;. Compass allows us to leverage the power of SCSS and easily create a cross-browser compliant application. Stoplight uses Compass and SCSS for all it&amp;#39;s styles. This ensures a consistent user experience.&lt;/p&gt;

&lt;h3 id=&quot;abap-text&quot;&gt;ABAP Text&lt;/h3&gt;

&lt;p&gt;ABAP stands for &amp;quot;As Big As Possible&amp;quot;. A tiny snippet of jQuery dynamically sizes text to fit in its bounds. Whether you&amp;#39;re displaying on a 60&amp;quot; LED TV or a 13&amp;quot; Monitor, the text will be as big and clear as possible.&lt;/p&gt;

&lt;h3 id=&quot;adding-travis&quot;&gt;Adding Travis&lt;/h3&gt;

&lt;p&gt;Brace yourself for a meta-moment. Since I wanted Stoplight to become a popular open-source project, I added the build on Travis CI. With &lt;a href=&quot;http://travis-ci.org/#!/customink/stoplight&quot;&gt;Stoplight on Travis CI&lt;/a&gt; we can use Stoplight to monitor the build status of Stoplight.&lt;/p&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;There you have it! What was once a very isolated and less-than-configurable tool is now highly extensible and open to contributions by the community. If you are currently using Greenscreen or another build monitoring alternative, give Stoplight a try.&lt;/p&gt;

&lt;h2 id=&quot;i-want-it&quot;&gt;I Want it!&lt;/h2&gt;

&lt;p&gt;Stoplight is available for &lt;a href=&quot;https://github.com/customink/stoplight&quot;&gt;download and forking on github&lt;/a&gt;. Pull requests are greatly welcome! There is also a highly-configurable &lt;a href=&quot;https://github.com/customink-webops/stoplight&quot;&gt;chef cookbook for installing Stoplight&lt;/a&gt; on Apache and Passenger on your own servers.&lt;/p&gt;
</description>
        <pubDate>Tue, 12 Jun 2012 17:48:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/06/12/introducing-stoplight-greenscreen-2-dot-0/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/06/12/introducing-stoplight-greenscreen-2-dot-0/</guid>
      </item>
    
      <item>
        <title>MVT:  Foodcritic and Travis CI</title>
        <description>&lt;p&gt;One of the big themes that emerged during &lt;a href=&quot;http://chefconf.opscode.com/&quot;&gt;#ChefConf&lt;/a&gt; was that we should be testing our infrastructure code.  Software engineers have been practicing test-driven development, behavior-driven development, continuous integration, and many other testing-related practices for a long time.  It&amp;#39;s becoming more important for the infrastructure engineers to learn from and apply these practices to our day-to-day workflow.  When it comes to testing Chef-driven infrastructure automation, there are a number of tools and practices that are starting to emerge.  In this article I&amp;#39;ll look at a &amp;quot;minimum viable testing&amp;quot; (MVT) approach to this problem using &lt;a href=&quot;http://acrmp.github.com/foodcritic/&quot;&gt;Foodcritic&lt;/a&gt; and &lt;a href=&quot;http://travis-ci.org/&quot;&gt;Travis CI&lt;/a&gt;.  &lt;a href=&quot;/blog/2012/06/04/mvt-foodcritic-and-travis-ci/#steps&quot;&gt;Follow the steps in this article&lt;/a&gt; to get your public cookbooks tested after every &lt;code&gt;git push&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;testing-with-chef&quot;&gt;Testing with Chef&lt;/h3&gt;

&lt;p&gt;The idea of building automated tests for your infrastructure code has been getting a lot of traction lately.  When it comes to &lt;a href=&quot;http://www.opscode.com/chef/&quot;&gt;Chef&lt;/a&gt;, many tools are starting to emerge.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;The first tool in this area to get any significant traction, that I know of, was &lt;a href=&quot;http://www.cucumber-chef.org/&quot;&gt;cucumber-chef&lt;/a&gt;.  I first learned of this tool when I saw a pre-release copy of &lt;a href=&quot;http://shop.oreilly.com/product/0636920020042.do&quot;&gt;Test-Driven Infrastructure with Chef&lt;/a&gt; at the O&amp;#39;Reilly booth at &lt;a href=&quot;http://velocityconf.com/velocity2011&quot;&gt;Velocity Conf 2011&lt;/a&gt;.  &lt;a href=&quot;http://twitter.com/lordcope&quot;&gt;Stephen Nelson-Smith&lt;/a&gt;, the book&amp;#39;s author and framework&amp;#39;s lead developer, proposes an outside-in approach to testing where your tests can also act as monitors that look after the health of your infrastructure.  I like the idea of this approach and feel it makes a lot of sense in a greenfield environment.  One benefit of this approach is that it blurs the line between testing and monitoring.  You can easily hook-up your monitoring system to your cucumber tests.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/acrmp/chefspec&quot;&gt;ChefSpec&lt;/a&gt; is another tool for testing your Chef code.  It is a gem that makes it easy to write &lt;a href=&quot;http://rspec.info/&quot;&gt;RSpec&lt;/a&gt; examples for Chef cookbooks.  This style of testing allows you to execute your tests without needing to converge the node that your tests are running on.  In other words, you can execute your tests without needing to provision a server.  One huge appeal to this style of testing is that the feedback loop is very small.  You&amp;#39;ll get feedback about your cookbook changes within seconds or a very few minutes of saving your changes.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/calavera/minitest-chef-handler&quot;&gt;Minitest Chef Handler&lt;/a&gt; is yet another tool for testing with Chef.  This runs a suite of &lt;a href=&quot;https://github.com/seattlerb/minitest&quot;&gt;minitest&lt;/a&gt; tests as a report handler in your Chef-managed nodes.  As you may know, report handlers are run at the end of each &lt;a href=&quot;http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run&quot;&gt;chef run, or convergence&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;testing-at-chefconf&quot;&gt;Testing at ChefConf&lt;/h3&gt;

&lt;p&gt;At the inaugural &lt;a href=&quot;http://chefconf.opscode.com&quot;&gt;#ChefConf&lt;/a&gt; there were many sessions that included information about many companies&amp;#39; approach to testing.  Here&amp;#39;s a quick list of some of the sessions:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.foodfightshow.org/2012/04/episode-10-testallthethings-testing.html&quot;&gt;Food Fight Show Episode #10 - TESTALLTHETHINGS&lt;/a&gt; -- This wasn&amp;#39;t actually part of #ChefConf but is &amp;#39;required listening&amp;#39; for anyone interested in learning more about this space.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://chefconf2012.sched.org/event/bfe13edac99e2b4d8582f0cd1005ee73?iframe=no&amp;w=700&amp;sidebar=no&amp;bg=no&quot;&gt;#ChefConf Pre-event Hackday: TEST ALL THE THINGS!!!&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/atomic-penguin/ntp&quot;&gt;NTP Cookbook with tests&lt;/a&gt; - tests were added to this cookbook as part of the hackday event.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.youtube.com/watch?v=o2e0aZUAVGw&quot;&gt;Test-driven Development for Chef Practitioners&lt;/a&gt; (video)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&quot;http://www.youtube.com/watch?v=dPaYfAIvqxw&quot;&gt;Test Driven Development Roundtable&lt;/a&gt; (video)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;foodcritic&quot;&gt;Foodcritic&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://acrmp.github.com/foodcritic/&quot;&gt;Foodcritic&lt;/a&gt; is a lint tool for your Chef cookbooks.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Foodcritic has two goals:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;To make it easier to flag problems in your Chef cookbooks that will cause Chef to blow up when you attempt to converge. This is about faster feedback. If you automate checks for common problems you can save a lot of time.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;To encourage discussion within the Chef community on the more subjective stuff - what does a good cookbook look like? Opscode have avoided being overly prescriptive which by and large I think is a good thing. Having a set of rules to base discussion on helps drive out what we as a community think is good style.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;why-start-with-foodcritic&quot;&gt;Why start with Foodcritic?&lt;/h4&gt;

&lt;p&gt;Given the plethora of options available, why should you start with Foodcritic?  Well, you have to start somewhere.  We felt Foodcritic was a good choice because it was easy to get started with, the tests ran quickly, and we are working under the assumption that once we started some automated testing, we&amp;#39;ll start layering on more and more pieces as we go.  After some initial experiments, we found that we could get Foodcritic looking after our each cookbook in a matter of minutes and local tests running in seconds.&lt;/p&gt;

&lt;p&gt;The pseudo-converge approaches (like ChefSpec) initially feel like we&amp;#39;ll need to do a lot of mocking that will take some time to get correct.  The post-converge approaches (like cucumber-chef and minitest) will take longer to run and are a bit more complex.&lt;/p&gt;

&lt;p&gt;One benefit of the post-converge approach is the ability to use your tests as health monitors.  We already have monitoring in place and use it as an indicator that a node is fully provisioned.  We call this &amp;quot;monitor-driven development.&amp;quot;  Given that, it was better for us to get started with something that runs without requiring a full converge.  Foodcritic fit the bill quite nicely.&lt;/p&gt;

&lt;h3 id=&quot;travis-ci&quot;&gt;Travis CI&lt;/h3&gt;

&lt;p&gt;Travis CI is:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A hosted continuous integration service for the open source community.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Using Travis CI in conjunction with Foodcritic, we&amp;#39;d have a basic automated test foundation to build on.&lt;/p&gt;

&lt;h3 id=&quot;automated-foodcritic-tests-with-travis-ci&quot;&gt;Automated Foodcritic tests with Travis CI &lt;a name=&quot;steps&quot;&gt;&lt;/a&gt;&lt;/h3&gt;

&lt;p&gt;Using Foodcritic and Travis CI, you can quickly set-up a &amp;quot;minimum viable testing&amp;quot; (MVT) environment.  The idea is that once you have some sort of tests running against your cookbooks, you&amp;#39;ll want to add more and doing so will be easy.  Let&amp;#39;s look at how to add Foodcritic and Travis CI to your cookbook workflow.&lt;/p&gt;

&lt;h4 id=&quot;initial-set-up&quot;&gt;Initial set-up&lt;/h4&gt;

&lt;p&gt;Follow these steps to get everything set-up and ready for your first tests:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;code&gt;gem install foodcritic&lt;/code&gt;&lt;/li&gt;
&lt;li&gt; Go to &lt;a href=&quot;http://travis-ci.org/&quot;&gt;Travis CI&lt;/a&gt; and follow the Sign In link at the top.&lt;/li&gt;
&lt;li&gt; Activate the GitHub Service Hook for your cookbook&amp;#39;s repository from your TravisCI profile page.  Each of your cookbooks has its own repository, right?!&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;configure-your-project&quot;&gt;Configure your project&lt;/h4&gt;

&lt;p&gt;The next step is to add a .travis.yml file to your project.&lt;/p&gt;

&lt;p&gt;``` ruby .travis.yml
language: ruby
gemfile:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;test/support/Gemfile
rvm:

&lt;ul&gt;
&lt;li&gt;1.9.2&lt;/li&gt;
&lt;li&gt;1.9.3
script: bundle exec rake foodcritic
```&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This file tells Travis CI how to build your project.  We&amp;#39;ve specified the language (ruby) and the versions of ruby to use when testing this cookbook (1.9.2 and 1.9.3).  We&amp;#39;ve also specified a Gemfile and script to execute when testing this project.  Let&amp;#39;s add a Gemfile to a new directory in our cookbook, &lt;code&gt;test/support&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;test&lt;/span&gt;/support
&lt;span class=&quot;nb&quot;&gt;touch test&lt;/span&gt;/support/Gemfile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Our Gemfile is pretty simple, just include &lt;code&gt;rake&lt;/code&gt; and &lt;code&gt;foodcritic&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;``` ruby Gemfile
source &amp;quot;&lt;a href=&quot;https://rubygems.org&quot;&gt;https://rubygems.org&lt;/a&gt;&amp;quot;&lt;/p&gt;

&lt;p&gt;gem &amp;#39;rake&amp;#39;
gem &amp;#39;foodcritic&amp;#39;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;
Finally, we'll need to add a Rake file that will be run each time Travis builds our project.

``` ruby Rakefile
#!/usr/bin/env rake

desc &quot;Runs foodcritic linter&quot;
task :foodcritic do
  if Gem::Version.new(&quot;1.9.2&quot;) &amp;lt;= Gem::Version.new(RUBY_VERSION.dup)
    sandbox = File.join(File.dirname(__FILE__), %w{tmp foodcritic cookbook})
    prepare_foodcritic_sandbox(sandbox)

    sh &quot;foodcritic --epic-fail any #{File.dirname(sandbox)}&quot;
  else
    puts &quot;WARN: foodcritic run is skipped as Ruby #{RUBY_VERSION} is &amp;lt; 1.9.2.&quot;
  end
end

task :default =&amp;gt; 'foodcritic'

private

def prepare_foodcritic_sandbox(sandbox)
  files = %w{*.md *.rb attributes definitions files libraries providers
recipes resources templates}

  rm_rf sandbox
  mkdir_p sandbox
  cp_r Dir.glob(&quot;{#{files.join(',')}}&quot;), sandbox
  puts &quot;\n\n&quot;
end

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This Rakefile will copy the contents of our cookbook to a temporary directory and run the foodcritic tests on the temporary directory.  Note the &lt;code&gt;--epic-fail&lt;/code&gt; tag is used to fail the build (return a non-zero exit code) on &lt;code&gt;any&lt;/code&gt; rule that does not pass.&lt;/p&gt;

&lt;p&gt;That&amp;#39;s it!  When you push your commit to github, you should see Travis CI pick-up the changes, run your build, and report on status.&lt;/p&gt;

&lt;h3 id=&quot;share-your-build-status&quot;&gt;Share Your Build Status&lt;/h3&gt;

&lt;p&gt;One final step that you may consider is adding a build status indicator to your README.  This simple line in your README will let others know what the current build status is for your cookbook.&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;
&lt;span class=&quot;o&quot;&gt;[![&lt;/span&gt;Build Status]&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;https://secure.travis-ci.org/[YOUR_GITHUB_USERNAME]/[YOUR_PROJECT_NAME].png&lt;span class=&quot;o&quot;&gt;)](&lt;/span&gt;http://travis-ci.org/[YOUR_GITHUB_USERNAME]/[YOUR_PROJECT_NAME]&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;thanks-additional-resources&quot;&gt;Thanks &amp;amp; Additional Resources&lt;/h3&gt;

&lt;p&gt;A big &amp;quot;Thank You!&amp;quot; shout-out to &lt;a href=&quot;https://twitter.com/fnichol&quot;&gt;Fletcher Nichol&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/atomic_penguin&quot;&gt;Eric G. Wolfe&lt;/a&gt; from whom I &amp;#39;borrowed&amp;#39; the &lt;code&gt;Rakefile&lt;/code&gt; and &lt;code&gt;.travis.yml&lt;/code&gt; used in this post.&lt;/p&gt;

&lt;p&gt;More information on Foodcritic and Travis CI can be found here:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://acrmp.github.com/foodcritic/&quot;&gt;Foodcritic&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://about.travis-ci.org/docs/user/getting-started/&quot;&gt;Travis CI: Getting started guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://about.travis-ci.org/docs/user/status-images/&quot;&gt;Travis CI: Status Images&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;next-post&quot;&gt;Next Post&lt;/h3&gt;

&lt;p&gt;Be sure to read the next post on this topic:  &lt;a href=&quot;/blog/2012/07/06/mvt-knife-test-and-travisci/&quot;&gt;MVT: knife test and Travis CI&lt;/a&gt;&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;sub&gt;Reposted from &lt;a href=&quot;http://nathenharvey.com/blog/2012/05/29/mvt-foodcritic-and-travis-ci/&quot;&gt;Nathen Harvey&amp;#39;s blog&lt;/a&gt;&lt;sub&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 04 Jun 2012 13:45:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/06/04/mvt-foodcritic-and-travis-ci/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/06/04/mvt-foodcritic-and-travis-ci/</guid>
      </item>
    
      <item>
        <title>Provision your laptop with Chef: Part 1</title>
        <description>&lt;p&gt;If you have ever tried to follow the &lt;a href=&quot;http://wiki.opscode.com/display/chef/Getting+Started&quot;&gt;Opscode Getting Started Guide for Chef&lt;/a&gt;, you&amp;#39;ll quickly be overtaken by Chef jargon, confusing instructions, many assumptions, and no clear direction. Even the most experienced developers had a difficult time following the Opscode Wiki. While it serves as a great reference resource, you pretty much have to know Chef before it is of any use.&lt;/p&gt;

&lt;p&gt;In Part 1 of this 2-part series, we will walk through setting up the Chef environment on your local machine. In Part 2, we will demonstrate how to provision your personal laptop using Chef.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;what-is-chef&quot;&gt;What is Chef?&lt;/h2&gt;

&lt;p&gt;One of the best things about Chef is that it is idempotent. Unlike a simple bash script or complex startup script, Chef can be applied to the same machine hundreds of times. Only the &amp;quot;changes&amp;quot; will be executed on each of the clients. This makes deploying and updating thousands of machines as easy as baking a cake!&lt;/p&gt;

&lt;h2 id=&quot;understanding-chef-jargon&quot;&gt;Understanding Chef &amp;amp; Jargon&lt;/h2&gt;

&lt;p&gt;One of the most interesting and confusing parts about Chef is its lingo. Everything relates to &lt;strong&gt;food&lt;/strong&gt;. Be sure to grab a snack before diving in any further.&lt;/p&gt;

&lt;h3 id=&quot;architecture&quot;&gt;Architecture&lt;/h3&gt;

&lt;p&gt;One of the most dangerous practices when using Chef is applying prior knowledge. In Chef, everything is named relative to Chef. This means, even though your are provisioning a production &lt;em&gt;server&lt;/em&gt;, it&amp;#39;s still a Chef &lt;em&gt;client&lt;/em&gt;. This can be very confusing at first, but once you start thinking in terms of Chef things will begin to make sense.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;(Chef) Server&lt;/code&gt; [aka hosted chef] - refers a machines that stores cookbooks, roles, and other Chef configurations&lt;/li&gt;
&lt;li&gt;&lt;code&gt;(Chef) Client&lt;/code&gt; [aka node] - refers to a machine that connects to and is managed by a Chef Server&lt;/li&gt;
&lt;li&gt;&lt;code&gt;(Chef) Workstation&lt;/code&gt; - refers to a machine where recipes are developed, altered, deleted, and more&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;This is the most simplistic picture. It&amp;#39;s possible for a single machine to exist in all three of these roles simultaneously! There are subsets of Chef, such as &lt;a href=&quot;http://wiki.opscode.com/display/chef/Chef+Solo&quot;&gt;Chef-Solo&lt;/a&gt;, but those will not be discussed here.&lt;/p&gt;

&lt;p&gt;A typical scenario begins at the workstation. A developer creates a cookbook, role, or other artifact on the local machine. When finished, that artifact is uploaded to the Chef Server. The Chef Clients receive these (new) instructions and execute them locally.&lt;/p&gt;

&lt;h3 id=&quot;jargon&quot;&gt;Jargon&lt;/h3&gt;

&lt;p&gt;We&amp;#39;ve also been throwing around some other terms that we should take a second to define:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cookbook&lt;/code&gt; - collection of recipe, resources, attributes, templates, metadata, and other files&lt;/li&gt;
&lt;li&gt;&lt;code&gt;recipe&lt;/code&gt; - a set of instructions written in a Ruby DSL that tells a node what commands to execute&lt;/li&gt;
&lt;li&gt;&lt;code&gt;metadata&lt;/code&gt; - additional information, such as dependencies, for a given cookbook&lt;/li&gt;
&lt;li&gt;&lt;code&gt;resource&lt;/code&gt; - cross-platform abstraction of the &amp;quot;thing&amp;quot; you&amp;#39;re configuring such as a package or a user&lt;/li&gt;
&lt;li&gt;&lt;code&gt;provider&lt;/code&gt; - a platform-specific implementation of a resource&lt;/li&gt;
&lt;li&gt;&lt;code&gt;data bag&lt;/code&gt; - JSON key-value store for storing data, attributes, and more&lt;/li&gt;
&lt;li&gt;&lt;code&gt;environment&lt;/code&gt; - provide a mechanism for managing different deployment locations such as production, staging, development, and testing&lt;/li&gt;
&lt;li&gt;&lt;code&gt;template&lt;/code&gt; - a file (like a config file) to be &amp;quot;rendered&amp;quot; on the server&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;There are also a few tools:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;knife&lt;/code&gt; - a command line tool for managing chef and chef recipes&lt;/li&gt;
&lt;li&gt;&lt;code&gt;shef&lt;/code&gt; - chef console. this is the equivalent of &lt;code&gt;rails console&lt;/code&gt; for chef&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Before continuing, please make sure you understand that these are very over-simplified definitions and abstractions. Chef is much more powerful that these simplistic definitions allow.&lt;/p&gt;

&lt;h2 id=&quot;set-up-your-opscode-account&quot;&gt;Set up your Opscode Account&lt;/h2&gt;

&lt;p&gt;For the purposes of this tutorial, we will use Chef Hosted by Opscode (the creators of Chef). The service provides 5 free nodes for use. Go ahead and create your free account by heading over to the &lt;a href=&quot;https://community.opscode.com/users/new&quot;&gt;Hosted Chef Signup page&lt;/a&gt;. You should see something like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/hosted-chef-signup.png&quot; alt=&quot;Hosted Chef Signup page&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You&amp;#39;ll need to confirm your email, but once that&amp;#39;s done, head on over to the &lt;a href=&quot;https://manage.opscode.com/organizations&quot;&gt;Opscode Management Console&lt;/a&gt;. It really doesn&amp;#39;t matter what you call your organization - I used the same as my username. You should see a screen like this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/hosted-chef-management-console.png&quot; alt=&quot;Hosted Chef Management Console&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;You probably only have one organization, but the image should give you a good idea. First thing you&amp;#39;ll want to do is &lt;strong&gt;Regenerate validation key&lt;/strong&gt; and &lt;strong&gt;Generate knife config&lt;/strong&gt;. We will talk about this more in detail, but save these files in a handy place for later. These files should always be kept securely.&lt;/p&gt;

&lt;p&gt;Also, if you didn&amp;#39;t get your private key when registering, you should do that now (for some reason, Opscode does not always stream the key). Go to the &lt;a href=&quot;http://community.opscode.com/&quot;&gt;Opscode Community Site&lt;/a&gt; and login (if you aren&amp;#39;t already). Click on your profile and then choose &lt;strong&gt;get private key&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/chef-community-user.png&quot; alt=&quot;Chef Community User&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;At this point you should have the following files:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;[your_organization_name]-validator.pem
[your_username].pem
knife.rb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For example, mine would be:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;ci-validator.pem
sethvargo.pem
knife.rb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Sometimes Opscode doesn&amp;#39;t stream the correct files, so you may need to do some renaming:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;_knife_config   #=&amp;gt; knife.rb
_regenerate_key #=&amp;gt; [your_organization_name]-validator.pem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;install-ruby-chef-and-git&quot;&gt;Install Ruby, Chef, and Git&lt;/h2&gt;

&lt;p&gt;Chef is written in Ruby. Therefore, you must have Ruby installed. Installing Ruby is beyond the scope of this topic, but here are some quick resources:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://rubyinstaller.org/&quot;&gt;Ruby Installer for Windows&lt;/a&gt; (also install the &lt;a href=&quot;https://github.com/oneclick/rubyinstaller/wiki/development-kit&quot;&gt;Development Kit&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://rvm.io/&quot;&gt;Installing Ruby with rvm&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sstephenson/rbenv&quot;&gt;Installing Ruby with rbenv&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You should also install &lt;code&gt;git&lt;/code&gt;. Check out the &lt;a href=&quot;http://help.github.com/set-up-git-redirect&quot;&gt;Github tutorial for installing git&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Once you have Ruby and Git installed, you&amp;#39;ll need to install chef:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;gem install chef
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This command will install the Chef gem as well as some other dependencies.&lt;/p&gt;

&lt;p&gt;A this point, you should have a novice understand of Chef and Chef Jargon, have an account on Opscode Hosted Chef, and have a working version of Ruby, Git, and the Chef gem installed. The rest of this guide will assume you have completed all those steps correctly.&lt;/p&gt;

&lt;h2 id=&quot;setup-your-workstation&quot;&gt;Setup your Workstation&lt;/h2&gt;

&lt;p&gt;Find a working directory on your local machine where you plan to store your Chef cookbooks. For this tutorial, we will use &lt;code&gt;~/Development&lt;/code&gt;. You&amp;#39;ll need a skeleton chef repository. You could make your own or clone the Opscode one:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;git clone git@github.com:opscode/chef-repo.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Take a few minutes to poke around the repository. You definitely won&amp;#39;t understand everything, but look at a few READMEs (in subdirectories).&lt;/p&gt;

&lt;p&gt;Inside the &lt;code&gt;chef-repo&lt;/code&gt; directory (&lt;code&gt;~/Development/chef-repo&lt;/code&gt;), we need to create a hidden folder named &lt;code&gt;.chef&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;cd ~/Development/chef-repo
mkdir .chef
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is where you should put the files we downloaded earlier:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;mv [location]/[your_username].pem ~/Development/chef-repo/.chef/
mv [location]/[your_organization_name].pem ~/Development/chef-repo/.chef/
mv [location]/knife.rb ~/Development/chef-repo/.chef/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For my case, it would be:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;mv ~/Desktop/sethvargo.pem ~/Development/chef-repo/.chef/
mv ~/Desktop/ci-validator.pem ~/Development/chef-repo/.chef/
mv ~/Desktop/knife.rp ~/Development/chef-repo/.chef/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To confirm everything is working, try and list all the clients (it should be empty):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;knife client list
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If this command succeeds without error, everything is set up correctly!&lt;/p&gt;

&lt;p&gt;This concludes setting up your workstation. Now we are ready to create our first cookbook.&lt;/p&gt;

&lt;h2 id=&quot;create-your-first-cookbook&quot;&gt;Create your first cookbook&lt;/h2&gt;

&lt;p&gt;Wash your hands, put on your Chef&amp;#39;s Hat, and get ready to bake! We are going to create your very first cookbook. The cookbook will be very simple and is more for demonstrating working with &lt;code&gt;knife&lt;/code&gt; and &lt;code&gt;chef-client&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Our cookbook will be named &amp;quot;hello world&amp;quot;. Let&amp;#39;s start by using &lt;code&gt;knife&lt;/code&gt; to create our cookbook skeleton:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;cd ~/Development/chef-repo
knife cookbook create hello_world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You should see the following output:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;** Creating cookbook hello_world
** Creating README for cookbook: hello_world
** Creating metadata for cookbook: hello_world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Open up the project in your favorite text editor and look inside the &lt;code&gt;cookbooks&lt;/code&gt; directory. You should see the following:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/chef-cookbook-structure.png&quot; alt=&quot;Chef Cookbook Structure&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This cookbook will create a file &lt;code&gt;~/hello_world.txt&lt;/code&gt; that says &amp;quot;Hello World!&amp;quot;.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s first make the template. A template is like the &amp;quot;view&amp;quot; of MVC. It has access to instance variables and uses embedded ruby. Inside the &lt;code&gt;templates/default&lt;/code&gt; directory, create a new file named &lt;code&gt;hello-world.txt.erb&lt;/code&gt; and add some content:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-erb&quot; data-lang=&quot;erb&quot;&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;%&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# templates/default/hello-world.txt.erb &lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
Hello World!

Chef Version: &lt;span class=&quot;cp&quot;&gt;&amp;lt;%=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:chef_packages&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:chef&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
Platform: &lt;span class=&quot;cp&quot;&gt;&amp;lt;%=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
Version: &lt;span class=&quot;cp&quot;&gt;&amp;lt;%=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:platform_version&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;cp&quot;&gt;%&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can see we are referencing a &lt;code&gt;node&lt;/code&gt; variable. This refers to the current client that Chef is running on.&lt;/p&gt;

&lt;p&gt;Now we need to create the actual recipe with instructions. You can think of the recipe as the &amp;quot;controller&amp;quot; of MVC. Open up the &lt;code&gt;recipes/default.rb&lt;/code&gt; file and add the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;c1&quot;&gt;# recipes/default.rb&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'HOME'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/hello-world.txt&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'hello-world.txt.erb'&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'0644'&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;template&lt;/code&gt; keyword is a resource like we defined before. It tells the recipe to render the given template source to the given file. We also specify the file permissions using &lt;code&gt;mode&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;That&amp;#39;s it! Our cookbook is done and ready to be uploaded to Hosted Chef. We will use the &lt;code&gt;knife&lt;/code&gt; command to do this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;knife cookbook upload hello_world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You should see output like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;Uploading hello_world             [0.0.1]
Uploaded 1 cookbook.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you get a message like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;WARNING: No knife configuration file found
ERROR: Your private key could not be loaded from /etc/chef/client.pem
Check your configuration file and ensure that your private key is readable
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;it means that your key is invalid. Regenerate your personal and/or organization keys and ensure everything is placed in the correct directories.&lt;/p&gt;

&lt;p&gt;Our cookbook is now on Hosted Chef and ready to be distributed to our nodes. Chef doesn&amp;#39;t automatically tell nodes to update. You can do this with a cron job, running &lt;code&gt;chef-client&lt;/code&gt; as a service, or by running &lt;code&gt;chef-client&lt;/code&gt; manually on any node.&lt;/p&gt;

&lt;p&gt;For simplicity, let&amp;#39;s just run this on our local workstation. Let&amp;#39;s set up the local workstation as a client. Run the following command from the inside the repository:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;sudo knife configure client /etc/chef
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you&amp;#39;re using &lt;code&gt;rvm&lt;/code&gt;, use the &lt;code&gt;rvmsudo&lt;/code&gt; command prefix:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;rvmsudo knife configure client /etc/chef
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You should see output like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;Creating client configuration
Writing client.rb
Writing validation.pem
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That&amp;#39;s it! Your workstation is now a client. Let&amp;#39;s provision this server by running &lt;code&gt;chef-client&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;sudo chef-client
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Or with RVM:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;rvmsudo chef-client
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You should see output like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;INFO: *** Chef 0.10.10 ***
INFO: Client key /etc/chef/client.pem is not present - registering
INFO: Run List is []
INFO: Run List expands to []
INFO: Starting Chef Run for NODE
INFO: Running start handlers
INFO: Start handlers complete.
INFO: Loading cookbooks []
WARN: Node NODE has an empty run list.
INFO: Chef Run complete in 0.988165 seconds
INFO: Running report handlers
INFO: Report handlers complete
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Take a look inside your &lt;code&gt;$HOME&lt;/code&gt; directory and see if the &lt;code&gt;hello-word.txt&lt;/code&gt; file was created...&lt;/p&gt;

&lt;p&gt;It doesn&amp;#39;t appear the file was created. We must have done something wrong! Actually, we did everything correctly. We just forgot one step - we never &lt;strong&gt;told&lt;/strong&gt; our node to execute the recipe we just wrote. By default, Chef does not execute any of your recipes. You must explicitly require them. There are a variety of ways to do this. We will use a &lt;code&gt;run_list&lt;/code&gt; here.&lt;/p&gt;

&lt;p&gt;First, we need to figure out what our node is named. Run &lt;code&gt;knife node list&lt;/code&gt; and you should now see two nodes:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;NODE
[your_organization_name]-validator
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Mine looks like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;seth
sethvargo-validator
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We obviously want &lt;code&gt;NODE&lt;/code&gt;. In my case, it&amp;#39;s &lt;code&gt;seth&lt;/code&gt;. Now we can edit the &lt;code&gt;run_list&lt;/code&gt; for that node:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;knife node run_list add NODE hello_world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For me, that command would look like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;knife node run_list add seth hello_world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You should see the following output:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;run_list:  [recipe[hello_world]]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let&amp;#39;s inspect this node using the &lt;code&gt;show&lt;/code&gt; command:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;knife node show NODE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You should now see &lt;code&gt;hello_world&lt;/code&gt; in the &lt;code&gt;run_list&lt;/code&gt;. Run the &lt;code&gt;chef-client&lt;/code&gt; command again (remember you might need to use &lt;code&gt;sudo&lt;/code&gt;) and you should get output like the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;INFO: *** Chef 0.10.10 ***
INFO: Run List is [recipe[hello_world]]
INFO: Run List expands to [hello_world]
INFO: Starting Chef Run for seth
INFO: Running start handlers
INFO: Start handlers complete.
INFO: Loading cookbooks [hello_world]
INFO: Storing updated cookbooks/hello_world/recipes/default.rb in the cache.
INFO: Processing template[/Users/seth/hello-world.txt] action create (hello_world::default line 10)
INFO: template[/Users/seth/hello-world.txt] mode changed to 644
INFO: template[/Users/seth/hello-world.txt] updated content
INFO: Chef Run complete in 1.188536 seconds
INFO: Running report handlers
INFO: Report handlers complete
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Open up your &lt;code&gt;$HOME&lt;/code&gt; directory and you should see a file named &lt;code&gt;hello-world.txt&lt;/code&gt;. Look inside and you&amp;#39;ll see the those node variables were translated into plain text. Awesome!&lt;/p&gt;

&lt;p&gt;You can delete that file or leave it around as a reminder of how awesome Chef is. We have one last thing to do before we are done with this tutorial.&lt;/p&gt;

&lt;p&gt;Let&amp;#39;s remove that recipe from the &lt;code&gt;run_list&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;knife node run_list remove NODE hello_world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Again, mine would be:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;knife node run_list remove seth hello_world
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You should see output like the following:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;run_list:  [recipe[hello_world]]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Well, this concludes this (rather lengthy) tutorial on installing Chef, registering for Hosted Chef, creating your first cookbook, and provisioning your first machine.&lt;/p&gt;

&lt;p&gt;Part 2 of this series will cover more recipes and full provisioning and customization of your personal laptop using Chef.&lt;/p&gt;
</description>
        <pubDate>Mon, 28 May 2012 20:32:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/05/28/provision-your-laptop-with-chef-part-1/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/05/28/provision-your-laptop-with-chef-part-1/</guid>
      </item>
    
      <item>
        <title>5 Things You Always Wanted to Know About Chef</title>
        <description>&lt;p&gt;When I first started working with Chef, there were a couple of areas that I knew were going to be really awesome and helpful but I wasn&amp;#39;t sure how to get started with them.  In this presentation, I&amp;#39;ll provide a quick introduction to five things you&amp;#39;ve always wanted to know about Chef but were afraid to ask.&lt;/p&gt;

&lt;p&gt;I gave this presentation at &lt;a href=&quot;http://chefconf.opscode.com&quot;&gt;#ChefConf 2012&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Level-up your Chef skills by learning about these areas of Chef:&lt;/p&gt;

&lt;!--more--&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Attribute Precedence&lt;/strong&gt; - Role, environment, cookbook, data bag? Which attribute value will be used in my chef run?&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Encrypted Databags&lt;/strong&gt; - Chef 0.10 brought us encrypted databags. We&amp;#39;ll look at how to create and use databags and how to keep them up-to-date in your repository.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;LWRP&lt;/strong&gt; - What is a LWRP? How and why do you create one? We&amp;#39;ll look at a couple of sample LWRPs and learn how to build a simple one.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Error Handlers&lt;/strong&gt; - Demystify exception and report handlers by writing a simple one and seeing examples of how they work in the wild.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Capistrano and Chef&lt;/strong&gt; - Take a quick look at why and how to integrate Chef search into your Capistrano configuration to make deploying your Rails apps even easier.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;One thing I didn&amp;#39;t mention in the presentation was how to use the data from the encrypted data bag.  I&amp;#39;ve updated the slides to include this info but it doesn&amp;#39;t appear in the video.  In any case, here&amp;#39;s a quick demo of how you might use it:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;creds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Chef&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EncryptedDataBagItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;db&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;creds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;env_db_creds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;db_creds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rails_env&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;app_dir&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/shared/config/database.yml&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;database.yml.erb&quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;variables&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:rails_env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;rails_env&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:username&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env_db_creds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;username&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;ss&quot;&gt;:password&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env_db_creds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;video&quot;&gt;Video&lt;/h3&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;http://www.youtube.com/embed/uREL4FFPddo&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;slides&quot;&gt;Slides&lt;/h3&gt;

&lt;script async class=&quot;speakerdeck-embed&quot; data-id=&quot;4fb532f2850667001f0008f8&quot; data-ratio=&quot;1.2945638432364097&quot; src=&quot;//speakerdeck.com/assets/embed.js&quot;&gt;&lt;/script&gt;
</description>
        <pubDate>Sat, 26 May 2012 21:51:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/05/26/5-things-you-always-wanted-to-know-about-chef/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/05/26/5-things-you-always-wanted-to-know-about-chef/</guid>
      </item>
    
      <item>
        <title>The Joy of Cooking - Whip Up a Rails Environment with Chef</title>
        <description>&lt;p&gt;You&amp;#39;ve heard of Chef, Puppet, and other frameworks that can help you build out your infrastructure. You&amp;#39;ve been meaning to play around with one or more of them for some time now. Now&amp;#39;s your chance; Start cooking up on your own servers!&lt;/p&gt;

&lt;p&gt;In this presentation, I provide an introduction to Chef with a focus on what you&amp;#39;ll need to know to get a Rails application up and running.&lt;/p&gt;

&lt;p&gt;Topics include:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Introduction to Chef&lt;/li&gt;
&lt;li&gt;Nodes, roles, environments, and other terminology&lt;/li&gt;
&lt;li&gt;Introduction to cookbooks&lt;/li&gt;
&lt;li&gt;Provisioning an environment for a Rails application&lt;/li&gt;
&lt;li&gt;Deploying with Capistrano&lt;/li&gt;
&lt;/ul&gt;

&lt;!--more--&gt;

&lt;p&gt;You won&amp;#39;t be ready to compete in Iron Chef, but you will be ready to serve up your own Rails environment in no time.&lt;/p&gt;

&lt;p&gt;I gave slightly different versions of this presentation at &lt;a href=&quot;http://www.rubynation.org/&quot;&gt;RubyNation 2012&lt;/a&gt; and &lt;a href=&quot;http://chefconf.opscode.com&quot;&gt;#ChefConf 2012&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I&amp;#39;d really appreciate any comments, questions, or feedback in the comments section below.&lt;/p&gt;

&lt;h3 id=&quot;video-from-chefconf&quot;&gt;Video from ChefConf&lt;/h3&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;http://www.youtube.com/embed/X1mmzERRkeI&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;slides&quot;&gt;Slides&lt;/h3&gt;

&lt;script async class=&quot;speakerdeck-embed&quot; data-id=&quot;4fb421272cf6f5001f00ba85&quot; data-ratio=&quot;1.2945638432364097&quot; src=&quot;//speakerdeck.com/assets/embed.js&quot;&gt;&lt;/script&gt;
</description>
        <pubDate>Fri, 25 May 2012 14:59:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/05/25/the-joy-of-cooking-whip-up-a-rails-environment-with-chef/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/05/25/the-joy-of-cooking-whip-up-a-rails-environment-with-chef/</guid>
      </item>
    
      <item>
        <title>Taming the Kraken - How Operations enables developer productivity</title>
        <description>&lt;p&gt;At &lt;a href=&quot;http://railsconf2012.com/&quot;&gt;RailsConf 2012&lt;/a&gt;, I gave a presentation on how our web operations team enables developer productivity.&lt;/p&gt;

&lt;p&gt;There&amp;#39;s always a bit of tension when getting features from idea to production. In this talk, I describe some of the changes CustomInk has made to reduce this friction and keep the new features coming. Gone are the days of bi-monthly deploys, office pools dedicated to guessing when this deploy will be rolled back, and the ceremony surrounding the deploy-rollback-fix-deploy cycle. Today, ideas flow from product managers to developers to production with ease thanks to a number of changes that we&amp;#39;ve made to our teams, processes and tools.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Presenting at RailsConf was a really enjoyable experience and the presentation was well received.  There were lots of questions from the audience after the presentation.  Unfortunately, the Q &amp;amp; A section was not captured in the video.  I&amp;#39;d really appreciate any questions or feedback you have, just drop a comment below.&lt;/p&gt;

&lt;h3 id=&quot;video&quot;&gt;Video&lt;/h3&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;http://www.youtube.com/embed/5vzNzQzmAk0&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;slides&quot;&gt;Slides&lt;/h3&gt;

&lt;script async class=&quot;speakerdeck-embed&quot; data-id=&quot;4f96da12947c45001f018683&quot; data-ratio=&quot;1.2945638432364097&quot; src=&quot;//speakerdeck.com/assets/embed.js&quot;&gt;&lt;/script&gt;
</description>
        <pubDate>Fri, 25 May 2012 14:31:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/05/25/taming-the-kraken-how-operations-enables-developer-productivity/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/05/25/taming-the-kraken-how-operations-enables-developer-productivity/</guid>
      </item>
    
      <item>
        <title>Welcome Interns!</title>
        <description>&lt;p&gt;Last week the CustomInk Tech team welcomed two new interns, Nolan Carroll and Seth Vargo.  Nolan and Seth are joining us for the summer from Carnegie Mellon University where they are both majoring in Information Systems.&lt;/p&gt;

&lt;p&gt;Nolan and Seth wasted no time hopping on our &lt;a href=&quot;/blog/2012/05/14/welcome-josh-born&quot;&gt;deploy train&lt;/a&gt; last week, but they couldn&amp;#39;t have done it without the help of our (semi) automated build process.  A while ago, Nathen Harvey talked about our &lt;a href=&quot;/blog/2012/01/02/green-screen/&quot;&gt;Green Screen&lt;/a&gt; build monitor.  While this serves as a great motivator for us to keep our builds passing, the ability for us to quickly create builds for any branch is what keeps us moving fast.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Using some home grown capistrano scripts, any developer can easily create and manage an automated Jenkins build, which will automatically be monitored by Green Screen.  A developer&amp;#39;s typical workflow might look something like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;  &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;branch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_feature&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;checkout&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_feature&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;code&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;changes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;commit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;added new feature&quot;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;push&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;origin&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new_feature&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now that a new feature branch is available in our remote repository, the developer can create and start their own Jenkins build:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;  &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jenkins&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:create&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;I've created rfe_new_feature.&quot;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jenkins&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:build&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;I've found rfe_new_feature and it's building now.&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now a build is running on our Jenkins server.  More importantly, Jenkins will use it&amp;#39;s Jedi powers to detect any changes to the remote branch and automatically kick off a new build.  When builds fail, the entire team is notified and Green Screen turns red.  We have a handful of other useful Jenkins tasks as well:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;  &lt;span class=&quot;n&quot;&gt;cap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jenkins&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:build&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;# Kicks off a build for the current branch&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jenkins&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:console&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;# Shows the job's console&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jenkins&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:create&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# Create a job for the current branch&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jenkins&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:delete&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# Deletes a job with name = rfe_[current_branch]&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jenkins&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:list&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;# Lists all jobs in jenkins&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;cap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jenkins&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:status&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# Gets the status of a job with name = rfe_[current_branch]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Continuous deployment can&amp;#39;t happen without automation.  I&amp;#39;d like to give a big shout out to our Web Ops team for driving us down the automation super highway.  I&amp;#39;d also like to extend a warm welcome to Nolan and Seth, we look forward to seeing their builds pass all summer long.&lt;/p&gt;
</description>
        <pubDate>Thu, 24 May 2012 16:01:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/05/24/welcome-interns/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/05/24/welcome-interns/</guid>
      </item>
    
      <item>
        <title>Coderetreat Floyd 2012</title>
        <description>&lt;h2 id=&quot;one-saturday-dedicated-to-honing-your-craft&quot;&gt;One Saturday dedicated to honing your craft&lt;/h2&gt;

&lt;p&gt;It&amp;#39;s easy to get caught up in the whirlwind of projects and deadlines and forget that software development is very much a craft that needs to be practiced. The complex requirements and external pressures of a production application often cloud our judgement, forcing us to forgo the fundamental concepts that create great software.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s useful to step away from the code you work on day-to-day to focus on honing your skills merely for the sake of improving as a developer. Corey Haines&amp;#39; &lt;a href=&quot;http://coderetreat.org&quot;&gt;Coderetreat&lt;/a&gt; format facilitates this by strongly suggesting its participants delete their code immediately after each session. By the end of the day, the value created is not the code that is written, but the skills and insights learned from writing that code.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;The Coderetreat consisted of five 45 minute pairing sessions building &lt;a href=&quot;http://en.wikipedia.org/wiki/Conway&amp;#x27;s_Game_of_Life&quot;&gt;Conway&amp;#39;s Game of Life&lt;/a&gt;. The &amp;#39;zero-player&amp;#39; game is a form of cellular automata that consists of a grid of dead or alive &amp;#39;cells&amp;#39; represented by the squares in the grid. Based on a set of four simple rules, the grid comes to life with complex patterns and interactions between the cells.&lt;/p&gt;

&lt;p&gt;The rules are:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Any live cell with fewer than two live neighbours dies, as if caused by under-population.&lt;/li&gt;
&lt;li&gt;Any live cell with two or three live neighbours lives on to the next generation.&lt;/li&gt;
&lt;li&gt;Any live cell with more than three live neighbours dies, as if by overcrowding.&lt;/li&gt;
&lt;li&gt;Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;With just a simple initial configuration of cells, patterns like Gosper&amp;#39;s Glider Gun can be made:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/gospers_glider_gun.gif&quot; alt=&quot;Gosper's Glider Gun&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Rules and image taken from &lt;a href=&quot;http://en.wikipedia.org/wiki/Conway&amp;#x27;s_Game_of_Life&quot;&gt;Conway&amp;#39;s Game of Life Wikipedia Article&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;session-one&quot;&gt;Session One&lt;/h3&gt;

&lt;p&gt;For the first session, I worked with another developer to build up &amp;#39;Cell&amp;#39; object using CoffeeScript and Jasmine. It went well, but about half way into the session, the requirements of the game were changed to include zombie cells that come to life based on its own set of rules. We were asked about the impact of introducing these new requirements into our code. We were largely unaffected by the change due to not being very far into the implementation, but it was obvious to see how we could have been bitten by the change.&lt;/p&gt;

&lt;p&gt;We chose to deal with alive and dead cells through a boolean attribute on the Cell class. Had we fleshed out the game more, our logic and objects would be tightly bound to this concept and introducing a third state would require considerable time and effort.&lt;/p&gt;

&lt;p&gt;Thus, the stage was set for the remaining sessions. We would learn how to better build software that can bend and mold to the often changing demands of the real world.&lt;/p&gt;

&lt;h3 id=&quot;session-two&quot;&gt;Session Two&lt;/h3&gt;

&lt;p&gt;In Session Two, we were introduced to a set of constraints:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;No primitives across method boundaries&lt;/li&gt;
&lt;li&gt;Less than 3 lines of code per method&lt;/li&gt;
&lt;li&gt;No if statements&lt;/li&gt;
&lt;li&gt;No explicit loops&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Immediately we were able to notice changes in our design:&lt;/p&gt;

&lt;p&gt;Without if statements, instead of a Cell class with a boolean state, we pushed the state logic into AliveCell and DeadCell classes. Our CellCollection class only needed to know about its Cell-like objects, specific behavior was encapsulated within each AliveCell or DeadCell.&lt;/p&gt;

&lt;p&gt;Having less than 3 lines of code per method encouraged a top-down approach to designing our game. With only two lines available to us per method, we were forced to continuously delegate behavior to new objects. The result was a healthy layer of abstractions above very specific implementing objects.&lt;/p&gt;

&lt;h3 id=&quot;session-three&quot;&gt;Session Three&lt;/h3&gt;

&lt;p&gt;Session Three lifted the constraints from Session Two, but introduced the mute session:&lt;/p&gt;

&lt;p&gt;Each pair would have one test writer and one code writer. Adhering to TDD, the test writer would write a test that defined the desired behavior of an object. The code writer would write the code to match that test with two caveats:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Neither the test writer nor the code writer could speak to each other&lt;/li&gt;
&lt;li&gt;The code writer was instructed to be an &amp;#39;Evil Coder&amp;#39; by only writing enough (likely wrong) code to get the corresponding test to pass&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;We found that the top-down abstraction-building method learned in the previous session was helpful in avoiding the obstacle that was the Evil Coder. It was easy to write specs of objects merely calling methods on other objects. By not testing the result state of some combination of logic, the Evil Coder was forced to implement exactly the behaviors defined by the test writer.&lt;/p&gt;

&lt;p&gt;At the detail layer, proper use of stubs and mocks prevented the Evil Coder from purposefully implementing the wrong code.&lt;/p&gt;

&lt;h3 id=&quot;session-four&quot;&gt;Session Four&lt;/h3&gt;

&lt;p&gt;Session Four again dropped all previous constraints but required a 2-minute green-to-green cycle:&lt;/p&gt;

&lt;p&gt;At the start of writing a test, we would start a timer for 2 minutes. If by the end of those 2 minutes we did not have that test passing, we would delete our changes for that cycle and start over. Between each cycle, we would have 2 minutes to refactor what we had.&lt;/p&gt;

&lt;p&gt;After several minutes the entire room rang with alarms. We found ourselves trying to test too much at once. In order to fit within the 2 minutes cycles, it was often helpful to initially use a naïve approach to get our test passing and refactor later.&lt;/p&gt;

&lt;p&gt;By taking the next simplest step in every cycle, we ere able to have completely working code every 2 minutes.&lt;/p&gt;

&lt;h3 id=&quot;session-five&quot;&gt;Session Five&lt;/h3&gt;

&lt;p&gt;Session Five removed all constraints and allowed us to use what we learned in the previous sessions freely.&lt;/p&gt;

&lt;p&gt;Interestingly enough, although Session Five had the same lack of constraints as Session One, the code we wrote was remarkably different and incorporated many of the ideas from the previous sessions.&lt;/p&gt;

&lt;h3 id=&quot;wrapping-up&quot;&gt;Wrapping Up&lt;/h3&gt;

&lt;p&gt;At the end of the day, all of the participants grouped up and discussed what they had discovered in during the retreat.&lt;/p&gt;

&lt;p&gt;Session Two showed us how encapsulating behaviors into objects can dramatically reduce the impact of changes to your system. Session Three reinforced the idea of Tests as Documentation and revealed an approach that allows for a high degree of unit test coverage. Session Four encouraged us to work in smaller batches, allowing constant verification of working code and reducing the need to debug larger chunks of code at infrequent intervals.&lt;/p&gt;

&lt;p&gt;These concepts are not new. They are fundamental aspects of object oriented design and test driven development that have been practiced successfully for years. The Coderetreat is a great way to expose these concepts to those who have never heard of them, and to reinforce the concepts to those who have merely forgotten.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s also a great way of keeping in touch with the developer community, with more relaxed gathering and discussion before and after the actual event. I had a great weekend in Floyd and I would recommend a Coderetreat for anyone interested a weekend of practice and reflection.&lt;/p&gt;

&lt;p&gt;I hope to see you at one some day!&lt;/p&gt;
</description>
        <pubDate>Wed, 16 May 2012 15:27:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/05/16/coderetreat-floyd-2012/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/05/16/coderetreat-floyd-2012/</guid>
      </item>
    
      <item>
        <title>Welcome Josh Born!</title>
        <description>&lt;p&gt;The CustomInk technology team wants to extend a warm welcome to our newest member, Josh Born.  Josh wasted no time and hopped onto the deploy train today for his first production release.&lt;/p&gt;

&lt;p&gt;At CustomInk we like to &lt;a href=&quot;http://www.customink.com/designs/proofs/jub0-000p-fxs7/front.jpg&quot; target=&quot;_new&quot;&gt;continuously deploy&lt;/a&gt; changes to our site.  This means no sprints, no iterations, no milestones.  We work, and when we are satisfied with our work, we deploy it.  On average, engineers deploy updates to our site about five to seven times a day.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;We like to manage our deployments in a very low fidelity way, which was inspired largely by the engineers at Etsy.  We call it the &amp;quot;deploy train&amp;quot; and it&amp;#39;s nothing more then a virtual line managed by our campfire topic.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/deploy_train.png&quot; alt=&quot;Campfire Deploy Train&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;When you are ready to deploy a change, you add yourself to the end of the deploy train and simply wait for your turn.  The responsibility of the engineer at the front of the deploy train is to merge, deploy, and verify his or her changes in production.  When the engineer is satisfied, they take themselves off the list and notify the next engineer in line that it is their turn.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/josh_born_ponder_deploy.jpg&quot; alt=&quot;Josh ponders his first release&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This will be the first of many deploys for Josh.  We are very excited to have him on board and look forward to his next release, sometime later this week.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/josh_born_first_deploy.png&quot; alt=&quot;Josh releases his first code&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 14 May 2012 13:17:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/05/14/welcome-josh-born/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/05/14/welcome-josh-born/</guid>
      </item>
    
      <item>
        <title>Critical Oversight: Indexes</title>
        <description>&lt;p&gt;One of the most common production issues I run into are missing indexes.  The other day I got to thinking that they are usually missing because of the evolution of the software.&lt;/p&gt;

&lt;p&gt;We might use some rails generators to prototype some basic functionality.  Then we&amp;#39;ll iterate over a set of stories incorporating new behavior.  Maybe we&amp;#39;ll do some refactoring, scrap some features, pull out some dead code and &amp;quot;harden&amp;quot; some areas we&amp;#39;ve identified as brittle.  But we almost never analyze the &amp;quot;data model&amp;quot; before we deploy.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Have we considered our data access patterns?  Did we create foreign keys to enforce data integrity?  Do we have any idea how big these tables are going to grow?  We almost certainly don&amp;#39;t need to shard them…do we?&lt;/p&gt;

&lt;p&gt;No, we almost never do this.&lt;/p&gt;

&lt;p&gt;Instead we race to ship.  &amp;quot;&lt;a href=&quot;http://www.customink.com/lab/?cid=jub0-000p-fxs7#shared&quot;&gt;Deploy early, deploy often&lt;/a&gt;&amp;quot; is our motto, and we love it.  Deploying code is awesome, it means people are going to use it.  People using our code makes us happy because it means we didn&amp;#39;t waste our time today.  We did something real that people got to use.&lt;/p&gt;

&lt;p&gt;A few months down the road comes the tipping point.  One of your tables amasses a few hundred thousand rows.  Your pages start to take seconds to load because your queries take seconds to run.  Your database connections are tied up, and when your site gets enough traffic, things start to fall over.&lt;/p&gt;

&lt;p&gt;This literally just happened to us.  Again.  We missed one little index on one little foreign key in one little table.  And then one of our database servers stopped responding.   Spiked CPU, connections maxed out, alerts firing, then fail over.&lt;/p&gt;

&lt;p&gt;While Rails makes it really easy to create models without even thinking about the database, Rails also makes it very easy to deal with the database.  In James Edward Gray&amp;#39;s talk &lt;a href=&quot;http://speakerdeck.com/u/jeg2/p/10-things-you-didnt-know-rails-could-do?utm_source=rubyweekly&amp;utm_medium=email&quot;&gt;10 Things You Didn&amp;#39;t Know Rails Could Do&lt;/a&gt; he shows you how to use rails migration generators to create your table AND index your fields.&lt;/p&gt;

&lt;p&gt;If you don&amp;#39;t like generators, you can simply use the &amp;#39;add_index&amp;#39; method in the migration itself:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CreateFoo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveRecord&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Migration&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;up&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;create_table&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:foos&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;integer&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:foreign_key&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;string&lt;/span&gt;  &lt;span class=&quot;ss&quot;&gt;:other_valuable_data&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;add_index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:foos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:foreign_key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'foos_foreign_key'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Of course, if you don&amp;#39;t think to add the index when you created the table, you can always create a migration just to add the index.  The key is adding a checkpoint to your development process in which you analyze your data structures for completeness.  Adding this checkpoint gives you a chance to add any missing database constructs before it&amp;#39;s too late.&lt;/p&gt;
</description>
        <pubDate>Fri, 27 Apr 2012 11:48:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/04/27/critical-oversight-indexes/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/04/27/critical-oversight-indexes/</guid>
      </item>
    
      <item>
        <title>RubyNation 2012</title>
        <description>&lt;p&gt;&lt;a href=&quot;http://www.rubynation.org/&quot;&gt;RubyNation&lt;/a&gt; is awesome.  Most ruby events are awesome, but in particular I enjoy RubyNation because it&amp;#39;s local to me.  It&amp;#39;s not that I don&amp;#39;t like traveling to other conferences or that I think Washington DC is the best possible place for a conference.  What I love about RubyNation being local is having 200+ ruby developers from my immediate locale in one single place, at one single time.  Of course, it doesn&amp;#39;t hurt to have &lt;a href=&quot;http://onestepback.org&quot;&gt;Jim Weirich&lt;/a&gt; and &lt;a href=&quot;http://coreyhaines.com/&quot;&gt;Corey Haines&lt;/a&gt; show up, either.&lt;/p&gt;

&lt;p&gt;The other thing I love about RubyNation are all the great talks.  Even the bad talks are still good talks.  Even the terrible talks turn into great talks because when you step into the hallway, there are amazing people who showed up to RubyNation waiting to have a great talk with you.  Every year, without fail, I meet new people and learn new things.  I don&amp;#39;t think you can put a price tag on that.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;There were lots of highlights for me this year, and some surprises.  The first surprise should really have been no surprise at all, since it&amp;#39;s a developing trend at all Ruby/Rails related events: JavaScript.  In his opening keynote, Justin Getland says something to the effect of &amp;quot;Adapt or die&amp;quot;.  Justin&amp;#39;s message was clear: wherever there is a gap, someone will be there to fill it.  There is a gap in JavaScript knowledge, so it&amp;#39;s time to step in or someone else will.&lt;/p&gt;

&lt;p&gt;The first day at RubyNation had one track that was entirely JavaScript and View focused.  The second track was a grab bag of ruby related topics such as toolkits or programming approaches.  Some of the JS/View track presentations that stuck out to me were:&lt;/p&gt;

&lt;p&gt;Roy Tomeij&amp;#39;s talk on &lt;a href=&quot;http://roytomeij.com/slides/rubynation2012&quot;&gt;Modular and Reusable Front-End code&lt;/a&gt;,
Brennan Dunn&amp;#39;s talk on &lt;a href=&quot;http://speakerdeck.com/u/brennandunn/p/rails-without-views&quot;&gt;Rails Without Views&lt;/a&gt;,
John Athayde&amp;#39;s talk on &lt;a href=&quot;http://speakerdeck.com/u/boboroshi/p/the-rails-view-the-junk-drawer-grows-up&quot;&gt;The Rails View: The Junk Drawer Grows Up&lt;/a&gt;,
Chris Strom&amp;#39;s talk on &lt;a href=&quot;http://speakerdeck.com/u/chris/p/you-aint-spdy-ruby-nation&quot;&gt;You Ain&amp;#39;t SPDY&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Andrew Glover&amp;#39;s &lt;a href=&quot;https://github.com/aglover/resque-example&quot;&gt;Asynchronous Processing and Messaging&lt;/a&gt; talk was a great introduction to Resque and Redis.  Although I didn&amp;#39;t attend his talk, people told me that Mike Subelsky&amp;#39;s talk &lt;a href=&quot;http://www.subelsky.com/2012/03/slides-from-my-coding-for-uncertainty.html&quot;&gt;Coding for Uncertainty&lt;/a&gt; was amazing.  Before you knew it, Jim Weirich was wrapping up day one by teaching us how to use Ruby for purely functional programming purposes to implement the &lt;a href=&quot;https://twitter.com/#!/karledurante/status/183312951598514176/photo/1&quot;&gt;Y Combinator&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Day two had a couple of front end related talks, but really seemed to focus more on some of the toolkits we use with ruby and some theory to help rubyists navigate the programming waters.&lt;/p&gt;

&lt;p&gt;I really enjoyed Russ Olsen&amp;#39;s &lt;a href=&quot;http://speakerdeck.com/u/russolsen/p/eloquent-explanations-rubynation-2012&quot;&gt;Eloquent Expressions&lt;/a&gt; and Jeff Casimir&amp;#39;s &lt;a href=&quot;http://speakerdeck.com/u/j3/p/adventures-on-the-golden-path&quot;&gt;Adventures on the Golden Path&lt;/a&gt;.  As well, Patrick Peak and Nathen Harvey gave great talks on how to better organize your applications with &lt;a href=&quot;http://speakerdeck.com/u/peakpg/p/plays-well-with-others-building-mountable-apps&quot;&gt;mountable applications&lt;/a&gt; and &lt;a href=&quot;https://github.com/nathenharvey/cooking-with-chef&quot;&gt;deployment strategies&lt;/a&gt;, respectively.  &lt;a href=&quot;https://github.com/ajburton&quot;&gt;Anthony Burton&lt;/a&gt; has posted a more &lt;a href=&quot;https://gist.github.com/2182892&quot;&gt;complete list of talks here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Corey Haines closed out the event with a call to arms for our community to mentor the next generation.  Corey&amp;#39;s point was simple: there is a need for more developers.  Companies will step in to &amp;quot;make&amp;quot; new ones.  Do you want good developers or bad developers?  &lt;a href=&quot;http://rubytutor.org/&quot;&gt;Ruby Tutor&lt;/a&gt; is a place where we can help to make the next generation great.&lt;/p&gt;

&lt;p&gt;Thanks to all the people who made RubyNation such a great event this year.  See you all next year.&lt;/p&gt;
</description>
        <pubDate>Mon, 26 Mar 2012 13:36:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/03/26/rubynation-2012/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/03/26/rubynation-2012/</guid>
      </item>
    
      <item>
        <title>Simple Garbage Collection Tuning for Rails</title>
        <description>&lt;p&gt;Ruby is known for being bad at garbage collection.  The truth is that the default GC settings aren&amp;#39;t very good for a Rails application so if you run a Rails app you really should do some tuning (this requires either Ruby Enterprise or Ruby 1.9.2).  Here&amp;#39;s a streamlined process for getting started:&lt;/p&gt;

&lt;h3 id=&quot;get-a-baseline&quot;&gt;Get a Baseline&lt;/h3&gt;

&lt;p&gt;Turn on collecting GC stats for New Relic (of course you&amp;#39;re using &lt;a href=&quot;http://newrelic.com/&quot;&gt;New Relic&lt;/a&gt;).  You want to know what you&amp;#39;re fixing and this will probably show you that about &amp;#8531; of the &amp;quot;Ruby&amp;quot; portion of your app response time is really garbage collection.  Just add the following line to your &lt;code&gt;environment.rb&lt;/code&gt; file:&lt;/p&gt;

&lt;p&gt;&lt;code&gt;GC.enable_stats if defined?(GC) &amp;amp;&amp;amp; GC.respond_to?(:enable_stats)&lt;/code&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;h3 id=&quot;examine-the-heap&quot;&gt;Examine the Heap&lt;/h3&gt;

&lt;p&gt;Once you&amp;#39;ve gathered enough data in NewRelic to be able to see a change, you&amp;#39;ll want to see what the heap looks like in one of your passenger threads.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Take one of your app servers out of production&lt;/li&gt;
&lt;li&gt;Install gdb.rb:&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;sudo gem install gdb.rb&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Use &lt;code&gt;sudo passenger-status&lt;/code&gt; to find a thread that has handled enough requests to be pretty well warmed up and note its PID.&lt;/li&gt;
&lt;li&gt;Connect to the passenger thread with gdb.rb:&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;sudo gdb.rb &amp;lt;pid&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Get gdb.rb to print out the stats about your objects:&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code&gt;ruby objects&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;You&amp;#39;re looking for a section that looks like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;HEAPS            9
  SLOTS      3061241
  LIVE       1457106 (47.60%)
  FREE       1604135 (52.40%)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We&amp;#39;re going to assume that &amp;quot;LIVE&amp;quot; number is representative of how many slots you normally use up.  Round that up to something sensible like 1,500,000.  Now do the math like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;RUBY_HEAP_MIN_SLOTS=1800000          # Slots Live + 20%
RUBY_HEAP_FREE_MIN=18000             # 1% of HEAP_MIN_SLOTS
RUBY_HEAP_SLOTS_INCREMENT=144000     # 8% of HEAP_MIN_SLOTS
RUBY_HEAP_SLOTS_GROWTH_FACTOR=1
RUBY_GC_MALLOC_LIMIT=60000000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I know there&amp;#39;s no explanation for those last two settings, but I haven&amp;#39;t really explained the math behind the other numbers either.  This is meant to be a good starting point.  Its customized for your app to some degree, but with some assumptions.&lt;/p&gt;

&lt;h2 id=&quot;wrap-your-ruby&quot;&gt;Wrap Your Ruby&lt;/h2&gt;

&lt;p&gt;Now create a wrapper script that sets these variables in the environment before calling ruby.  I&amp;#39;m going to assume you put it in &lt;code&gt;/usr/local/bin&lt;/code&gt; and call it &lt;code&gt;ruby_tuned&lt;/code&gt;.  The file should look like this (make sure you adjust for the path to ruby on your system):&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RUBY_HEAP_MIN_SLOTS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1800000
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RUBY_HEAP_FREE_MIN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;18000
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RUBY_HEAP_SLOTS_INCREMENT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;144000
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RUBY_HEAP_SLOTS_GROWTH_FACTOR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;RUBY_GC_MALLOC_LIMIT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;60000000

&lt;span class=&quot;nb&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/usr/local/bin/ruby&quot;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$@&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;update-passenger&quot;&gt;Update Passenger&lt;/h2&gt;

&lt;p&gt;Have passenger use your &lt;code&gt;ruby_tuned&lt;/code&gt; wrapper instead of calling ruby directly by updating &lt;code&gt;passenger.conf&lt;/code&gt; (look in &lt;code&gt;/etc/apache2/mods-enabled&lt;/code&gt; on Ubuntu).  You&amp;#39;ll want it to look like this:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;PassengerRoot /usr/local/lib/ruby/gems/1.8/gems/passenger-3.0.11
PassengerRuby /usr/local/bin/ruby_tuned
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now restart apache, add the server back into production and check NewRelic to see how you did.&lt;/p&gt;

&lt;h2 id=&quot;what-we-got&quot;&gt;What We Got&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;http://technology-customink-com.s3.amazonaws.com/images/Response_Time_GC.jpg&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot;&gt;&lt;/p&gt;

&lt;p&gt;The graph above is from New Relic as I rolled the changes out one server at a time.  When we applied these changes to our first app we saw:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Time spent in GC drop from ~35ms per request to ~10ms&lt;/li&gt;
&lt;li&gt;CPU usage drop almost in half&lt;/li&gt;
&lt;li&gt;A slight increase in memory used&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;where-those-numbers-actually-came-from&quot;&gt;Where Those Numbers Actually Came From&lt;/h2&gt;

&lt;p&gt;To understand these settings and what they do checkout:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.viddler.com/v/87ae120a&quot;&gt;This Presentation from Joe Damato&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.coffeepowered.net/2009/06/13/fine-tuning-your-garbage-collector/&quot;&gt;This Post from Chris Heald&lt;/a&gt; (he adds a gem to his app instead of using gdb.rb)&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.rubyenterpriseedition.com/documentation.html#_garbage_collector_performance_tuning&quot;&gt;The Ruby Enterprise GC documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Fri, 16 Mar 2012 08:07:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2012/03/16/simple-garbage-collection-tuning-for-rails/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/03/16/simple-garbage-collection-tuning-for-rails/</guid>
      </item>
    
      <item>
        <title>Simple Data Mapper</title>
        <description>&lt;p&gt;I recently tackled a pretty typical data migration task where some source model had to be transformed into some target model.  About 80% of the elements were mapped field for field, and the other 20% had to be mutated in some way.  Tired of writing one off rake tasks to pull and transform data, I came up with a little data mapper class that I cold reuse in the future.&lt;/p&gt;

&lt;!--more--&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Mapper&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:source_model&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:mappings&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AttributeMapping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ListMapping&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;AttributeMapping&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:fields&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# fields - array of field symbols we want to map data into&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fields&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source_obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{}.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tap&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source_obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ComplexMapping&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;AttributeMapping&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:field&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:instruction&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;# field       - field symbol we want to map data into&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# instruction - lambda which accepts source object and source attribute.&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;#               expected to return value to be mapped to field (on target obj)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instruction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instruction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instruction&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source_obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instruction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source_obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mappings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_model&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source_model&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;mappings&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mappings&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;conjure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map_values_for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;source_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;mappings&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;camelize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;constantize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;map_values_for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mappings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{}.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tap&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;mappings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mapping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;AttributeMapping&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mapping&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mapping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source_model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;!-- more --&gt;

&lt;p&gt;Using the mapper is really simple.  Let&amp;#39;s say my source model, LegacyCustomer, is based off of a legacy table from an older system and looks like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;LegacyCustomer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;userid: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;# primary key&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;creationdate: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# date record was created&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;accountnum: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;# customer number. it's prefixed with&lt;/span&gt;
                          &lt;span class=&quot;c1&quot;&gt;# &quot;LGCY-&quot; string that we no longer need!&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And we want to migrate the LegacyCustomer data to a new Customer model that looks like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;no&quot;&gt;Customer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;id: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;created_at: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;updated_at: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;datetime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;ss&quot;&gt;account_number: &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;My rake task to run the migration would look like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:migrate&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:legacy_customers&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;field_mappings&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;ss&quot;&gt;:userid&lt;/span&gt;         &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;ss&quot;&gt;:creation_date&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Mapper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ListMapping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                          &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:created_at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:update_at&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
                         &lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
      &lt;span class=&quot;ss&quot;&gt;:user_data&lt;/span&gt;      &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Mapper&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ComplexMapping&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                          &lt;span class=&quot;ss&quot;&gt;:account_number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                          &lt;span class=&quot;nb&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;gsub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'LGCY-'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;
                         &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;LegacyCustomer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;legacy_customer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;mapper&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Mapper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;legacy_customer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field_mappings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;customer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mapper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;conjure&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:customer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;customer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;save!&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As my migration marched on &amp;#39;one off&amp;#39; data errors would pop up causing the script to fail.  This is what ultimately led me to create the ComplexMapping class.  Every time some white space, funny character, or field split requirement bombed my script I was able to add some code to my ComplexMapping requirement to solve it.&lt;/p&gt;

&lt;p&gt;I wanted to share this experience for two reasons:&lt;/p&gt;

&lt;p&gt;Ruby is awesome.  Metaprogramming and Procs made this mapper possible.  When I first started programming with Ruby, these were the two hardest concepts for me to wrap my head around.  Investing time into learning these aspects of ruby have made me such a better ruby programmer.&lt;/p&gt;

&lt;p&gt;The second reason is to reinforce the lesson that doing things the lazy (comfortable) way will rarely ever benefit you.  This mapper class not only made writing and maintaining my migration script easier.  It has also found it&amp;#39;s way into some production code.&lt;/p&gt;

&lt;p&gt;Abstracting concepts (or remembering the &lt;a href=&quot;http://en.wikipedia.org/wiki/Single_responsibility_principle&quot;&gt;single responsibility principle&lt;/a&gt;) will always benefit you in the future.&lt;/p&gt;
</description>
        <pubDate>Fri, 02 Mar 2012 15:35:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2012/03/02/simple-data-mapper/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/03/02/simple-data-mapper/</guid>
      </item>
    
      <item>
        <title>Organizing Your Rails Models</title>
        <description>&lt;p&gt;Like people, applications start out small.  Unlike people, applications do not always have a predictable growth pattern.  Sometimes they grow really big, and sometimes not at all.  When applications grow large, organization becomes important because it is no longer possible to remember every detail about your application without consulting the source code.&lt;/p&gt;

&lt;p&gt;&amp;quot;We use Rails, the convention tells us how to organize our code&amp;quot;.  Yes, but having 50 or more files in your app/models directory is hardly being organized.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;A simple thing I like to do is group related models into folders.  This allows you to organize the related models of a domain into a single location while any shared or stand alone models simply remain in the root directory.  For instance, my directory structure may look something like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-&quot; data-lang=&quot;&quot;&gt;app
|_models
   |_address.rb
   |_orders
      |_order.rb
      |_item.rb
      |_shipping_detail.rb
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And to make sure Rails can find all of my models, I need to update config/application.rb file as such:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;autoload_paths&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'app/models/**'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This allows developers to quickly see what models make up an order and what models either stand on their own, or are shared across multiple domains.  And for a large application, you are now able to quickly summarize the high level business objects that make up your system.&lt;/p&gt;
</description>
        <pubDate>Fri, 03 Feb 2012 15:38:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2012/02/03/organizing-your-rails-models/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/02/03/organizing-your-rails-models/</guid>
      </item>
    
      <item>
        <title>PagerDuty, Nagios and Chef</title>
        <description>&lt;h2 id=&quot;three-things-that-work-great-together&quot;&gt;Three Things that Work Great Together&lt;/h2&gt;

&lt;p&gt;If you use Chef and Nagios, you already know what a great combination they make.  As you build new servers they automatically start getting monitored by Nagios.  Without you having to do anything they&amp;#39;re grouped together based on role, so its easy to apply the same checks for all servers in a given role.  If you haven&amp;#39;t tried Nagios built with the chef cookbook its easy to get started with this &lt;a href=&quot;http://wiki.opscode.com/display/chef/Nagios+Quick+Start&quot;&gt;guide&lt;/a&gt; from Opscode.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.pagerduty.com/%5D&quot;&gt;PagerDuty&lt;/a&gt; is a service that manages your on-call alerting and escalation policies.  Its hard to love a service that wakes you up in the middle of the night telling you about problems with your servers (my wife is really not a fan), but PagerDuty is helpful.  We generally set it to send an email about a problem first, then send an SMS text and finally to actually make a phone call if no one has responded.  It will go through a rotating list of people on call and accepts alerts from a number of monitoring services including Nagios and AlertSite.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Opscode recently accepted my addition of a PagerDuty recipe to the &lt;a href=&quot;https://github.com/opscode/cookbooks/tree/master/nagios&quot;&gt;Nagios cookbook&lt;/a&gt; which makes it incredibly easy to connect your Nagios instance to PagerDuty.  You just add a PagerDuty API key as an attribute, apply the pagerduty recipe to your nagios server (see their &lt;a href=&quot;http://www.pagerduty.com/docs/guides/nagios-integration-guide&quot;&gt;guide&lt;/a&gt; for instructions on getting your key) and you&amp;#39;re good to go.&lt;/p&gt;

&lt;p&gt;If you add the API key(s) to your Chef environments, you can tie each environment to a different escalation policy.  That way your staging environments just send email alerts while production actually texts and calls.&lt;/p&gt;

&lt;p&gt;One of the big wins of using the Nagios plugins is that if a service recovers the PagerDuty incident gets resolved automatically so it doesn&amp;#39;t continue to escalate the problem.  Also if you acknowledge a problem in Nagios the acknowledgment flows through to PagerDuty.&lt;/p&gt;
</description>
        <pubDate>Tue, 31 Jan 2012 10:14:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2012/01/31/pagerduty/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/01/31/pagerduty/</guid>
      </item>
    
      <item>
        <title>Green Screen</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://github.com/customink/greenscreen&quot;&gt;Green Screen&lt;/a&gt; is a build monitoring tool that is designed to be used as a dynamic Big Visible Chart (BVC) in your work area. It lets you add links to your build servers and displays the largest possible information on a monitor so that the team can see the build status from anywhere in the room.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nathenharvey.s3-website-us-east-1.amazonaws.com/blog/images/greenscreen/greenscreen.jpg&quot; alt=&quot;Green Screen Monitor&quot; class=&quot;tb-Img tb-Img--responsive tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We use Green Screen at &lt;a href=&quot;http://www.customink.com&quot;&gt;CustomInk&lt;/a&gt; to look after our continuous integration servers, currently 3 Hudson servers and one Jenkins cluster. We have a monitor mounted in the engineering office that makes it easy for everyone to quickly assess the build status.&lt;/p&gt;

&lt;p&gt;Green Screen is a simple Sinatra application that is &lt;a href=&quot;http://nathenharvey.com/blog/2012/01/02/deploying-green-screen&quot;&gt;easy to configure and deploy&lt;/a&gt;.  It works well with any continuous integration server that conforms to the &lt;a href=&quot;http://confluence.public.thoughtworks.org/display/CI/Multiple+Project+Summary+Reporting+Standard&quot;&gt;multiple project summary reporting standard&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You can see a sample Green Screen app running at &lt;a href=&quot;http://greenscreenapp.com&quot;&gt;http://greenscreenapp.com&lt;/a&gt;.  Be forewarned, this sample Green Screen looks at all of the builds currently running on &lt;a href=&quot;http://ci.jenkins-ci.org&quot;&gt;http://ci.jenkins-ci.org&lt;/a&gt;.  This is fine for demo purposes but you may find it to be a bit overwhelming since it&amp;#39;s &lt;strong&gt;over 300 builds&lt;/strong&gt; at the time of this writing.&lt;/p&gt;

&lt;!--more--&gt;

&lt;h2 id=&quot;history&quot;&gt;History&lt;/h2&gt;

&lt;p&gt;Green Screen was originally implemented by &lt;a href=&quot;https://github.com/martinjandrews&quot;&gt;Marty Andrews&lt;/a&gt; and &lt;a href=&quot;http://blog.martyandrews.net/2009/08/greenscreen-build-monitor-bvc.html&quot;&gt;announced on his blog in 2009&lt;/a&gt;. In the original version, a build that was in progress would blink on the screen.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nathenharvey.s3-website-us-east-1.amazonaws.com/blog/images/greenscreen/4565_building.jpg&quot; alt=&quot;matrinjandrews Green Screen&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/rsutphin&quot;&gt;Rhett Sutphin&lt;/a&gt; improved the layout of green screen and introduced a new color, yellow, for builds that are in progress.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nathenharvey.s3-website-us-east-1.amazonaws.com/blog/images/greenscreen/4566-building.jpg&quot; alt=&quot;rsutphin Green Screen&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;After using these versions for a while at CustomInk, we decided that the most important thing to know was which builds were failing. Once you get past a handful of builds, it&amp;#39;s no longer very interesting to see every build. We forked Rhett&amp;#39;s version and created a &lt;a href=&quot;https://github.com/customink/greenscreen&quot;&gt;new layout for Green Screen&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If everything is passing, the screen is basically one giant checkmark.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nathenharvey.s3-website-us-east-1.amazonaws.com/blog/images/greenscreen/green.jpg&quot; alt=&quot;customink Green Screen&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;If there are any failing builds, they&amp;#39;re shown in the main area while all others are displayed on the right.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nathenharvey.s3-website-us-east-1.amazonaws.com/blog/images/greenscreen/4567.jpg&quot; alt=&quot;customink failed build&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Finally, a build that previously failed will be shown in yellow while it&amp;#39;s rebuilding.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://nathenharvey.s3-website-us-east-1.amazonaws.com/blog/images/greenscreen/4567_building.jpg&quot; alt=&quot;customink building&quot; class=&quot;tb-Img tb-Img--responsive-ctr tb-Img--fancy&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We&amp;#39;ve also added support for controlling which builds are displayed from each CI server. So that you can explicitly include or exclude builds or just go with the default behavior of showing all builds on the server.&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;sub&gt;Reposted from &lt;a href=&quot;http://nathenharvey.com/blog/2012/01/02/green-screen/&quot;&gt;Nathen Harvey&amp;#39;s blog&lt;/a&gt;.&lt;/sub&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 02 Jan 2012 14:17:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2012/01/02/green-screen/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2012/01/02/green-screen/</guid>
      </item>
    
      <item>
        <title>Why we chose Chef over Puppet at CustomInk</title>
        <description>&lt;p&gt;Not unlike most technology choices, the choice of which configuration management tool to use for managing your infrastructure as code is sure to spark debate among opinionated technologists. There are certainly a number of choices available all of which have their own strengths and weaknesses. There are a number of things to consider as you select a tool.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;Before we get into any of the specifics, I want to make it clear that the &amp;quot;right&amp;quot; answer to this question is a simple, but emphatic &amp;quot;yes!&amp;quot; Yes, you should be using a tool that allows you to manage your infrastructure as code. That tool should NOT be a server.txt file that you keep on the machine that documents the installation, set-up, and configuration changes you&amp;#39;ve made. Moving that text to somewhere other than the local server is a step in the right direction but isn&amp;#39;t really the answer. Moving the server.txt file to your corporate wiki is going to suck just as bad.&lt;/p&gt;

&lt;p&gt;I think Mark Imbriaco summed it up quite nicely in 140 characters or less:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Pro-tip: Nobody gives a shit about your opinion of Chef vs. Puppet. Seriously. Just fucking stop it already. #usewhatworksforyou&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;As you consider which tool is right for you, you&amp;#39;ll need to consider a number of questions. I think of these as the WIIFs, or &amp;quot;what&amp;#39;s in it for...&amp;quot; questions:&lt;/p&gt;

&lt;h3 id=&quot;wiifm-whats-in-it-for-me&quot;&gt;WIIFM - What&amp;#39;s in it for me&lt;/h3&gt;

&lt;p&gt;You&amp;#39;re going to want a tool that you&amp;#39;re happy working with. You&amp;#39;re going to make an investment in this tool. You&amp;#39;ll need to learn to be proficient with the tool, master it, and use it in your everyday workflow. Pick something that you&amp;#39;ll be happy working with for some time.&lt;/p&gt;

&lt;h3 id=&quot;wiifc-whats-in-it-for-my-customers&quot;&gt;WIIFC - What&amp;#39;s in it for my customers&lt;/h3&gt;

&lt;p&gt;It&amp;#39;s highly unlikely that your customers know or care anything about how your infrastructure was built, provisioned, and managed. Why should they have any say about which tool you pick? Your customers are keenly interested in the services or products you offer. They also care about things like performance, availability, and how quickly you recover from an issue or outage. If they don&amp;#39;t care about these things, they&amp;#39;ll likely not be your customers for long. As you grow your business, you&amp;#39;ll want to have more time for delivering value to customers. Spend less time building, provisioning, upgrading, and repairing your infrastructure.&lt;/p&gt;

&lt;h3 id=&quot;wiifb-whats-in-it-for-my-business&quot;&gt;WIIFB - What&amp;#39;s in it for my business&lt;/h3&gt;

&lt;p&gt;You may be the only one who has to build and manage the infrastructure in your company but it&amp;#39;s likely you&amp;#39;ll eventually move beyond a technology team of one. As your technology team grows, you&amp;#39;ll want to include everyone in the process of managing your infrastructure. This includes the people you might not think of as typically having a say in the infrastructure: developers, quality assurance engineers, etc. You do not want to be the only person in your company who knows how to manage the infrastructure and use the tools you&amp;#39;ve selected. Sure, it gives you a false sense of job security and feeds into your hero-complex but you need to be able to pass the on-call baton to someone else. Cost may also be a factor to consider when selecting a solution although it&amp;#39;s likely it&amp;#39;s more of a data-point than selection criteria, given the solutions that are on the market.&lt;/p&gt;

&lt;p&gt;I cannot tell you which tool is right for you. There are many factors including the ones I&amp;#39;ve listed above. I have some experience with both Puppet and Chef. At &lt;a href=&quot;http://www.customink.com&quot;&gt;CustomInk&lt;/a&gt;, we decided to switch to Chef after using Puppet for about two years.&lt;/p&gt;

&lt;h2 id=&quot;why-did-we-switch&quot;&gt;Why did we switch?&lt;/h2&gt;

&lt;h3 id=&quot;were-a-rails-shop&quot;&gt;We&amp;#39;re a Rails shop&lt;/h3&gt;

&lt;p&gt;CustomInk is a Ruby on Rails shop and has been for many years. Being a Rails shop helped push us towards Chef in two ways. As a Rails shop, we suffer a bit from from the stereotypical &amp;quot;newer and shinier is better&amp;quot; syndrome that many people feel ails the Rails community. As a Rails shop, the domain-specific language (DSL) of Chef is a more comfortable way for us to work. Everyone on the technology team can easily understand the code.&lt;/p&gt;

&lt;h3 id=&quot;we-started-with-puppet&quot;&gt;We started with Puppet&lt;/h3&gt;

&lt;p&gt;We started with Puppet so, naturally, that&amp;#39;s the one we switched from. Puppet was, and actually still is, working well for us. However, we found that working in Puppet was going a bit slower than we&amp;#39;d like. Also, as we started learning more about Chef we started to see how we&amp;#39;d be able to quickly benefit from some of the features it offers. To be fair, we were comparing the Puppet we were using (0.24.x) to the latest (at the time) version of Chef (0.9.x). There may well have been ways to do the things we wanted with Puppet but we weren&amp;#39;t. Chef was intriguing and it looked like we&amp;#39;d be able to get more from it. Instead of working to refactor our Puppet and get smarter with how to use it, we went with Chef.&lt;/p&gt;

&lt;h3 id=&quot;search&quot;&gt;Search&lt;/h3&gt;

&lt;p&gt;Chef&amp;#39;s ability to search our environment and use that information at run time is very appealing. The ability for us to define a database.yml template that can have the &amp;quot;host&amp;quot; value populated at runtime based on which host is currently the primary database server is great. Using search in our capistrano recipes to determine where the code should be deployed is a huge win.&lt;/p&gt;

&lt;h3 id=&quot;knife&quot;&gt;Knife&lt;/h3&gt;

&lt;p&gt;Knife is Chef&amp;#39;s powerful command line interface. There are many things you can do with knife, most of which fall outside of the scope of this article. Knife allows you to interact with your entire infrastructure and Chef code base. Use knife to bootstrap a server, build the scaffolding for a new cookbook, or apply a role to a set of nodes in your environment. You can use knife ssh to execute commands on any number of nodes in your environment. knife ssh + search is a very powerful combination. &amp;quot;Run this command on all nodes with role X.&amp;quot;&lt;/p&gt;

&lt;h3 id=&quot;dependency-management&quot;&gt;Dependency Management&lt;/h3&gt;

&lt;p&gt;We found that defining dependencies in Puppet was overly verbose and cumbersome. With Chef, order matters and we could rest assured that dependencies would be met if we specified them in the proper order.&lt;/p&gt;

&lt;h3 id=&quot;strong-community&quot;&gt;Strong Community&lt;/h3&gt;

&lt;p&gt;OpsCode has done a great job of keeping up a strong community. The community.opscode.com site, where hundreds of cookbooks are shared, is a great way to get started. OpsCode has also hosted numerous webinars, publishes all of their training material, and makes it very easy to contribute patches. Frankly, I don&amp;#39;t have any experience with this in the Puppet world. However, my lack of experience with this in the Puppet world is likely attributed simply to the way my development habits have changed over time. At CustomInk, we&amp;#39;ve been able to submit patches to chef, a number of cookbooks, and have also published some of our own cookbooks.&lt;/p&gt;

&lt;h3 id=&quot;developer-happiness&quot;&gt;Developer Happiness&lt;/h3&gt;

&lt;p&gt;As I mentioned previously, the DSL with Chef is much more comfortable than that of Puppet. The mental model and workflow suit us. I find that the time I spend working in Chef is when I feel most productive and happy.&lt;/p&gt;

&lt;p&gt;I often wonder if the reason Chef is the right tool is because it&amp;#39;s the second one we&amp;#39;ve used. Coming to infrastructure as code includes a learning curve. I feel that we&amp;#39;re better Chef developers because we learned from our experience with Puppet. Some may even agree that Chef&amp;#39;s a better tool because the developers of Chef learned from their experience with Puppet.&lt;/p&gt;

&lt;h3 id=&quot;a-note-for-projects-that-are-just-getting-started&quot;&gt;A note for projects that are just getting started&lt;/h3&gt;

&lt;p&gt;If your project is just getting started, the best choice for you is probably not to use any of the configuration management tools that allow you to manage your infrastructure as code. You should stay focused exclusively on delivering value to your customers. It&amp;#39;s likely that the best solution for you is &lt;a href=&quot;http://www.heroku.com/&quot;&gt;Heroku&lt;/a&gt;. Sure, Heroku puts some constraints on how you build your app, but they&amp;#39;re a good way for you to think creatively. You can, and should, delay your choice of tools until you&amp;#39;re ready to spin up your first server.&lt;/p&gt;

&lt;h2 id=&quot;tl-dr&quot;&gt;TL;DR&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;If the question is &amp;quot;Chef or Puppet?&amp;quot;, the answer is &amp;quot;Yes.&amp;quot; You need to manage you infrastructure as code&lt;/li&gt;
&lt;li&gt;Search, knife, dependency management, community, and developer happiness were the key reasons we switched&lt;/li&gt;
&lt;li&gt;Chef is the right tool for us and it might be the right one for you&lt;/li&gt;
&lt;li&gt;If you&amp;#39;re new to the idea of &amp;quot;Infrastructure as Code&amp;quot;, understand that there&amp;#39;s a learning curve but your efforts will be rewarded&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Did you have to make a similar choice? What were some of the deciding factors? Which tool or framework did you end up with?&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;sub&gt;Reposted from &lt;a href=&quot;http://nathenharvey.com/blog/2011/11/21/why-we-chose-chef-over-puppet-at-customink/&quot;&gt;Nathen Harvey&amp;#39;s blog&lt;/a&gt;.&lt;/sub&gt;&lt;/p&gt;
</description>
        <pubDate>Mon, 21 Nov 2011 03:29:00 -0500</pubDate>
        <link>https://technology.customink.com//blog/2011/11/21/why-we-chose-chef-over-puppet-at-customink/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2011/11/21/why-we-chose-chef-over-puppet-at-customink/</guid>
      </item>
    
      <item>
        <title>Testing mod_rewrite and apache redirects</title>
        <description>&lt;p&gt;At &lt;a href=&quot;http://www.customink.com&quot;&gt;CustomInk&lt;/a&gt;, we recently migrated from mongrel to Passenger for our Ruby on Rails website. This migration included a full rewrite of our apache configuration files.&lt;/p&gt;

&lt;p&gt;With over 500 redirect and rewrite rules in place I needed a way to ensure my copy-n-paste skills were up to snuff and that we didn&amp;#39;t loose any redirects along the way.&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;In my search for help, I found a &lt;a href=&quot;http://www.viget.com/extend/test-drive-mod-rewrite-rules-with-testunit/&quot;&gt;blog post by Patrick Reagan from Viget labs&lt;/a&gt; that described a method for writing tests that will verify all the rewrite rules and redirects. Patrick&amp;#39;s ideas were packaged up into a gem and available on &lt;a href=&quot;http://github.com/eightbitraptor/http_redirect_test&quot;&gt;github&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I can now write up tests like:&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-ruby&quot; data-lang=&quot;ruby&quot;&gt;&lt;span class=&quot;n&quot;&gt;should_redirect&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/cink/ideas/ideas.jsp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:to&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;/inspiration/&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So now I can to some TDC (test-driven configuration) whenever I get a request for a new redirect.&lt;/p&gt;

&lt;p&gt;What other methods have you used to test your rewrite rules?&lt;/p&gt;

&lt;hr&gt;

&lt;p&gt;&lt;sub&gt;Reposted from &lt;a href=&quot;http://nathenharvey.com/blog/2010/07/16/testing-mod-rewrite-and-apache-redirects/&quot;&gt;Nathen Harvey&amp;#39;s blog&lt;/a&gt;.&lt;/sub&gt;&lt;/p&gt;
</description>
        <pubDate>Fri, 16 Jul 2010 09:00:00 -0400</pubDate>
        <link>https://technology.customink.com//blog/2010/07/16/testing-mod-rewrite-and-apache-redirects/</link>
        <guid isPermaLink="true">http://technology.customink.com//blog/2010/07/16/testing-mod-rewrite-and-apache-redirects/</guid>
      </item>
    
  </channel>
</rss>
