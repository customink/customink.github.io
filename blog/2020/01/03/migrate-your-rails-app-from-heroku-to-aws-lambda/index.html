<!DOCTYPE html>
<html>
  <head>
  <title>Migrate Your Rails App from Heroku to AWS Lambda - CustomInk Technology Blog</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="description" content="Using The New ActiveRecord Aurora Serverless Adapter


  
  



  
    
  
  
    Need a More Robust Rails on Lambda Database Solution?
    
      ...">
  
  <meta property="og:image" content="https://technology.customink.com/assets/content/aurora-serverless/masthead-5a56cf63e72393d6abff92c8b05178363bbd07d444e19ed6dca99435403f5b5b.jpg">
  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="https://technology.customink.com/feed.xml" />
  <style rel="stylesheet" type="text/css">ï»¿/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:0.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace, monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace, monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:0.35em 0.75em 0.625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}html{box-sizing:border-box}*,*::before,*::after{box-sizing:inherit}html,body{height:100%}body,button,input,select,textarea,pre{margin:0;background-color:white}h1,h2,h3,h4,h5,h6,p,dl,ol,ul{margin-top:0;margin-bottom:1rem}ol,ul{padding-left:2rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0;padding-left:1rem}button{border:0}button,input,select,textarea{font-family:inherit;font-size:100%}textarea{display:block}article,aside,details,figcaption,figure,footer,header,main,nav,section,summary{display:block}.sb-Wrapper{padding-right:1rem;padding-left:1rem}@media (min-width: 43.75em){.sb-Wrapper{width:42.75rem;margin-right:auto;margin-left:auto}}@media (min-width: 64em){.sb-Wrapper{width:63rem;margin-right:auto;margin-left:auto}}@media (min-width: 81.25em){.sb-Wrapper{width:80.25rem;margin-right:auto;margin-left:auto}}.sb-Wrapper--fluid{padding-right:1rem;padding-left:1rem;margin-right:auto;margin-left:auto}.sb-PageWrapper.is-open:before{content:'';display:block;position:absolute;top:0;right:0;bottom:0;left:0;z-index:99999999}.sb-Main{max-width:100%;margin-left:auto;margin-right:auto}.sb-Main:after{content:" ";display:block;clear:both}.sb-Main--content{padding-top:1rem}@media (min-width: 64em){.sb-Main--content{padding-top:1.5rem}}@media (max-width: 43.6875em){html.is-minimalUI{overflow:hidden}html.is-minimalUI .sb-PageWrapper{height:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch}}.sb-Btn,a.sb-Btn,.sb-Btn--primary,a.sb-Btn--primary,.sb-Btn--primaryAlt,a.sb-Btn--primaryAlt,.sb-Form input[type='submit'],.sb-Form input[type='submit'].sb-Btn--primary,.sb-Form input[type='submit'].sb-Btn--primaryAlt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#1f51cf;padding:0.65rem 2rem;color:#fff;border-radius:6px;transition:all 0.1s ease-in-out;display:inline-block;text-align:center;position:relative;border:0}.sb-Btn:after,a.sb-Btn:after,.sb-Btn--primary:after,a.sb-Btn--primary:after,.sb-Btn--primaryAlt:after,a.sb-Btn--primaryAlt:after,.sb-Form input[type='submit']:after,.sb-Form input[type='submit'].sb-Btn--primary:after,.sb-Form input[type='submit'].sb-Btn--primaryAlt:after{content:"";position:absolute;width:100%;height:10px;border-radius:6px;bottom:0;left:0;box-shadow:0 -3px 0 rgba(0,0,0,0.6) inset}.sb-Btn:visited,a.sb-Btn:visited,.sb-Btn--primary:visited,a.sb-Btn--primary:visited,.sb-Btn--primaryAlt:visited,a.sb-Btn--primaryAlt:visited,.sb-Form input[type='submit']:visited,.sb-Form input[type='submit'].sb-Btn--primary:visited,.sb-Form input[type='submit'].sb-Btn--primaryAlt:visited{color:#fff}.sb-Btn:hover,a.sb-Btn:hover,.sb-Btn--primary:hover,a.sb-Btn--primary:hover,.sb-Btn--primaryAlt:hover,a.sb-Btn--primaryAlt:hover,.sb-Form input[type='submit']:hover,.sb-Form input[type='submit'].sb-Btn--primary:hover,.sb-Form input[type='submit'].sb-Btn--primaryAlt:hover{color:#fff;background:#1840a3}.sb-Btn:active,.sb-Btn:focus,.sb-Btn.is-Active,a.sb-Btn:active,a.sb-Btn:focus,a.sb-Btn.is-Active,.sb-Btn--primary:active,.sb-Btn--primary:focus,.sb-Btn--primary.is-Active,a.sb-Btn--primary:active,a.sb-Btn--primary:focus,a.sb-Btn--primary.is-Active,.sb-Btn--primaryAlt:active,.sb-Btn--primaryAlt:focus,.sb-Btn--primaryAlt.is-Active,a.sb-Btn--primaryAlt:active,a.sb-Btn--primaryAlt:focus,a.sb-Btn--primaryAlt.is-Active,.sb-Form input[type='submit']:active,.sb-Form input[type='submit']:focus,.sb-Form input[type='submit'].is-Active,.sb-Form input[type='submit'].sb-Btn--primary:active,.sb-Form input[type='submit'].sb-Btn--primary:focus,.sb-Form input[type='submit'].sb-Btn--primary.is-Active,.sb-Form input[type='submit'].sb-Btn--primaryAlt:active,.sb-Form input[type='submit'].sb-Btn--primaryAlt:focus,.sb-Form input[type='submit'].sb-Btn--primaryAlt.is-Active{outline:none;color:#fff;background:#295cdf}.sb-Btn:disabled,.sb-Btn.is-Disabled,a.sb-Btn:disabled,a.sb-Btn.is-Disabled,.sb-Btn--primary:disabled,.sb-Btn--primary.is-Disabled,a.sb-Btn--primary:disabled,a.sb-Btn--primary.is-Disabled,.sb-Btn--primaryAlt:disabled,.sb-Btn--primaryAlt.is-Disabled,a.sb-Btn--primaryAlt:disabled,a.sb-Btn--primaryAlt.is-Disabled,.sb-Form input[type='submit']:disabled,.sb-Form input[type='submit'].is-Disabled,.sb-Form input[type='submit'].sb-Btn--primary:disabled,.sb-Form input[type='submit'].sb-Btn--primary.is-Disabled,.sb-Form input[type='submit'].sb-Btn--primaryAlt:disabled,.sb-Form input[type='submit'].sb-Btn--primaryAlt.is-Disabled{opacity:.3;cursor:not-allowed;pointer-events:none}.sb-Btn--primaryRed,a.sb-Btn--primaryRed,.sb-Form input[type='submit'].sb-Btn--primaryRed{background-color:#fa3c00;transition:all 0.1s ease-in-out}.sb-Btn--primaryRed:active,.sb-Btn--primaryRed:focus,.sb-Btn--primaryRed.is-Active,a.sb-Btn--primaryRed:active,a.sb-Btn--primaryRed:focus,a.sb-Btn--primaryRed.is-Active,.sb-Form input[type='submit'].sb-Btn--primaryRed:active,.sb-Form input[type='submit'].sb-Btn--primaryRed:focus,.sb-Form input[type='submit'].sb-Btn--primaryRed.is-Active{outline:none;color:#fff;background-color:#ff602e !important}.sb-Btn--primaryRed:hover,a.sb-Btn--primaryRed:hover,.sb-Form input[type='submit'].sb-Btn--primaryRed:hover{background:#e13600}.sb-Btn--secondary,a.sb-Btn--secondary,.sb-Form input[type='submit'].sb-Btn--secondary,.sb-Btn--secondaryAlt,a.sb-Btn--secondaryAlt,.sb-Form input[type='submit'].sb-Btn--secondaryAlt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:inset 0px 0px 0px 2px #1f51cf;background:transparent;padding:0.65rem 2rem;color:#1f51cf !important;transition:all 0.1s ease-in-out;display:inline-block;text-align:center}.sb-Btn--secondary:after,a.sb-Btn--secondary:after,.sb-Form input[type='submit'].sb-Btn--secondary:after,.sb-Btn--secondaryAlt:after,a.sb-Btn--secondaryAlt:after,.sb-Form input[type='submit'].sb-Btn--secondaryAlt:after{display:none}.sb-Btn--secondary:hover,.sb-Btn--secondary:focus,.sb-Btn--secondary:active,a.sb-Btn--secondary:hover,a.sb-Btn--secondary:focus,a.sb-Btn--secondary:active,.sb-Form input[type='submit'].sb-Btn--secondary:hover,.sb-Form input[type='submit'].sb-Btn--secondary:focus,.sb-Form input[type='submit'].sb-Btn--secondary:active,.sb-Btn--secondaryAlt:hover,.sb-Btn--secondaryAlt:focus,.sb-Btn--secondaryAlt:active,a.sb-Btn--secondaryAlt:hover,a.sb-Btn--secondaryAlt:focus,a.sb-Btn--secondaryAlt:active,.sb-Form input[type='submit'].sb-Btn--secondaryAlt:hover,.sb-Form input[type='submit'].sb-Btn--secondaryAlt:focus,.sb-Form input[type='submit'].sb-Btn--secondaryAlt:active{background-color:#1f51cf;color:#fff !important}.sb-Btn--secondary--white,a.sb-Btn--secondary--white,.sb-Form input[type='submit'].sb-Btn--secondary--white,.sb-Btn--secondaryAlt--white,a.sb-Btn--secondaryAlt--white,.sb-Form input[type='submit'].sb-Btn--secondaryAlt--white{background-color:#fff}.sb-Btn--link,a.sb-Btn--link,.sb-Form input[type='submit'].sb-Btn--link{border:0;background:transparent;color:#1e39d2 !important;box-shadow:none;transition:all 0.1s ease-in-out}.sb-Btn--link:after,a.sb-Btn--link:after,.sb-Form input[type='submit'].sb-Btn--link:after{display:none}.sb-Btn--link:hover,.sb-Btn--link:focus,.sb-Btn--link:active,a.sb-Btn--link:hover,a.sb-Btn--link:focus,a.sb-Btn--link:active,.sb-Form input[type='submit'].sb-Btn--link:hover,.sb-Form input[type='submit'].sb-Btn--link:focus,.sb-Form input[type='submit'].sb-Btn--link:active{background:transparent;transform:none;box-shadow:none;color:#14278f !important}.sb-Btn--linkAlt,a.sb-Btn--linkAlt,.sb-Form input[type='submit'].sb-Btn--linkAlt{border:2px solid #ededed;box-shadow:none;background-color:#ededed;color:#444 !important;transition:all 0.1s ease-in-out}.sb-Btn--linkAlt:after,a.sb-Btn--linkAlt:after,.sb-Form input[type='submit'].sb-Btn--linkAlt:after{display:none}.sb-Btn--linkAlt:hover,.sb-Btn--linkAlt:focus,.sb-Btn--linkAlt:active,a.sb-Btn--linkAlt:hover,a.sb-Btn--linkAlt:focus,a.sb-Btn--linkAlt:active,.sb-Form input[type='submit'].sb-Btn--linkAlt:hover,.sb-Form input[type='submit'].sb-Btn--linkAlt:focus,.sb-Form input[type='submit'].sb-Btn--linkAlt:active{border-color:#d4d4d4;transform:none;box-shadow:none;color:#444;background:#d4d4d4}.sb-Btn--large,a.sb-Btn--large,.sb-Form input[type='submit'].sb-Btn--large{font-size:1.25rem;font-weight:bold;padding-left:2rem;padding-right:2rem}.sb-Btn--small,a.sb-Btn--small,.sb-Form input[type='submit'].sb-Btn--small{font-size:0.85rem;padding:0.35rem 1.2rem 0.5rem}.sb-Btn--block,a.sb-Btn--block,.sb-Form input[type='submit'].sb-Btn--block{display:block;width:100%;text-align:center}.sb-Btn--mr,a.sb-Btn--mr{margin-right:1rem}@media (max-width: 43.6875em){.sb-Btn--responsive,a.sb-Btn--responsive,.sb-Form input[type='submit'].sb-Btn--responsive{display:block;width:100%;margin-right:0}}@media (max-width: 43.6875em){.sb-Btn--responsive--mb,a.sb-Btn--responsive--mb,.sb-Form input[type='submit'].sb-Btn--responsive--mb{margin-bottom:1rem}}html,body{font-size:16px;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;font-weight:normal;line-height:1.5;color:#444444}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:0.5rem;padding-top:0.5rem}h1,h2,h3{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2}h4,h5,h6{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2}h1{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:21.7728px}@media (min-width: 43.75em){h1{font-size:26.12736px}}@media (min-width: 64em){h1{font-size:31.35283px}}h2{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:18.144px}@media (min-width: 43.75em){h2{font-size:21.7728px}}@media (min-width: 64em){h2{font-size:26.12736px}}h3{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:15.12px}@media (min-width: 43.75em){h3{font-size:18.144px}}@media (min-width: 64em){h3{font-size:21.7728px}}h4{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:12.6px}@media (min-width: 43.75em){h4{font-size:15.12px}}@media (min-width: 64em){h4{font-size:18.144px}}h5{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:12.6px}@media (min-width: 43.75em){h5{font-size:15.12px}}@media (min-width: 64em){h5{font-size:15.12px}}h6{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:12.6px}@media (min-width: 43.75em){h6{font-size:12.6px}}@media (min-width: 64em){h6{font-size:12.6px}}p,dl,ul,ol{font-size:1rem;line-height:1.5}strong,b{font-weight:bold}a{text-decoration:none;color:#1e39d2;cursor:pointer}a:visited{color:#1e39d2}a:hover{color:#0e1b62}a:active{color:#1e39d2}a.is-currentPage{color:#1e39d2;cursor:text}.sb-Dialog{border-width:2px;border-style:solid;margin-bottom:1rem;border-radius:0.5rem}.sb-Dialog h1,.sb-Dialog h2,.sb-Dialog h3,.sb-Dialog h4,.sb-Dialog h5,.sb-Dialog h6{font-size:1.125rem;line-height:1.5rem;padding:0;margin:0 0 0.5rem}.sb-Dialog ul{padding-left:1em;text-indent:-1em;list-style-position:inside}.sb-Dialog-icon{width:1.5rem;font-size:1.5rem;line-height:1.5rem;display:table-cell;vertical-align:top;padding:0.75rem}.sb-Dialog-message{display:table-cell;vertical-align:top;padding-top:0.75rem;padding-right:1rem}.sb-Dialog--error{border-top-width:10px;border-color:#b80000}.sb-Dialog--error h1,.sb-Dialog--error h2,.sb-Dialog--error h3,.sb-Dialog--error h4,.sb-Dialog--error h5,.sb-Dialog--error h6{color:#b80000}.sb-Dialog--error .sb-Icon--error:before{content:'ð¨';font-style:normal}.sb-Dialog--info{border-color:#1e39d2}.sb-Dialog--info .sb-Icon--info:before{content:'â¹ï¸';font-style:normal}.sb-Dialog--success{border-color:#23b268}.sb-Dialog--success .sb-Icon--success:before{content:'â';font-style:normal}.sb-Dialog--warning{border-color:#de8f00}.sb-Dialog--warning .sb-Icon--warning:before{content:'â ï¸';font-style:normal}@font-face{font-family:"SharpSans";font-style:normal;font-weight:100;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:italic;font-weight:100;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:normal;font-weight:normal;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:italic;font-weight:normal;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:normal;font-weight:bold;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:italic;font-weight:bold;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:normal;font-weight:700;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:italic;font-weight:700;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.woff) format("woff")}pre{margin-bottom:1rem}@font-face{font-family:"fontello";font-weight:normal;font-style:normal;src:url(/assets/fontello-5c6d5a4b860bc986924a1ec510dcddbc10a425672dc0e3ba37e3bd4020e9d84f.eot);src:url(/assets/fontello-5c6d5a4b860bc986924a1ec510dcddbc10a425672dc0e3ba37e3bd4020e9d84f.eot#iefix) format("embedded-opentype"),url(/assets/fontello-a11118120d4b90a4c4f937c40ed47f13b4ae131b1c6371fd85ec2843d7bc7b12.woff) format("woff"),url(/assets/fontello-813519383401ebf865d03b706d20d1624b232501f0accdfa1bff4d28265d3f74.ttf) format("truetype"),url(/assets/fontello-f25b435813c4882a6189f926bc10b0fc872c358e3071d21d8386765518bc4278.svg#fontello) format("svg")}[class^="icon-"]:before,[class*=" icon-"]:before{font-family:"fontello";font-style:normal;font-weight:normal;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em}.icon-home:before{content:'\e800'}.icon-twitter:before{content:'\e801'}.icon-git:before{content:'\e802'}p>code,ul>code,ol>code,li>code,dl>code,td>code{background-color:#f7f7f7;font-size:90%;padding:2px 3px}.highlight>pre{background-color:#f7f7f7;padding:0.5rem 1rem;border-radius:3px;margin-bottom:1rem}.highlight{background:#ffffff}.highlight .c{color:#999988;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{font-weight:bold}.highlight .o{font-weight:bold}.highlight .cm{color:#999988;font-style:italic}.highlight .cp{color:#999999;font-weight:bold}.highlight .c1{color:#999988;font-style:italic}.highlight .cs{color:#999999;font-weight:bold;font-style:italic}.highlight .gd{color:#000000;background-color:#ffdddd}.highlight .gd .x{color:#000000;background-color:#ffaaaa}.highlight .ge{font-style:italic}.highlight .gr{color:#aa0000}.highlight .gh{color:#999999}.highlight .gi{color:#000000;background-color:#ddffdd}.highlight .gi .x{color:#000000;background-color:#aaffaa}.highlight .go{color:#888888}.highlight .gp{color:#555555}.highlight .gs{font-weight:bold}.highlight .gu{color:#aaaaaa}.highlight .gt{color:#aa0000}.highlight .kc{font-weight:bold}.highlight .kd{font-weight:bold}.highlight .kp{font-weight:bold}.highlight .kr{font-weight:bold}.highlight .kt{color:#445588;font-weight:bold}.highlight .m{color:#009999}.highlight .s{color:#d14}.highlight .na{color:#008080}.highlight .nb{color:#0086B3}.highlight .nc{color:#445588;font-weight:bold}.highlight .no{color:#008080}.highlight .ni{color:#800080}.highlight .ne{color:#990000;font-weight:bold}.highlight .nf{color:#990000;font-weight:bold}.highlight .nn{color:#555555}.highlight .nt{color:#000080}.highlight .nv{color:#008080}.highlight .ow{font-weight:bold}.highlight .w{color:#bbbbbb}.highlight .mf{color:#009999}.highlight .mh{color:#009999}.highlight .mi{color:#009999}.highlight .mo{color:#009999}.highlight .sb{color:#d14}.highlight .sc{color:#d14}.highlight .sd{color:#d14}.highlight .s2{color:#d14}.highlight .se{color:#d14}.highlight .sh{color:#d14}.highlight .si{color:#d14}.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999999}.highlight .vc{color:#008080}.highlight .vg{color:#008080}.highlight .vi{color:#008080}.highlight .il{color:#009999}.tb-Default{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;-webkit-box-direction:normal;-moz-box-direction:normal;box-direction:normal;-webkit-flex-direction:column;-moz-flex-direction:column;flex-direction:column;-ms-flex-direction:column;min-height:100vh}.tb-Default-main{max-width:100%;margin-left:auto;margin-right:auto;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;-webkit-flex:1;-moz-flex:1;-ms-flex:1;flex:1}.tb-Default-main:after{content:" ";display:block;clear:both}.tb-Default-content{width:100%;float:left;margin-left:0;margin-right:0}.tb-Home{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;-webkit-box-direction:normal;-moz-box-direction:normal;box-direction:normal;-webkit-flex-direction:column;-moz-flex-direction:column;flex-direction:column;-ms-flex-direction:column;min-height:100vh}.tb-Home-main{max-width:100%;margin-left:auto;margin-right:auto;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;-webkit-flex:1;-moz-flex:1;-ms-flex:1;flex:1}.tb-Home-main:after{content:" ";display:block;clear:both}@media (min-width: 64em){.tb-Home-content{width:74.57627%;float:left;margin-right:1.69492%}}@media (min-width: 81.25em){.tb-Home-content{width:74.68354%;float:left;margin-right:1.26582%}}.tb-Home--author .tb-Sidebar{display:block}.tb-Post{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;-webkit-box-direction:normal;-moz-box-direction:normal;box-direction:normal;-webkit-flex-direction:column;-moz-flex-direction:column;flex-direction:column;-ms-flex-direction:column;min-height:100vh}.tb-Post-main{max-width:100%;margin-left:auto;margin-right:auto;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;-webkit-flex:1;-moz-flex:1;-ms-flex:1;flex:1}.tb-Post-main:after{content:" ";display:block;clear:both}@media (min-width: 64em){.tb-Post-content{width:74.57627%;float:left;margin-right:1.69492%}}@media (min-width: 81.25em){.tb-Post-content{width:74.68354%;float:left;margin-right:1.26582%}}@media (min-width: 64em){.tb-Post-author{display:block;margin-top:1rem;width:23.72881%;float:right;margin-right:0}}@media (min-width: 81.25em){.tb-Post-author{width:24.05063%;float:right;margin-right:0}}@media (min-width: 43.75em){.tb-Post h1:first-child{width:70%}}.tb-Team{margin-top:1.5rem}.tb-Member{width:100%;float:left;margin-left:0;margin-right:0;text-align:center;padding-bottom:2rem}@media (min-width: 43.75em){.tb-Member{width:32.20339%;float:left}.tb-Member:nth-child(3n+1){margin-left:0;margin-right:-100%;clear:both;margin-left:0}.tb-Member:nth-child(3n+2){margin-left:33.89831%;margin-right:-100%;clear:none}.tb-Member:nth-child(3n+3){margin-left:67.79661%;margin-right:-100%;clear:none}}.tb-Member-gravatar img{max-width:100%;border-radius:50%}.tb-Member--posts{margin-top:0.5rem}.tb-Sidebar{display:none;padding:1rem}@media (min-width: 64em){.tb-Sidebar{display:block;width:23.72881%;float:right;margin-right:0}}@media (min-width: 81.25em){.tb-Sidebar{width:24.05063%;float:right;margin-right:0}}.tb-Author-gravatar{text-align:center}.tb-Author-gravatar img{border-radius:50%}.tb-Author-info{text-align:center}.tb-Author-serverlesshero{text-align:center}.tb-Author-serverlesshero img{width:125px;margin-top:0.5rem;margin-bottom:0;text-align:center}.tb-Author-icons{margin-top:0.5rem}.tb-Author-icon a,.tb-Author-icon a:visited{color:gray;padding:0.25rem;font-size:1.25rem}.tb-Author-icon a:hover{color:#5ccfc2}.tb-Author-posts{margin-top:0.5rem}.tb-Excerpt{max-width:100%;margin-left:auto;margin-right:auto;border-bottom:1px dotted #d5d5d5;padding-bottom:1rem;margin-bottom:1rem}.tb-Excerpt:after{content:" ";display:block;clear:both}.tb-Excerpt-date{margin-bottom:0.5rem;color:#939393}.tb-Header{background-color:white;background-color:rgba(255,255,255,0.95);border-bottom:1px solid #cccccc;display:block;margin-top:0.5rem;margin-bottom:1rem}.tb-Header::after{clear:both;content:"";display:table}#tb-Header-toggle{display:none;position:relative;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#tb-Header-toggle:checked+.tb-Header-area .tb-Header-menu{display:block;opacity:1;z-index:10}.tb-Header-home-link{text-decoration:none}.tb-Header-home-logo{display:block;margin-top:0.375rem}.tb-Header-home-logo img{width:85%;max-width:450.5px}.tb-Header-toggle{cursor:pointer}@media (min-width: 43.75em){.tb-Header-toggle{display:none}}.tb-Header-toggle:after{width:2.625rem;height:2.625rem;position:absolute;right:1rem;top:1rem;display:block;content:'\e800';font-family:'inkicons';font-size:2rem;color:#cccccc;cursor:pointer;text-align:center;vertical-align:center}@media (min-width: 43.75em){.tb-Header-toggle:after{display:none}}.tb-Header-menu{display:none;opacity:0;width:100%;margin:0;padding:0;position:absolute;right:0}.tb-Header-menu::after{clear:both;content:"";display:table}@media (min-width: 43.75em){.tb-Header-menu{position:inherit;display:block;opacity:1}}.tb-Header-menu:after{content:"";height:3px;width:100%;background-color:rgba(0,0,0,0.1)}@media (min-width: 43.75em){.tb-Header-menu:after{display:none}}.tb-Header-menu-item{display:block;width:100%;list-style:none}@media (min-width: 43.75em){.tb-Header-menu-item{float:left;width:auto}}.tb-Header-menu-link{padding:0.75rem 1rem;background-color:#f8f8f8;background-color:white;border-bottom:0.25rem solid transparent;border-bottom:1px solid #cccccc;color:inherit;display:block;padding-bottom:0.25rem;text-decoration:none;width:100%}@media (min-width: 43.75em){.tb-Header-menu-link{border-bottom:0.25rem solid transparent}}.tb-Header-menu-link:hover,.tb-Header-menu-link:active,.tb-Header-menu-link:visited{color:inherit}.tb-Header-menu-link:hover{border-bottom:0.25rem solid #fa3c00;color:#fa3c00}.tb-Header-menu-link.is-active{border-bottom:0.25rem solid #fa3c00;color:#fa3c00}.tb-Header-menu-link:before{content:attr(data-link-long)}@media (min-width: 43.75em){.tb-Header-menu-link:before{content:attr(data-link-short)}}@media (min-width: 64em){.tb-Header-menu-link:before{content:attr(data-link-long)}}.tb-Footer{background-color:#ededed;margin-top:2rem;padding:1rem;text-align:center;width:100%}.tb-Paginator{width:100%;float:left;margin-left:0;margin-right:0}.tb-Paginator-newerBtn{width:47.36842%;float:left;margin-right:5.26316%}@media (min-width: 43.75em){.tb-Paginator-newerBtn{width:23.72881%;float:left;margin-right:1.69492%}}.tb-Paginator-newerBtn .sb-Btn{width:100%}.tb-Paginator-olderBtn{width:47.36842%;float:right;margin-right:0}@media (min-width: 43.75em){.tb-Paginator-olderBtn{width:23.72881%;float:right;margin-right:0}}.tb-Paginator-olderBtn .sb-Btn{width:100%}.tb-AsideQuote{display:none;position:relative;width:30vw;float:right;background-color:#f7f7f7;border-radius:3px;font-family:Georgia, serif;font-size:1.25rem;line-height:1.2;color:#939393;font-style:italic;padding:1rem 1rem 1rem 3rem;margin-left:1rem;margin-bottom:1rem}.tb-AsideQuote:before{content:"\201C";font-family:Georgia, serif;font-size:3rem;font-weight:bold;color:#d5d5d5;position:absolute;left:0.75rem;top:0.5rem}@media (min-width: 43.75em){.tb-AsideQuote{display:block}}.tb-Images{max-width:100%;margin-left:auto;margin-right:auto}.tb-Images:after{content:" ";display:block;clear:both}@media (min-width: 81.25em){.tb-Img-processing{max-width:50%}}.tb-Img{max-width:100%}@media (min-width: 43.75em){.tb-Img{float:right;clear:right;margin-bottom:1rem;margin-left:1rem}}.tb-Img--fancy{border-radius:0.25rem}.tb-Img--picture{padding:0.5rem;border:1px solid #eeeeee;background-color:white;box-shadow:2px 2px 4px 0px rgba(0,0,0,0.2);margin-bottom:0 !important}@media (min-width: 43.75em){.tb-Img--quarter{max-width:25%}}@media (max-width: 43.6875em){.tb-Img--quarter--sm{max-width:25% !important;float:right;clear:right;margin-bottom:0.5rem;margin-left:0.5rem}}@media (min-width: 43.75em) and (max-width: 63.9375em){.tb-Img--quarter--md{max-width:25%}}@media (min-width: 64em) and (max-width: 81.1875em){.tb-Img--quarter--lg{max-width:25%}}@media (min-width: 43.75em){.tb-Img--third{max-width:33%}}@media (max-width: 43.6875em){.tb-Img--third--sm{max-width:33% !important;float:right;clear:right;margin-bottom:0.5rem;margin-left:0.5rem}}@media (min-width: 43.75em) and (max-width: 63.9375em){.tb-Img--third--md{max-width:33%}}@media (min-width: 64em) and (max-width: 81.1875em){.tb-Img--third--lg{max-width:33%}}@media (min-width: 43.75em){.tb-Img--half{max-width:50%}}@media (max-width: 43.6875em){.tb-Img--half--sm{max-width:50% !important;float:right;clear:right;margin-bottom:0.5rem;margin-left:0.5rem}}@media (min-width: 43.75em) and (max-width: 63.9375em){.tb-Img--half--md{max-width:50%}}@media (min-width: 64em) and (max-width: 81.1875em){.tb-Img--half--lg{max-width:50%}}@media (min-width: 43.75em){.tb-Img--responsive{max-width:50%}}@media (min-width: 64em){.tb-Img--responsive{max-width:40%}}@media (min-width: 81.25em){.tb-Img--responsive{max-width:30%}}.tb-Img--responsive-ctr{margin-bottom:1rem}@media (min-width: 43.75em){.tb-Img--responsive-ctr{float:none !important;clear:none !important;display:block;width:70%;margin-top:0 !important;margin-right:auto !important;margin-left:auto !important}}@media (min-width: 43.75em) and (min-width: 43.75em){.tb-Img--responsive-ctr{margin-bottom:1.5rem !important}}@media (min-width: 64em){.tb-Img--responsive-ctr{max-width:60%}}@media (min-width: 81.25em){.tb-Img--responsive-ctr{max-width:50%}}.tb-ImgCenter{margin:0 24%}@font-face{font-family:'tbicons';src:url(/assets/tbicons-096fa3970ce3a3595debd167e1cd11422745885e43987130c7ad2b9fd020a910.eot);src:url(/assets/tbicons-096fa3970ce3a3595debd167e1cd11422745885e43987130c7ad2b9fd020a910.eot#iefix) format("embedded-opentype"),url(/assets/tbicons-a255c4d7531756c350cd3cb8ac924a3a70dba66357bc6f53cdcce66be69e1ca4.woff) format("woff"),url(/assets/tbicons-04c88863a35923e4156691375c162cd8b6fb44104e3cecbc17972c89da722d17.ttf) format("truetype"),url(/assets/tbicons-737a98cc543fbd45788943a259ba88d32a06bdd4e57cf10d9631866dce5df09e.svg#tbicons) format("svg");font-weight:normal;font-style:normal}[class^="tb-Icon-"]:before,[class*=" tb-Icon-"]:before{font-family:"tbicons";font-style:normal;font-weight:normal;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em}.tb-Icon-twitter:before{content:'\e800'}.tb-Icon-home:before{content:'\e801'}.tb-Icon-github:before{content:'\e802'}.tb-Masthead{margin-bottom:1rem}.tb-Masthead::after{clear:both;content:"";display:table}@media (min-width: 43.75em){.tb-Masthead{margin-top:1rem;margin-bottom:2rem}}.tb-Masthead .tb-Img{float:none;display:block;margin:0}.tb-Masthead aside{display:block;color:#939393;margin-top:0.25rem;font-size:10px;line-height:1rem;height:1rem;text-align:right}.tb-Masthead a{color:#939393;text-decoration:none;border:0}.tb-Masthead a:link,.tb-Masthead a:visited,.tb-Masthead a:hover,.tb-Masthead a:active{color:#939393}.tb-Masthead-caption{position:relative}.tb-Masthead-caption:after{display:block;position:absolute;top:0;right:0;content:attr(caption)}
</style>
</head>

  <body class="tb-Post">
    <header class="tb-Header">
  <div class="sb-Wrapper">
    <nav class="tb-Header-home">
      <a href="/" class="tb-Header-home-logo"><img src="/assets/CustomInk_Tech_Color-1460f9e847670e2626e66143266004749ab6c7204a8d5a2ae394613f986c473d.png"></a>
    </nav>
    <input type="checkbox" id="tb-Header-toggle" />
    <div class="tb-Header-area">
      <label for="tb-Header-toggle" class="tb-Header-toggle" data-open="Menu" data-close="Close" onclick></label>
      <ul class="tb-Header-menu">
        <li class="tb-Header-menu-item">
          <a href="/" class="tb-Header-menu-link ">POSTS</a>
        </li>
        <li class="tb-Header-menu-item">
          <a href="/team" class="tb-Header-menu-link ">AUTHORS</a>
        </li>
        <li class="tb-Header-menu-item">
          <a href="/careers" class="tb-Header-menu-link ">CAREERS</a>
        </li>
        <li class="tb-Header-menu-item">
          <a href="http://customink.com" class="tb-Header-menu-link">CUSTOMINK.COM</a>
        </li>
      </ul>
    </div>
  </div>
</header>

    <div class="tb-Post-main sb-Wrapper">
      <div class="tb-Post-content">
        <h1>Migrate Your Rails App from Heroku to AWS Lambda</h1>
        <h3>Using The New ActiveRecord Aurora Serverless Adapter</h3>

<div class="tb-Masthead" style="margin-bottom:0.5rem;">
  <img src="/assets/content/aurora-serverless/masthead-5a56cf63e72393d6abff92c8b05178363bbd07d444e19ed6dca99435403f5b5b.jpg" class="tb-Img tb-Img--fancy" alt="(right) AWS re:Invent 2017 - Amazon Aurora Serverless" />
  <a href="https://www.youtube.com/watch?v=Q0cqKl6ktIg" ><aside class="tb-Masthead-caption" caption="(right) AWS re:Invent 2017 - Amazon Aurora Serverless"></aside></a>
</div>

<div class="sb-Dialog sb-Dialog--info" style="margin-top:0;">
  <div class="sb-Dialog-icon">
    <i class="sb-Icon--info"></i>
  </div>
  <div class="sb-Dialog-message">
    <h3>Need a More Robust Rails on Lambda Database Solution?</h3>
    <p>
      AWS announced that <a href="https://aws.amazon.com/about-aws/whats-new/2020/06/amazon-rds-proxy-generally-available/">RDS Proxy is Generally Available</a>. Our Lamby guides now have detailed steps to <a href="https://lamby.custominktech.com/docs/database_options">deploy your first RDS Proxy with Rails using native MySQL connnections</a> with our very own statically built gem for Amazon Linux 1 & 2.
    </p>
   </div>
</div>

<p>Are you someone with a pet Rails project running on a Free, Hobby, or Professional Heroku plan? Perhaps your company or freelance gig has a valuable, but infrequently used, Rails application? Such applications make great candidates for both AWS Lambda &amp; Aurora Serverless.</p>

<!--more-->

<p>What is <a href="https://aws.amazon.com/rds/aurora/serverless/">Aurora Serverless</a>? It is an on-demand, auto-scaling configuration for Amazon Aurora, where the database will automatically start up, shut down, and scale capacity based on your application&#39;s needs. On top of being perfect for variable workloads, what makes Aurora Serverless powerful for Lambda is the use of its <a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/data-api.html">Data API</a> via HTTP to communicate with it.</p>

<p>Over the past several months we have been working hard to use existing web frameworks like Rails with AWS Lambda. Our <a href="https://lamby.custominktech.com">Lamby</a> gem does just that! It has opened up new application architectures by adopting cloud-native philosophies. Till today, this typically required the use of DynamoDB as a <a href="https://github.com/aws/aws-sdk-ruby-record">persistent store</a>. A fine choice, however, there are use cases for traditional relational databases. But how... and without the overhead of <a href="https://www.jeremydaly.com/manage-rds-connections-aws-lambda/">zombie RDS connection</a> issues?</p>

<h4 id="activerecord-aurora-serverless-adapter">ActiveRecord Aurora Serverless Adapter</h4>

<p><img src="/assets/content/aurora-serverless/ruby-gems-f734b8e2f5931ef0e5a82530b143a978c0e0c341502fb817aba90f72e458b517.gif" alt="Lamby - Simple Rails & AWS Lambda Integration" class="tb-Img tb-Img--fancy tb-Img--third tb-Img--third--sm" style="float:right; margin-left:1rem;" />Today, I&#39;d like to introduce the new <a href="https://github.com/customink/activerecord-aurora-serverless-adapter">ActiveRecord Adapter for Amazon Aurora Serverless</a>! A simple gem that replaces ActiveRecord&#39;s MySQL raw connection with an <a href="https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/RDSDataService/Client.html">Aws::RDSDataService::Client</a> interface. Hence leveraging your Aurora Serverless&#39; Data API over HTTP. It is a simple drop in adapter replacement, and seamless to your application.</p>

<p>And what better way to show it off by migrating your Heroku application? Here are the steps we are going to take:</p>

<ul>
<li>Migrate PostgreSQL Data to MySQL</li>
<li>Reconfigure Your Rails Project</li>
<li>Install Lamby &amp; Setup Environment Variables</li>
<li>Deploy Aurora Serverless</li>
<li>Import Your Heroku Data</li>
<li>Your First Lambda Deploy</li>
</ul>

<h2 id="migrate-postgresql-data-to-mysql">Migrate PostgreSQL Data to MySQL</h2>

<p>First, I&#39;d like to point that yes, Aurora Serverless does support PostgreSQL but our adapter as of yet does not. Since we only use MySQL at Custom Ink, this was our priority. If you are interested in contributing to the PostgreSQL implementation or talking about it more - I created <a href="https://github.com/customink/activerecord-aurora-serverless-adapter/issues/10">this GitHub issue</a> to track it. Stop on by!</p>

<p>I&#39;ll be honest, exporting and converting a <code>pg_dump</code> to MySQL formatted script files seems to be a tricky task. I&#39;m going to not spend a lot of time walking through this process where other articles cover it well enough. So please use the following links below.</p>

<ul>
<li><a href="http://mysqlworkbench.org/2012/11/set-up-and-configure-postgresql-odbc-drivers-for-the-mysql-workbench-migration-wizard/">Configure PostgreSQL ODBC drivers for the MySQL Workbench</a></li>
<li><a href="http://mysqlworkbench.org/2012/11/how-to-migrate-postgresql-databases-to-mysql-using-the-mysql-workbench-migration-wizard/">Migrate PostgreSQL databases to MySQL using the MySQL Workbench</a></li>
<li><a href="https://www.progress.com/tutorials/jdbc/connect-to-postgresql-on-heroku-using-odbc-and-jdbc-drivers">Connect to PostgreSQL on Heroku Using ODBC and JDBC Drivers</a></li>
</ul>

<p>What did I do? I leveraged a purchased tool called <a href="https://www.navicat.com/en/products/navicat-premium">Navicat Premium</a> which has a built in feature to connect and convert data from different databases. It worked, but I had to manually hand fix a few issues. I&#39;d love to hear what worked for you in the comments below!</p>

<h2 id="reconfigure-your-rails-project">Reconfigure Your Rails Project</h2>

<p>At this point, you should have a local <code>mydatabase.sql</code> file representing your Heroku database in MySQL format. Our goal is to migrate your Rails project off PosgreSQL. In order to do this we need to re-create your <code>db/schema.rb</code> file.</p>

<p>First, make sure your Rails application is running v5.2 or v6.0. These are the <a href="https://github.com/customink/activerecord-aurora-serverless-adapter/issues/9">current ActiveRecord versions</a> we have tested the adapter against.</p>

<p>Now, remove the <code>pg</code> gem from your <code>Gemfile</code> and replace it with <code>mysql2</code>, but only in development group.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">group</span> <span class="ss">:development</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'mysql2'</span>
<span class="k">end</span>
</code></pre></div>
<p>Configure your <code>database.yml</code> file to use MySQL locally for development &amp; test environments. Alternatively, you can use Aurora Serverless here later on if you really wanted to. But I find using MySQL locally to be a little easier.</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">development</span><span class="pi">:</span>
  <span class="na">adapter</span><span class="pi">:</span> <span class="s">mysql2</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">mydatabase_development</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">root</span>
  <span class="na">password</span><span class="pi">:</span>

<span class="na">test</span><span class="pi">:</span>
  <span class="na">adapter</span><span class="pi">:</span> <span class="s">mysql2</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">mydatabase_test</span>
  <span class="na">username</span><span class="pi">:</span> <span class="s">root</span>
  <span class="na">password</span><span class="pi">:</span>
</code></pre></div>
<p>Run this Rails task to create your new development and test MySQL databases.</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">$ </span>./bin/rails db:create
Created database <span class="s1">'mydatabase_development'</span>
Created database <span class="s1">'mydatabase_test'</span>
</code></pre></div>
<p>From here we have an empty development database that we can load our production schema/data into.</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">$ </span>mysql <span class="nt">-h</span> localhost <span class="nt">-u</span> root mydatabase_development &lt; mydatabase.sql
</code></pre></div>
<p>This will allow us to generate a new <code>schema.rb</code> so our project can happily proceed with development using that new database.</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">$ </span><span class="nb">rm </span>db/schema.rb
<span class="nv">$ </span>./bin/rails db:schema:dump
</code></pre></div>
<p>Congrats on migrating to MySQL! At this point, it would be a good idea to run your test suite and make sure everything is OK before moving on.</p>

<h2 id="install-lamby-setup-environment-variables">Install Lamby &amp; Setup Environment Variables</h2>

<p><img src="/assets/content/aurora-serverless/lambda-rails-360f90d66f8ea8739cbf7334d3cda918393e218469653de0ae0e0e87b10bac2e.png" alt="Lamby - Simple Rails & AWS Lambda Integration" style="float:right; width:20%;" />The <a href="https://lamby.custominktech.com/">Lamby</a> gem integrates Rails with AWS Lambda by converting either API Gateway or Application Load Balancer events to Rack events. This guide below is a condensed version of its <a href="https://lamby.custominktech.com/docs/quick_start">quick start</a> guide.</p>

<p>Add the required gems to your <code>Gemfile</code> and bundle install.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gem</span> <span class="s1">'lamby'</span><span class="p">,</span> <span class="ss">require: </span><span class="kp">false</span>
<span class="n">gem</span> <span class="s1">'aws-sdk-ssm'</span>
</code></pre></div>
<p>With the Lamby gem installed, we can now install its SAM CloudFormation template, app handler code, and bin scripts.</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">$ </span>./bin/rake <span class="nt">-r</span> lamby lamby:install
</code></pre></div>
<h4 id="environment-variables">Environment Variables</h4>

<p>There are a handful of ways to configure environment variables on AWS Lambda with Rails. Our tools of choice would be to use <a href="https://github.com/bkeepers/dotenv">Dotenv</a> (for development &amp; test) combined with <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html">SSM Parameter Store</a> and <a href="https://www.viget.com/articles/storing-secret-credentials-in-rails-5-2-and-up/">Rails Encrypted Credentials</a> (for production). Please reference the Dotenv docs while I focus on the latter production tools.</p>

<p>Edit your Rails encrypted credentials. Depending on your installed editor (Sublime, VS Code, etc.) one of these should work for you.</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">$ EDITOR</span><span class="o">=</span><span class="s2">"vi"</span> ./bin/rails credentials:edit
<span class="nv">$ EDITOR</span><span class="o">=</span><span class="s2">"subl --wait"</span> ./bin/rails credentials:edit
<span class="nv">$ EDITOR</span><span class="o">=</span><span class="s2">"code --wait"</span> ./bin/rails credentials:edit
</code></pre></div>
<p>Log into Heroku. From your appâs Settings tab, click the âReveal Config Varsâ button and copy any config vars that you will need for production into file opened when you run <code>credentials:edit</code> command above. You can ignore ones like <code>DATABASE_URL</code>. When you are done, you might have something like this.</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">secret_key_base</span><span class="pi">:</span> <span class="s">abcdefghijklmnopqrstuvwxyz</span>

<span class="na">envs</span><span class="pi">:</span>
  <span class="na">SOME_SECRET</span><span class="pi">:</span> <span class="s">password</span>
  <span class="na">SOME_OTHER_VAR</span><span class="pi">:</span> <span class="s">whatever</span>
</code></pre></div>
<p>Now create a <code>config/initilizers/credentials.rb</code> file and add this code. It will load all the key/values in the <code>envs</code> section above and create environment variables to be used in production.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">if</span> <span class="no">Rails</span><span class="p">.</span><span class="nf">env</span><span class="p">.</span><span class="nf">production?</span>
  <span class="n">envs</span> <span class="o">=</span> <span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">credentials</span><span class="p">[</span><span class="ss">:envs</span><span class="p">]</span>
  <span class="n">envs</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="o">|</span> <span class="no">ENV</span><span class="p">[</span><span class="n">k</span><span class="p">.</span><span class="nf">to_s</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre></div>
<p>On your local machine, Rails has the master key to encrypt and decrypt your credentials. We want to put these in a secure place and avoid committing them to GitHub. That is what AWS SSM Parameter Store can do for us. This AWS CLI command will copy your <code>config/master.key</code> into SSM Parameter Store.</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">$ </span>aws ssm put-parameter <span class="se">\</span>
  <span class="nt">--name</span> <span class="s2">"/config/myapp/env/RAILS_MASTER_KEY"</span> <span class="se">\</span>
  <span class="nt">--type</span> <span class="s2">"SecureString"</span> <span class="se">\</span>
  <span class="nt">--value</span> <span class="si">$(</span><span class="nb">cat </span>config/master.key<span class="si">)</span>
</code></pre></div>
<p>When your Rails app boots in AWS Lambda, it will need to connect to SSM Parameter Store to get your master key. Add this code to Lamby&#39;s <code>app.rb</code> file directly after the <code>require &#39;lamby&#39;</code> line.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">ENV</span><span class="p">[</span><span class="s1">'RAILS_MASTER_KEY'</span><span class="p">]</span> <span class="o">=</span>
  <span class="no">Lamby</span><span class="o">::</span><span class="no">SsmParameterStore</span><span class="p">.</span><span class="nf">get!</span><span class="p">(</span><span class="s1">'/config/myapp/env/RAILS_MASTER_KEY'</span><span class="p">)</span>
</code></pre></div>
<p>Finally, update your CloudFormation/SAM <code>template.yaml</code> file by adding this to the <code>Properties</code> section of your <code>RailsFunction</code>. This addition allows your Lambda&#39;s runtime policy to read your app&#39;s configs from SSM Parameter store.</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">Policies</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">Version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2012-10-17"</span>
    <span class="na">Statement</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">Effect</span><span class="pi">:</span> <span class="s">Allow</span>
        <span class="na">Action</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="s">ssm:GetParameter</span>
          <span class="pi">-</span> <span class="s">ssm:GetParameters</span>
          <span class="pi">-</span> <span class="s">ssm:GetParametersByPath</span>
          <span class="pi">-</span> <span class="s">ssm:GetParameterHistory</span>
        <span class="na">Resource</span><span class="pi">:</span>
          <span class="pi">-</span> <span class="kt">!Sub</span> <span class="s">arn:aws:ssm:${AWS::Region}:${AWS::AccountId}:parameter/config/myapp/*</span>
</code></pre></div>
<p>That was a lot! And we still have a little ways to go. Don&#39;t forget, if AWS Lambda and Lamby are both new to you, take some time to review our guides and docs before your first deploy.</p>

<ul>
<li><a href="https://lamby.custominktech.com/docs/quick_start#installing-the-aws-cli-sam">Installing the AWS CLI &amp; SAM</a></li>
<li><a href="https://lamby.custominktech.com/docs/quick_start#create-s3-deployment-bucket">Create a S3 Deployment Bucket</a></li>
<li><a href="https://lamby.custominktech.com/docs/environment_and_configuration">Environment &amp; Configuration</a></li>
<li><a href="https://lamby.custominktech.com/docs/asset_host_and_precompiling">Asset Host &amp; Precompiling</a></li>
</ul>

<p>Oh, one last thing. Remember to match the AWS Lambda Ruby Runtime &amp; <strong>use Ruby 2.5.5 locally</strong>.</p>

<h2 id="deploy-aurora-serverless">Deploy Aurora Serverless</h2>

<p>Here are a few options to create your Aurora Serverless cluster depending on your preference for either ClickOps or Infrastructure as Code (IaC).</p>

<p><a href="https://aws.amazon.com/getting-started/tutorials/configure-connect-serverless-mysql-database-aurora/"><strong>ð±ð· Configure and Connect to Serverless MySQL Database</strong></a> - On the ClickOps side. AWS has done a great job of making a step-by-step guide. However, this guide does not walk you through enabling the Data API or creating credentials in AWS Secrets Manager. So if you go this route, please also follow this <a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/data-api.html">Using the Data API for Aurora Serverless</a> guide too.</p>

<p><a href="https://gist.github.com/metaskills/e17361340a9149436f2893196b1b9633"><strong>ð«ð©âð» Aurora Serverless IaC Example Using CDK &amp; TypeScript</strong></a> - If repeatable Infrastructure as Code is your thing and CloudFormation YAML feels a little awkward, you are in luck. I simplified the Aurora Serverless Adapter&#39;s test setup and shared it in that GitHub Gist link. It uses <a href="https://aws.amazon.com/cdk/">AWS Cloud Development Kit</a> (CDK) with <a href="https://www.typescriptlang.org">TypeScript</a> to create an Aurora Serverless cluster, with all the settings, parameters groups, and secrets needed.</p>

<p>Once your Aurora Serverless cluster is deployed, you are going to need the following bits of information:</p>

<ul>
<li>SecretsManager ARN - Output stack above. Ex: <code>arn:aws:secretsmanager:us-east-1:123456789012:secret:Secret-kd3diwspxeWw-Bdsiww</code></li>
<li>Aurora Cluster ARN - Output stack above. Ex: <code>arn:aws:rds:us-east-1:123456789012:cluster:mydatabase</code></li>
<li>Aurora Cluster Endpoint - Found in your RDS cluster&#39;s &quot;Connectivity &amp; security&quot; section in AWS Console. Ex: <code>mydatabase.cluster-adk13dkfyqzk.us-east-1.rds.amazonaws.com</code></li>
<li>Master Username &amp; Password - When you created your Aurora Serverless cluster.</li>
</ul>

<h2 id="import-your-heroku-data">Import Your Heroku Data</h2>

<p>Remember that <code>mydatabase.sql</code> file we migrated your PosgreSQL data to in our first steps? We used it to recreate your MySQL development structure. Now it is time to recreate your whole production database. There is just one problem. The Aurora Serverless <a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/data-api.html">Data API</a> over HTTP has a maximum request capacity of 64 Kilobytes of data and I am guessing your database is bigger than that. ð</p>

<p>Thankfully, we can use still use Aurora via the native MySQL protocol. In order to issue a MySQL command to execute our entire database file, we need to run it on a machine within the same VPC network that we created our Aurora Cluster in. One easy way to do that is to spin up an EC2 instance for this short lived task. Log into the AWS Console and take note of the &quot;VPC&quot; and &quot;Subnets&quot; in the &quot;Networking&quot; section of your Aurora Serverless database. You will need these when creating your EC2 instance.</p>

<ul>
<li>EC2 -&gt; Instances -&gt; Launch Instance</li>
<li>Select &quot;AWS Marketplace&quot;</li>
<li>Search for &quot;Ruby Certified by Bitnami&quot;, Select, Continue</li>
<li>Choose an Instance Type like &quot;t2.micro&quot;</li>
<li>Configure your Instance

<ul>
<li>Select the &quot;VPC&quot; (Network) matching your new Aurora Serverless DB.</li>
<li>Select a &quot;Subnet&quot; matching one in your new Aurora Serverless DB.</li>
</ul></li>
<li>Review &amp; Launch

<ul>
<li>Use or Create a SSH Key Pair</li>
</ul></li>
</ul>

<p>This is not glamorous and still fraught with possible issues. Welcome to networking! For example, if you do not have a VPN to your private network, your EC2 instance might need access to both <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Scenario2.html">Public and Private Subnets</a>. If SSH&#39;ing into an EC2 instance with a newly created key is new to you, here is a link to <a href="https://aws.amazon.com/premiumsupport/knowledge-center/new-user-accounts-linux-instance/">SSH access to my Amazon EC2 Linux</a> guide that may help.</p>

<p>All said and done, you will need to <code>scp</code> your <code>mydatabase.sql</code> file to an EC2 instance and run the following <code>mysql</code> command. Replace IP addresses, hosts, and username/passwords as needed.</p>
<div class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nv">$ </span>scp <span class="s2">"mydatabase.sql"</span> ubuntu@172.16.20.118:/home/bitnami
<span class="nv">$ </span>ssh <span class="nt">-i</span> ~/Downloads/mykey.pem ubuntu@172.16.20.118
<span class="nv">$ </span>mysql <span class="se">\</span>
  <span class="nt">--host</span><span class="o">=</span><span class="s2">"mydatabase.cluster-dk18asdfxyqc.us-east-1.rds.amazonaws.com"</span> <span class="se">\</span>
  <span class="nt">--user</span><span class="o">=</span><span class="s2">"user"</span> <span class="se">\</span>
  <span class="nt">--password</span><span class="o">=</span><span class="s2">"password"</span> <span class="se">\</span>
  <span class="s2">"mydatabase"</span> &lt; <span class="s2">"mydatabase.sql"</span>
</code></pre></div>
<h2 id="your-first-lambda-deploy">Your First Lambda Deploy</h2>

<p>We did a lot of work in the &quot;Install Lamby&quot; section earlier to prepare your first deploy. I even made the case that you should read through most of the <a href="https://lamby.custominktech.com">Lamby Guides</a> prior to your first deploy. One that I&#39;d like to call out specifically is our guide on <a href="https://lamby.custominktech.com/docs/asset_host_and_precompiling">compiling assets</a>.</p>

<p>That guide makes the case for an asset host using S3 &amp; CloudFront. If your application is simple enough, you can forgo that complexity and simply serve static assets from your Rails app. To do so, add this line to the top of your Lamby generated <code>app.rb</code> file.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">ENV</span><span class="p">[</span><span class="s1">'RAILS_SERVE_STATIC_FILES'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'1'</span>
</code></pre></div>
<p>Now we get to add the Aurora Serverless adapter to our <code>Gemfile</code>.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">gem</span> <span class="s1">'activerecord-aurora-serverless-adapter'</span>
</code></pre></div>
<p>Lastly, add a production section to your <code>database.yml</code> file. Use the Secret ARN and Database ARN we got from the &quot;Deploy Aurora Serverless&quot; section above.</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="na">production</span><span class="pi">:</span>
  <span class="na">adapter</span><span class="pi">:</span> <span class="s">aurora_serverless</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">mydatabase</span>
  <span class="na">secret_arn</span><span class="pi">:</span> <span class="s">arn:aws:secretsmanager:us-east-1:123456789012:secret:Secret-kd2ASwipxeWw-Bdsiww</span>
  <span class="na">resource_arn</span><span class="pi">:</span> <span class="s">arn:aws:rds:us-east-1:123456789012:cluster:mydatabase</span>
</code></pre></div>
<p>Your Lambda will need the same permissions. Again, open up your <code>template.yaml</code> file and navigate to your function&#39;s <code>Policies</code> section and add these two. We use the <code>secret_arn</code> and <code>resource_arn</code> from your database file above with one IMPORTANT addition, each need an <code>*</code> at the end.</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="pi">-</span> <span class="na">Version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2012-10-17"</span>
  <span class="na">Statement</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">Effect</span><span class="pi">:</span> <span class="s">Allow</span>
      <span class="na">Action</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">secretsmanager:*</span>
      <span class="na">Resource</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">arn:aws:secretsmanager:us-east-1:123456789012:secret:Secret-kd2ASwipxeWw-Bdsiww*</span>
<span class="pi">-</span> <span class="na">Version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2012-10-17"</span>
  <span class="na">Statement</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">Effect</span><span class="pi">:</span> <span class="s">Allow</span>
      <span class="na">Action</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">rds-data:*</span>
      <span class="na">Resource</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">arn:aws:rds:us-east-1:123456789012:cluster:mydatabase*</span>
</code></pre></div>
<p>Assuming everything is in place, you are ready to run <code>./bin/deploy</code>. These scripts will use <a href="https://aws.amazon.com/serverless/sam/">AWS SAM</a> to build/package and deploy your Rails application to AWS Lambda. Assuming <strong>that</strong> process went OK, you should see some stack outputs to your Application Load Balancer&#39;s (ALB) DNS name. It will look something like <code>myapplication-2837213178.us-east-1.elb.amazonaws.com</code>. Add <code>http://</code> to that and see how your app looks.</p>

<h4 id="troubleshooting">Troubleshooting</h4>

<p>If you have any error(s), go to CloudWatch -&gt; Log groups and find the log group starting with <code>/aws/lambda/</code> and ending with your Lambda&#39;s name. You might see something like &quot;Could not find a JavaScript runtime&quot; error. This would be a sign that we missed a step in <a href="https://lamby.custominktech.com/docs/asset_host_and_precompiling">our lamby guides</a>. For example:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># config/initializers/assets.rb</span>
<span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">config</span><span class="p">.</span><span class="nf">assets</span><span class="p">.</span><span class="nf">manifest</span> <span class="o">=</span> <span class="no">Rails</span><span class="p">.</span><span class="nf">root</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">'config/manifest.json'</span><span class="p">)</span>

<span class="c1"># config/environments/production.rb</span>
<span class="n">config</span><span class="p">.</span><span class="nf">assets</span><span class="p">.</span><span class="nf">js_compressor</span> <span class="o">=</span> <span class="k">begin</span>
  <span class="k">if</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'LAMBY_BUILD'</span><span class="p">]</span>
    <span class="nb">require</span> <span class="s1">'uglifier'</span>
    <span class="no">Uglifier</span><span class="p">.</span><span class="nf">new</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="n">config</span><span class="p">.</span><span class="nf">public_file_server</span><span class="p">.</span><span class="nf">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Cache-Control'</span> <span class="o">=&gt;</span> <span class="s2">"public, max-age=</span><span class="si">#{</span><span class="mi">30</span><span class="p">.</span><span class="nf">days</span><span class="p">.</span><span class="nf">seconds</span><span class="p">.</span><span class="nf">to_i</span><span class="si">}</span><span class="s2">"</span><span class="p">,</span>
  <span class="s1">'X-Lamby-Base64'</span> <span class="o">=&gt;</span> <span class="s1">'1'</span>
<span class="p">}</span>
</code></pre></div>
<p>From here, it would be straight forward to add a custom domain to finish off your migration. We have a guide on the Lamby site for that too: see our <a href="https://lamby.custominktech.com/docs/custom_domain_name_cloudfront_and_ssl_application_load_balancer">Custom Domain Name, CloudFront, &amp; SSL</a> documentation.</p>

<h2 id="what-did-we-gain">What Did We Gain?</h2>

<p>Seems like a lot of work to maybe save a few Heroku-bucks ð¤ right? If cost alone were the only motivation, I would agree that you just wasted your time.</p>

<p>Our work here is more meaningful than that. Consider this your Rails introduction to learning Serverless &amp; AWS as a whole. In a sense, a stepping stone to learning - learning how to program the cloud, how to rethink our existing Rails solutions within AWS&#39; <a href="https://acloud.guru/learn/aws-well-architected-framework">Well-Architected</a> framework.</p>

<p>From here you should approach any new problem from background jobs to database events in a new way. One that might have you choosing tools like <a href="https://aws.amazon.com/blogs/compute/introducing-aws-lambda-destinations/">Lambda Destinations</a> vs Sidekiq. Let your growing application dictate what abstractions to take, micro-services to build, and more important - how to deliver value to your customers first, and quickly.</p>

<p>Are you a Rails developer making your way to the cloud? I&#39;d love to hear from you in the comments on whether this post was helpful or not, if you&#39;ve got any questions, or are running into problems. I&#39;m happy to help! Thanks so much for reading.</p>

<h2 id="resources">Resources</h2>

<ul>
<li><a href="https://lamby.custominktech.com/">Lamby: Simple Rails &amp; AWS Lambda Integration</a></li>
<li><a href="https://github.com/customink/activerecord-aurora-serverless-adapter">Custom Ink&#39;s ActiveRecord Aurora Serverless Adapter</a></li>
<li><a href="https://aws.amazon.com/rds/aurora/serverless/">Amazon Aurora Serverless</a></li>
<li><a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/data-api.html">Using the Data API for Aurora Serverless</a></li>
<li><a href="http://mysqlworkbench.org/2012/11/set-up-and-configure-postgresql-odbc-drivers-for-the-mysql-workbench-migration-wizard/">Set up and configure PostgreSQL ODBC drivers for the MySQL Workbench Migration Wizard</a></li>
<li><a href="http://mysqlworkbench.org/2012/11/how-to-migrate-postgresql-databases-to-mysql-using-the-mysql-workbench-migration-wizard/">How-To: Migrate PostgreSQL databases to MySQL using the MySQL Workbench Migration Wizard</a></li>
<li><a href="https://www.progress.com/tutorials/jdbc/connect-to-postgresql-on-heroku-using-odbc-and-jdbc-drivers">Connect to PostgreSQL on Heroku Using ODBC and JDBC Drivers</a></li>
<li><a href="https://aws.amazon.com/getting-started/tutorials/configure-connect-serverless-mysql-database-aurora/">Configure and Connect to Serverless MySQL Database</a></li>
<li><a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Scenario2.html">VPC with Public and Private Subnets</a></li>
<li><a href="https://aws.amazon.com/premiumsupport/knowledge-center/new-user-accounts-linux-instance/">SSH access to my Amazon EC2 Linux</a></li>
<li><a href="https://lamby.custominktech.com/docs/custom_domain_name_cloudfront_and_ssl_application_load_balancer">Custom Domain Name, CloudFront, &amp; SSL</a></li>
</ul>

      </div>
      <div class="tb-Post-author">
        
        
        <div class="tb-Author">
  
    <div class="tb-Author-gravatar">
      <img title="Ken Collins" src="https://www.gravatar.com/avatar/0a4a62376a54055b727fca8fa0442c3d?s=150"/>
    </div>
  
  <div class="tb-Author-info">
    
      <time pubdate datetime="2020-01-03T00:00:00-05:00">
        03 Jan 2020
      </time></br>
      by Ken Collins
    
    
    <div class="tb-Author-serverlesshero">
      <img src="/assets/authors/serverlesshero-2e96cfd1ad50c766ec3d5bde04c75aaa3709b59a33599346c1968f152a6638ae.png" alt="AWS Serverless Hero" />
    </div>
    
    <div class="tb-Author-icons">
      
        <span class="tb-Author-icon">
          <a href="https://twitter.com/metaskills"><i class="tb-Icon-twitter"></i></a>
        </span>
      
      
        <span class="tb-Author-icon">
          <a href="https://github.com/metaskills"><i class="tb-Icon-github"></i></a>
        </span>
      
      
        <span class="tb-Author-icon">
          <a href="http://metaskills.net/"><i class="tb-Icon-home"></i></a>
        </span>
      
    </div>
    
      <div class="tb-Author-posts">
        <a href="/authors/ken-collins" class="sb-Btn sb-Btn--secondary sb-Btn--small">
          View All Posts
        </a>
      </div>
    
  </div>
</div>

      </div>
    </div>
    
  <div class="sb-Wrapper">
    <section id="disqus_thread">
    </section>
  </div>
  <script type="text/javascript">
    var disqus_shortname = 'custominktechnologyblog';
    var disqus_identifier = '/blog/2020/01/03/migrate-your-rails-app-from-heroku-to-aws-lambda/';
    var disqus_title = "Migrate Your Rails App from Heroku to AWS Lambda";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


    <div class="tb-Footer">
  <div><small>&copy; 2020 CustomInk, LLC. All rights reserved.</small></div>
  <div><small><a href="https://customink.com">CustomInk</a> is a registered trademark of CustomInk LLC. "T-shirts Unite!" and the "Inky" octopus are trademarks of CustomInk, LLC.</small></div>
</div>

    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32456448-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


    <script async src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </body>
</html>
