<!DOCTYPE html>
<html>
  <head>
  <title>Learning ES6: Loops & Iterators - CustomInk Technology Blog</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="description" content="This week, we learned about Iterable objects, three different kinds of loops in Javascript, and a new for of loop that ES6 gives us the best of all...">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://technology.customink.com/feed.xml" />
  <link rel="stylesheet" type="text/css" href="/assets/app-9fb5f199f67c50e99bda49998478901a6afd824fd2bd222f5562e57268788ecd.css">
</head>

  <body class="tb-Post">
    <header class="tb-Header">
  <div class="sb-Wrapper">
    <nav class="tb-Header-home">
      <a href="/" class="tb-Header-home-logo"><img src="/assets/CustomInk_Tech_Color-1460f9e847670e2626e66143266004749ab6c7204a8d5a2ae394613f986c473d.png"></a>
    </nav>
    <input type="checkbox" id="tb-Header-toggle" />
    <div class="tb-Header-area">
      <label for="tb-Header-toggle" class="tb-Header-toggle" data-open="Menu" data-close="Close" onclick></label>
      <ul class="tb-Header-menu">
        <li class="tb-Header-menu-item">
        
          <a href="/team" class="tb-Header-menu-link">AUTHORS</a>
        
        </li>
        <li class="tb-Header-menu-item">
          <a href="http://customink.com" class="tb-Header-menu-link">CUSTOMINK.COM</a>
        </li>
      </ul>
    </div>
  </div>
</header>

    <div class="tb-Post-main sb-Wrapper">
      <div class="tb-Post-content">
        <h1>Learning ES6: Loops & Iterators</h1>
        <p>This week, we learned about Iterable objects, three different kinds of loops in Javascript, and a new <code>for of</code> loop that ES6 gives us the best of all three worlds!</p>

<!--more-->

<h1 id="loops">Loops</h1>

<p>Loops are fundamental to programming and logic. Let&#39;s take a look at what kinds of loops we had in Javascript, their pros and cons, and the new <code>for of</code> loop in ES6 that combines the best features from all three.</p>

<h2 id="iterables-iterators-and-generators-oh-my">Iterables, Iterators, and Generators, oh my!</h2>

<p>Before we start digging into the loop functions, let&#39;s quickly go over Iterables, Iterators, and Generators!</p>

<p>What is an iterable? Iterables are a type of object which can be iterated over - that is, we can access that object in a sequence. Some examples of iterable objects are Arrays, Maps, and Sets. In Javascript, iterable and iterator protocols were added in ECMAScript 2015. Iterable is a protocol that allows us to write custom iteration behavior in any POJO, for example, defining what value of that object should be iterated over. In order for an object to be iterable, it must define an <code>@@iterator</code> method, a reference to its iterator.</p>

<p>An iterator is what we use to iterate over an iterable. In Javascript, the iterator protocol can be used define or customize an object&#39;s iteration behavior. It must define a <code>next</code> function, which determines how that iterator gets the next value in the sequence.</p>

<p>A generator can be used to create an iterator. Custom iterators are very useful, but can be difficult to program ourselves. Generators allow us to write our own iterative algorithms that can be used like custom iterators. A generator function is a factory for Generator objects, which are both Iterators and Iterable. We can define generator functions by using the <code>function*</code> syntax when defining it. Generators are really handy. There&#39;s lots of use cases, but we won&#39;t get too far in the details with this blog post.</p>

<p>If you want to learn more, check out the documentation from Mozilla:
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Iterators_and_Generators</a>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols</a></p>

<h2 id="the-classics-for-foreach-for-in">The classics - for, forEach, for in</h2>

<p>Now that we have an understanding of iterables and iterators, let&#39;s jump into the kinds of loops we had before ES6. For these examples, we&#39;ll look at an array of values:
<code>const fruits = [&#39;Apple&#39;, &#39;Orange&#39;, &#39;Cherry&#39;, &#39;Pineapple&#39;]</code></p>

<p>The first loop is the ordinary <code>for</code> loop. This was the loop that I used for everything when I learned programming in Java! Here&#39;s an example:</p>
<div class="highlight"><pre><code class="language-" data-lang="">for (let i=0; i &lt; fruits.length; i++) {
    console.log(fruits[i]);
}
</code></pre></div>
<p>This prints out each of the fruits and we&#39;ll see an output with each of the fruits in the array logged out to the console. Although some of us may be very familiar with this kind of for loop, it&#39;s not very readable. Defining a variable <code>i</code> inside of the parenthesis and then using it in the loop can be confusing. It takes longer to read this code and understand what&#39;s going on. You only get an index value in this case, and you have to refer to the original collection, <code>fruits</code> to access the value within.</p>

<p>We also have the <code>forEach</code> loop that is an array method, meaning it can&#39;t be used on other objects. Below is an example of the <code>forEach</code> loop:</p>
<div class="highlight"><pre><code class="language-" data-lang="">fruits.forEach(fruit =&gt; {
    console.log(fruit);
});
</code></pre></div>
<p>This will also print out each of the fruits in the array in the console. This is definitely more readable than the first loop, and you don&#39;t have to access the outside array. You can directly reference the value by the parameter you pass to it. It&#39;s also easier to avoid off-by-one errors using this loop because you aren&#39;t defining the indices. However, this loop isn&#39;t as flexible. We can&#39;t use <code>break</code> or <code>continue</code> in the loop without causing a code breaking error. If we wanted to have an early exit or a skip-over ability in the loop, we can&#39;t use the <code>forEach</code> method. The <code>forEach</code> loop is also a bit slower than a regular <code>for</code> loop, but it might be a trade off worth doing for better readability and maintainability. It&#39;s important to avoid premature optimization at the cost of readability.</p>

<p>Thirdly, we have the <code>for in</code> loop, which looks like this:</p>
<div class="highlight"><pre><code class="language-" data-lang="">for (const fruit in fruits) {
    console.log(fruit);
}
</code></pre></div>
<p>Though we might expect this to also print out each of the fruits in the array in the console, this actually prints out the indices: <code>0, 1, 2, 3</code>!  In order to actually get the values, we would need to write it like this:</p>
<div class="highlight"><pre><code class="language-" data-lang="">for (const index in fruits) {
    console.log(fruits[index]);
}
</code></pre></div>
<p>Now we get the output we expect. This is a pretty readable loop, but we still have to reach outside into the original collection and give it the index to get the values. That&#39;s not the biggest problem with this loop, though. Something interesting happens if you update the Array prototype. Let&#39;s say we added our own function to the Array prototype, whether a polyfill or something custom just because. Maybe we want to add a function that returns a random element from the Array. Some pseudocode would be:</p>
<div class="highlight"><pre><code class="language-" data-lang="">Array.prototype.getRandom = function () {
    const num = getRandomValue(0, this.length);
    return this[num];
}
</code></pre></div>
<p>Let&#39;s take a look at the <code>for in</code> output after modifying the prototype. Now, if we use our second example where we log out each value of the fruits by using the index, we will see an output like this:</p>
<div class="highlight"><pre><code class="language-" data-lang="">Apple
Orange
Cherry
Pineapple
function () {
    const num = getRandomValue(0, this.length);
    return this[num];
}
</code></pre></div>
<p>Woah! Our new function gets logged out now too! This is some strange behavior that happens with the <code>for in</code> loop. And although you might not personally be adding anything to the Array prototype, we often work with libraries that do. If we use the <code>for in</code> loop to access values, we&#39;ll get an output of every single added function. Similarly, since adding a function to the prototype is like adding a property, if you add any plain old property to the array, like this: <code>fruits.location = &#39;produce section&#39;</code> you will also see <code>&#39;produce section&#39;</code> printed out before the added functions.</p>

<h2 id="new-in-es6-for-of">New in ES6 - for of</h2>

<p>In ES6, we have a new type of loop called the <code>for of</code> loop which combines the best things from the ones we looked at above. Here&#39;s an example:</p>
<div class="highlight"><pre><code class="language-" data-lang="">for (const fruit of fruits) {
    console.log(fruit);
}
</code></pre></div>
<p>Even though we&#39;ve added properties to the array, we only get the values outputted. We can also use <code>break</code> and <code>continue</code> inside the loop and it works as we expect it to. <code>break</code> takes you out of the loop entirely whereas <code>continue</code> will skip to the next iteration.</p>

<p>This is where the <code>for of</code> loop gets interesting, and ties back to the Iterators and Iterables! If we call <code>.entries()</code> on our array, we will get an ArrayIterator returned. If we then call <code>.next()</code> on that iterator, we&#39;ll get returned an object which holds a property called value. The <code>value</code> property is an array where the first index is the actual value from the array (like <code>&#39;Apple&#39;</code>) and the second index is that value&#39;s index in the array (for <code>&#39;Apple&#39;</code> we would get <code>0</code>). Go ahead, try it out in your console! We can manually go through (or <em>iterate</em> through) the array by calling <code>.next()</code> repeatedly until we see that the <code>value</code> property returns undefined.</p>

<p>How is this related to our <code>for of</code> loop? We don&#39;t need to manually iterate through the array since we have the loop! Well, if we need both the index and the value of the element in the array, instead of iterating through the array, we can use the ArrayIterator, like so:</p>
<div class="highlight"><pre><code class="language-" data-lang="">for (const fruit of fruits.entries()) {
    console.log(`${fruit[0]} is the ${fruit[1]} item`);
}
</code></pre></div>
<p>Since we are now using the ArrayIterator, each <code>fruit</code> is the value property, or the array that has the value as its first element and the index as its second. The code above would output:</p>
<div class="highlight"><pre><code class="language-" data-lang="">Apple is the 0 item
Orange is the 1 item
Cherry is the 2 item
Pineapple is the 3 item
</code></pre></div>
<p>With some destructuring that we learned in the <a href="http://technology.customink.com/blog/2018/02/23/learning-es6-strings-and-destructuring/">last post</a> - we can write this with even more syntactic sugar!</p>
<div class="highlight"><pre><code class="language-" data-lang="">for (const [index, fruit] of fruits.entries()) {
    console.log(`${fruit} is the ${index} item`);
}
</code></pre></div>
<p>And get the same output. The <code>for of</code> loop is also useful for when you are working with Array-ish objects, which are like objects that have a length and look like an array, but aren&#39;t really arrays and don&#39;t have all the array methods. (More on this in the Arrays post!) For example, the <code>arguments</code> parameter which gives you a collection of all the parameters passed to a specific function. Since the <code>for of</code> loop doesn&#39;t necessarily need to use an array, we can easily iterate through the <code>arguments</code> which is useful for a function that needs to perform some action, but doesn&#39;t know how many parameters are being passed to it. We can also use the <code>for of</code> loop to iterate through Strings, one character at a time, so we don&#39;t have to manually convert a String to an array of its characters. Last but not least, we can also use the <code>for of</code> loop to iterate through nodes from the DOM!</p>

<p>What do all of these have in common? They are Iterables! A <code>for of</code> loop can go through any iterable. However, plain Javascript objects are not iterables. A <code>for of</code> loop cannot be used on a regular object like this:</p>
<div class="highlight"><pre><code class="language-" data-lang="">const avocado = {
    color: 'Green',
    type: 'Haas',
    rating: '10/10',
    comments: 'Avocados are the BEST'
};
</code></pre></div>
<p>If we try to use this object in our loop and console log the values, we&#39;ll get a TypeError that says <code>avocado[Symbol.iterator]</code> is not a function. (More on Symbols in a future post!). So, how can we use the <code>for of</code> loop with objects?</p>

<p>One option is to use <code>Object.entries()</code> or <code>Object.values()</code>, however this would need to be polyfilled because these functions are still in the proposal stage and not available yet.</p>

<p>Another option is to use the <code>Object.keys()</code> function which will return you an array of the keys, in this case, <code>[color, type, rating, comments]</code>. This array we can loop over like this:</p>
<div class="highlight"><pre><code class="language-" data-lang="">for (const prop of Object.keys(avocado)) {
    const value = avocado[prop];
    console.log(value, prop);
}
</code></pre></div>
<p>And that will output:</p>
<div class="highlight"><pre><code class="language-" data-lang="">'Green' color
'Haas' type
'10/10' rating
'Avocados are the BEST' comments
</code></pre></div>
<p>We have to reach outside of the loop to the original object, but it works! This is almost the same as using a <code>for in</code> loop, so take your pick on which type of loop you wanna use.</p>

<h1 id="notes-and-thoughts">Notes and Thoughts</h1>

<p>As someone new to learning about Javascript, I thought all the different kinds of loops were interesting. I asked my group, who are a bit more veteran Javascript users, what kind of for loop they used most prevalently before ES6. I think most people answered that they primarily used the <code>forEach</code> loop. If they needed an index, they would use <code>for in</code>. The way to get around the random properties and modifications to the prototype was to use <code>hasOwnProperty</code> to make sure the property exists on directly on the instance and not inherited from the prototype chain. I thought that was pretty interesting! Check out this post on StackOverflow, about a snippet in Twitter&#39;s JS that uses this little trick: <a href="https://stackoverflow.com/questions/12735778/for-in-and-hasownproperty">https://stackoverflow.com/questions/12735778/for-in-and-hasownproperty</a></p>

<p>Thanks for reading!</p>

      </div>
      <div class="tb-Post-author">
        
        
        <div class="tb-Author">
  
    <div class="tb-Author-gravatar">
      <img title="Miranda Wang" src="https://www.gravatar.com/avatar/b187b2b7ab47955a195b68f62ee6dae4?s=150"/>
    </div>
  
  <div class="tb-Author-info">
    
      <time pubdate datetime="2018-03-09T00:00:00-05:00">
        09 Mar 2018
      </time></br>
      by Miranda Wang
    
    <div class="tb-Author-icons">
      
        <span class="tb-Author-icon">
          <a href="http://twitter.com/Ch0xi"><i class="tb-Icon-twitter"></i></a>
        </span>
      
      
        <span class="tb-Author-icon">
          <a href="https://github.com/mirandawang"><i class="tb-Icon-github"></i></a>
        </span>
      
      
    </div>
    
      <div class="tb-Author-posts">
        <a href="/authors/miranda-wang" class="sb-Btn sb-Btn--secondary sb-Btn--small">
          View All Posts
        </a>
      </div>
    
  </div>
</div>

      </div>
    </div>
    
  <div class="sb-Wrapper">
    <section id="disqus_thread">
    </section>
  </div>
  <script type="text/javascript">
    var disqus_shortname = 'custominktechnologyblog';
    var disqus_identifier = '/blog/2018/03/09/learning-es6-loops-&-iterators/';
    var disqus_title = "Learning ES6: Loops & Iterators";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


    <div class="tb-Footer">
  <div><small>&copy; 2018 CustomInk, LLC. All rights reserved.</small></div>
  <div><small><a href="http://customink.com">CustomInk</a> is a registered trademark of CustomInk LLC. "T-shirts Unite!" and the "Inky" octopus are trademarks of CustomInk, LLC.</small></div>
</div>

    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32456448-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


    <script src="/assets/app-9b22a82c5e39b6e35faf56501565196c2778184fa749c44436f639b4986f61bc.js" type="text/javascript"></script>
  </body>
</html>
