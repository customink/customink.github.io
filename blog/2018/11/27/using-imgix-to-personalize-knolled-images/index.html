<!DOCTYPE html>
<html>
  <head>
  <title>Using IMGIX to Personalize Knolled Images - CustomInk Technology Blog</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="description" content="


  
  Deconstructed: Photo by Todd McLellan.


Knolling is the process of arranging different objects so that they are at 90 degree angles from e...">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://technology.customink.com/feed.xml" />
  <style rel="stylesheet" type="text/css">/*! normalize.css v3.0.1 | MIT License | git.io/normalize */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;margin:0.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace, monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type='button'],input[type='reset'],input[type='submit']{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type='checkbox'],input[type='radio']{box-sizing:border-box;padding:0}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{height:auto}input[type='search']{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type='search']::-webkit-search-cancel-button,input[type='search']::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}html{box-sizing:border-box}*,*::before,*::after{box-sizing:inherit}html,body{height:100%}body,button,input,select,textarea,pre{margin:0;background-color:white}h1,h2,h3,h4,h5,h6,p,dl,ol,ul{margin-top:0;margin-bottom:1rem}ol,ul{padding-left:2rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0;padding-left:1rem}button{border:0}button,input,select,textarea{font-family:inherit;font-size:100%}textarea{display:block}article,aside,details,figcaption,figure,footer,header,main,nav,section,summary{display:block}.sb-Wrapper{padding-right:1rem;padding-left:1rem}@media (min-width: 43.75em){.sb-Wrapper{width:42.75rem;margin-right:auto;margin-left:auto}}@media (min-width: 64em){.sb-Wrapper{width:63rem;margin-right:auto;margin-left:auto}}@media (min-width: 81.25em){.sb-Wrapper{width:80.25rem;margin-right:auto;margin-left:auto}}.sb-Wrapper--fluid{padding-right:1rem;padding-left:1rem;margin-right:auto;margin-left:auto}.sb-PageWrapper.is-open:before{content:'';display:block;position:absolute;top:0;right:0;bottom:0;left:0;z-index:99999999}.sb-Main{max-width:100%;margin-left:auto;margin-right:auto}.sb-Main:after{content:" ";display:block;clear:both}.sb-Main--content{padding-top:1rem}@media (min-width: 64em){.sb-Main--content{padding-top:1.5rem}}@media (max-width: 43.6875em){html.is-minimalUI{overflow:hidden}html.is-minimalUI .sb-PageWrapper{height:100%;overflow-y:scroll;-webkit-overflow-scrolling:touch}}.sb-Btn,a.sb-Btn,.sb-Btn--primary,a.sb-Btn--primary,.sb-Btn--primaryAlt,a.sb-Btn--primaryAlt,.sb-Form input[type='submit'],.sb-Form input[type='submit'].sb-Btn--primary,.sb-Form input[type='submit'].sb-Btn--primaryAlt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background:#1f51cf;padding:0.65rem 2rem;color:#fff;border-radius:6px;transition:all 0.1s ease-in-out;display:inline-block;text-align:center;position:relative;border:0}.sb-Btn:after,a.sb-Btn:after,.sb-Btn--primary:after,a.sb-Btn--primary:after,.sb-Btn--primaryAlt:after,a.sb-Btn--primaryAlt:after,.sb-Form input[type='submit']:after,.sb-Form input[type='submit'].sb-Btn--primary:after,.sb-Form input[type='submit'].sb-Btn--primaryAlt:after{content:"";position:absolute;width:100%;height:10px;border-radius:6px;bottom:0;left:0;box-shadow:0 -3px 0 rgba(0,0,0,0.6) inset}.sb-Btn:visited,a.sb-Btn:visited,.sb-Btn--primary:visited,a.sb-Btn--primary:visited,.sb-Btn--primaryAlt:visited,a.sb-Btn--primaryAlt:visited,.sb-Form input[type='submit']:visited,.sb-Form input[type='submit'].sb-Btn--primary:visited,.sb-Form input[type='submit'].sb-Btn--primaryAlt:visited{color:#fff}.sb-Btn:hover,a.sb-Btn:hover,.sb-Btn--primary:hover,a.sb-Btn--primary:hover,.sb-Btn--primaryAlt:hover,a.sb-Btn--primaryAlt:hover,.sb-Form input[type='submit']:hover,.sb-Form input[type='submit'].sb-Btn--primary:hover,.sb-Form input[type='submit'].sb-Btn--primaryAlt:hover{color:#fff;background:#1840a3}.sb-Btn:active,.sb-Btn:focus,.sb-Btn.is-Active,a.sb-Btn:active,a.sb-Btn:focus,a.sb-Btn.is-Active,.sb-Btn--primary:active,.sb-Btn--primary:focus,.sb-Btn--primary.is-Active,a.sb-Btn--primary:active,a.sb-Btn--primary:focus,a.sb-Btn--primary.is-Active,.sb-Btn--primaryAlt:active,.sb-Btn--primaryAlt:focus,.sb-Btn--primaryAlt.is-Active,a.sb-Btn--primaryAlt:active,a.sb-Btn--primaryAlt:focus,a.sb-Btn--primaryAlt.is-Active,.sb-Form input[type='submit']:active,.sb-Form input[type='submit']:focus,.sb-Form input[type='submit'].is-Active,.sb-Form input[type='submit'].sb-Btn--primary:active,.sb-Form input[type='submit'].sb-Btn--primary:focus,.sb-Form input[type='submit'].sb-Btn--primary.is-Active,.sb-Form input[type='submit'].sb-Btn--primaryAlt:active,.sb-Form input[type='submit'].sb-Btn--primaryAlt:focus,.sb-Form input[type='submit'].sb-Btn--primaryAlt.is-Active{outline:none;color:#fff;background:#295cdf}.sb-Btn:disabled,.sb-Btn.is-Disabled,a.sb-Btn:disabled,a.sb-Btn.is-Disabled,.sb-Btn--primary:disabled,.sb-Btn--primary.is-Disabled,a.sb-Btn--primary:disabled,a.sb-Btn--primary.is-Disabled,.sb-Btn--primaryAlt:disabled,.sb-Btn--primaryAlt.is-Disabled,a.sb-Btn--primaryAlt:disabled,a.sb-Btn--primaryAlt.is-Disabled,.sb-Form input[type='submit']:disabled,.sb-Form input[type='submit'].is-Disabled,.sb-Form input[type='submit'].sb-Btn--primary:disabled,.sb-Form input[type='submit'].sb-Btn--primary.is-Disabled,.sb-Form input[type='submit'].sb-Btn--primaryAlt:disabled,.sb-Form input[type='submit'].sb-Btn--primaryAlt.is-Disabled{opacity:.3;cursor:not-allowed;pointer-events:none}.sb-Btn--primaryRed,a.sb-Btn--primaryRed,.sb-Form input[type='submit'].sb-Btn--primaryRed{background-color:#fa3c00;transition:all 0.1s ease-in-out}.sb-Btn--primaryRed:active,.sb-Btn--primaryRed:focus,.sb-Btn--primaryRed.is-Active,a.sb-Btn--primaryRed:active,a.sb-Btn--primaryRed:focus,a.sb-Btn--primaryRed.is-Active,.sb-Form input[type='submit'].sb-Btn--primaryRed:active,.sb-Form input[type='submit'].sb-Btn--primaryRed:focus,.sb-Form input[type='submit'].sb-Btn--primaryRed.is-Active{outline:none;color:#fff;background-color:#ff602e !important}.sb-Btn--primaryRed:hover,a.sb-Btn--primaryRed:hover,.sb-Form input[type='submit'].sb-Btn--primaryRed:hover{background:#e13600}.sb-Btn--secondary,a.sb-Btn--secondary,.sb-Form input[type='submit'].sb-Btn--secondary,.sb-Btn--secondaryAlt,a.sb-Btn--secondaryAlt,.sb-Form input[type='submit'].sb-Btn--secondaryAlt{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:inset 0px 0px 0px 2px #1f51cf;background:transparent;padding:0.65rem 2rem;color:#1f51cf !important;transition:all 0.1s ease-in-out;display:inline-block;text-align:center}.sb-Btn--secondary:after,a.sb-Btn--secondary:after,.sb-Form input[type='submit'].sb-Btn--secondary:after,.sb-Btn--secondaryAlt:after,a.sb-Btn--secondaryAlt:after,.sb-Form input[type='submit'].sb-Btn--secondaryAlt:after{display:none}.sb-Btn--secondary:hover,.sb-Btn--secondary:focus,.sb-Btn--secondary:active,a.sb-Btn--secondary:hover,a.sb-Btn--secondary:focus,a.sb-Btn--secondary:active,.sb-Form input[type='submit'].sb-Btn--secondary:hover,.sb-Form input[type='submit'].sb-Btn--secondary:focus,.sb-Form input[type='submit'].sb-Btn--secondary:active,.sb-Btn--secondaryAlt:hover,.sb-Btn--secondaryAlt:focus,.sb-Btn--secondaryAlt:active,a.sb-Btn--secondaryAlt:hover,a.sb-Btn--secondaryAlt:focus,a.sb-Btn--secondaryAlt:active,.sb-Form input[type='submit'].sb-Btn--secondaryAlt:hover,.sb-Form input[type='submit'].sb-Btn--secondaryAlt:focus,.sb-Form input[type='submit'].sb-Btn--secondaryAlt:active{background-color:#1f51cf;color:#fff !important}.sb-Btn--secondary--white,a.sb-Btn--secondary--white,.sb-Form input[type='submit'].sb-Btn--secondary--white,.sb-Btn--secondaryAlt--white,a.sb-Btn--secondaryAlt--white,.sb-Form input[type='submit'].sb-Btn--secondaryAlt--white{background-color:#fff}.sb-Btn--link,a.sb-Btn--link,.sb-Form input[type='submit'].sb-Btn--link{border:0;background:transparent;color:#1e39d2 !important;box-shadow:none;transition:all 0.1s ease-in-out}.sb-Btn--link:after,a.sb-Btn--link:after,.sb-Form input[type='submit'].sb-Btn--link:after{display:none}.sb-Btn--link:hover,.sb-Btn--link:focus,.sb-Btn--link:active,a.sb-Btn--link:hover,a.sb-Btn--link:focus,a.sb-Btn--link:active,.sb-Form input[type='submit'].sb-Btn--link:hover,.sb-Form input[type='submit'].sb-Btn--link:focus,.sb-Form input[type='submit'].sb-Btn--link:active{background:transparent;transform:none;box-shadow:none;color:#14278f !important}.sb-Btn--linkAlt,a.sb-Btn--linkAlt,.sb-Form input[type='submit'].sb-Btn--linkAlt{border:2px solid #ededed;box-shadow:none;background-color:#ededed;color:#444 !important;transition:all 0.1s ease-in-out}.sb-Btn--linkAlt:after,a.sb-Btn--linkAlt:after,.sb-Form input[type='submit'].sb-Btn--linkAlt:after{display:none}.sb-Btn--linkAlt:hover,.sb-Btn--linkAlt:focus,.sb-Btn--linkAlt:active,a.sb-Btn--linkAlt:hover,a.sb-Btn--linkAlt:focus,a.sb-Btn--linkAlt:active,.sb-Form input[type='submit'].sb-Btn--linkAlt:hover,.sb-Form input[type='submit'].sb-Btn--linkAlt:focus,.sb-Form input[type='submit'].sb-Btn--linkAlt:active{border-color:#d4d4d4;transform:none;box-shadow:none;color:#444;background:#d4d4d4}.sb-Btn--large,a.sb-Btn--large,.sb-Form input[type='submit'].sb-Btn--large{font-size:1.25rem;font-weight:bold;padding-left:2rem;padding-right:2rem}.sb-Btn--small,a.sb-Btn--small,.sb-Form input[type='submit'].sb-Btn--small{font-size:0.85rem;padding:0.35rem 1.2rem 0.5rem}.sb-Btn--block,a.sb-Btn--block,.sb-Form input[type='submit'].sb-Btn--block{display:block;width:100%;text-align:center}.sb-Btn--mr,a.sb-Btn--mr{margin-right:1rem}@media (max-width: 43.6875em){.sb-Btn--responsive,a.sb-Btn--responsive,.sb-Form input[type='submit'].sb-Btn--responsive{display:block;width:100%;margin-right:0}}@media (max-width: 43.6875em){.sb-Btn--responsive--mb,a.sb-Btn--responsive--mb,.sb-Form input[type='submit'].sb-Btn--responsive--mb{margin-bottom:1rem}}html,body{font-size:16px;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;font-weight:normal;line-height:1.5;color:#444444}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:0.5rem;padding-top:0.5rem}h1,h2,h3{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2}h4,h5,h6{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2}h1{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:21.7728px}@media (min-width: 43.75em){h1{font-size:26.12736px}}@media (min-width: 64em){h1{font-size:31.35283px}}h2{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:18.144px}@media (min-width: 43.75em){h2{font-size:21.7728px}}@media (min-width: 64em){h2{font-size:26.12736px}}h3{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:15.12px}@media (min-width: 43.75em){h3{font-size:18.144px}}@media (min-width: 64em){h3{font-size:21.7728px}}h4{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:12.6px}@media (min-width: 43.75em){h4{font-size:15.12px}}@media (min-width: 64em){h4{font-size:18.144px}}h5{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:12.6px}@media (min-width: 43.75em){h5{font-size:15.12px}}@media (min-width: 64em){h5{font-size:15.12px}}h6{color:#444444;font-weight:bold;font-family:SharpSans, Helvetica, Arial, "Trebuchet MS", sans-serif;line-height:1.2;font-size:12.6px}@media (min-width: 43.75em){h6{font-size:12.6px}}@media (min-width: 64em){h6{font-size:12.6px}}p,dl,ul,ol{font-size:1rem;line-height:1.5}strong,b{font-weight:bold}a{text-decoration:none;color:#1e39d2;cursor:pointer}a:visited{color:#1e39d2}a:hover{color:#0e1b62}a:active{color:#1e39d2}a.is-currentPage{color:#1e39d2;cursor:text}@font-face{font-family:"SharpSans";font-style:normal;font-weight:100;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:italic;font-weight:100;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:normal;font-weight:normal;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Medium-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:italic;font-weight:normal;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-MediumItalic-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:normal;font-weight:bold;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:italic;font-weight:bold;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:normal;font-weight:700;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-Bold-0000000000000000000000000000000000000001.woff) format("woff")}@font-face{font-family:"SharpSans";font-style:italic;font-weight:700;font-display:swap;src:url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.eot?#iefix) format("embedded-opentype"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.woff2) format("woff2"),url(https://www.customink.com/assets-inkpress/style_bitz/SharpSans-BoldItalic-0000000000000000000000000000000000000001.woff) format("woff")}pre{margin-bottom:1rem}@font-face{font-family:"fontello";font-weight:normal;font-style:normal;src:url(/assets/fontello-5c6d5a4b860bc986924a1ec510dcddbc10a425672dc0e3ba37e3bd4020e9d84f.eot);src:url(/assets/fontello-5c6d5a4b860bc986924a1ec510dcddbc10a425672dc0e3ba37e3bd4020e9d84f.eot#iefix) format("embedded-opentype"),url(/assets/fontello-a11118120d4b90a4c4f937c40ed47f13b4ae131b1c6371fd85ec2843d7bc7b12.woff) format("woff"),url(/assets/fontello-813519383401ebf865d03b706d20d1624b232501f0accdfa1bff4d28265d3f74.ttf) format("truetype"),url(/assets/fontello-f25b435813c4882a6189f926bc10b0fc872c358e3071d21d8386765518bc4278.svg#fontello) format("svg")}[class^="icon-"]:before,[class*=" icon-"]:before{font-family:"fontello";font-style:normal;font-weight:normal;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em}.icon-home:before{content:'\e800'}.icon-twitter:before{content:'\e801'}.icon-git:before{content:'\e802'}p>code,ul>code,ol>code,li>code,dl>code,td>code{background-color:#f7f7f7;font-size:90%;padding:2px 3px}.highlight>pre{background-color:#f7f7f7;padding:0.5rem 1rem;border-radius:3px;margin-bottom:1rem}.highlight{background:#ffffff}.highlight .c{color:#999988;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{font-weight:bold}.highlight .o{font-weight:bold}.highlight .cm{color:#999988;font-style:italic}.highlight .cp{color:#999999;font-weight:bold}.highlight .c1{color:#999988;font-style:italic}.highlight .cs{color:#999999;font-weight:bold;font-style:italic}.highlight .gd{color:#000000;background-color:#ffdddd}.highlight .gd .x{color:#000000;background-color:#ffaaaa}.highlight .ge{font-style:italic}.highlight .gr{color:#aa0000}.highlight .gh{color:#999999}.highlight .gi{color:#000000;background-color:#ddffdd}.highlight .gi .x{color:#000000;background-color:#aaffaa}.highlight .go{color:#888888}.highlight .gp{color:#555555}.highlight .gs{font-weight:bold}.highlight .gu{color:#aaaaaa}.highlight .gt{color:#aa0000}.highlight .kc{font-weight:bold}.highlight .kd{font-weight:bold}.highlight .kp{font-weight:bold}.highlight .kr{font-weight:bold}.highlight .kt{color:#445588;font-weight:bold}.highlight .m{color:#009999}.highlight .s{color:#d14}.highlight .na{color:#008080}.highlight .nb{color:#0086B3}.highlight .nc{color:#445588;font-weight:bold}.highlight .no{color:#008080}.highlight .ni{color:#800080}.highlight .ne{color:#990000;font-weight:bold}.highlight .nf{color:#990000;font-weight:bold}.highlight .nn{color:#555555}.highlight .nt{color:#000080}.highlight .nv{color:#008080}.highlight .ow{font-weight:bold}.highlight .w{color:#bbbbbb}.highlight .mf{color:#009999}.highlight .mh{color:#009999}.highlight .mi{color:#009999}.highlight .mo{color:#009999}.highlight .sb{color:#d14}.highlight .sc{color:#d14}.highlight .sd{color:#d14}.highlight .s2{color:#d14}.highlight .se{color:#d14}.highlight .sh{color:#d14}.highlight .si{color:#d14}.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999999}.highlight .vc{color:#008080}.highlight .vg{color:#008080}.highlight .vi{color:#008080}.highlight .il{color:#009999}.tb-Default{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;-webkit-box-direction:normal;-moz-box-direction:normal;box-direction:normal;-webkit-flex-direction:column;-moz-flex-direction:column;flex-direction:column;-ms-flex-direction:column;min-height:100vh}.tb-Default-main{max-width:100%;margin-left:auto;margin-right:auto;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;-webkit-flex:1;-moz-flex:1;-ms-flex:1;flex:1}.tb-Default-main:after{content:" ";display:block;clear:both}.tb-Default-content{width:100%;float:left;margin-left:0;margin-right:0}.tb-Home{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;-webkit-box-direction:normal;-moz-box-direction:normal;box-direction:normal;-webkit-flex-direction:column;-moz-flex-direction:column;flex-direction:column;-ms-flex-direction:column;min-height:100vh}.tb-Home-main{max-width:100%;margin-left:auto;margin-right:auto;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;-webkit-flex:1;-moz-flex:1;-ms-flex:1;flex:1}.tb-Home-main:after{content:" ";display:block;clear:both}@media (min-width: 64em){.tb-Home-content{width:74.57627%;float:left;margin-right:1.69492%}}@media (min-width: 81.25em){.tb-Home-content{width:74.68354%;float:left;margin-right:1.26582%}}.tb-Home--author .tb-Sidebar{display:block}.tb-Post{display:-webkit-box;display:-moz-box;display:box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;-webkit-box-direction:normal;-moz-box-direction:normal;box-direction:normal;-webkit-flex-direction:column;-moz-flex-direction:column;flex-direction:column;-ms-flex-direction:column;min-height:100vh}.tb-Post-main{max-width:100%;margin-left:auto;margin-right:auto;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;-webkit-flex:1;-moz-flex:1;-ms-flex:1;flex:1}.tb-Post-main:after{content:" ";display:block;clear:both}@media (min-width: 64em){.tb-Post-content{width:74.57627%;float:left;margin-right:1.69492%}}@media (min-width: 81.25em){.tb-Post-content{width:74.68354%;float:left;margin-right:1.26582%}}@media (min-width: 64em){.tb-Post-author{display:block;margin-top:1rem;width:23.72881%;float:right;margin-right:0}}@media (min-width: 81.25em){.tb-Post-author{width:24.05063%;float:right;margin-right:0}}@media (min-width: 43.75em){.tb-Post h1:first-child{width:70%}}.tb-Team{margin-top:1.5rem}.tb-Member{width:100%;float:left;margin-left:0;margin-right:0;text-align:center;padding-bottom:2rem}@media (min-width: 43.75em){.tb-Member{width:32.20339%;float:left}.tb-Member:nth-child(3n+1){margin-left:0;margin-right:-100%;clear:both;margin-left:0}.tb-Member:nth-child(3n+2){margin-left:33.89831%;margin-right:-100%;clear:none}.tb-Member:nth-child(3n+3){margin-left:67.79661%;margin-right:-100%;clear:none}}.tb-Member-gravatar img{max-width:100%;border-radius:50%}.tb-Member--posts{margin-top:0.5rem}.tb-Sidebar{display:none;padding:1rem}@media (min-width: 64em){.tb-Sidebar{display:block;width:23.72881%;float:right;margin-right:0}}@media (min-width: 81.25em){.tb-Sidebar{width:24.05063%;float:right;margin-right:0}}.tb-Author-gravatar{text-align:center}.tb-Author-gravatar img{border-radius:50%}.tb-Author-info{text-align:center}.tb-Author-icons{margin-top:0.5rem}.tb-Author-icon a,.tb-Author-icon a:visited{color:gray;padding:0.25rem;font-size:1.25rem}.tb-Author-icon a:hover{color:#5ccfc2}.tb-Author-posts{margin-top:0.5rem}.tb-Excerpt{max-width:100%;margin-left:auto;margin-right:auto;border-bottom:1px dotted #d5d5d5;padding-bottom:1rem;margin-bottom:1rem}.tb-Excerpt:after{content:" ";display:block;clear:both}.tb-Excerpt-date{margin-bottom:0.5rem;color:#939393}.tb-Header{background-color:white;background-color:rgba(255,255,255,0.95);border-bottom:1px solid #cccccc;display:block;margin-top:0.5rem;margin-bottom:1rem}.tb-Header::after{clear:both;content:"";display:table}#tb-Header-toggle{display:none;position:relative;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#tb-Header-toggle:checked+.tb-Header-area .tb-Header-menu{display:block;opacity:1;z-index:10}.tb-Header-home-link{text-decoration:none}.tb-Header-home-logo{display:block;margin-top:0.375rem}.tb-Header-home-logo img{width:85%;max-width:450.5px}.tb-Header-toggle{cursor:pointer}@media (min-width: 43.75em){.tb-Header-toggle{display:none}}.tb-Header-toggle:after{width:2.625rem;height:2.625rem;position:absolute;right:1rem;top:1rem;display:block;content:'\e800';font-family:'inkicons';font-size:2rem;color:#cccccc;cursor:pointer;text-align:center;vertical-align:center}@media (min-width: 43.75em){.tb-Header-toggle:after{display:none}}.tb-Header-menu{display:none;opacity:0;width:100%;margin:0;padding:0;position:absolute;right:0}.tb-Header-menu::after{clear:both;content:"";display:table}@media (min-width: 43.75em){.tb-Header-menu{position:inherit;display:block;opacity:1}}.tb-Header-menu:after{content:"";height:3px;width:100%;background-color:rgba(0,0,0,0.1)}@media (min-width: 43.75em){.tb-Header-menu:after{display:none}}.tb-Header-menu-item{display:block;width:100%;list-style:none}@media (min-width: 43.75em){.tb-Header-menu-item{float:left;width:auto}}.tb-Header-menu-link{padding:0.75rem 1rem;background-color:#f8f8f8;background-color:white;border-bottom:0.25rem solid transparent;border-bottom:1px solid #cccccc;color:inherit;display:block;padding-bottom:0.25rem;text-decoration:none;width:100%}@media (min-width: 43.75em){.tb-Header-menu-link{border-bottom:0.25rem solid transparent}}.tb-Header-menu-link:hover,.tb-Header-menu-link:active,.tb-Header-menu-link:visited{color:inherit}.tb-Header-menu-link:hover{border-bottom:0.25rem solid #fa3c00;color:#fa3c00}.tb-Header-menu-link.is-active{border-bottom:0.25rem solid #fa3c00;color:#fa3c00}.tb-Header-menu-link:before{content:attr(data-link-long)}@media (min-width: 43.75em){.tb-Header-menu-link:before{content:attr(data-link-short)}}@media (min-width: 64em){.tb-Header-menu-link:before{content:attr(data-link-long)}}.tb-Footer{background-color:#ededed;margin-top:2rem;padding:1rem;text-align:center;width:100%}.tb-Paginator{width:100%;float:left;margin-left:0;margin-right:0}.tb-Paginator-newerBtn{width:47.36842%;float:left;margin-right:5.26316%}@media (min-width: 43.75em){.tb-Paginator-newerBtn{width:23.72881%;float:left;margin-right:1.69492%}}.tb-Paginator-newerBtn .sb-Btn{width:100%}.tb-Paginator-olderBtn{width:47.36842%;float:right;margin-right:0}@media (min-width: 43.75em){.tb-Paginator-olderBtn{width:23.72881%;float:right;margin-right:0}}.tb-Paginator-olderBtn .sb-Btn{width:100%}.tb-AsideQuote{display:none;position:relative;width:30vw;float:right;background-color:#f7f7f7;border-radius:3px;font-family:Georgia, serif;font-size:1.25rem;line-height:1.2;color:#939393;font-style:italic;padding:1rem 1rem 1rem 3rem;margin-left:1rem;margin-bottom:1rem}.tb-AsideQuote:before{content:"\201C";font-family:Georgia, serif;font-size:3rem;font-weight:bold;color:#d5d5d5;position:absolute;left:0.75rem;top:0.5rem}@media (min-width: 43.75em){.tb-AsideQuote{display:block}}.tb-Images{max-width:100%;margin-left:auto;margin-right:auto}.tb-Images:after{content:" ";display:block;clear:both}.tb-Img{max-width:100%}@media (min-width: 43.75em){.tb-Img{float:right;clear:right;margin-bottom:1rem;margin-left:1rem}}.tb-Img--fancy{border-radius:0.25rem}.tb-Img--picture{padding:0.5rem;border:1px solid #eeeeee;background-color:white;box-shadow:2px 2px 4px 0px rgba(0,0,0,0.2);margin-bottom:0 !important}@media (min-width: 43.75em){.tb-Img--quarter{max-width:25%}}@media (max-width: 43.6875em){.tb-Img--quarter--sm{max-width:25% !important;float:right;clear:right;margin-bottom:0.5rem;margin-left:0.5rem}}@media (min-width: 43.75em) and (max-width: 63.9375em){.tb-Img--quarter--md{max-width:25%}}@media (min-width: 64em) and (max-width: 81.1875em){.tb-Img--quarter--lg{max-width:25%}}@media (min-width: 43.75em){.tb-Img--third{max-width:33%}}@media (max-width: 43.6875em){.tb-Img--third--sm{max-width:33% !important;float:right;clear:right;margin-bottom:0.5rem;margin-left:0.5rem}}@media (min-width: 43.75em) and (max-width: 63.9375em){.tb-Img--third--md{max-width:33%}}@media (min-width: 64em) and (max-width: 81.1875em){.tb-Img--third--lg{max-width:33%}}@media (min-width: 43.75em){.tb-Img--half{max-width:50%}}@media (max-width: 43.6875em){.tb-Img--half--sm{max-width:50% !important;float:right;clear:right;margin-bottom:0.5rem;margin-left:0.5rem}}@media (min-width: 43.75em) and (max-width: 63.9375em){.tb-Img--half--md{max-width:50%}}@media (min-width: 64em) and (max-width: 81.1875em){.tb-Img--half--lg{max-width:50%}}@media (min-width: 43.75em){.tb-Img--responsive{max-width:50%}}@media (min-width: 64em){.tb-Img--responsive{max-width:40%}}@media (min-width: 81.25em){.tb-Img--responsive{max-width:30%}}.tb-Img--responsive-ctr{margin-bottom:1rem}@media (min-width: 43.75em){.tb-Img--responsive-ctr{float:none !important;clear:none !important;display:block;width:70%;margin-top:0 !important;margin-right:auto !important;margin-left:auto !important}}@media (min-width: 43.75em) and (min-width: 43.75em){.tb-Img--responsive-ctr{margin-bottom:1.5rem !important}}@media (min-width: 64em){.tb-Img--responsive-ctr{max-width:60%}}@media (min-width: 81.25em){.tb-Img--responsive-ctr{max-width:50%}}@font-face{font-family:'tbicons';src:url(/assets/tbicons-096fa3970ce3a3595debd167e1cd11422745885e43987130c7ad2b9fd020a910.eot);src:url(/assets/tbicons-096fa3970ce3a3595debd167e1cd11422745885e43987130c7ad2b9fd020a910.eot#iefix) format("embedded-opentype"),url(/assets/tbicons-a255c4d7531756c350cd3cb8ac924a3a70dba66357bc6f53cdcce66be69e1ca4.woff) format("woff"),url(/assets/tbicons-04c88863a35923e4156691375c162cd8b6fb44104e3cecbc17972c89da722d17.ttf) format("truetype"),url(/assets/tbicons-737a98cc543fbd45788943a259ba88d32a06bdd4e57cf10d9631866dce5df09e.svg#tbicons) format("svg");font-weight:normal;font-style:normal}[class^="tb-Icon-"]:before,[class*=" tb-Icon-"]:before{font-family:"tbicons";font-style:normal;font-weight:normal;speak:none;display:inline-block;text-decoration:inherit;width:1em;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em}.tb-Icon-twitter:before{content:'\e800'}.tb-Icon-home:before{content:'\e801'}.tb-Icon-github:before{content:'\e802'}.tb-Masthead{margin-bottom:1rem}.tb-Masthead::after{clear:both;content:"";display:table}@media (min-width: 43.75em){.tb-Masthead{margin-top:1rem;margin-bottom:2rem}}.tb-Masthead .tb-Img{float:none;display:block;margin:0}.tb-Masthead aside{display:block;margin-top:0.25rem;font-size:10px;line-height:1rem;height:1rem;text-align:right}.tb-Masthead aside a{color:#939393;text-decoration:none;border:0}.tb-Masthead aside a:link,.tb-Masthead aside a:visited,.tb-Masthead aside a:hover,.tb-Masthead aside a:active{color:#939393}
</style>
</head>

  <body class="tb-Post">
    <header class="tb-Header">
  <div class="sb-Wrapper">
    <nav class="tb-Header-home">
      <a href="/" class="tb-Header-home-logo"><img src="/assets/CustomInk_Tech_Color-1460f9e847670e2626e66143266004749ab6c7204a8d5a2ae394613f986c473d.png"></a>
    </nav>
    <input type="checkbox" id="tb-Header-toggle" />
    <div class="tb-Header-area">
      <label for="tb-Header-toggle" class="tb-Header-toggle" data-open="Menu" data-close="Close" onclick></label>
      <ul class="tb-Header-menu">
        <li class="tb-Header-menu-item">
        
          <a href="/team" class="tb-Header-menu-link">AUTHORS</a>
        
        </li>
        <li class="tb-Header-menu-item">
          <a href="http://customink.com" class="tb-Header-menu-link">CUSTOMINK.COM</a>
        </li>
      </ul>
    </div>
  </div>
</header>

    <div class="tb-Post-main sb-Wrapper">
      <div class="tb-Post-content">
        <h1>Using IMGIX to Personalize Knolled Images</h1>
        <style>
  .highlight {
    font-size: 14px;
    font-family: 'Source Code Pro', Menlo, Consolas, Monaco, monospace;
  }
  .highlight pre {
    border: 1px solid rgb(238, 238, 238);
    background-color: white;
  }
  .highlight span.s  { color: rgb(170, 17, 17); }
  .highlight span.nt { color: rgb(34, 17, 153); }
  .highlight span.c  { color: rgb(204, 204, 204); }
  .highlight span.na { color: rgb(85, 85, 85); }
</style>

<div class="tb-Masthead">
  <img src="/assets/content/imgix/masthead2-f-5c55d7a6ff6e06cde41ff049f33a89b95697189e9d77e990d0a8aaca82ad617a.jpg" class="tb-Img tb-Img--fancy" alt="Deconstructed: Photo by Todd McLellan." />
  <aside><a href="https://www.thisiscolossal.com/2011/02/todd-mclellan-deconstructed/">Deconstructed: Photo by Todd McLellan.</a></aside>
</div>

<p><a href="https://creativemarket.com/blog/what-is-knolling-the-overhead-photography-trend-explained">Knolling</a> is the process of arranging different objects so that they are at 90 degree angles from each other. The term originates from a janitor named Andrew Kromelow in 1987 who would arrange tools using this method for a popular furniture brand called <a href="https://www.knoll.com/shop/by-designer/frank-gehry">Knoll</a>. Commonly photographed from above, knolling is a highly popular method for promoting products from companies like Instagram to Apple.</p>

<!--more-->

<p><a href="https://www.imgix.com"><img src="/assets/content/imgix/imgix-a6c45c8e8fbb4c352c598fcf2282992a1e145914ab324e413248e25068982afd.png" class="tb-Img tb-Img--third tb-Img--third--sm" alt="IMGIX Logo" /></a>
Even here at Custom Ink, we use knolling to showcase our products. But how could we personalize knolled images to help our customers visualize their creations? We often use <a href="https://www.imgix.com">IMGIX</a> to help us process &amp; optimize catalog images and decided to give its blending capabilities a try out. Let&#39;s jump right in and explore how.</p>

<h2 id="our-goal">Our Goal</h2>

<p>To personalize this image below with a design centered on each product. The image is marked up to indicate areas a design can be placed within, appearing as red rectangles. The <code>width</code> and <code>height</code> of each rectangle appear as large text followed by smaller text indicating the <code>x</code> and <code>y</code>  placement coordinates, both in pixels. The overall dimensions of the image is <code>600x432</code> pixels. Take note, we will need all these numbers later :)</p>

<p><img src="/assets/content/imgix/steps/0-7dc4b1cb585739f856abaaeff2102a176a7b6f690bb9e66a7a6602dbf0a1ee6f.png" class="tb-Img tb-Img--picture tb-Img--responsive-ctr" alt="Custom Ink Knolled Image Goals" /></p>

<h2 id="imgix-intro">IMGIX Intro</h2>

<p>That background image is hosted on Custom Ink&#39;s site at <a href="https://www.customink.com/email/imgix/knolled.jpg">/email/imgix/knolled.jpg</a> and in order for IMGIX to process it, we must allow their system to connect to our site. For today&#39;s demo, we are using IMGIX&#39;s <a href="https://docs.imgix.com/setup/creating-sources">web bucket source</a> which enables any file in this URL path to be processed.</p>

<p>Below is a little Ruby script that we will use in future code examples. It will evolve a bit as we move forward and the final version can be found in <a href="https://gist.github.com/metaskills/316e1285c34f713d646171beb63ae252">this GitHub gist</a>. The script uses Bundler&#39;s <a href="https://technology.customink.com/blog/2015/07/17/bundler-inline-gemfile-dependencies/">inline feature</a> to install our dependencies, for now, the IMGIX <a href="https://github.com/imgix/imgix-rb">ruby client</a>. The design to add is a URL string. Lastly, this script also creates a simple client instance and convenience method to make IMGIX paths to our web bucket source created above.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">require</span> <span class="s1">'bundler/inline'</span>

<span class="n">gemfile</span> <span class="kp">true</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s1">'https://rubygems.org'</span>
  <span class="n">gem</span> <span class="s1">'imgix'</span>
<span class="k">end</span>

<span class="no">DESIGN_URL</span> <span class="o">=</span> <span class="s1">'https://www.customink.com/email/imgix/inky.png'</span>
<span class="no">IMGIX_CLIENT</span> <span class="o">=</span> <span class="no">Imgix</span><span class="o">::</span><span class="no">Client</span><span class="p">.</span><span class="nf">new</span> <span class="ss">host: </span><span class="no">ENV</span><span class="p">[</span><span class="s1">'IMGIX_SOURCE'</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">ixpath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
  <span class="no">IMGIX_CLIENT</span><span class="p">.</span><span class="nf">path</span> <span class="s2">"/email/imgix/</span><span class="si">#{</span><span class="n">filename</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>
</code></pre></div>
<h2 id="first-placement">First Placement</h2>

<p>IMGIX has a vast <a href="https://docs.imgix.com/apis/url">API</a> available to process images. Think of them as a hosted <a href="https://www.imagemagick.org">ImageMagick</a> service. From file formation conversions to face detection, they do it all. But today we are going to make heavy use of their <a href="https://docs.imgix.com/apis/url/blending">Blending API</a>.</p>

<p>Our first experiment will simply blend our design url onto the base knolled image using dimensions &amp; coordinates from our first design area shown above. The client&#39;s <code>to_url</code> methods returns a URL string. The parameters direct IMGIX how to process the image which are mostly self-documenting. If you have questions, reference that API links above as we move along.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">ixpath</span><span class="p">(</span><span class="s1">'knolled.jpg'</span><span class="p">).</span><span class="nf">to_url</span><span class="p">(</span>
  <span class="ss">blend64: </span><span class="no">DESIGN_URL</span><span class="p">,</span>
  <span class="ss">bw: </span><span class="mi">110</span><span class="p">,</span> <span class="ss">bh: </span><span class="mi">80</span><span class="p">,</span>  <span class="c1"># Design area width &amp; height.</span>
  <span class="ss">bx: </span><span class="mi">40</span><span class="p">,</span>  <span class="ss">by: </span><span class="mi">130</span><span class="p">,</span> <span class="c1"># Design area coordinates.</span>
  <span class="ss">bm: </span><span class="s1">'normal'</span>
<span class="p">)</span>
</code></pre></div>
<p><img src="/assets/content/imgix/steps/1-c6da1cbcc1a856dc84073172007ae4115a5681fc437e4188dbe5ad441bdc8ea2.jpg" class="tb-Img tb-Img--picture tb-Img--responsive-ctr" /></p>

<p>Well this is mostly what we want. The design fits into its area but is not centered. We could adjust the <code>bx</code> param to nudge it to the right, but this requires that we calculate the width of the image. Our goal is to do as little work as possible while making any design (horizontal or vertical) automatically center within each area.</p>

<p><strong>Option #1</strong> - The <a href="https://docs.imgix.com/apis/url/blending/ba">Blend Align</a> param which adjusts the alignment of the overlay image relative to the base image. So we might think adding <code>ba: &#39;middle,center&#39;</code> would work? But it does not because alignment only applies when we are not setting the (bx) and/or (by) params.</p>

<p><strong>Option #2</strong> - The <a href="https://docs.imgix.com/apis/url/blending/bf">Blend Fit</a> param which controls how an overlay image fits within its blend width (bw) and blend height (bh) dimensions. This sounds ideal. But we are already seeing how the default of <code>bf: &#39;clip&#39;</code> is working by making sure the design proportionally fits in the area. In this case, it adjusted the height automatically for us to 80 pixels. The blend fit param does nothing for alignment.</p>

<p>In order to continue with other design areas, we need to rethink the problem.</p>

<h2 id="new-placement-approach">New Placement Approach</h2>

<p>So did it feel like we hit a roadblock above? We actually learned a valuable lesson. In order to center any design within its area, we need to rethink what is the overlay image. Rather than use the design on its own, we need to instruct IMGIX to make a design area layer which centers the design, then blend that over the knolled background.</p>

<p>To create this layer, we will use a 1px transparent png and resize it to the dimensions of the design layer, then blend the design over it.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">ixpath</span><span class="p">(</span><span class="s1">'1px.png'</span><span class="p">).</span><span class="nf">to_url</span><span class="p">(</span>
  <span class="ss">fit: </span><span class="s1">'crop'</span><span class="p">,</span>
  <span class="ss">w: </span><span class="mi">110</span><span class="p">,</span> <span class="ss">h: </span><span class="mi">80</span><span class="p">,</span>
  <span class="ss">blend64: </span><span class="no">DESIGN_URL</span><span class="p">,</span>
  <span class="ss">bw: </span><span class="mi">110</span><span class="p">,</span> <span class="ss">bh: </span><span class="mi">80</span><span class="p">,</span>
  <span class="ss">bm: </span><span class="s1">'normal'</span>
<span class="p">)</span>
</code></pre></div>
<p><img src="/assets/content/imgix/steps/2-bc0d5beea73569580a426338c1bbb9f0d3cba54d8723b9268921d634a650c079.png" class="tb-Img tb-Img--picture tb-Img--responsive-ctr" style="width:110px; height:80px; box-sizing:content-box; float:right; margin-left: 1rem; margin-bottom: 1rem;" />Perfect! The design is centered in a new image that is the exact size of the design area. We had to use a new param, <a href="https://docs.imgix.com/apis/url/size/fit">Fit Crop</a>, which maintains the full design area dimensions. If not used, the default fit (clip) would have trimmed our image to <code>80x80</code> pixels.</p>

<p><img src="/assets/content/imgix/steps/2-debug-51de0c2249bd64a62bfce07f4695a8174457e018e9f02344b316d13a53dff67d.png" class="tb-Img tb-Img--picture tb-Img--responsive-ctr" style="width:110px; height:80px; box-sizing:content-box; float:right; margin-left: 1rem; margin-bottom: 1rem;" /><strong>DEBUGGING</strong> - Sometimes you want to visualize the design area. This is easy to do now by using a 1px image that has a color transparency. I chose red and named it <code>1px-debug.png</code>. Here is the same image using the debug pixel.</p>

<p>Finally, putting this new design layer technique onto the knolled background by swapping out the design URL with our new IMGIX layer URL. For this example, I have used the debug pixel so we can see how this all works.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">ixpath</span><span class="p">(</span><span class="s1">'knolled.jpg'</span><span class="p">).</span><span class="nf">to_url</span><span class="p">(</span>
  <span class="ss">blend64: </span><span class="n">ixpath</span><span class="p">(</span><span class="s1">'1px-debug.png'</span><span class="p">).</span><span class="nf">to_url</span><span class="p">(</span>
    <span class="ss">w: </span><span class="mi">110</span><span class="p">,</span> <span class="ss">h: </span><span class="mi">80</span><span class="p">,</span>
    <span class="ss">fit: </span><span class="s1">'crop'</span><span class="p">,</span>
    <span class="ss">blend64: </span><span class="no">DESIGN_URL</span><span class="p">,</span>
    <span class="ss">bw: </span><span class="mi">110</span><span class="p">,</span> <span class="ss">bh: </span><span class="mi">80</span><span class="p">,</span>
    <span class="ss">bm: </span><span class="s1">'normal'</span><span class="p">,</span>
    <span class="ss">bf: </span><span class="s1">'clip'</span><span class="p">,</span>
  <span class="p">),</span>
  <span class="ss">bx: </span><span class="mi">40</span><span class="p">,</span> <span class="ss">by: </span><span class="mi">130</span><span class="p">,</span>
  <span class="ss">bm: </span><span class="s1">'normal'</span>
<span class="p">)</span>
</code></pre></div>
<p><img src="/assets/content/imgix/steps/2-final-42566d816a563ab2ab427b40730ddbcddfbb74cf0dff2eea55fb6dac8895d467.jpg" class="tb-Img tb-Img--picture tb-Img--responsive-ctr" /></p>

<p>Now we are cooking! But a handful of design areas remain and there is no way to use multiple blends on the same knolled background image. I wonder if we can recursively blend multiple design layers? ðŸ¤”</p>

<h2 id="peeling-back-the-layers">Peeling Back The Layers</h2>

<p>We have already seen how we can pass one blended IMGIX URL to another blended IMGIX URL. Till now, that second image&#39;s dimensions are the size of the design area - the red boxes illustrated in our goals section. But to layer multiple designs, we need a uniform approach similar to <a href="https://en.wikipedia.org/wiki/Traditional_animation">cell animation</a>.</p>

<p>A small change to our Ruby script is needed so the width and height of the knolled background can be used. Also, a clean way to turn on the 1px debug image by setting an environment variable.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">WIDTH</span>  <span class="o">=</span> <span class="mi">600</span>
<span class="no">HEIGHT</span> <span class="o">=</span> <span class="mi">432</span>
<span class="no">ONEPX</span>  <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'DEBUGPX'</span><span class="p">]</span> <span class="p">?</span> <span class="s1">'1px-debug.png'</span> <span class="p">:</span> <span class="s1">'1px.png'</span>
</code></pre></div>
<p>And now an example of a transparent layer, the size of our knolled background, that has the design area layer blended onto it. The debug pixel was used so we can visibly see these layers at work. Again, here is the <a href="https://docs.imgix.com/apis/url/blending">Blending API</a> in case you would like to reference these parameters.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">ixpath</span><span class="p">(</span><span class="no">ONEPX</span><span class="p">).</span><span class="nf">to_url</span><span class="p">(</span>
  <span class="ss">w: </span><span class="no">WIDTH</span><span class="p">,</span> <span class="ss">h: </span><span class="no">HEIGHT</span><span class="p">,</span>
  <span class="ss">fit: </span><span class="s1">'crop'</span><span class="p">,</span>
  <span class="ss">blend64: </span><span class="n">ixpath</span><span class="p">(</span><span class="no">ONEPX</span><span class="p">).</span><span class="nf">to_url</span><span class="p">(</span>
    <span class="ss">w: </span><span class="mi">110</span><span class="p">,</span> <span class="ss">h: </span><span class="mi">80</span><span class="p">,</span>
    <span class="ss">fit: </span><span class="s1">'crop'</span><span class="p">,</span>
    <span class="ss">blend64: </span><span class="no">DESIGN_URL</span><span class="p">,</span>
    <span class="ss">bw: </span><span class="mi">110</span><span class="p">,</span> <span class="ss">bh: </span><span class="mi">80</span><span class="p">,</span>
    <span class="ss">bm: </span><span class="s1">'normal'</span><span class="p">,</span>
    <span class="ss">bf: </span><span class="s1">'clip'</span><span class="p">,</span>
  <span class="p">),</span>
  <span class="ss">bx: </span><span class="mi">40</span><span class="p">,</span> <span class="ss">by: </span><span class="mi">130</span><span class="p">,</span>
  <span class="ss">bm: </span><span class="s1">'normal'</span>
<span class="p">)</span>
</code></pre></div>
<p><img src="/assets/content/imgix/steps/3-724c6a82ee2fe96c23013de72237d225a04d0b8cc74ad2fa30e9948a430e2cf1.jpg" class="tb-Img tb-Img--picture tb-Img--responsive-ctr" /></p>

<h2 id="stacking-the-deck">Stacking The Deck</h2>

<p>We need to create a Ruby <a href="https://robots.thoughtbot.com/writing-a-domain-specific-language-in-ruby">DSL</a> that allows us to stack IMGIX design layer URLs like the one above. The pseudo code I initially wrote looked something like this. Where Ruby blocks allow us to recursively build a stack.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">knolled_background</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">design_layer</span><span class="p">(</span><span class="n">bw</span><span class="p">,</span> <span class="n">bh</span><span class="p">,</span> <span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">design_layer</span><span class="p">(</span><span class="n">bw</span><span class="p">,</span> <span class="n">bh</span><span class="p">,</span> <span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">)</span> <span class="k">do</span>
      <span class="c1"># ...</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<p>But if every IMGIX URL uses the (blend) option, where is our recursive hook to stitch each layer together? The answer is the <a href="https://docs.imgix.com/apis/url/watermark">Watermark API</a> which has a similar interface to blending. So here is our final addition to our Ruby script.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">design_layer</span><span class="p">(</span><span class="n">bw</span><span class="p">:,</span> <span class="n">bh</span><span class="p">:,</span> <span class="n">bx</span><span class="p">:,</span> <span class="n">by</span><span class="p">:)</span>
  <span class="n">ixpath</span><span class="p">(</span><span class="s1">'1px.png'</span><span class="p">).</span><span class="nf">to_url</span><span class="p">({</span>
    <span class="ss">w: </span><span class="no">WIDTH</span><span class="p">,</span> <span class="ss">h: </span><span class="no">HEIGHT</span><span class="p">,</span>
    <span class="ss">fit: </span><span class="s1">'crop'</span><span class="p">,</span>
    <span class="ss">blend64: </span><span class="n">ixpath</span><span class="p">(</span><span class="no">ONEPX</span><span class="p">).</span><span class="nf">to_url</span><span class="p">({</span>
      <span class="ss">w: </span><span class="n">bw</span><span class="p">,</span> <span class="ss">h: </span><span class="n">bh</span><span class="p">,</span>
      <span class="ss">fit: </span><span class="s1">'crop'</span><span class="p">,</span>
      <span class="ss">blend64: </span><span class="no">DESIGN_URL</span><span class="p">,</span>
      <span class="ss">bw: </span><span class="n">bw</span><span class="p">,</span> <span class="ss">bh: </span><span class="n">bh</span><span class="p">,</span>
      <span class="ss">bm: </span><span class="s1">'normal'</span><span class="p">,</span>
      <span class="ss">bf: </span><span class="s1">'clip'</span>
    <span class="p">}),</span>
    <span class="ss">bx: </span><span class="n">bx</span><span class="p">,</span> <span class="ss">by: </span><span class="n">by</span><span class="p">,</span>
    <span class="ss">bm: </span><span class="s1">'normal'</span><span class="p">,</span>
    <span class="ss">mark64: </span><span class="nb">block_given?</span> <span class="p">?</span> <span class="k">yield</span> <span class="p">:</span> <span class="kp">nil</span><span class="p">,</span>
    <span class="ss">markx: </span><span class="mi">0</span><span class="p">,</span> <span class="ss">marky: </span><span class="mi">0</span>
  <span class="p">})</span>
<span class="k">end</span>
</code></pre></div>
<p>Because the inner most image, the first URL generated has no block argument, we use Ruby&#39;s <code>block_given?</code> to conditionally yield or not. And because we have uniform layers, all we have to do is set both (markx) and (marky) to 0. Perfect!</p>

<h2 id="putting-it-all-together">Putting It All Together</h2>

<p>All that learning so we can write this concise code using each design area&#39;s data.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">ixpath</span><span class="p">(</span><span class="s1">'knolled.jpg'</span><span class="p">).</span><span class="nf">to_url</span><span class="p">({</span>
  <span class="ss">blend64: </span><span class="n">design_layer</span><span class="p">(</span><span class="ss">bw: </span><span class="mi">110</span><span class="p">,</span> <span class="ss">bh: </span><span class="mi">80</span><span class="p">,</span> <span class="ss">bx: </span><span class="mi">40</span><span class="p">,</span> <span class="ss">by: </span><span class="mi">130</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">design_layer</span><span class="p">(</span><span class="ss">bw: </span><span class="mi">115</span><span class="p">,</span> <span class="ss">bh: </span><span class="mi">115</span><span class="p">,</span> <span class="ss">bx: </span><span class="mi">240</span><span class="p">,</span> <span class="ss">by: </span><span class="mi">130</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">design_layer</span><span class="p">(</span><span class="ss">bw: </span><span class="mi">42</span><span class="p">,</span> <span class="ss">bh: </span><span class="mi">42</span><span class="p">,</span> <span class="ss">bx: </span><span class="mi">495</span><span class="p">,</span> <span class="ss">by: </span><span class="mi">155</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">design_layer</span><span class="p">(</span><span class="ss">bw: </span><span class="mi">15</span><span class="p">,</span> <span class="ss">bh: </span><span class="mi">20</span><span class="p">,</span> <span class="ss">bx: </span><span class="mi">485</span><span class="p">,</span> <span class="ss">by: </span><span class="mi">295</span><span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="ss">bm: </span><span class="s1">'normal'</span>
<span class="p">})</span>
</code></pre></div>
<p><img src="/assets/content/imgix/steps/final-bdfcc823ef810b7ce63b9194c9ee41235a57f3e739a0b784d3a44759ec958d15.jpg" class="tb-Img tb-Img--picture tb-Img--responsive-ctr" /></p>

<p>From here you can do all sorts of additional fun things. For example, you can create layers in PhotoShop and interleave as you build your design layers. You can even use URL shortener services like <a href="https://bitly.com">Bitly</a> as you build IMGIX URLs to ensure your final URL remains well under browser limits. Here is an example of how we are using all these techniques.</p>

<p><img src="/assets/content/imgix/advanced-73d094a30670f2bc0a0b66a1e23d82587521a87eb71ffa6f01c53bf93227f19a.jpg" class="tb-Img tb-Img--picture tb-Img--responsive-ctr" /></p>

<h2 id="thanks">Thanks!</h2>

<p>If you have any questions or comments, please feel free to ask or share. Thank you so much for reading and remember - <a href="https://www.youtube.com/watch?v=49p1JVLHUos&t=15m33s">Always Be Knolling (ABK)</a> !!!</p>

      </div>
      <div class="tb-Post-author">
        
        
        <div class="tb-Author">
  
    <div class="tb-Author-gravatar">
      <img title="Ken Collins" src="https://www.gravatar.com/avatar/0a4a62376a54055b727fca8fa0442c3d?s=150"/>
    </div>
  
  <div class="tb-Author-info">
    
      <time pubdate datetime="2018-11-27T00:00:00-05:00">
        27 Nov 2018
      </time></br>
      by Ken Collins
    
    <div class="tb-Author-icons">
      
        <span class="tb-Author-icon">
          <a href="https://twitter.com/metaskills"><i class="tb-Icon-twitter"></i></a>
        </span>
      
      
        <span class="tb-Author-icon">
          <a href="https://github.com/metaskills"><i class="tb-Icon-github"></i></a>
        </span>
      
      
        <span class="tb-Author-icon">
          <a href="http://metaskills.net/"><i class="tb-Icon-home"></i></a>
        </span>
      
    </div>
    
      <div class="tb-Author-posts">
        <a href="/authors/ken-collins" class="sb-Btn sb-Btn--secondary sb-Btn--small">
          View All Posts
        </a>
      </div>
    
  </div>
</div>

      </div>
    </div>
    
  <div class="sb-Wrapper">
    <section id="disqus_thread">
    </section>
  </div>
  <script type="text/javascript">
    var disqus_shortname = 'custominktechnologyblog';
    var disqus_identifier = '/blog/2018/11/27/using-imgix-to-personalize-knolled-images/';
    var disqus_title = "Using IMGIX to Personalize Knolled Images";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


    <div class="tb-Footer">
  <div><small>&copy; 2019 CustomInk, LLC. All rights reserved.</small></div>
  <div><small><a href="https://customink.com">CustomInk</a> is a registered trademark of CustomInk LLC. "T-shirts Unite!" and the "Inky" octopus are trademarks of CustomInk, LLC.</small></div>
</div>

    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32456448-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


    <script async src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  </body>
</html>
