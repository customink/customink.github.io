<!DOCTYPE html>
<html>
  <head>
  <title>How to add badges to iterm2 - CustomInk Technology Blog</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="description" content="iTerm2 - the popular terminal emulator for OSX has added some really neat features. One of those is badges. From the documentation: A badge is a la...">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://technology.customink.com/feed.xml" />
  <link rel="stylesheet" href="/assets/app-1193f26ffafc82796d02d27f7d8607d4.css">
  <script type="text/javascript">
  (function(d) {
    var config = {
      kitId: 'tph7yyf',
      scriptTimeout: 3000
    },
    h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
  })(document);
</script>

  
</head>

  <body class="tb-Post">
    <header class="tb-Header">
  <div class="sb-Wrapper">
    <nav class="tb-Header-home">
      <a href="/" class="tb-Header-home-logo"><img src="/assets/CustomInk_Tech_Color-f9e81e9def04cfa2ba39d06ee8e218e4.png"></a>
    </nav>
    <input type="checkbox" id="tb-Header-toggle" />
    <div class="tb-Header-area">
      <label for="tb-Header-toggle" class="tb-Header-toggle" data-open="Menu" data-close="Close" onclick></label>
      <ul class="tb-Header-menu">
        <li class="tb-Header-menu-item">
        
          <a href="/team" class="tb-Header-menu-link">AUTHORS</a>
        
        </li>
        <li class="tb-Header-menu-item">
          <a href="http://customink.com" class="tb-Header-menu-link">CUSTOMINK.COM</a>
        </li>
      </ul>
    </div>
  </div>
</header>

    <div class="tb-Post-main sb-Wrapper">
      <div class="tb-Post-content">
        <h1>How to add badges to iterm2</h1>
        <p><a href="https://www.iterm2.com/index.html">iTerm2</a> - the popular terminal emulator for OSX has added some really neat features. One of those is badges. <a href="https://www.iterm2.com/documentation-badges.html">From the documentation</a>: A badge is a large text label that appears in the top right of a terminal session to provide dynamic status, such as the current host name or git branch.</p>

<p>I had some trouble figuring out how to build a badge so I wanted to share a quick walk-through. Thanks to <a href="https://twitter.com/cmar">Chris Mar</a> for walking me through the process.</p>

<!--more-->

<p>First, a couple of things to keep in mind. This walk-through includes code for <a href="http://www.zsh.org/">zshell</a> but should work for the most part, or be very similar for other popular shells like <a href="https://www.gnu.org/software/bash/">bash</a></p>

<p>Second, the emoji characters I used in the tutorial are built right into the mac keyboard. Here&#39;s a <a href="http://www.imore.com/how-insert-emoji-text-os-x-yosemite">quick tutorial on how to insert them</a>.</p>

<p>Here&#39;s the walk-through</p>

<h3 id="install-shell-integrations-on-iterm">Install shell integrations on iTerm.</h3>

<p>Easy enough - it&#39;s an option on the dropdown menu</p>

<p><img src="https://s3.amazonaws.com/moarcats/EwGj0.png" alt=""></p>

<p>Open your <code>.zshrc</code> file and verify that the integrations are installed. iTerm should have added the line <code>test -e &quot;${HOME}/.iterm2_shell_integration.zsh&quot; &amp;&amp; source &quot;${HOME}/.iterm2_shell_integration.zsh&quot;</code> <code>.zshrc</code> is the configuration file for Zsh and generally lives in your home directory.</p>

<h3 id="declare-a-custom-variable-in-your-zshrc-file">Declare a custom variable in your <code>.zshrc</code> file</h3>

<p>You now need to write a special function in <code>.zshrc</code> that Zsh understands. It looks like this:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">function </span>iterm2_print_user_vars<span class="o">()</span> <span class="o">{</span>
  iterm2_set_user_var bananas <span class="k">$(</span>do_fun_stuff<span class="k">)</span>
<span class="o">}</span>
</code></pre></div>
<p>The function <code>iterm2_print_user_vars()</code> calls <code>iterm2_print_user_vars()</code> one or more times. The function <code>iterm2_set_user_var</code> assigns your <code>user var</code> <code>bananas</code> to <code>do_fun_stuff</code>, which can be written directly there or encapsulated in another function.</p>

<p>Finally you need to declare your <code>user var</code> in iterm for each profile you want to use it in.</p>

<p><img src="https://s3.amazonaws.com/moarcats/FUnmv.png" alt=""></p>

<h3 id="let-39-s-create-two-different-examples">Let&#39;s create two different examples</h3>

<h4 id="display-when-there-39-s-a-diff-in-your-git-branch">Display when there&#39;s a diff in your git branch</h4>

<p>Add the following to your <code>.zshrc</code>:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">function </span>iterm2_print_user_vars<span class="o">()</span> <span class="o">{</span>
  iterm2_set_user_var gitDiff <span class="k">$(</span>is_git_branch_dirty<span class="k">)</span>
<span class="o">}</span>

<span class="k">function </span>is_git_branch_dirty <span class="o">{</span>
  <span class="o">[[</span> <span class="k">$(</span>git diff --shortstat 2&gt; /dev/null | tail -n1<span class="k">)</span> !<span class="o">=</span> <span class="s2">""</span> <span class="o">]]</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"‚ö°‚ö°"</span>
<span class="o">}</span>
</code></pre></div>
<p>Add <code>\(user.gitDiff)</code> to your badge in the profile settings.</p>

<p>Couldn&#39;t read the code? Checkout <a href="http://stackoverflow.com/questions/2188199/how-to-use-double-or-single-bracket-parentheses-curly-braces">this stackoverflow</a> for the skinny on brackets in shell scripting. I found it to be quite helpful.</p>

<h4 id="how-to-add-a-camel-on-wednesdays-and-an-octopus-on-others">How to add a camel on Wednesdays and an Octopus on others</h4>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">function </span>is_it_wednesday <span class="o">{</span>
  <span class="k">if</span> <span class="o">[[</span> <span class="k">$(</span>date +%A<span class="k">)</span> <span class="o">=</span> <span class="s2">"Wednesday"</span> <span class="o">]]</span>
    <span class="k">then
     </span><span class="nb">echo</span> <span class="s2">"üê™"</span> <span class="c"># Camel Prompt</span>
    <span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"üêô"</span> <span class="c"># Inky Prompt</span>
  <span class="k">fi</span>
<span class="o">}</span>
</code></pre></div>
<p>Add <code>\(user.humpDay)</code> to your badge in the profile settings.</p>

<p>Your homework is to combine two badges!
<img src="https://s3.amazonaws.com/moarcats/mPosM.png" alt=""></p>

      </div>
      

<div class="tb-Author">
  
    <div class="tb-Author-gravatar">
      <img title="Kalimar Maia" src="http://www.gravatar.com/avatar/a05f11202594100b7c2e576938f4987d?s=150"/>
    </div>
  
  <div class="tb-Author-info">
    <time pubdate datetime="2016-07-18T00:00:00-04:00">
      18 Jul 2016
    </time></br>
    by Kalimar Maia
    <div class="tb-Author-icons">
      
        <span class="tb-Author-icon">
          <a href="http://twitter.com/kalimar"><i class="tb-Icon-twitter"></i></a>
        </span>
      
      
        <span class="tb-Author-icon">
          <a href="https://github.com/kalimar"><i class="tb-Icon-github"></i></a>
        </span>
      
      
    </div>
  </div>
</div>

    </div>

    
  <div class="sb-Wrapper">
    <section id="disqus_thread">
    </section>
  </div>
  <script type="text/javascript">
    var disqus_shortname = 'custominktechnologyblog';
    var disqus_identifier = '/blog/2016/07/18/how-to-add-badges-to-iterm2/';
    var disqus_title = "How to add badges to iterm2";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


    <div class="tb-Footer">
  <div><small>&copy; 2016 CustomInk, LLC. All rights reserved.</small></div>
  <div><small><a href="http://customink.com">CustomInk</a> is a registered trademark of CustomInk LLC. "T-shirts Unite!" and the "Inky" octopus are trademarks of CustomInk, LLC.</small></div>
</div>

    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32456448-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


    <script src="/assets/app-c8c0da21cd353ed58196e02e376670a3.js"></script>
  </body>
</html>
