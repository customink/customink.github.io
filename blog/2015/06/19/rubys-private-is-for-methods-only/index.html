<!DOCTYPE html>
<html>
  <head>
  <title>Ruby's Private is for Methods Only - CustomInk Technology Blog</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="description" content="The other day I saw a pull request, on a Rails project, that declared a private inner class. Having my fair share of experience with Java, I am ver...">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://technology.customink.com/feed.xml" />
  <link rel="stylesheet" href="/assets/app-c8107c6a6d6ccb2825cda0df6e904aa6.css">
  <script type="text/javascript">
  (function(d) {
    var config = {
      kitId: 'tph7yyf',
      scriptTimeout: 3000
    },
    h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
  })(document);
</script>

  
</head>

  <body class="tb-Post">
    <header class="tb-Header">
  <div class="sb-Wrapper">
    <nav class="tb-Header-home">
      <a href="/" class="tb-Header-home-logo"><img src="/assets/CustomInk_Tech_Color-58757c9eae4e383b5761a73d95df2341.png"></a>
    </nav>
    <input type="checkbox" id="tb-Header-toggle" />
    <div class="tb-Header-area">
      <label for="tb-Header-toggle" class="tb-Header-toggle" data-open="Menu" data-close="Close" onclick></label>
      <ul class="tb-Header-menu">
        <li class="tb-Header-menu-item">
        
          <a href="/team" class="tb-Header-menu-link">AUTHORS</a>
        
        </li>
        <li class="tb-Header-menu-item">
          <a href="http://customink.com" class="tb-Header-menu-link">CUSTOMINK.COM</a>
        </li>
      </ul>
    </div>
  </div>
</header>

    <div class="tb-Post-main sb-Wrapper">
      <div class="tb-Post-content">
        <h1>Ruby's Private is for Methods Only</h1>
        <p>The other day I saw a pull request, on a Rails project, that declared a private inner class. Having my fair share of experience with Java, I am very familiar with the construct. Essentially, you declare one class inside of another class and declare it as private. This is often done to clean up your internal data structures and hide the implementation details from others.</p>

<p>I couldn&#39;t recall ever seeing this in Ruby before, so it gave me pause. As we know, in Ruby, &quot;private&quot; isn&#39;t really all that private. It just means that a method cannot be called with an explicit receiver.</p>

<!--more-->
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Tommy</span>
  <span class="k">def</span> <span class="nf">pinball</span>
    <span class="s2">"wizard"</span>
  <span class="k">end</span>

  <span class="kp">private</span>
  <span class="k">def</span> <span class="nf">blind</span>
    <span class="s2">"how do you think he does it?"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="o">&gt;</span><span class="n">tommy</span> <span class="o">=</span> <span class="no">Tommy</span><span class="p">.</span><span class="nf">new</span>
<span class="o">=&gt;</span> <span class="c1">#&lt;Tommy:0x007f8f91074bf8&gt;</span>
<span class="o">&gt;</span> <span class="n">tommy</span><span class="p">.</span><span class="nf">pinball</span>
<span class="o">=&gt;</span> <span class="s2">"wizard"</span>
<span class="o">&gt;</span> <span class="n">tommy</span><span class="p">.</span><span class="nf">blind</span>
<span class="no">NoMethodError</span><span class="p">:</span> <span class="kp">private</span> <span class="nb">method</span> <span class="sb">`blind' called for #&lt;Tommy:0x007f8f91074bf8&gt;
&gt; tommy.send(:blind)
=&gt; "how do you think he does it?"
</span></code></pre></div>
<p>&quot;What does this <i>do</i>?&quot; I thought to myself, looking at the private class declaration. I didn&#39;t know, so I decided to test it out.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Tommy</span>
  <span class="k">def</span> <span class="nf">pinball</span>
    <span class="s2">"wizard"</span>
  <span class="k">end</span>

  <span class="kp">private</span>
  <span class="k">class</span> <span class="nc">Senses</span>
    <span class="k">def</span> <span class="nf">blind</span>
      <span class="s2">"how do you think he does it?"</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="o">&gt;</span> <span class="n">senses</span> <span class="o">=</span> <span class="no">Tommy</span><span class="o">::</span><span class="no">Senses</span><span class="p">.</span><span class="nf">new</span>
<span class="o">=&gt;</span> <span class="c1">#&lt;Tommy::Senses:0x007f8f9211a958&gt;</span>
<span class="o">&gt;</span> <span class="n">senses</span><span class="p">.</span><span class="nf">blind</span>
<span class="o">=&gt;</span> <span class="s2">"how do you think he does it?"</span>
</code></pre></div>
<p>Hmm...that wasn&#39;t exactly what I expected. The concept of a private inner class exists in many languages, so I thought that maybe Ruby wouldn&#39;t let me inherit from Tommy::Senses and override the implementation. It is private, after all.</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">class</span> <span class="nc">Tommy</span>
  <span class="k">def</span> <span class="nf">pinball</span>
    <span class="s2">"wizard"</span>
  <span class="k">end</span>

  <span class="kp">private</span>
  <span class="k">class</span> <span class="nc">Senses</span>
    <span class="k">def</span> <span class="nf">blind</span>
      <span class="s2">"how do you think he does it?"</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">BallyTableKing</span> <span class="o">&lt;</span> <span class="no">Tommy</span><span class="o">::</span><span class="no">Senses</span>
  <span class="k">def</span> <span class="nf">blind</span>
    <span class="s2">"sure plays a mean pinball"</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="o">&gt;</span> <span class="n">king</span> <span class="o">=</span> <span class="no">BallyTableKing</span><span class="p">.</span><span class="nf">new</span>
<span class="o">=&gt;</span> <span class="c1">#&lt;BallyTableKing:0x007f8f920d2ba8&gt;</span>
<span class="o">&gt;</span> <span class="n">king</span><span class="p">.</span><span class="nf">blind</span>
<span class="o">=&gt;</span> <span class="s2">"sure plays a mean pinball"</span>
</code></pre></div>
<p>Again, not at all what I expected. I decided to go to the <a href="http://ruby-doc.org/core-2.0.0/Module.html#method-i-private">Ruby docs</a> to read up on private.</p>

<blockquote>
<p>With no arguments, sets the default visibility for subsequently defined methods to private. With arguments, sets the named methods to have private visibility.</p>
</blockquote>

<p>There are no mention of classes at all, which explains a lot. The private keyword in Ruby only exists to declare methods as private, not classes.</p>

      </div>
      

<div class="tb-Author">
  
    <div class="tb-Author-gravatar">
      <img title="Karle Durante" src="http://www.gravatar.com/avatar/ccaeb0336801e0015145ad901d879377?s=150"/>
    </div>
  
  <div class="tb-Author-info">
    <time pubdate datetime="2015-06-19T00:00:00-04:00">
      19 Jun 2015
    </time></br>
    by Karle Durante
    <div class="tb-Author-icons">
      
        <span class="tb-Author-icon">
          <a href="http://twitter.com/karledurante"><i class="tb-Icon-twitter"></i></a>
        </span>
      
      
        <span class="tb-Author-icon">
          <a href="https://github.com/karledurante"><i class="tb-Icon-github"></i></a>
        </span>
      
      
    </div>
  </div>
</div>

    </div>

    
  <div class="sb-Wrapper">
    <section id="disqus_thread">
    </section>
  </div>
  <script type="text/javascript">
    var disqus_shortname = 'custominktechnologyblog';
    var disqus_identifier = '/blog/2015/06/19/rubys-private-is-for-methods-only';
    var disqus_title = "Ruby's Private is for Methods Only";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>


    <div class="tb-Footer">
  <div><small>&copy; 2015 CustomInk, LLC. All rights reserved.</small></div>
  <div><small><a href="http://customink.com">CustomInk</a> is a registered trademark of CustomInk LLC. "T-shirts Unite!" and the "Inky" octopus are trademarks of CustomInk, LLC.</small></div>
</div>

    
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32456448-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


    <script src="/assets/app-2958951a9a703a8335812d9aa35e8fe2.js"></script>
  </body>
</html>
