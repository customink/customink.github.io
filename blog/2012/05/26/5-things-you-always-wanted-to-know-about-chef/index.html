<!DOCTYPE html>
<html>
  <head>
  <title>5 Things You Always Wanted to Know About Chef - CustomInk Technology Blog</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="description" content="When I first started working with Chef, there were a couple of areas that I knew were going to be really awesome and helpful but I wasn&#39;t sure ...">
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http:///feed.xml" />
  <link rel="stylesheet" href="/assets/app.css">
  <script type="text/javascript">
  (function(d) {
    var config = {
      kitId: 'tph7yyf',
      scriptTimeout: 3000
    },
    h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
  })(document);
</script>

</head>

  <body class="Home">
    <header class="tb-Header">
  <div class="sb-Wrapper">
    <nav class="tb-Header-home">
      <a href="/" class="tb-Header-home-logo"><img src="/assets/CustomInk_Tech_Color.png"></a>
    </nav>
    <input type="checkbox" id="tb-Header-toggle" />
    <div class="tb-Header-area">
      <label for="tb-Header-toggle" class="tb-Header-toggle" data-open="Menu" data-close="Close" onclick></label>
      <ul class="tb-Header-menu">
        <li class="tb-Header-menu-item">
        
          <a href="/team" class="tb-Header-menu-link">TEAM</a>
        
        </li>
        <li class="tb-Header-menu-item">
          <a href="http://customink.com" class="tb-Header-menu-link">CUSTOMINK.COM</a>
        </li>
      </ul>
    </div>
  </div>
</header>

    <div class="main sb-Wrapper">
      <div class="content">
        <h1>5 Things You Always Wanted to Know About Chef</h1>
        <div class="post">
          <p>When I first started working with Chef, there were a couple of areas that I knew were going to be really awesome and helpful but I wasn&#39;t sure how to get started with them.  In this presentation, I&#39;ll provide a quick introduction to five things you&#39;ve always wanted to know about Chef but were afraid to ask.</p>

<p>I gave this presentation at <a href="http://chefconf.opscode.com">#ChefConf 2012</a>.</p>

<p>Level-up your Chef skills by learning about these areas of Chef:</p>

<!--more-->

<ul>
<li><strong>Attribute Precedence</strong> - Role, environment, cookbook, data bag? Which attribute value will be used in my chef run?</li>
<li><strong>Encrypted Databags</strong> - Chef 0.10 brought us encrypted databags. We&#39;ll look at how to create and use databags and how to keep them up-to-date in your repository.</li>
<li><strong>LWRP</strong> - What is a LWRP? How and why do you create one? We&#39;ll look at a couple of sample LWRPs and learn how to build a simple one.</li>
<li><strong>Error Handlers</strong> - Demystify exception and report handlers by writing a simple one and seeing examples of how they work in the wild.</li>
<li><strong>Capistrano and Chef</strong> - Take a quick look at why and how to integrate Chef search into your Capistrano configuration to make deploying your Rails apps even easier.</li>
</ul>

<p>One thing I didn&#39;t mention in the presentation was how to use the data from the encrypted data bag.  I&#39;ve updated the slides to include this info but it doesn&#39;t appear in the video.  In any case, here&#39;s a quick demo of how you might use it:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">creds</span> <span class="o">=</span> <span class="no">Chef</span><span class="o">::</span><span class="no">EncryptedDataBagItem</span><span class="p">.</span><span class="nf">load</span><span class="p">(</span><span class="s2">"db"</span><span class="p">,</span> <span class="s2">"creds"</span><span class="p">)</span>
<span class="n">env_db_creds</span> <span class="o">=</span> <span class="n">db_creds</span><span class="p">[</span><span class="n">node</span><span class="p">[</span><span class="s2">"rails_env"</span><span class="p">]]</span>

<span class="n">template</span> <span class="s2">"</span><span class="si">#{</span><span class="n">app_dir</span><span class="si">}</span><span class="s2">/shared/config/database.yml"</span> <span class="k">do</span>
  <span class="n">source</span> <span class="s2">"database.yml.erb"</span>
  <span class="n">variables</span><span class="p">(</span>
    <span class="ss">:rails_env</span> <span class="o">=&gt;</span> <span class="n">node</span><span class="p">[</span><span class="s2">"rails_env"</span><span class="p">],</span>
    <span class="ss">:username</span> <span class="o">=&gt;</span> <span class="n">env_db_creds</span><span class="p">[</span><span class="s2">"username"</span><span class="p">],</span>
    <span class="ss">:password</span> <span class="o">=&gt;</span> <span class="n">env_db_creds</span><span class="p">[</span><span class="s2">"password"</span><span class="p">]</span>
  <span class="p">)</span>
<span class="k">end</span>
</code></pre></div>
<h3 id="video">Video</h3>

<iframe width="560" height="315" src="http://www.youtube.com/embed/uREL4FFPddo" frameborder="0" allowfullscreen></iframe>

<h3 id="slides">Slides</h3>

<script async class="speakerdeck-embed" data-id="4fb532f2850667001f0008f8" data-ratio="1.2945638432364097" src="//speakerdeck.com/assets/embed.js"></script>

        </div>
      </div>

      <div class="side-bar post-author">

  

  <div class="info">
    <time pubdate datetime="2012-05-26T21:51:00-04:00">
      26 May 2012
    </time></br>
    by Nathen Harvery
  </div>

</div>

      

    </div>
    <div class="footer">
  <div><small>&copy; 2014 CustomInk, LLC. All rights reserved.</small></div>
  <div><small><a href="http://customink.com">CustomInk</a> is a registered trademark of CustomInk LLC. "T-shirts Unite!" and the "Inky" octopus are trademarks of CustomInk, LLC.</small></div>
</div>

    

    <script src="/assets/app.js"></script>
  </body>
</html>
